<!------------------------- Options Start ------------------------->
<input type="hidden" name="attr_new_character_flag" value="1" />
<input type="hidden" name="attr_skill_points_talent_refund" value="0" />

<!-------------------------  Options End  ------------------------->

<div class="sheet-layout">
<!-- Hidden Edit Mode Toggle Controller -->
<input type="hidden" class="sheet-edit-controller" name="attr_edit_mode" value="off" />
<!-- Hidden Edit Mode Toggle Controller -->
	<!-- Top Section -->
	<div class="sheet-top">
			<!-- 2 Cols (50/50): Investigator Info + Characteristics -->
			<div class="sheet-top-2col">
				<div class="sheet-section">
					<h4 class="sheet-section-head" data-i18n="investigatorinfo-u">Ghost Info</h4>
					<div class="sheet-grid-investigatorinfo">
						<div class="sheet-info-label" data-i18n="name-u">Name</div>
						<input class="sheet-attr-input-long" type="text" name="attr_name">
						<div class="sheet-info-label" data-i18n="player-u">Player</div>
						<input class="sheet-attr-input-long" type="text" name="attr_player">
						<div class="sheet-info-label" data-i18n="occupation-u">Occupation</div>
						<input class="sheet-attr-input-long" type="text" name="attr_occupation">
						<div class="sheet-info-label" data-i18n="age-u">Age</div>
						<div class="sheet-grid-age-sex">
							<input class="sheet-attr-input-long" type="text" name="attr_age">
							<div class="sheet-info-label" data-i18n="sex-u">Sex</div>
							<input class="sheet-attr-input-long" type="text" name="attr_sex">
						</div>
						<div class="sheet-info-label" data-i18n="residence-u">Residence</div>
						<input class="sheet-attr-input-long" type="text" name="attr_residence">
						<div class="sheet-info-label" data-i18n="birthplace-u">Birthplace</div>
						<input class="sheet-attr-input-long" type="text" name="attr_birthplace">
						<div class="sheet-info-label" data-i18n="career-u">Career</div>
						<input class="sheet-attr-input-long" type="text" name="attr_career">
						<div class="sheet-info-label" data-i18n="other-u">Other</div>
						<input class="sheet-attr-input-long" type="text" name="attr_other">
					</div>
				</div>
				<div class="sheet-section">
					<h4 class="sheet-section-head" data-i18n="characteristics-u">Characteristics</h4>
					<!-- Row 1: STR / DEX / POW / VITALITY -->
					<div class="sheet-grid-characteristics">
						<!-- STR -->
						<div class="sheet-attr-label" data-i18n="STR-u">STR</div>
						<div class="sheet-str-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_str" type="text" />
							<button class="sheet-str-roll" type="roll" name="roll_str_check" value="&{template:coc-1} {{name=@{str_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{str}]]}} {{hard=[[floor(@{str}/2)]]}} {{extreme=[[floor(@{str}/5)]]}} {{roll1=[[1d100]]}}"></button>
						</div>

						<!-- DEX -->
						<div class="sheet-attr-label" data-i18n="DEX-u">DEX</div>
						<div class="sheet-dex-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_dex" type="text" />
							<button class="sheet-dex-roll" type="roll" name="roll_dex_check" value="&{template:coc-1} {{name=@{dex_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{dex}]]}} {{hard=[[floor(@{dex}/2)]]}} {{extreme=[[floor(@{dex}/5)]]}} {{roll1=[[1d100]]}}"></button>
						</div>

						<!-- POW -->
						<div class="sheet-attr-label" data-i18n="POW-u">POW</div>
						<div class="sheet-pow-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_pow" type="text" />
							<button class="sheet-pow-roll" type="roll" name="roll_pow_check" value="&{template:coc-1} {{name=@{pow_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{pow}]]}} {{hard=[[floor(@{pow}/2)]]}} {{extreme=[[floor(@{pow}/5)]]}} {{roll1=[[1d100]]}}"></button>
						</div>
						<div class="sheet-vertical-divider"></div>

						<!-- VITALITY -->
						<div class="sheet-attr-label" data-i18n="vitality-u">Vitality</div>
						<input class="sheet-attr-input sheet-edit-toggle-field" type="text" name="attr_vitality" placeholder="current" data-i18n-placeholder="current" />
						<div class="sheet-vitality-slash">/</div>
						<input class="sheet-attr-input" type="text" name="attr_vitality_max" placeholder="max" readonly />

						<!-- Row 2: CON / APP / EDU / STRAIN -->
						<!-- CON -->
						<div class="sheet-attr-label" data-i18n="CON-u">CON</div>
						<div class="sheet-con-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_con" type="text" />
							<button class="sheet-con-roll" type="roll" name="roll_con_check" value="&{template:coc-1} {{name=@{con_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{con}]]}} {{hard=[[floor(@{con}/2)]]}} {{extreme=[[floor(@{con}/5)]]}} {{roll1=[[1d100]]}}"></button>
						</div>

						<!-- APP -->
						<div class="sheet-attr-label" data-i18n="APP-u">APP</div>
						<div class="sheet-app-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_app" type="text" />
							<button class="sheet-app-roll" type="roll" name="roll_app_check" value="&{template:coc-1} {{name=@{app_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{app}]]}} {{hard=[[floor(@{app}/2)]]}} {{extreme=[[floor(@{app}/5)]]}} {{roll1=[[1d100]]}}"></button>
						</div>

						<!-- EDU -->
						<div class="sheet-attr-label" data-i18n="EDU-u">EDU</div>
						<div class="sheet-edu-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_edu" type="text" />
							<button class="sheet-edu-roll" type="roll" name="roll_edu_check" value="&{template:coc-1} {{name=@{edu_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{edu}]]}} {{hard=[[floor(@{edu}/2)]]}} {{extreme=[[floor(@{edu}/5)]]}} {{roll1=[[1d100]]}}"></button>
						</div>
						<div class="sheet-vertical-divider"></div>

						<!-- STRAIN -->
 						<div class="sheet-attr-label" data-i18n="strain-u">Strain</div>
						<input class="sheet-attr-input sheet-edit-toggle-field" type="text" name="attr_strain" placeholder="current" data-i18n-placeholder="current" />
						<div class="sheet-strain-slash">/</div>
						<input class="sheet-attr-input" type="text" name="attr_strain_max" placeholder="max" readonly />

						<!-- Row 3: SIZ / INT / MAG / HP -->
						<!-- SIZ -->
 						<div class="sheet-attr-label" data-i18n="SIZ-u">SIZ</div>
						<div class="sheet-siz-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_siz" type="text" />
							<button class="sheet-siz-roll" type="roll" name="roll_siz_check" value="&{template:coc-1} {{name=@{siz_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{siz}]]}} {{hard=[[floor(@{siz}/2)]]}} {{extreme=[[floor(@{siz}/5)]]}} {{roll1=[[1d100]]}}"></button>
						</div>

						<!-- INT -->
						<div class="sheet-attr-label" data-i18n="INT-u">INT</div>
  						<div class="sheet-int-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_int" type="text" />
							<button class="sheet-int-roll" type="roll" name="roll_int_check" value="&{template:coc-1} {{name=@{int_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{int}]]}} {{hard=[[floor(@{int}/2)]]}} {{extreme=[[floor(@{int}/5)]]}} {{roll1=[[1d100]]}}"></button>
 						</div>

 						<!-- MAG -->
						<div class="sheet-attr-label" data-i18n="MAG-u">MAG</div>
						<div class="sheet-mag-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_mag" type="text" />
							<button class="sheet-mag-roll" type="roll" name="roll_mag_check" value="&{template:coc-1} {{name=@{mag_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{mag}]]}} {{hard=[[floor(@{mag}/2)]]}} {{extreme=[[floor(@{mag}/5)]]}} {{roll1=[[1d100]]}}"></button>
						</div>
						<div class="sheet-vertical-divider"></div>

						<!-- HP -->
						<div class="sheet-attr-label" data-i18n="HP-u">Hit Points</div>
						<input class="sheet-attr-input sheet-edit-toggle-field" type="text" name="attr_hp" placeholder="current" data-i18n-placeholder="current" />
						<div class="sheet-hp-slash">/</div>
						<input class="sheet-attr-input" type="text" name="attr_pulphp_max" placeholder="max" readonly />
					</div>
					 <!-- Separator -->
					<div class="sheet-attr-separator"></div>

					<!-- Row 4: BUILD / MOVE / AC / Init / Luck -->
					<div class="sheet-grid-characteristics-lower">
						<div class="sheet-grid-inline">
							<label class="sheet-attr-label" data-i18n="build-u">Build</label>
							<input class="sheet-attr-input" type="text" name="attr_build" readonly />
						</div>
						<div class="sheet-grid-inline sheet-move-wrapper">
							<label class="sheet-attr-label" data-i18n="Move rate-u">Move rate</label>
							<div class="sheet-grid-move">
								<input class="sheet-attr-input sheet-edit-toggle-field" type="text" name="attr_mov" />
								<button class="sheet-move-roll" type="roll" name="roll_mov_check" value="&{template:coc-dice-roll} {{name=Initiative (Chase) - @{name}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1d10 + @{mov} &{tracker}]]}}"></button>
							</div>
						</div>

						<div class="sheet-grid-inline">
							<label class="sheet-attr-label" data-i18n="arcane_capacity-u">Arc. Cap.</label>
							<input class="sheet-attr-input" type="text" name="attr_ac" readonly />
						</div>

						<div class="sheet-vertical-divider"></div>

						<div class="sheet-grid-inline sheet-init-wrapper">
							<label class="sheet-attr-label" data-i18n="initiative-u">Init</label>
							<div class="sheet-grid-initiative">
								<input class="sheet-attr-input sheet-edit-toggle-field" type="text" name="attr_dex" />
								<button class="sheet-init-roll-button" type="roll" name="roll_initdex" value="!initdex" ></button>
							</div>
						</div>

						<div class="sheet-grid-inline sheet-luck-wrapper">
							<label class="sheet-attr-label" data-i18n="luck-u">Luck</label>
							<div class="sheet-grid-luck">
								<input class="sheet-attr-input sheet-edit-toggle-field" type="text" name="attr_luck" />
								<button class="sheet-luck-roll" type="roll" name="roll_luck_check" value="&{template:coc-1} {{name=@{luck_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{luck}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{luck}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{luck}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
							</div>
						</div>
					</div>
                </div>
			</div>

			<!-- 4 Cols (25/25/25/25): Race / Spenders / Damage Bonus / Build -->
			<div class="sheet-top-4col">
				<div class="sheet-section">
					<div class="sheet-race">
						<h4 class="sheet-section-head" data-i18n="race-u">Race</h4>
						<select class="sheet-selection-full" name="attr_showracials">
							<option value="0" selected>-- Choose Race --</option>
							<option value="alteri">Alteri</option>
							<option value="draevi">Draevi</option>
							<option value="feran">Feran</option>
							<option value="human">Human</option>
							<option value="khadra">Khadra</option>
							<option value="kitsu">Kitsu</option>
							<option value="lyranni">Lyranni</option>
							<option value="veyra">Veyra</option>
						</select>
					</div>
				</div>
				<div class="sheet-section">
					<div class="sheet-damage_bonus">
						<h4 class="sheet-section-head" data-i18n="damagebonus-u">Damage Bonus</h4>
						<select class="sheet-select-full" name="attr_damage_bonus">
							<option value="-2">-2</option>
							<option value="-1">-1</option>
							<option value="0" selected data-i18n="None">None</option>
							<option value="1d4">+1d4</option>
							<option value="1d6">+1d6</option>
							<option value="2d6">+2d6</option>
							<option value="3d6">+3d6</option>
							<option value="4d6">+4d6</option>
							<option value="5d6">+5d6</option>
							<option value="6d6">+6d6</option>
							<option value="7d6">+7d6</option>
							<option value="8d6">+8d6</option>
							<option value="9d6">+9d6</option>
							<option value="10d6">+10d6</option>
						</select>
					</div>
				</div>
                <div class="sheet-section">
                    <div class="sheet-spenders">
                        <h4 class="sheet-section-head" data-i18n="spenders-u">Spenders</h4>
                        <div class="sheet-grid-spenders">
                            <div class="sheet-info-label-small" data-i18n="total_attr_points_spent-u">AS</div>
                            <input class="sheet-attr-input-small" type="text" name="attr_total_attr_points_spent" readonly>
                            <div></div>
                            <div class="sheet-info-label-small" data-i18n="total_skill_points_spent-u">SPS</div>
                            <input class="sheet-attr-input-small" type="text" name="attr_total_skill_points_spent" readonly>
                        </div>
                    </div>
                </div>
				<div class="sheet-section">
					<div class="sheet-edit-toggle">
						<h4 class="sheet-section-head" data-i18n="editmode-u">Edit Mode</h4>
						<input type="hidden" class="sheet-edit-controller" name="attr_edit_mode" value="off" />
						<button type="action" name="act_edit_mode">Edit Mode</button>
					</div>
				</div>
			</div>
		</div>

	<!-- Middle Section -->
	<div class="sheet-middle">
		<!-- Combined 3-Column Layout: Dice Rolls (40%), Modifiers (20%), Logo (40%) -->
		<div class="sheet-middle-3col">
			<!-- Dice Rolls (40%) -->
			<div class="sheet-dice">
			<h4 class="sheet-section-head" data-i18n="dicerolls-u">Dice Rolls</h4>
				<div class="sheet-dice-roll-grid">
					<div class="sheet-dice-roll-wrapper"><span>1D3</span><button type="roll" name="roll_1D3" value="&{template:coc-dice-roll} {{name=Rolling 1D3}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D3+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span>1D4</span><button type="roll" name="roll_1D4" value="&{template:coc-dice-roll} {{name=Rolling 1D4}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D4+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span>1D5</span><button type="roll" name="roll_1D5" value="&{template:coc-dice-roll} {{name=Rolling 1D5}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D5+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span>1D6</span><button type="roll" name="roll_1D6" value="&{template:coc-dice-roll} {{name=Rolling 1D6}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D6+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span>1D7</span><button type="roll" name="roll_1D7" value="&{template:coc-dice-roll} {{name=Rolling 1D7}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D7+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span>1D8</span><button type="roll" name="roll_1D8" value="&{template:coc-dice-roll} {{name=Rolling 1D8}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D8+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span>1D10</span><button type="roll" name="roll_1D10" value="&{template:coc-dice-roll} {{name=Rolling 1D10}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D10+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span>1D12</span><button type="roll" name="roll_1D12" value="&{template:coc-dice-roll} {{name=Rolling 1D12}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D12+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span>1D20</span><button type="roll" name="roll_1D20" value="&{template:coc-dice-roll} {{name=Rolling 1D20}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D20+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span data-i18n="body-hit-location">Hit Loc.</span><button type="roll" name="roll_body_hit_loc" value="&{template:coc-body-hit-loc} {{roll1=[[1D20]]}}"></button></div>
					<div class="sheet-dice-custom">
						<input type="text" name="attr_dice_roll" class="dice-roll-input" placeholder="Custom" data-i18n-placeholder="custom-u" />
						<button type="roll" name="roll_custom_roll" value="&{template:coc-dice-roll} {{name=Rolling @{dice_roll}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[@{dice_roll}+@{dice_modifier_checkbox}]]}}"></button>
					</div>
				</div>
			</div>
			<!-- Dice Modifiers (20%) -->

			<div class="sheet-dice_modifiers">
				<div class="sheet-dice-modifier-tabs">
					<h4 class="sheet-section-head" data-i18n="dicemodifiers-u">Dice Modifiers</h4>

					<input type="hidden" name="attr_dice_modifier_checkbox" value="0" />

					<button type="action" name="act_20">+20 target number</button>
					<button type="action" name="act_10">+10 target number</button>
					<button type="action" name="act_-10">-10 target number</button>
					<button type="action" name="act_-20">-20 target number</button>
				</div>
			</div>
			<!-- Logo (40%) -->
			<div class="sheet-logo">
				<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Ghost Logo" style="max-width: 100%; height: 115px;" />
			</div>
		</div>
	</div>

	<!-- Bottom Section -->
	<div class="sheet-bottom">
		<!-- Hidden tab value controller -->
		<input type="hidden" class="sheet-tab-controller" name="attr_selected_tab" value="skills" />
			<!-- Tab Buttons -->
		<div class="sheet-tab-buttons">
			<button type="action" name="act_skills">Skills</button>
<!--    Disabled for now
			<button type="action" name="act_background">Background</button>
-->
			<button type="action" name="act_talents">Talents</button>
			<button type="action" name="act_careers">Careers</button>
			<button type="action" name="act_combat">Combat</button>
			<button type="action" name="act_spells">Spells</button>
			<button type="action" name="act_inventory">Inventory</button>
			<button type="action" name="act_backstory">Backstory</button>
			<button type="action" name="act_npcs">NPCs</button>
			<button type="action" name="act_vehicles">Vehicles</button>
		</div>

		<!-- ------------------- SKILLS -------------------- -->
		<div class="sheet-tab-content sheet-skills">
			<div class="sheet-3colrow">
				<h4 class="section-head" data-i18n="investigatorskills-u">Skills</h4>
				<div class="sheet-skill-columns">
					<div class="sheet-skill-column">
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Combat</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_archery_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_archery_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="archery-u">Archery(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_archery_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_archery_mdr" readonly />
								<button type="roll" name="roll_archery_mdr_check" value="&{template:coc-1} {{name=@{archery_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{archery_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{archery_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{archery_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_dodge_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_dodge_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="dodge-u">Dodge(DEX/2)</span></div>
							<div><input class="skill-input" type="text" name="attr_dodge_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="skill-input" type="text" name="attr_dodge_mdr" readonly />
								<button type="roll" name="roll_dodge_mdr_check" value="&{template:coc-1} {{name=@{dodge_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{dodge_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{dodge_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{dodge_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_gunnery_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_gunnery_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="gunnery-u">Gunnery(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_gunnery_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_gunnery_mdr" readonly />
								<button type="roll" name="roll_gunnery_mdr_check" value="&{template:coc-1} {{name=@{gunnery_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{gunnery_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{gunnery_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{gunnery_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_heavy_weapons_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_heavy_weapons_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="heavy_weapons-u">Heavy Weapons(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_heavy_weapons_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_heavy_weapons_mdr" readonly />
								<button type="roll" name="roll_heavy_weapons_mdr_check" value="&{template:coc-1} {{name=@{heavy_weapons_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{heavy_weapons_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{heavy_weapons_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{heavy_weapons_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_melee_weapons_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_melee_weapons_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="melee_weapons-u">Melee Weapon(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_melee_weapons_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_melee_weapons_mdr" readonly />
								<button type="roll" name="roll_melee_weapons_mdr_check" value="&{template:coc-1} {{name=@{melee_weapons_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{melee_weapons_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{melee_weapons_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{melee_weapons_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_firearms_handgun_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_firearms_handgun_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="firearms(hg)-u">Pistols(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_firearms_handgun_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_firearms_handgun_mdr" readonly />
								<button type="roll" name="roll_firearms_handgun_mdr_check" value="&{template:coc-1} {{name=@{firearms_hg_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{firearms_handgun_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{firearms_handgun_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{firearms_handgun_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_firearms_rifle_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_firearms_rifle_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="firearms_rifle-u">Rifle/Shotgun(25%)</span></div>
							<div><input class="skill-input" type="text" name="attr_firearms_rifle_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_firearms_rifle_mdr" readonly />
								<button type="roll" name="roll_firearms_rifle_mdr_check" value="&{template:coc-1} {{name=@{firearms_rifle_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{firearms_rifle_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{firearms_rifle_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{firearms_rifle_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_firearms_smg_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_firearms_s_m_g_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="firearms_s_m_g-u">Submachine Guns(15%)</span></div>
							<div><input class="skill-input" type="text" name="attr_firearms_smg_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_firearms_smg_mdr" readonly />
								<button type="roll" name="roll_firearms_smg_mdr_check" value="&{template:coc-1} {{name=@{firearms_smg_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{firearms_smg_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{firearms_smg_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{firearms_smg_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_throw_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_throw_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="throw-u">Throw(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_throw_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_throw_mdr" readonly />
								<button type="roll" name="roll_throw_mdr_check" value="&{template:coc-1} {{name=@{throw_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{throw_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{throw_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{throw_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_unarmed_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_unarmed_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="unarmed-u">Unarmed(25%)</span></div>
							<div><input class="skill-input" type="text" name="attr_unarmed_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_unarmed_mdr" readonly />
								<button type="roll" name="roll_unarmed_mdr_check" value="&{template:coc-1} {{name=@{unarmed_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{unarmed_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{unarmed_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{unarmed_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill1_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill1_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill1_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill1_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill1_mdr" readonly />
								<button type="roll" name="roll_otherskill1_mdr_check" value="&{template:coc-1} {{name=@{otherskill1_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill1_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill1_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill1_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
						<div class="sheet-skill-spacer"></div>
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Magic</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_magic_alteration_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_alteration_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_alteration-u">Alteration(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_alteration_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_alteration_mdr" readonly />
								<button type="roll" name="roll_magic_alteration_mdr_check" value="&{template:coc-1} {{name=@{magic_alteration_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_alteration_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_alteration_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_alteration_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_elemental_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_elemental_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_elemental-u">Elemental(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_elemental_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_elemental_mdr" readonly />
								<button type="roll" name="roll_magic_elemental_mdr_check" value="&{template:coc-1} {{name=@{magic_elemental_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_elemental_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_elemental_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_elemental_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_enchantment_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_enchantment_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_enchantment-u">Enchantment(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_enchantment_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_enchantment_mdr" readonly />
								<button type="roll" name="roll_magic_enchantment_mdr_check" value="&{template:coc-1} {{name=@{magic_enchantment_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_enchantment_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_enchantment_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_enchantment_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_illusion_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_illusion_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_illusion-u">Illusion(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_illusion_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_illusion_mdr" readonly />
								<button type="roll" name="roll_magic_illusion_mdr_check" value="&{template:coc-1} {{name=@{magic_illusion_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_illusion_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_illusion_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_illusion_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_necromancy_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_necromancy_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_necromancy-u">Necromancy(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_necromancy_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_necromancy_mdr" readonly />
								<button type="roll" name="roll_magic_necromancy_mdr_check" value="&{template:coc-1} {{name=@{magic_necromancy_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_necromancy_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_necromancy_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_necromancy_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_restoration_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_restoration_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_restoration-u">Restoration(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_restoration_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_restoration_mdr" readonly />
								<button type="roll" name="roll_magic_restoration_mdr_check" value="&{template:coc-1} {{name=@{magic_restoration_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_restoration_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_restoration_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_restoration_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_summoning_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_summoning_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_summoning-u">Summoning(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_summoning_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_summoning_mdr" readonly />
								<button type="roll" name="roll_magic_summoning_mdr_check" value="&{template:coc-1} {{name=@{magic_summoning_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_summoning_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_summoning_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_summoning_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_technomancy_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_technomancy_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_technomancy-u">Technomancy(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_technomancy_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_technomancy_mdr" readonly />
								<button type="roll" name="roll_magic_technomancy_mdr_check" value="&{template:coc-1} {{name=@{magic_technomancy_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_technomancy_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_technomancy_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_technomancy_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_warding_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_warding_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_warding-u">Warding(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_warding_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_warding_mdr" readonly />
								<button type="roll" name="roll_magic_warding_mdr_check" value="&{template:coc-1} {{name=@{magic_warding_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_warding_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_warding_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_warding_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_universal_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_universal_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_universal-u">Universal(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_universal_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_universal_mdr" readonly />
								<button type="roll" name="roll_magic_universal_mdr_check" value="&{template:coc-1} {{name=@{magic_universal_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_universal_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_universal_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_universal_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill2_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill2_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill2_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill2_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill2_mdr" readonly />
								<button type="roll" name="roll_otherskill2_mdr_check" value="&{template:coc-1} {{name=@{otherskill2_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill2_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill2_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill2_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
						<div class="sheet-skill-spacer"></div>
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Language</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_language_own_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_language_own_improved_label" class="sheet-improved-indicator" readonly /><div class="skill-label"><span name="attr_language_own_txt"></span></div></div>
							<div><input class="skill-input" type="text" name="attr_language_own_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_language_own_mdr" readonly />
								<button type="roll" name="roll_language_own_mdr_check" value="&{template:coc-1} {{name=@{language_own_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{language_own_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{language_own_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{language_own_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_language_caltheran_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_language_caltheran_improved_label" class="sheet-improved-indicator" readonly /><div class="skill-label"><span name="attr_language_caltheran_txt"></span></div></div>
							<div><input class="skill-input" type="text" name="attr_language_caltheran_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_language_caltheran_mdr" readonly />
								<button type="roll" name="roll_language_caltheran_mdr_check" value="&{template:coc-1} {{name=@{language_caltheran_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{language_caltheran_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{language_caltheran_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{language_caltheran_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill3_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill3_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill3_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill3_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill3_mdr" readonly />
								<button type="roll" name="roll_otherskill3_mdr_check" value="&{template:coc-1} {{name=@{otherskill3_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill3_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill3_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill3_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
						<div class="sheet-spacer-row"></div>
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Other</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_otherskill10_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill10_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill10_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill10_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="skill-input" type="text" name="attr_otherskill10_mdr" readonly />
								<button type="roll" name="roll_otherskill10_mdr_check" value="&{template:coc-1} {{name=@{otherskill10_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill10_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill10_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill10_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
						<fieldset class="repeating_skillsmdr">
							<div class="sheet-skill-grid">
								<div><input type="checkbox" name="attr_checkbox_mdr" /></div>
								<div class="skill-label"><input class="sheet-skill-name-input" type="text" name="attr_skillname_mdr" /></div>
								<div><input class="skill-input" type="text" name="attr_skill_mdr" /></div>
								<div class="sheet-val-roll-static">
									<input class="skill-input" type="text" name="attr_skill_mdr" readonly />
									<button type="roll" name="roll_skill_mdr_check" value="&{template:coc-1} {{name=@{skillname_mdr} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{skill_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{skill_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{skill_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								</div>
							</div>
						</fieldset>
					</div>
					<div class="sheet-skill-column">
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Physical</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_athletics_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_athletics_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="athletics-u">Athletics(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_athletics_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_athletics_mdr" readonly />
								<button type="roll" name="roll_athletics_mdr_check" value="&{template:coc-1} {{name=@{athletics_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{athletics_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{athletics_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{athletics_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_coordination_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_coordination_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="coordination-u">Coordination(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_coordination_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_coordination_mdr" readonly />
								<button type="roll" name="roll_coordination_mdr_check" value="&{template:coc-1} {{name=@{coordination_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{coordination_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{coordination_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{coordination_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_swim_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_swim_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="swim-u">Swim(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_swim_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_swim_mdr" readonly />
								<button type="roll" name="roll_swim_mdr_check" value="&{template:coc-1} {{name=@{swim_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{swim_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{swim_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{swim_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill4_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill4_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill4_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill4_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill4_mdr" readonly />
								<button type="roll" name="roll_otherskill4_mdr_check" value="&{template:coc-1} {{name=@{otherskill4_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill4_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill4_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill4_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
						<div class="sheet-skill-spacer"></div>
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Pilot</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_drive_auto_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_drive_auto_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="driveauto-u">Drive Auto(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_drive_auto_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_drive_auto_mdr" readonly />
								<button type="roll" name="roll_drive_auto_mdr_check" value="&{template:coc-1} {{name=@{driveauto_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{drive_auto_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{drive_auto_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{drive_auto_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_drone_operation_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_drone_operation_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="drone_operation-u">Drone Operation(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_drone_operation_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_drone_operation_mdr" readonly />
								<button type="roll" name="roll_drone_operation_mdr_check" value="&{template:coc-1} {{name=@{drone_operation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{drone_operation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{drone_operation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{drone_operation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_pilotaircraft_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_pilotaircraft_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="pilotaircraft-u">Pilot Aircraft(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_pilotaircraft_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_pilotaircraft_mdr" readonly />
								<button type="roll" name="roll_pilotaircraft_mdr_check" value="&{template:coc-1} {{name=@{pilotaircraft_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{pilotaircraft_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{pilotaircraft_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{pilotaircraft_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_pilotarc_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_pilotarc_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="pilotarc-u">Pilot Arc(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_pilotarc_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_pilotarc_mdr" readonly />
								<button type="roll" name="roll_pilotarc_mdr_check" value="&{template:coc-1} {{name=@{pilotarc_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{pilotarc_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{pilotarc_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{pilotarc_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_pilotboat_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_pilotboat_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="pilotboat-u">Pilot Boat(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_pilotboat_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_pilotboat_mdr" readonly />
								<button type="roll" name="roll_pilotboat_mdr_check" value="&{template:coc-1} {{name=@{pilotboat_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{pilotboat_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{pilotboat_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{pilotboat_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill5_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill5_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill5_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill5_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill5_mdr" readonly />
								<button type="roll" name="roll_otherskill5_mdr_check" value="&{template:coc-1} {{name=@{otherskill5_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill5_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill5_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill5_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
						<div class="sheet-skill-spacer"></div>
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Science/Knowledge</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_alchemy_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_alchemy_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="alchemy-u">Alchemy(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_alchemy_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_alchemy_mdr" readonly />
								<button type="roll" name="roll_alchemy_mdr_check" value="&{template:coc-1} {{name=@{alchemy_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{alchemy_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{alchemy_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{alchemy_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_anthropology_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_anthropology_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="anthropology-u">Anthropology(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_anthropology_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_anthropology_mdr" readonly />
								<button type="roll" name="roll_anthropology_mdr_check" value="&{template:coc-1} {{name=@{anthropology_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{anthropology_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{anthropology_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{anthropology_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_arcana_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_arcana_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="arcana-u">Arcana(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_arcana_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_arcana_mdr" readonly />
								<button type="roll" name="roll_arcana_mdr_check" value="&{template:coc-1} {{name=@{arcana_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{arcana_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{arcana_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{arcana_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_archaeology_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_archaeology_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="archaeology-u">Archaeology(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_archaeology_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_archaeology_mdr" readonly />
								<button type="roll" name="roll_archaeology_mdr_check" value="&{template:coc-1} {{name=@{archaeology_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{archaeology_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{archaeology_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{archaeology_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_architecture_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_architecture_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="architecture-u">Architecture(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_architecture_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_architecture_mdr" readonly />
								<button type="roll" name="roll_architecture_mdr_check" value="&{template:coc-1} {{name=@{architecture_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{architecture_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{architecture_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{architecture_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_biology_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_biology_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="biology-u">Biology(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_biology_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_biology_mdr" readonly />
								<button type="roll" name="roll_biology_mdr_check" value="&{template:coc-1} {{name=@{biology_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{biology_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{biology_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{biology_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_chemistry_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_chemistry_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="chemistry-u">Chemistry(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_chemistry_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_chemistry_mdr" readonly />
								<button type="roll" name="roll_chemistry_mdr_check" value="&{template:coc-1} {{name=@{chemistry_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{chemistry_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{chemistry_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{chemistry_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_engineering_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_engineering_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="engineering-u">Engineering(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_engineering_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_engineering_mdr" readonly />
								<button type="roll" name="roll_engineering_mdr_check" value="&{template:coc-1} {{name=@{engineering_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{engineering_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{engineering_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{engineering_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_forbidden_lore_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_forbidden_lore_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="forbidden_lore-u">Forbidden Lore(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_forbidden_lore_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_forbidden_lore_mdr" readonly />
								<button type="roll" name="roll_forbidden_lore_mdr_check" value="&{template:coc-1} {{name=@{forbidden_lore_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{forbidden_lore_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{forbidden_lore_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{forbidden_lore_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_history_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_history_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="history-u">History(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_history_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_history_mdr" readonly />
								<button type="roll" name="roll_history_mdr_check" value="&{template:coc-1} {{name=@{history_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{history_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{history_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{history_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_investigation_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_investigation_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="investigation-u">Investigation(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_investigation_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_investigation_mdr" readonly />
								<button type="roll" name="roll_investigation_mdr_check" value="&{template:coc-1} {{name=@{investigation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{investigation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{investigation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{investigation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_law_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_law_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="law-u">Law(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_law_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_law_mdr" readonly />
								<button type="roll" name="roll_law_mdr_check" value="&{template:coc-1} {{name=@{law_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{law_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{law_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{law_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_medicine_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_medicine_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="medicine-u">Medicine(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_medicine_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_medicine_mdr" readonly />
								<button type="roll" name="roll_medicine_mdr_check" value="&{template:coc-1} {{name=@{medicine_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{medicine_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{medicine_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{medicine_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_natural_world_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_natural_world_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="naturalworld-u">Natural World(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_natural_world_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_natural_world_mdr" readonly />
								<button type="roll" name="roll_natural_world_mdr_check" value="&{template:coc-1} {{name=@{naturalworld_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{natural_world_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{natural_world_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{natural_world_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_occult_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_occult_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="occult-u">Occult Lore(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_occult_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_occult_mdr" readonly />
								<button type="roll" name="roll_occult_mdr_check" value="&{template:coc-1} {{name=@{occult_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{occult_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{occult_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{occult_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_physics_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_physics_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="physics-u">Physics(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_physics_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_physics_mdr" readonly />
								<button type="roll" name="roll_physics_mdr_check" value="&{template:coc-1} {{name=@{physics_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{physics_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{physics_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{physics_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_spirit_lore_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_spirit_lore_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="spirit_lore-u">Spirit Lore(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_spirit_lore_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_spirit_lore_mdr" readonly />
								<button type="roll" name="roll_spirit_lore_mdr_check" value="&{template:coc-1} {{name=@{spirit_lore_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{spirit_lore_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{spirit_lore_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{spirit_lore_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_veil_lore_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_veil_lore_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="veil_lore-u">Veil Lore(5%)</span></div>
							<div><input class="skill-input" type="text" name="attr_veil_lore_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_veil_lore_mdr" readonly />
								<button type="roll" name="roll_veil_lore_mdr_check" value="&{template:coc-1} {{name=@{veil_lore_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{veil_lore_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{veil_lore_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{veil_lore_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill6_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill6_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill6_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill6_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill6_mdr" readonly />
								<button type="roll" name="roll_otherskill6_mdr_check" value="&{template:coc-1} {{name=@{otherskill6_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill6_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill6_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill6_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
					</div>
					<div class="sheet-skill-column">
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Social</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_bureaucracy_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_bureaucracy_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="bureaucracy-u">Bureaucracy(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_bureaucracy_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_bureaucracy_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_bureaucracy_mdr_check" value="&{template:coc-1} {{name=@{bureaucracy_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{bureaucracy_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{bureaucracy_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{bureaucracy_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_bureaucracy_mdr_check" value="&{template:coc-penalty} {{name=@{bureaucracy_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{bureaucracy_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{bureaucracy_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{bureaucracy_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_bureaucracy_mdr_check" value="&{template:coc-bonus} {{name=@{bureaucracy_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{bureaucracy_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{bureaucracy_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{bureaucracy_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_chant_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_chant_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="chant-u">Chant(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_chant_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_chant_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_chant_mdr_check" value="&{template:coc-1} {{name=@{chant_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{chant_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{chant_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{chant_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_chant_mdr_check" value="&{template:coc-penalty} {{name=@{chant_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{chant_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{chant_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{chant_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_chant_mdr_check" value="&{template:coc-bonus} {{name=@{chant_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{chant_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{chant_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{chant_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_charm_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_charm_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="charm-u">Charm(15%)</span></div>
							<div><input class="skill-input" type="text" name="attr_charm_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_charm_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_charm_mdr_check" value="&{template:coc-1} {{name=@{charm_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{charm_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{charm_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{charm_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_charm_mdr_check" value="&{template:coc-penalty} {{name=@{charm_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{charm_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{charm_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{charm_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_charm_mdr_check" value="&{template:coc-bonus} {{name=@{charm_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{charm_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{charm_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{charm_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_dance_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_dance_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="dance-u">Dance(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_dance_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_dance_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_dance_mdr_check" value="&{template:coc-1} {{name=@{dance_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{dance_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{dance_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{dance_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_dance_mdr_check" value="&{template:coc-penalty} {{name=@{dance_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{dance_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{dance_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{dance_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_dance_mdr_check" value="&{template:coc-bonus} {{name=@{dance_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{dance_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{dance_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{dance_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_deception_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_deception_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="deception-u">Deception(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_deception_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_deception_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_deception_mdr_check" value="&{template:coc-1} {{name=@{deception_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{deception_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{deception_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{deception_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty name="roll_deception_mdr_check" value="&{template:coc-penalty} {{name=@{deception_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{deception_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{deception_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{deception_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_deception_mdr_check" value="&{template:coc-bonus} {{name=@{deception_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{deception_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{deception_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{deception_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_disguise_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_disguise_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="disguise-u">Disguise(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_disguise_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_disguise_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_disguise_mdr_check" value="&{template:coc-1} {{name=@{disguise_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{disguise_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{disguise_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{disguise_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_disguise_mdr_check" value="&{template:coc-penalty} {{name=@{disguise_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{disguise_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{disguise_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{disguise_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_disguise_mdr_check" value="&{template:coc-bonus} {{name=@{disguise_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{disguise_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{disguise_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{disguise_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_etiquette_high_society_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_etiquette_high_society_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="etiquette_high_society-u">Etiquette(H. Soc.)(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_etiquette_high_society_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_etiquette_high_society_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_etiquette_high_society_mdr_check" value="&{template:coc-1} {{name=@{etiquette_high_society_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_high_society_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_high_society_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_high_society_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_etiquette_high_society_mdr_check" value="&{template:coc-penalty} {{name=@{etiquette_high_society_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_high_society_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_high_society_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_high_society_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_etiquette_high_society_mdr_check" value="&{template:coc-bonus} {{name=@{etiquette_high_society_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_high_society_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_high_society_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_high_society_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_etiquette_lyranni_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_etiquette_lyranni_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="etiquette_lyranni-u">Etiquette(Lyranni)(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_etiquette_lyranni_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_etiquette_lyranni_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_etiquette_lyranni_mdr_check" value="&{template:coc-1} {{name=@{etiquette_lyranni_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_etiquette_lyranni_mdr_check" value="&{template:coc-penalty} {{name=@{etiquette_lyranni_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_etiquette_lyranni_mdr_check" value="&{template:coc-bonus} {{name=@{etiquette_lyranni_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_etiquette_other_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_etiquette_other_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="etiquette_other-u">Etiquette(Other)(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_etiquette_other_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_etiquette_other_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_etiquette_other_mdr_check" value="&{template:coc-1} {{name=@{etiquette_other_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_other_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_other_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_other_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_etiquette_other_mdr_check" value="&{template:coc-penalty} {{name=@{etiquette_other_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_other_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_other_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_other_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_etiquette_other_mdr_check" value="&{template:coc-bonus} {{name=@{etiquette_other_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_other_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_other_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_other_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_forgery_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_forgery_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="forgery-u">Forgery(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_forgery_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_forgery_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_forgery_mdr_check" value="&{template:coc-1} {{name=@{forgery_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{forgery_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{forgery_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{forgery_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_forgery_mdr_check" value="&{template:coc-penalty} {{name=@{forgery_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{forgery_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{forgery_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{forgery_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_forgery_mdr_check" value="&{template:coc-bonus} {{name=@{forgery_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{forgery_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{forgery_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{forgery_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />

							</div>
							<div><input type="checkbox" name="attr_impersonation_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_impersonation_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="impersonation-u">Impersonation(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_impersonation_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_impersonation_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_impersonation_mdr_check" value="&{template:coc-1} {{name=@{impersonation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{impersonation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{impersonation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{impersonation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_impersonation_mdr_check" value="&{template:coc-penalty} {{name=@{impersonation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{impersonation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{impersonation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{impersonation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_impersonation_mdr_check" value="&{template:coc-bonus} {{name=@{impersonation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{impersonation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{impersonation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{impersonation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_insight_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_insight_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="insight-u">Insight(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_insight_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_insight_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_insight_mdr_check" value="&{template:coc-1} {{name=@{insight_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{insight_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{insight_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{insight_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_insight_mdr_check" value="&{template:coc-penalty} {{name=@{insight_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{insight_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{insight_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{insight_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_insight_mdr_check" value="&{template:coc-penalty} {{name=@{insight_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{insight_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{insight_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{insight_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_instrument_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_instrument_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="instrument-u">Instrument(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_instrument_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_instrument_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_instrument_mdr_check" value="&{template:coc-1} {{name=@{instrument_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{instrument_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{instrument_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{instrument_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_instrument_mdr_check" value="&{template:coc-penalty} {{name=@{instrument_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{instrument_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{instrument_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{instrument_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}  {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_instrument_mdr_check" value="&{template:coc-bonus} {{name=@{instrument_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{instrument_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{instrument_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{instrument_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_intimidate_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_intimidate_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="intimidate-u">Intimidate(15%)</span></div>
							<div><input class="skill-input" type="text" name="attr_intimidate_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_intimidate_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_intimidate_mdr_check" value="&{template:coc-1} {{name=@{intimidate_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{intimidate_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{intimidate_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{intimidate_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_intimidate_mdr_check" value="&{template:coc-penalty} {{name=@{intimidate_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{intimidate_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{intimidate_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{intimidate_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_intimidate_mdr_check" value="&{template:coc-bonus} {{name=@{intimidate_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{intimidate_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{intimidate_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{intimidate_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_interrogation_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_interrogation_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="interrogation-u">Interrogation(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_interrogation_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_interrogation_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_interrogation_mdr_check" value="&{template:coc-1} {{name=@{interrogation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{interrogation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{interrogation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{interrogation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_interrogation_mdr_check" value="&{template:coc-penalty} {{name=@{interrogation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{interrogation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{interrogation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{interrogation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_interrogation_mdr_check" value="&{template:coc-bonus} {{name=@{interrogation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{interrogation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{interrogation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{interrogation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_persuade_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_persuade_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="persuade-u">Persuade(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_persuade_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_persuade_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_persuade_mdr_check" value="&{template:coc-1} {{name=@{persuade_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{persuade_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{persuade_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{persuade_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_persuade_mdr_check" value="&{template:coc-penalty} {{name=@{persuade_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{persuade_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{persuade_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{persuade_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_persuade_mdr_check" value="&{template:coc-bonus} {{name=@{persuade_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{persuade_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{persuade_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{persuade_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_singing_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_singing_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="singing-u">Singing(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_singing_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_singing_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_singing_mdr_check" value="&{template:coc-1} {{name=@{singing_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{singing_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{singing_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{singing_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_singing_mdr_check" value="&{template:coc-penalty} {{name=@{singing_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{singing_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{singing_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{singing_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_singing_mdr_check" value="&{template:coc-bonus} {{name=@{singing_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{singing_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{singing_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{singing_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_streetwise_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_streetwise_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="streetwise-u">Streetwise(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_streetwise_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_streetwise_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_streetwise_mdr_check" value="&{template:coc-1} {{name=@{streetwise_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{streetwise_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{streetwise_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{streetwise_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_streetwise_mdr_check" value="&{template:coc-penalty} {{name=@{streetwise_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{streetwise_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{streetwise_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{streetwise_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_streetwise_mdr_check" value="&{template:coc-bonus} {{name=@{streetwise_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{streetwise_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{streetwise_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{streetwise_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill7_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill7_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill7_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill7_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill7_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_otherskill7_mdr_check" value="&{template:coc-1} {{name=@{otherskill7_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill7_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill7_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill7_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_otherskill7_mdr_check" value="&{template:coc-penalty} {{name=@{otherskill7_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill7_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill7_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill7_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_otherskill7_mdr_check" value="&{template:coc-bonus} {{name=@{otherskill7_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill7_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill7_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill7_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
						</div>
						<div class="sheet-skill-spacer"></div>
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Survival</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_animalhandling_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_animalhandling_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="animalhandling-u">Animal Handling(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_animalhandling_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_animalhandling_mdr" readonly />
								<button type="roll" name="roll_animalhandling_mdr_check" value="&{template:coc-1} {{name=@{animalhandling_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{animalhandling_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{animalhandling_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{animalhandling_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_first_aid_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_first_aid_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="firstaid-u">First Aid(30%)</span></div>
							<div><input class="skill-input" type="text" name="attr_first_aid_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_first_aid_mdr" readonly />
								<button type="roll" name="roll_first_aid_mdr_check" value="&{template:coc-1} {{name=@{firstaid_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{first_aid_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{first_aid_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{first_aid_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_listen_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_listen_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="listen-u">Listen(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_listen_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_listen_mdr" readonly />
								<button type="roll" name="roll_listen_mdr_check" value="&{template:coc-1} {{name=@{listen_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{listen_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{listen_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{listen_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_navigate_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_navigate_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="navigate-u">Navigate(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_navigate_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_navigate_mdr" readonly />
								<button type="roll" name="roll_navigate_mdr_check" value="&{template:coc-1} {{name=@{navigate_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{navigate_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{navigate_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{navigate_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_perception_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_perception_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="perception-u">Perception(25%)</span></div>
							<div><input class="skill-input" type="text" name="attr_perception_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_perception_mdr" readonly />
								<button type="roll" name="roll_perception_mdr_check" value="&{template:coc-1} {{name=@{perception_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{perception_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{perception_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{perception_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_sleight_of_hand_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_sleight_of_hand_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="sleightofhand-u">Sleight of Hand(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_sleight_of_hand_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_sleight_of_hand_mdr" readonly />
								<button type="roll" name="roll_sleight_of_hand_mdr_check" value="&{template:coc-1} {{name=@{sleightofhand_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{sleight_of_hand_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{sleight_of_hand_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{sleight_of_hand_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_stealth_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_stealth_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="stealth-u">Stealth(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_stealth_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_stealth_mdr" readonly />
								<button type="roll" name="roll_stealth_mdr_check" value="&{template:coc-1} {{name=@{stealth_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{stealth_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{stealth_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{stealth_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_survival_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_survival_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="survival-u">Survival(Wild)(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_survival_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_survival_mdr" readonly />
								<button type="roll" name="roll_survival_mdr_check" value="&{template:coc-1} {{name=@{survival_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{survival_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{survival_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{survival_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_track_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_track_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="track-u">Track (10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_track_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_track_mdr" readonly />
								<button type="roll" name="roll_track_mdr_check" value="&{template:coc-1} {{name=@{track_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{track_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{track_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{track_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill8_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill8_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill8_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill8_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill8_mdr" readonly />
								<button type="roll" name="roll_otherskill8_mdr_check" value="&{template:coc-1} {{name=@{otherskill8_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill8_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill8_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill8_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
						<div class="sheet-skill-spacer"></div>
							<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Tech/Cyber</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_archanotech_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_archanotech_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="archanotech-u">Archanotech(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_archanotech_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_archanotech_mdr" readonly />
								<button type="roll" name="roll_archanotech_mdr_check" value="&{template:coc-1} {{name=@{archanotech_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{archanotech_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{archanotech_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{archanotech_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_computer_use_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_computer_use_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="computeruse-u">Computer Use(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_computer_use_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_computer_use_mdr" readonly />
								<button type="roll" name="roll_computer_use_mdr_check" value="&{template:coc-1} {{name=@{computeruse_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{computer_use_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{computer_use_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{computer_use_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_cybernetics_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_cybernetics_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="cybernetics-u">Cybernetics(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_cybernetics_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_cybernetics_mdr" readonly />
								<button type="roll" name="roll_cybernetics_mdr_check" value="&{template:coc-1} {{name=@{cybernetics_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{cybernetics_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{cybernetics_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{cybernetics_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_demolitions_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_demolitions_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="demolitions-u">Demolitions(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_demolitions_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_demolitions_mdr" readonly />
								<button type="roll" name="roll_demolitions_mdr_check" value="&{template:coc-1} {{name=@{demolitions_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{demolitions_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{demolitions_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{demolitions_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_electronics_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_electronics_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="electronics-u">Electronics(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_electronics_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_electronics_mdr" readonly />
								<button type="roll" name="roll_electronics_mdr_check" value="&{template:coc-1} {{name=@{electronics_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{electronics_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{electronics_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{electronics_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_mechanics_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_mechanics_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="mechanics-u">Mechanics(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_mechanics_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_mechanics_mdr" readonly />
								<button type="roll" name="roll_mechanics_mdr_check" value="&{template:coc-1} {{name=@{mechanics_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{mechanics_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{mechanics_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{mechanics_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_security_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_security_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="security-u">Security(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_security_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_security_mdr" readonly />
								<button type="roll" name="roll_security_mdr_check" value="&{template:coc-1} {{name=@{security_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{security_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{security_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{security_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_slicing_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_slicing_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="slicing-u">Slicing(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_slicing_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_slicing_mdr" readonly />
								<button type="roll" name="roll_slicing_mdr_check" value="&{template:coc-1} {{name=@{slicing_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{slicing_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{slicing_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{slicing_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill9_mdr_checkbox" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill9_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill9_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill9_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill9_mdr" readonly />
								<button type="roll" name="roll_otherskill9_mdr_check" value="&{template:coc-1} {{name=@{otherskill9_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill9_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill9_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill9_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- ------------------- Backgrounds -------------------- -->
		<!-- Disabled for now -->
			<!-- <div class="sheet-tab-content sheet-background"> -->
		<!-- Use above to re-enable -->
		<div class="sheet-tab-content sheet-background_nope">
			<!-- Controls which racial section is shown -->
			<input type="hidden" name="attr_showracials" class="sheet-tab-controller">
			<h4 class="section-head" data-i18n="backgrounds-u">Backgrounds</h4>
			<!-- Alteri Backgrounds -->
			<div class="sheet-racials1">
				<div class="sheet-section">
					<!-- Alteri Background Tab Controller -->
					<input type="hidden" name="attr_alteri_background_choice" class="sheet-tab-controller">
					<!-- Tab Buttons -->
					<div class="sheet-tab-buttons">
						<button type="action" name="act_break_faced_radical">Break-Faced Radical</button>
						<button type="action" name="act_ghostline_runner">Ghostline Runner</button>
						<button type="action" name="act_legacy_bearer">Legacy-Bearer</button>
						<button type="action" name="act_soft_year_drifter">Soft-Year Drifter</button>
						<button type="action" name="act_veilhaven_attendant">Veilhaven Attendant</button>
					</div>

					<!-- Break-Faced Radical Content -->
					<div class="sheet-bgblock sheet-bg-break_faced_radical">
						<div class="sheet-bgblock-flex">
							<!-- Left column -->
							<div class="sheet-bg-content-left">
								<h3 class="section-head sheet-background-section-head talent-center">Break-Faced Radical</h3>
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_alteri_mdr_checkbox" value="deception">
										</div>
										<div class="col-benefit">Deception +5%</div>
										<div class="col-desc">Gain +5% Deception Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_alteri_deception_bonus_mdr" readonly>
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_alteri_mdr_checkbox" value="persuade">
										</div>
										<div class="col-benefit">Persuade +5%</div>
										<div class="col-desc">Gain +5% Persuade Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_alteri_persuade_bonus_mdr" readonly>
										</div>
									</div>
								</div>
							</div>
							<!-- Right column (Image) -->
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Break-Faced Radical Logo">
							</div>
						</div>
					</div>
				<!-- Ghostline Runner -->
					<div class="sheet-bgblock sheet-bg-ghostline_runner">
						<div class="sheet-bgblock-flex">
							<!-- Left column -->
							<div class="sheet-bg-content-left">
								<h3 class="section-head sheet-background-section-head talent-center">Ghostline Runner</h3>
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_alteri_mdr_checkbox" value="slicing">
										</div>
										<div class="col-benefit">Slicing +5%</div>
										<div class="col-desc">Gain +5% Slicing Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_alteri_slicing_bonus_mdr" readonly>
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_alteri_mdr_checkbox" value="streetwise">
										</div>
										<div class="col-benefit">Streetwise +5%</div>
										<div class="col-desc">Gain +5% Streetwise Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_alteri_streetwise_bonus_mdr" readonly>
										</div>
									</div>
								</div>
							</div>
							<!-- Right column (Image) -->
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Ghostline Runner Logo">
							</div>
	  					</div>
					</div>
					<!-- Legacy-Bearer -->
					<div class="sheet-bgblock sheet-bg-legacy_bearer">
						<div class="sheet-bgblock-flex">
							<!-- Left column -->
							<div class="sheet-bg-content-left">
								<h3 class="section-head sheet-background-section-head talent-center">Legacy-Bearer</h3>
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_alteri_mdr_checkbox" value="history">
										</div>
										<div class="col-benefit">History +5%</div>
										<div class="col-desc">Gain +5% History Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_alteri_history_bonus_mdr" readonly>
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_alteri_mdr_checkbox" value="impersonation">
										</div>
										<div class="col-benefit">Impersonation +5%</div>
										<div class="col-desc">Gain +5% Impersonation Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_alteri_impersonation_bonus_mdr" readonly>
										</div>
									</div>
								</div>
							</div>
							<!-- Right column (Image) -->
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Legacy-Bearer Logo">
							</div>
						</div>
					</div>
					<!-- Soft-Year Drifter -->
					<div class="sheet-bgblock sheet-bg-soft_year_drifter">
						<div class="sheet-bgblock-flex">
							<!-- Left column -->
							<div class="sheet-bg-content-left">
								<h3 class="section-head sheet-background-section-head talent-center">Soft-Year Drifter</h3>
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_alteri_mdr_checkbox" value="insight">
										</div>
										<div class="col-benefit">Insight +5%</div>
										<div class="col-desc">Gain +5% Insight Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_alteri_insight_bonus_mdr" readonly>
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_alteri_mdr_checkbox" value="stealth">
										</div>
										<div class="col-benefit">Stealth +5%</div>
										<div class="col-desc">Gain +5% Stealth Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_alteri_stealth_bonus_mdr" readonly>
										</div>
									</div>
								</div>
							</div>
							<!-- Right column (Image) -->
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Soft-Year Drifter Logo">
							</div>
						</div>
					</div>
					<!-- Veilhaven Attendant -->
					<div class="sheet-bgblock sheet-bg-veilhaven_attendant">
						<div class="sheet-bgblock-flex">
							<!-- Left column -->
							<div class="sheet-bg-content-left">
								<h3 class="section-head sheet-background-section-head talent-center">Veilhaven Attendant</h3>
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_alteri_mdr_checkbox" value="arcana">
										</div>
										<div class="col-benefit">Arcana +5%</div>
										<div class="col-desc">Gain +5% Arcana Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_alteri_arcana_bonus_mdr" readonly>
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_alteri_mdr_checkbox" value="disguise">
										</div>
										<div class="col-benefit">Disguise +5%</div>
										<div class="col-desc">Gain +5% Disguise Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_alteri_disguise_bonus_mdr" readonly>
										</div>
									</div>
								</div>
							</div>
							<!-- Right column (Image) -->
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Veilhaven Attendant Logo">
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- Draevi Backgrounds -->
			<div class="sheet-racials2">
				<div class="sheet-section">
					<!-- Draevi Background Tab Controller -->
					<input type="hidden" name="attr_draevi_background_choice" class="sheet-tab-controller">
					<!-- Tab Buttons -->
					<div class="sheet-tab-buttons">
						<button type="action" name="act_forgeblood_scavenger">Forgeblood Scavenger</button>
						<button type="action" name="act_horn_carved_wanderer">Horn-Carved Wanderer</button>
						<button type="action" name="act_spiritbound_techshaper">Spiritbound Techshaper</button>
						<button type="action" name="act_tradition_keeper">Tradition Keeper</button>
					</div>
					<!-- Forgeblood Scavenger -->
					<div class="sheet-bgblock sheet-bg-forgeblood_scavenger">
						<div class="sheet-bgblock-flex">
							<!-- Left column -->
							<div class="sheet-bg-content-left">
								<h3 class="section-head sheet-background-section-head talent-center">Forgeblood Scavenger</h3>
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_draevi_mdr_checkbox" value="electronics">
										</div>
										<div class="col-benefit">Electronics +5%</div>
										<div class="col-desc">Gain +5% Electronics Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_draevi_electronics_bonus_mdr" readonly>
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_draevi_mdr_checkbox" value="mechanics">
										</div>
										<div class="col-benefit">Mechanics +5%</div>
										<div class="col-desc">Gain +5% Mechanics Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_draevi_mechanics_bonus_mdr" readonly>
										</div>
									</div>
								</div>
							</div>
							<!-- Right column (Image) -->
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Forgeblood Scavenger Logo">
							</div>
						</div>
					</div>
					<!-- Horn-Carved Wanderer -->
					<div class="sheet-bgblock sheet-bg-horn_carved_wanderer">
						<div class="sheet-bgblock-flex">
							<!-- Left column -->
							<div class="sheet-bg-content-left">
								<h3 class="section-head sheet-background-section-head talent-center">Horn-Carved Wanderer</h3>
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_draevi_mdr_checkbox" value="navigate">
										</div>
										<div class="col-benefit">Navigate +5%</div>
										<div class="col-desc">Gain +5% Navigate Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_draevi_navigate_bonus_mdr" readonly>
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_draevi_mdr_checkbox" value="survival">
										</div>
										<div class="col-benefit">Survival +5%</div>
										<div class="col-desc">Gain +5% Survival Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_draevi_survival_bonus_mdr" readonly>
										</div>
									</div>
								</div>
							</div>
							<!-- Right column (Image) -->
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Horn-Carved Wanderer Logo">
							</div>
						</div>
					</div>
					<!-- Spiritbound Techshaper -->
					<div class="sheet-bgblock sheet-bg-spiritbound_techshaper">
						<div class="sheet-bgblock-flex">
							<!-- Left column -->
							<div class="sheet-bg-content-left">
								<h3 class="section-head sheet-background-section-head talent-center">Spiritbound Techshaper</h3>
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
									<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_draevi_mdr_checkbox" value="slicing">
										</div>
										<div class="col-benefit">Slicing +5%</div>
										<div class="col-desc">Gain +5% Slicing Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_draevi_slicing_bonus_mdr" readonly>
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_draevi_mdr_checkbox" value="spirit_lore">
										</div>
										<div class="col-benefit">Spirit Lore +5%</div>
										<div class="col-desc">Gain +5% Spirit Lore Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_draevi_spirit_lore_bonus_mdr" readonly>
										</div>
									</div>
								</div>
							</div>
							<!-- Right column (Image) -->
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Spiritbound Techshaper Logo">
							</div>
						</div>
					</div>
					<!-- Tradition Keeper -->
					<div class="sheet-bgblock sheet-bg-tradition_keeper">
						<div class="sheet-bgblock-flex">
							<!-- Left column -->
							<div class="sheet-bg-content-left">
								<h3 class="section-head sheet-background-section-head talent-center">Tradition Keeper</h3>
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_draevi_mdr_checkbox" value="occult">
										</div>
										<div class="col-benefit">Occult Lore +5%</div>
										<div class="col-desc">Gain +5% Occult Lore Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_draevi_occult_bonus_mdr" readonly>
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_draevi_mdr_checkbox" value="veil_lore">
										</div>
										<div class="col-benefit">Veil Lore +5%</div>
										<div class="col-desc">Gain +5% Veil Lore Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_draevi_veil_lore_bonus_mdr" readonly>
										</div>
									</div>
								</div>
							</div>
							<!-- Right column (Image) -->
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Tradition Keeper Logo">
							</div>
						</div>
					</div>

				</div>
			</div>
			<!--  Feran Background -->
			<div class="sheet-racials3">
				<div class="sheet-section">
					<!-- Feran Background Tab Controller -->
					<input type="hidden" name="attr_feran_background_choice" class="sheet-tab-controller">
				</div>
			</div>
			<!-- Human Background -->
			<div class="sheet-racials4">
				<div class="sheet-section">
					<!-- Human Background Tab Controller -->
					<input type="hidden" name="attr_human_background_choice" class="sheet-tab-controller" />

					<!-- Tab Buttons -->
					<div class="sheet-tab-buttons">
						<button type="action" name="act_ash_war_refugee">Ash War Refugee</button>
						<button type="action" name="act_data_hatched">Data-Hatched</button>
						<button type="action" name="act_enclave_born">Enclave Born</button>
						<button type="action" name="act_gutter_fire_youth">Gutterfire Youth</button>
						<button type="action" name="act_outpost_raised">Outpost Raised</button>
						<button type="action" name="act_scavsteel_whelp">Scavsteel Whelp</button>
					</div>
					<!-- Ash War Refugee -->
					<div class="sheet-bgblock sheet-bg-ashwar">
						<h3 class="section-head sheet-background-section-head talent-center">Ash War Refugee</h3>
						<div class="sheet-bgblock-flex">
							<div class="sheet-bg-content-left">
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_human_mdr_checkbox" value="first_aid">
										</div>
										<div class="col-benefit">First Aid +5%</div>
										<div class="col-desc">Gain +5% First Aid Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_human_first_aid_bonus_mdr" readonly>
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_human_mdr_checkbox" value="insight">
										</div>
										<div class="col-benefit">Insight +5%</div>
										<div class="col-desc">Gain +5% Insight Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_human_insight_bonus_mdr" readonly>
										</div>
									</div>
								</div>
							</div>
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Ash War Refugee Logo" />
							</div>
						</div>
					</div>
					<!-- Data-Hatched -->
					<div class="sheet-bgblock sheet-bg-datahatched">
						<h3 class="section-head sheet-background-section-head talent-center">Data-Hatched</h3>
						<div class="sheet-bgblock-flex">
							<div class="sheet-bg-content-left">
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a"><input type="checkbox" name="attr_human_mdr_checkbox" value="alchemy" /></div>
										<div class="col-benefit">Alchemy +5%</div>
										<div class="col-desc">Gain +5% Alchemy Skill</div>
										<div class="col-val"><input class="skill-input-small" type="text" name="attr_human_alchemy_bonus_mdr" readonly /></div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a"><input type="checkbox" name="attr_human_mdr_checkbox" value="anthropology" /></div>
										<div class="col-benefit">Anthropology +5%</div>
										<div class="col-desc">Gain +5% Anthropology Skill</div>
										<div class="col-val"><input class="skill-input-small" type="text" name="attr_human_anthropology_bonus_mdr" readonly /></div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a"><input type="checkbox" name="attr_human_mdr_checkbox" value="archaeology" /></div>
										<div class="col-benefit">Archaeology +5%</div>
										<div class="col-desc">Gain +5% Archaeology Skill</div>
										<div class="col-val"><input class="skill-input-small" type="text" name="attr_human_archaeology_bonus_mdr" readonly /></div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a"><input type="checkbox" name="attr_human_mdr_checkbox" value="architecture" /></div>
										<div class="col-benefit">Architecture +5%</div>
										<div class="col-desc">Gain +5% Architecture Skill</div>
										<div class="col-val"><input class="skill-input-small" type="text" name="attr_human_architecture_bonus_mdr" readonly /></div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a"><input type="checkbox" name="attr_human_mdr_checkbox" value="biology" /></div>
										<div class="col-benefit">Biology +5%</div>
										<div class="col-desc">Gain +5% Biology Skill</div>
										<div class="col-val"><input class="skill-input-small" type="text" name="attr_human_biology_bonus_mdr" readonly /></div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a"><input type="checkbox" name="attr_human_mdr_checkbox" value="chemistry" /></div>
										<div class="col-benefit">Chemistry +5%</div>
										<div class="col-desc">Gain +5% Chemistry Skill</div>
										<div class="col-val"><input class="skill-input-small" type="text" name="attr_human_chemistry_bonus_mdr" readonly /></div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a"><input type="checkbox" name="attr_human_mdr_checkbox" value="engineering" /></div>
										<div class="col-benefit">Engineering +5%</div>
										<div class="col-desc">Gain +5% Engineering Skill</div>
										<div class="col-val"><input class="skill-input-small" type="text" name="attr_human_engineering_bonus_mdr" readonly /></div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a"><input type="checkbox" name="attr_human_mdr_checkbox" value="medicine" /></div>
										<div class="col-benefit">Medicine +5%</div>
										<div class="col-desc">Gain +5% Medicine Skill</div>
										<div class="col-val"><input class="skill-input-small" type="text" name="attr_human_medicine_bonus_mdr" readonly /></div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a"><input type="checkbox" name="attr_human_mdr_checkbox" value="physics" /></div>
										<div class="col-benefit">Physics +5%</div>
										<div class="col-desc">Gain +5% Physics Skill</div>
										<div class="col-val"><input class="skill-input-small" type="text" name="attr_human_physics_bonus_mdr" readonly /></div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a"><input type="checkbox" name="attr_human_mdr_checkbox" value="slicing" /></div>
										<div class="col-benefit">Slicing +5%</div>
										<div class="col-desc">Gain +5% Slicing Skill</div>
										<div class="col-val"><input class="skill-input-small" type="text" name="attr_human_slicing_bonus_mdr" readonly /></div>
									</div>
								</div>
							</div>
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Data-Hatched Logo" />
							</div>
						</div>
					</div>
					<!-- Enclave Born -->
					<div class="sheet-bgblock sheet-bg-enclave">
						<h3 class="section-head sheet-background-section-head talent-center">Enclave Born</h3>
						<div class="sheet-bgblock-flex">
							<div class="sheet-bg-content-left">
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_human_mdr_checkbox" value="etiquette_high_society" />
										</div>
										<div class="col-benefit">Etiquette(H. Soc.) +5%</div>
										<div class="col-desc">Gain +5% Etiquette (High Society) Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_human_etiquette_high_society_bonus_mdr" readonly />
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_human_mdr_checkbox" value="persuade" />
										</div>
										<div class="col-benefit">Persuade +5%</div>
										<div class="col-desc">Gain +5% Persuade Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_human_persuade_bonus_mdr" readonly />
										</div>
									</div>
								</div>
							</div>
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Enclave Born Logo" />
							</div>
						</div>
					</div>
					<!-- Gutterfire -->
					<div class="sheet-bgblock sheet-bg-gutterfire">
						<h3 class="section-head sheet-background-section-head talent-center">Gutterfire Youth</h3>
						<div class="sheet-bgblock-flex">
							<div class="sheet-bg-content-left">
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_human_mdr_checkbox" value="stealth" />
										</div>
										<div class="col-benefit">Stealth +5%</div>
										<div class="col-desc">Gain +5% Stealth Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_human_stealth_bonus_mdr" readonly />
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_human_mdr_checkbox" value="streetwise" />
										</div>
										<div class="col-benefit">Streetwise +5%</div>
										<div class="col-desc">Gain +5% Streetwise Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_human_streetwise_bonus_mdr" readonly />
										</div>
									</div>
								</div>
							</div>
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Gutterfire Youth Logo" />
							</div>
						</div>
					</div>
					<!-- Outpost Raised -->
					<div class="sheet-bgblock sheet-bg-outpost">
						<h3 class="section-head sheet-background-section-head talent-center">Outpost Raised</h3>
						<div class="sheet-bgblock-flex">
							<div class="sheet-bg-content-left">
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_human_mdr_checkbox" value="survival" />
										</div>
										<div class="col-benefit">Survival +5%</div>
										<div class="col-desc">Gain +5% Survival Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_human_survival_bonus_mdr" readonly />
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_human_mdr_checkbox" value="firearms_rifle" />
										</div>
										<div class="col-benefit">Rifle/Shotgun +5%</div>
										<div class="col-desc">Gain +5% Rifle/Shotgun Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_human_firearms_rifle_bonus_mdr" readonly />
										</div>
									</div>
								</div>
							</div>
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Outpost Raised Logo" />
							</div>
						</div>
					</div>
					<!-- Scavsteel -->
					<div class="sheet-bgblock sheet-bg-scavsteel">
						<h3 class="section-head sheet-background-section-head talent-center">Scavsteel Whelp</h3>
						<div class="sheet-bgblock-flex">
							<div class="sheet-bg-content-left">
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_human_mdr_checkbox" value="electronics" />
										</div>
										<div class="col-benefit">Electronics +5%</div>
										<div class="col-desc">Gain +5% Electronics Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_human_electronics_bonus_mdr" readonly />
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_human_mdr_checkbox" value="mechanics" />
										</div>
										<div class="col-benefit">Mechanics +5%</div>
										<div class="col-desc">Gain +5% Mechanics Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_human_mechanics_bonus_mdr" readonly />
										</div>
									</div>
								</div>
							</div>
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Scavsteel Whelp Logo" />
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- Khadra Background -->
			<div class="sheet-racials5">
				<div class="sheet-section">
					<!-- Khadra Background Tab Controller -->
					<input type="hidden" name="attr_khadra_background_choice" class="sheet-tab-controller">
				</div>
			</div>
			<!-- Kitsu Background -->
			<div class="sheet-racials6">
				<div class="sheet-section">
					<!-- Kitsu Background Tab Controller -->
					<input type="hidden" name="attr_kitsu_background_choice" class="sheet-tab-controller">
					<!-- Placeholder for tab buttons and content -->
				</div>
			</div>
			<!-- Lyranni Background -->
			<div class="sheet-racials7">
				<div class="sheet-section">
					<!-- Lyranni Background Tab Controller -->
					<input type="hidden" name="attr_lyranni_background_choice" class="sheet-tab-controller">
					<!-- Lyranni Background Tab Buttons -->
					<div class="sheet-tab-buttons">
						<button type="action" name="act_aelvareth_devotee">AelVareth Devotee</button>
						<button type="action" name="act_echoborne">Echoborne</button>
						<button type="action" name="act_glide_spire_scion">Glide-Spire Scion</button>
						<button type="action" name="act_whisper_walker">Whisper-Walker</button>
						<button type="action" name="act_zurethkai_flameborn">ZurethKai Flameborn</button>
					</div>
					<!-- AelVareth Devotee -->
					<div class="sheet-bgblock sheet-bg-aelvareth">
						<h3 class="section-head sheet-background-section-head talent-center">AelVareth Devotee</h3>
						<div class="sheet-bgblock-flex">
							<div class="sheet-bg-content-left">
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_lyranni_mdr_checkbox" value="etiquette_lyranni">
										</div>
										<div class="col-benefit">Etiquette (Lyranni) +5%</div>
										<div class="col-desc">Gain +5% Etiquette (Lyranni) Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_lyranni_etiquette_lyranni_bonus_mdr" readonly>
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_lyranni_mdr_checkbox" value="occult">
										</div>
										<div class="col-benefit">Occult Lore +5%</div>
										<div class="col-desc">Gain +5% Occult Lore Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_lyranni_occult_bonus_mdr" readonly>
										</div>
									</div>
								</div>
							</div>
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="AelVareth Devotee Logo" />
							</div>
						</div>
					</div>
					<!-- Echoborne -->
					<div class="sheet-bgblock sheet-bg-echoborne">
						<h3 class="section-head sheet-background-section-head talent-center">Echoborne</h3>
						<div class="sheet-bgblock-flex">
							<div class="sheet-bg-content-left">
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_lyranni_mdr_checkbox" value="arcana">
										</div>
										<div class="col-benefit">Arcana +5%</div>
										<div class="col-desc">Gain +5% Arcana Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_lyranni_arcana_bonus_mdr" readonly>
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_lyranni_mdr_checkbox" value="etiquette_lyranni">
										</div>
										<div class="col-benefit">Etiquette (Lyranni) +5%</div>
										<div class="col-desc">Gain +5% Etiquette (Lyranni) Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_lyranni_etiquette_lyranni_bonus_mdr" readonly>
										</div>
									</div>
								</div>
							</div>
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Echoborne Logo" />
							</div>
						</div>
					</div>
					<!-- Glide-Spire Scion -->
					<div class="sheet-bgblock sheet-bg-glide">
						<h3 class="section-head sheet-background-section-head talent-center">Glide-Spire Scion</h3>
						<div class="sheet-bgblock-flex">
							<div class="sheet-bg-content-left">
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_lyranni_mdr_checkbox" value="persuade">
										</div>
										<div class="col-benefit">Persuade +5%</div>
										<div class="col-desc">Gain +5% Persuade Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_lyranni_persuade_bonus_mdr" readonly>
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_lyranni_mdr_checkbox" value="streetwise">
										</div>
										<div class="col-benefit">Streetwise +5%</div>
										<div class="col-desc">Gain +5% Streetwise Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_lyranni_streetwise_bonus_mdr" readonly>
										</div>
									</div>
								</div>
							</div>
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Glide-Spire Scion Logo" />
							</div>
						</div>
					</div>
					<!-- Whisper-Walker -->
					<div class="sheet-bgblock sheet-bg-whisper">
						<h3 class="section-head sheet-background-section-head talent-center">Whisper-Walker</h3>
						<div class="sheet-bgblock-flex">
							<div class="sheet-bg-content-left">
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_lyranni_mdr_checkbox" value="occult">
										</div>
										<div class="col-benefit">Occult Lore +5%</div>
										<div class="col-desc">Gain +5% Occult Lore Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_lyranni_occult_bonus_mdr" readonly>
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_lyranni_mdr_checkbox" value="perception">
										</div>
										<div class="col-benefit">Perception +5%</div>
										<div class="col-desc">Gain +5% Perception Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_lyranni_perception_bonus_mdr" readonly>
										</div>
									</div>
								</div>
							</div>
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="Whisper-Walker Logo" />
							</div>
						</div>
					</div>
					<!-- ZurethKai Flameborn -->
					<div class="sheet-bgblock sheet-bg-zureth">
						<h3 class="section-head sheet-background-section-head talent-center">ZurethKai Flameborn</h3>
						<div class="sheet-bgblock-flex">
							<div class="sheet-bg-content-left">
								<div class="sheet-talent-grid">
									<div class="sheet-talent-header-row">
										<div class="col-a">A</div>
										<div class="col-benefit">Benefit</div>
										<div class="col-desc">Description</div>
										<div class="col-val">Val</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_lyranni_mdr_checkbox" value="magic_technomancy">
										</div>
										<div class="col-benefit">Technomancy +5%</div>
										<div class="col-desc">Gain +5% Technomancy Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_lyranni_magic_technomancy_bonus_mdr" readonly>
										</div>
									</div>
									<div class="sheet-talent-row">
										<div class="col-a">
											<input type="checkbox" name="attr_lyranni_mdr_checkbox" value="slicing">
										</div>
										<div class="col-benefit">Slicing +5%</div>
										<div class="col-desc">Gain +5% Slicing Skill</div>
										<div class="col-val">
											<input class="skill-input-small" type="text" name="attr_lyranni_slicing_bonus_mdr" readonly>
										</div>
									</div>
								</div>
							</div>
							<div class="sheet-bg-content-right">
								<img src="https://raw.githubusercontent.com/Tetsemi/Ghost/refs/heads/main/Ghost_Logo.png" alt="ZurethKai Flameborn Logo" />
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- Veyra Background -->
			<div class="sheet-racials8">
				<div class="sheet-section">
					<!-- Veyra Background Tab Controller -->
					<input type="hidden" name="attr_veyra_background_choice" class="sheet-tab-controller">
				</div>
			</div>
		</div>

		<!-- ------------------- Talents  -------------------- -->
		<div class="sheet-tab-content sheet-talents">
			<input type="hidden" name="attr_showracials" class="sheet-tab-controller">
			<h4 class="section-head" data-i18n="talents-u">Talents</h4>

			<div class="sheet-section">

				<div class="sheet-xp-tracker">
					<div class="sheet-xp-row">
						<label>Total XP (Talent)</label>
						<input type="number" name="attr_xp_pool_total_talent" class="sheet-xp-field" />
					</div>
					<div class="sheet-xp-row">
						<label>Spent XP (Talent)</label>
						<input type="text" name="attr_xp_spent_talent" class="sheet-xp-field sheet-readonly" readonly />
					</div>
					<div class="sheet-xp-row">
						<label>Remaining XP (Talent)</label>
						<input type="text" name="attr_xp_remaining_talent" class="sheet-xp-field sheet-readonly" readonly />
					</div>
				</div>

				<div class="sheet-talent-summary">
					<h3 class="sheet-talent-tier-header">Chosen Talents Summary</h3>
					<span name="attr_talent_summary"></span>
				</div>
			</div>

			<!-- Alteri Talents -->
			<div class="sheet-racials1">

				<div class="sheet-talent-tier" data-tier="1">
					<h3 class="sheet-talent-tier-header">Tier 1 Talents</h3>

					<!-- Second Skin -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_second_skin_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_second_skin" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_second_skin_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_second_skin_description"></span></span>
					</div>

					<!-- Reflexive Shift -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_reflexive_shift_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_reflexive_shift" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_reflexive_shift_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_reflexive_shift_description"></span></span>
					</div>

					<!-- Echoed Voice -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_echoed_voice_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_echoed_voice" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_echoed_voice_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_echoed_voice_description"></span></span>
					</div>

					<!-- Maskwrights Grace -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_show_maskwrights_grace_bonus" value="0" />
						<input type="hidden" name="attr_alteri_maskwrights_grace_lockflag" value="0" />
						<input type="hidden" name="attr_alteri_maskwrights_grace_lockflag_skill" value="0" />

						<input type="checkbox" name="attr_alteri_maskwrights_grace" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_maskwrights_grace_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_maskwrights_grace_description"></span></span>

						<div class="sheet-skill-choice-placeholder">
							<div class="sheet-skill-choice-options" name="attr_maskwrights_grace_choices">
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_maskwrights_grace_mdr_checkbox" value="talent_disguise" />
									<span>Disguise +10%</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_maskwrights_grace_mdr_checkbox" value="talent_impersonation" />
									<span>Impersonation +10%</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_maskwrights_grace_mdr_checkbox" value="talent_insight" />
									<span>Insight +10%</span>
								</label>
							</div>
						</div>
					</div>

					<!-- Social Chameleon -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_social_chameleon_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_social_chameleon" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_social_chameleon_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_social_chameleon_description"></span></span>
					</div>

					<!-- Ghost Protocol -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_ghost_protocol_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_ghost_protocol" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_ghost_protocol_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_ghost_protocol_description"></span></span>
					</div>

					<!-- Talent: Shaped for Subtlety -->
					<div class="sheet-talent-row">
						<!-- Control Flags -->
						<input type="hidden" name="attr_show_shaped_for_subtlety_bonus" value="0" />
						<input type="hidden" name="attr_alteri_shaped_for_subtlety_lockflag" value="0" />
						<input type="hidden" name="attr_alteri_shaped_for_subtlety_lockflag_skill" value="0" />

						<!-- Main Talent Checkbox -->
						<input type="checkbox" name="attr_alteri_shaped_for_subtlety" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label">
							<span name="attr_alteri_shaped_for_subtlety_label"></span>
						</label>
						<span class="sheet-talent-description">
							<span name="attr_alteri_shaped_for_subtlety_description"></span>
						</span>

						<!-- Skill Selection Grid -->
						<div class="sheet-skill-choice-placeholder">
							<div class="sheet-skill-choice-options" name="attr_shaped_for_subtlety_choices">
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_shaped_for_subtlety_mdr_checkbox" value="talent_insight" />
									<span>Insight +10%</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_shaped_for_subtlety_mdr_checkbox" value="talent_slicing" />
									<span>Slicing +10%</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_shaped_for_subtlety_mdr_checkbox" value="talent_stealth" />
									<span>Stealth +10%</span>
								</label>
							</div>
						</div>
					</div>

					<!-- Whisper-Touched -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_whisper_touched_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_whisper_touched" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_whisper_touched_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_whisper_touched_description"></span></span>
					</div>

					<!-- Grace of the Many -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_grace_of_the_many_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_grace_of_the_many" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_grace_of_the_many_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_grace_of_the_many_description"></span></span>
					</div>
				</div>

				<div class="sheet-talent-tier" data-tier="2">
					<h3 class="sheet-talent-tier-header">Tier 2 Talents</h3>

					<!-- Facial Recalibration (depends on echoed_voice or second_skin) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_facial_recalibration_enabled" value="0" />
						<input type="hidden" name="attr_alteri_facial_recalibration_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_facial_recalibration" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_facial_recalibration_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_facial_recalibration_description"></span></span>
					</div>

					<!-- Adaptive Memory (depends on social_chameleon or maskwrights_grace) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_adaptive_memory_enabled" value="0" />
						<input type="hidden" name="attr_alteri_adaptive_memory_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_adaptive_memory" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_adaptive_memory_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_adaptive_memory_description"></span></span>
					</div>

					<!-- Shift Reflex (depends on reflexive_shift) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_shift_reflex_enabled" value="0" />
						<input type="hidden" name="attr_alteri_shift_reflex_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_shift_reflex" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_shift_reflex_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_shift_reflex_description"></span></span>
					</div>

					<!-- Talent: Deep Mask Integration -->
					<div class="sheet-talent-row">
						<!-- Control Flags -->
						<input type="hidden" name="attr_alteri_deep_mask_integration_enabled" value="0" />
						<input type="hidden" name="attr_show_deep_mask_integration_bonus" value="0" />
						<input type="hidden" name="attr_alteri_deep_mask_integration_lockflag" value="0" />
						<input type="hidden" name="attr_alteri_deep_mask_integration_lockflag_skill" value="0" />

						<!-- Main Talent Checkbox -->
						<input type="checkbox" name="attr_alteri_deep_mask_integration" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label">
							<span name="attr_alteri_deep_mask_integration_label"></span>
						</label>
						<span class="sheet-talent-description">
							<span name="attr_alteri_deep_mask_integration_description"></span>
						</span>

						<!-- Skill Selection Grid -->
						<div class="sheet-skill-choice-placeholder">
							<div class="sheet-skill-choice-options" name="attr_deep_mask_integration_choices">
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_deep_mask_integration_mdr_checkbox" value="talent_disguise" />
									<span>Disguise +10%</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_deep_mask_integration_mdr_checkbox" value="talent_insight" />
									<span>Insight +10%</span>
								</label>
							</div>
						</div>
					</div>

					<!-- Ghost Signature (depends on ghost_protocol) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_ghost_signature_enabled" value="0" />
						<input type="hidden" name="attr_alteri_ghost_signature_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_ghost_signature" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_ghost_signature_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_ghost_signature_description"></span></span>
					</div>

					<!-- Mirror Weave (depends on whisper_touched) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_mirror_weave_enabled" value="0" />
						<input type="hidden" name="attr_alteri_mirror_weave_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_mirror_weave" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_mirror_weave_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_mirror_weave_description"></span></span>
					</div>

					<!-- Persona Anchor (depends on grace_of_the_many) -->
					<div class="sheet-talent-row">
						<!-- Control Flags -->
						<input type="hidden" name="attr_alteri_persona_anchor_enabled" value="0" />
						<input type="hidden" name="attr_show_persona_anchor_bonus" value="0" />
						<input type="hidden" name="attr_alteri_persona_anchor_lockflag" value="0" />
						<input type="hidden" name="attr_alteri_persona_anchor_lockflag_skill" value="0" />

						<!-- Main Talent Checkbox -->
						<input type="checkbox" name="attr_alteri_persona_anchor" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label">
							<span name="attr_alteri_persona_anchor_label"></span>
						</label>
						<span class="sheet-talent-description">
							<span name="attr_alteri_persona_anchor_description"></span>
						</span>
							<!-- Skill Selection Grid -->
						<div class="sheet-skill-choice-placeholder">
							<div class="sheet-skill-choice-options" name="attr_persona_anchor_choices">
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_persona_anchor_mdr_checkbox" value="talent_arcana" />
									<span>Arcana +10%</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_persona_anchor_mdr_checkbox" value="talent_impersonation" />
									<span>Impersonation +10%</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_persona_anchor_mdr_checkbox" value="talent_slicing" />
									<span>Slicing +10%</span>
								</label>
							</div>
						</div>
					</div>

					<!-- Veil Echo Memory (depends on whisper_touched or ghost_protocol) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_veil_echo_memory_enabled" value="0" />
						<input type="hidden" name="attr_alteri_veil_echo_memory_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_veil_echo_memory" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_veil_echo_memory_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_veil_echo_memory_description"></span></span>
					</div>
						<!-- Silent Archive (depends on deep_mask_integration) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_silent_archive_enabled" value="0" />
						<input type="hidden" name="attr_alteri_silent_archive_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_silent_archive" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_silent_archive_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_silent_archive_description"></span></span>
					</div>
				</div>

				<div class="sheet-talent-tier" data-tier="3">
					<h3 class="sheet-talent-tier-header">Tier 3 Talents</h3>

					<!-- Perfect Mimicry (depends on facial_recalibration or echoed_voice) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_perfect_mimicry_enabled" value="0" />
						<input type="hidden" name="attr_alteri_perfect_mimicry_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_perfect_mimicry" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_perfect_mimicry_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_perfect_mimicry_description"></span></span>
					</div>

					<!-- Biometric Phantom (depends on ghost_signature) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_biometric_phantom_enabled" value="0" />
						<input type="hidden" name="attr_alteri_biometric_phantom_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_biometric_phantom" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_biometric_phantom_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_biometric_phantom_description"></span></span>
					</div>

					<!-- Memory Graft (depends on deep_mask_integration) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_memory_graft_enabled" value="0" />
						<input type="hidden" name="attr_alteri_memory_graft_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_memory_graft" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_memory_graft_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_memory_graft_description"></span></span>
					</div>

					<!-- Veil-Shaped Will (depends on mirror_weave or whisper_touched) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_veil_shaped_will_enabled" value="0" />
						<input type="hidden" name="attr_alteri_veil_shaped_will_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_veil_shaped_will" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_veil_shaped_will_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_veil_shaped_will_description"></span></span>
					</div>

					<!-- Social Echo (depends on social_chameleon or adaptive_memory) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_social_echo_enabled" value="0" />
						<input type="hidden" name="attr_alteri_social_echo_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_social_echo" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_social_echo_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_social_echo_description"></span></span>
					</div>

					<!-- Identity Cascade (depends on deep_mask_integration) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_identity_cascade_enabled" value="0" />
						<input type="hidden" name="attr_alteri_identity_cascade_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_identity_cascade" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_identity_cascade_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_identity_cascade_description"></span></span>
					</div>
				</div>

				<div class="sheet-talent-tier" data-tier="4">
					<h3 class="sheet-talent-tier-header">Tier 4 Talents (Capstone)</h3>

					<!-- Immaculate Impersonation (depends on perfect_mimicry or biometric_phantom) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_immaculate_impersonation_enabled" value="0" />
						<input type="hidden" name="attr_alteri_immaculate_impersonation_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_immaculate_impersonation" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_immaculate_impersonation_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_immaculate_impersonation_description"></span></span>
					</div>

					<!-- Living Mask Archive (depends on memory_graft or identity_cascade) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_living_mask_archive_enabled" value="0" />
						<input type="hidden" name="attr_alteri_living_mask_archive_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_living_mask_archive" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_living_mask_archive_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_living_mask_archive_description"></span></span>
					</div>

					<!-- Veil-Mirroring Ritual (depends on veil_shaped_will) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_veil_mirroring_ritual_enabled" value="0" />
						<input type="hidden" name="attr_alteri_veil_mirroring_ritual_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_veil_mirroring_ritual" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_veil_mirroring_ritual_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_veil_mirroring_ritual_description"></span></span>
					</div>

					<!-- Author of the Lie (depends on social_echo or deep_mask_integration) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_author_of_the_lie_enabled" value="0" />
						<input type="hidden" name="attr_alteri_author_of_the_lie_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_author_of_the_lie" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_author_of_the_lie_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_author_of_the_lie_description"></span></span>
					</div>
				</div>

			</div>
			<!-- Draevi Talents -->
			<div class="sheet-racials2">

				<div class="sheet-talent-tier" data-tier="1">
					<h3 class="sheet-talent-tier-header">Tier 1 Talents</h3>

					<!-- Tier 1 Talents  10 XP for Draevi -->
                    <!-- Talent: Iron Stomach -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_draevi_iron_stomach_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_iron_stomach" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_iron_stomach_label">Iron Stomach</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_iron_stomach_description">
                                Gain a bonus die on Constitution rolls to resist poison, spoiled food, or ingested toxins. You can consume nearly anything without penalty.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Clan-Blooded -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_show_clan_blooded_bonus" value="0" />
                        <input type="hidden" name="attr_draevi_clan_blooded_lockflag" value="0" />
                        <input type="hidden" name="attr_draevi_clan_blooded_lockflag_skill" value="0" />
                        <input type="checkbox" name="attr_draevi_clan_blooded" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_clan_blooded_label">Clan-Blooded</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_clan_blooded_description">
                                Choose one: gain +10% to Intimidate, Survival, or Track. This reflects your upbringing within a strong clan tradition. This choice is permanent and may only be taken once.
                            </span>
                        </span>
                        <div class="sheet-skill-choice-placeholder">
                            <div class="sheet-skill-choice-options" name="attr_clan_blooded_choices">
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_draevi_clan_blooded_mdr_checkbox" value="talent_intimidate" />
                                    <span>Intimidate +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_draevi_clan_blooded_mdr_checkbox" value="talent_survival" />
                                    <span>Survival +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_draevi_clan_blooded_mdr_checkbox" value="talent_track" />
                                    <span>Track +10%</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Talent: Urban Climber -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_draevi_urban_climber_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_urban_climber" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_urban_climber_label">Urban Climber</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_urban_climber_description">
                                Once per session, gain a bonus die to any Athletics or Coordination roll made while navigating vertical, unstable, or cramped environments.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Scavengers Edge -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_show_scavengers_edge_bonus" value="0" />
                        <input type="hidden" name="attr_draevi_scavengers_edge_lockflag" value="0" />
                        <input type="hidden" name="attr_draevi_scavengers_edge_lockflag_skill" value="0" />
                        <input type="checkbox" name="attr_draevi_scavengers_edge" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_scavengers_edge_label">Scavengers Edge</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_scavengers_edge_description">
                                Choose one: gain +10% to Mechanics, Electronics, or Streetwise. This reflects your clans practical knowledge of scavenging and repair. This choice is permanent and may only be taken once.
                            </span>
                        </span>
                        <div class="sheet-skill-choice-placeholder">
                            <div class="sheet-skill-choice-options" name="attr_scavengers_edge_choices">
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_draevi_scavengers_edge_mdr_checkbox" value="talent_mechanics" />
                                    <span>Mechanics +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_draevi_scavengers_edge_mdr_checkbox" value="talent_electronics" />
                                    <span>Electronics +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_draevi_scavengers_edge_mdr_checkbox" value="talent_streetwise" />
                                    <span>Streetwise +10%</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Talent: Spirits-in-Stone -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_draevi_spirits_in_stone_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_spirits_in_stone" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_spirits_in_stone_label">Spirits-in-Stone</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_spirits_in_stone_description">
                                Once per session, gain a bonus die on a Spirit Lore roll related to ancestor rites, ruins, or natural spirit dwellings.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Trailborn Reflexes -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_draevi_trailborn_reflexes_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_trailborn_reflexes" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_trailborn_reflexes_label">Trailborn Reflexes</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_trailborn_reflexes_description">
                                Once per scene, gain a bonus die to any Dodge roll.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Gutter-Stalker -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_draevi_gutter_stalker_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_gutter_stalker" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_gutter_stalker_label">Gutter-Stalker</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_gutter_stalker_description">
                                Once per session, gain a bonus die on a Stealth roll made in an urban or tight, vertical space (vents, scaffolding, alleys).
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Bone-Sung Memory -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_draevi_bone_sung_memory_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_bone_sung_memory" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_bone_sung_memory_label">Bone-Sung Memory</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_bone_sung_memory_description">
                                Once per session, gain a bonus die when attempting to recall a location, creature, or spiritual phenomenon youve personally witnessed before.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Silent Step, Sharp Ear -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_draevi_silent_step_sharp_ear_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_silent_step_sharp_ear" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_silent_step_sharp_ear_label">Silent Step, Sharp Ear</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_silent_step_sharp_ear_description">
                                Gain a bonus die on Stealth checks when moving through natural terrain. Optional: spend 1 Strain to also gain a bonus die on the next Listen or Perception check in the same scene.
                            </span>
                        </span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="2">
					<h3 class="sheet-talent-tier-header">Tier 2 Talents</h3>
					<!-- Tier 2 Talents  20 XP for Draevi -->

                    <!-- Talent: Hardened Trailwalker -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_hardened_trailwalker_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_hardened_trailwalker_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_hardened_trailwalker" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_hardened_trailwalker_label">Hardened Trailwalker</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_hardened_trailwalker_description">
                                Once per session, gain a bonus die to a Survival check. If that check fails, suffer only half the usual Strain from failure.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Urban Tracker -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_urban_tracker_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_urban_tracker_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_urban_tracker" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_urban_tracker_label">Urban Tracker</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_urban_tracker_description">
                                You may reroll one failed Streetwise, Stealth, or Track check made while tracking in an urban environment.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Instinctive Counter -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_instinctive_counter_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_instinctive_counter_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_instinctive_counter" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_instinctive_counter_label">Instinctive Counter</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_instinctive_counter_description">
                                Once per scene, gain a bonus die to either a Dodge, Unarmed Combat, or Melee roll when reacting to an attack.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Veins of Stone -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_veins_of_stone_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_veins_of_stone_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_veins_of_stone" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_veins_of_stone_label">Veins of Stone</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_veins_of_stone_description">
                                Once per session, automatically succeed on a failed Constitution roll against fatigue, poison, or environmental strain.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Echo-Binders Rite -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_echo_binders_rite_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_echo_binders_rite_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_echo_binders_rite" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_echo_binders_rite_label">Echo-Binders Rite</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_echo_binders_rite_description">
                                Once per session, gain a bonus die to a Magic (Summoning) or Spirit Lore roll to commune with a spirit or bind an ancestral echo.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Scent the Shift -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_scent_the_shift_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_scent_the_shift_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_scent_the_shift" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_scent_the_shift_label">Scent the Shift</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_scent_the_shift_description">
                                Once per session, detect a hidden threat, spirit, or Veil anomaly in your immediate area. Grants a bonus die to the next Perception or Spirit Lore check made to investigate it.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Tales Etched in Horn -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_tales_etched_in_horn_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_tales_etched_in_horn_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_tales_etched_in_horn" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_tales_etched_in_horn_label">Tales Etched in Horn</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_tales_etched_in_horn_description">
                                Once per session, when recalling a story, rite, or ancestral lesson, gain a bonus die on any Occult Lore, Spirit Lore, or Etiquette (Clan) check related to Draevi culture or spirits.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Root-Stance Tenacity -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_root_stance_tenacity_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_root_stance_tenacity_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_root_stance_tenacity" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_root_stance_tenacity_label">Root-Stance Tenacity</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_root_stance_tenacity_description">
                                Once per session, when you fail a Strength or Constitution roll to resist knockback, fatigue, or being overpowered, you may reroll with a bonus die. Optional: spend 2 Strain to remain standing even if the second roll fails.
                            </span>
                        </span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="3">
					<h3 class="sheet-talent-tier-header">Tier 3 Talents</h3>

					<!-- Tier 3 Talents  30 XP for Draevi -->

                    <!-- Talent: Spirit-Touched Mastery -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_spirit_touched_mastery_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_spirit_touched_mastery_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_spirit_touched_mastery" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_spirit_touched_mastery_label">Spirit-Touched Mastery</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_spirit_touched_mastery_description">
                                Once per session, reroll a failed Spirit Lore or Magic (Summoning) roll. If successful, reduce the spells Strain cost by one die step.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Spiritual Vanguard -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_spiritual_vanguard_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_spiritual_vanguard_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_spiritual_vanguard" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_spiritual_vanguard_label">Spiritual Vanguard</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_spiritual_vanguard_description">
                                Once per session, gain a bonus die when casting a Counterspell on behalf of an ally. Also gain a bonus die when banishing a hostile spirit.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Emberlash Retaliation -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_emberlash_retaliation_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_emberlash_retaliation_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_emberlash_retaliation" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_emberlash_retaliation_label">Emberlash Retaliation</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_emberlash_retaliation_description">
                                Once per session, when struck by a melee or ranged attack, make a counterattack with a bonus die. If your counterattack hits, the target suffers a penalty die on their next action.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Ancestors Pulse -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_ancestors_pulse_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_ancestors_pulse_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_ancestors_pulse" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_ancestors_pulse_label">Ancestors Pulse</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_ancestors_pulse_description">
                                Once per session, gain two bonus dice on a Magic (Divination), Spirit Lore, or Magic (Summoning) roll when invoking ancestral insight. On success, the insight reveals a hidden danger or opportunity relevant to the scene.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Pathfinders Edge -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_pathfinders_edge_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_pathfinders_edge_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_pathfinders_edge" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_pathfinders_edge_label">Pathfinders Edge</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_pathfinders_edge_description">
                                Once per session, ignore natural terrain penalties for movement or Survival for a full scene. Gain a bonus die to Track or Navigate during this time.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Wild Tamers Gaze -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_wild_tamers_gaze_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_wild_tamers_gaze_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_wild_tamers_gaze" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_wild_tamers_gaze_label">Wild Tamers Gaze</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_wild_tamers_gaze_description">
                                Once per session, choose a non-hostile creature or spirit (animal, summoned being, or elemental-type). You may calm, redirect, or guide it with a Spirit Lore or Animal Handling check rolled with a bonus die. Optional: spend 2 Strain to influence it even if it's Veil-corrupted or hostile.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Legacy Reforged -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_legacy_reforged_sources" value="" />
						<input type="hidden" name="attr_draevi_legacy_reforged_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_legacy_reforged_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_legacy_reforged" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_legacy_reforged_label">Legacy Reforged</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_legacy_reforged_description">
                                Once per session, choose one Tier 1 Draevi Talent you possess. For the rest of the scene, it may be used twice without expending Strain. Optional: spend 1 Strain to immediately activate that Tier 1 talent now.
                            </span>
                        </span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="4">
					<h3 class="sheet-talent-tier-header">Tier 4 Talents (Capstone)</h3>
					<!-- Capstone Talents  40 XP for Draevi -->

                    <!-- Talent: Soul of the Wild Hunt -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_soul_of_the_wild_hunt_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_soul_of_the_wild_hunt_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_soul_of_the_wild_hunt" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_soul_of_the_wild_hunt_label">Soul of the Wild Hunt</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_soul_of_the_wild_hunt_description">
                                Once per session, enter Hunt State for the remainder of a scene: gain a bonus die on Stealth and Tracking checks, ignore terrain penalties, and reroll one failed Unarmed Combat or Melee attack.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Echo-Flame Warden -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_echo_flame_warden_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_echo_flame_warden_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_echo_flame_warden" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_echo_flame_warden_label">Echo-Flame Warden</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_echo_flame_warden_description">
                                Once per session, invoke a Ward of Legacy: you and up to two allies gain a bonus die on Constitution and Power rolls during a combat or ritual scene. You may also reduce incoming damage to one target by 1d6 (once per session).
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Ancestral Mirror -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_ancestral_mirror_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_ancestral_mirror_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_ancestral_mirror" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_ancestral_mirror_label">Ancestral Mirror</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_ancestral_mirror_description">
                                Once per session, call on an ancestral vision to gain two bonus dice on a Spirit Lore, Magic (Summoning), or Magic (Divination) roll. On success, gain a hidden insight or location tied to the current conflict.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Path of the Remembered -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_path_of_the_remembered_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_path_of_the_remembered_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_path_of_the_remembered" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_path_of_the_remembered_label">Path of the Remembered</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_path_of_the_remembered_description">
                                Once per session, declare a location as bound by memory. For the scene, you and allies who can hear you gain a bonus die on Perception, Survival, or Willpower-related rolls within that area. You may also spend 3 Strain once during the scene to invoke a flash of ancestral memory, revealing a secret path, hidden threat, or forgotten rite.
                            </span>
                        </span>
                    </div>
				</div>

    		</div>
			<!-- Feran Talents -->
			<div class="sheet-racials3">
				<input type="checkbox" style="display:none" class="sheet-showracials" name="attr_showracials" />
				<div class="sheet-section">
					<input type="hidden" name="attr_feran_talent_tab" class="sheet-tab-controller" value="" />
					<div class="sheet-tab-buttons">
						<!-- Feran talent buttons go here -->
					</div>
					<!-- Feran talent blocks go here -->
				</div>
			</div>
			<!-- Human Talents -->
			<div class="sheet-racials4">

				<div class="sheet-talent-tier" data-tier="1">
					<h3 class="sheet-talent-tier-header">Tier 1 Talents</h3>

                    <!-- Tier 1: Hard Lesson -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_hard_lesson_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_hard_lesson" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_hard_lesson_label">Hard Lesson</span></label>
                        <span class="sheet-talent-description">
                            <span name="attr_human_hard_lesson_description">Once per session, reroll a failed skill check. You must take the second result. Optional: Spend 2 Strain to attempt a second reroll immediately after the first.</span>
                        </span>
                    </div>

                    <!-- Tier 1: Instinct Over Training -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_instinct_over_training_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_instinct_over_training" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_instinct_over_training_label">Instinct Over Training</span></label>
                        <span class="sheet-talent-description">
                            <span name="attr_human_instinct_over_training_description">Use Education in place of any untrained knowledge skill (Arcana, Occult Lore, Forbidden Lore, History, Law, etc.) once per session, at one difficulty higher.</span>
                        </span>
                    </div>

                    <!-- Tier 1: Makeshift Medic -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_makeshift_medic_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_makeshift_medic" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_makeshift_medic_label">Makeshift Medic</span></label>
                        <span class="sheet-talent-description">
                            <span name="attr_human_makeshift_medic_description">Once per session, when attempting a First Aid check without proper medical tools, gain a bonus die.</span>
                        </span>
                    </div>

                    <!-- Tier 1: No Stranger to Pain -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_no_stranger_to_pain_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_no_stranger_to_pain" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_no_stranger_to_pain_label">No Stranger to Pain</span></label>
                        <span class="sheet-talent-description">
                            <span name="attr_human_no_stranger_to_pain_description">Once per session, roll with a bonus die when making a CON roll to stay conscious after suffering a major wound.</span>
                        </span>
                    </div>

                    <!-- Tier 1: Quick Fixer (with skill selection) -->
                    <div class="sheet-talent-row">
                        <input name="attr_show_quick_fixer_bonus" type="hidden" value="0" />
                        <input name="attr_human_quick_fixer_lockflag" type="hidden" value="0" />
                        <input name="attr_human_quick_fixer_lockflag_skill" type="hidden" value="0" />
                        <input class="sheet-talent-checkbox" name="attr_human_quick_fixer" type="checkbox" value="1" />
                        <label class="sheet-talent-label">
                            <span name="attr_human_quick_fixer_label">Quick Fixer</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_human_quick_fixer_description">Choose one: gain +10% to Electronics, Mechanics, or Slicing. This choice is permanent and may only be taken once.</span>
                        </span>
                        <div class="sheet-skill-choice-placeholder">
                            <div class="sheet-skill-choice-options" name="attr_quick_fixer_choices">
                                <label class="sheet-skill-option">
                                    <input name="attr_human_quick_fixer_mdr_checkbox" type="checkbox" value="talent_electronics" />
                                    <span>Electronics +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input name="attr_human_quick_fixer_mdr_checkbox" type="checkbox" value="talent_mechanics" />
                                    <span>Mechanics +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input name="attr_human_quick_fixer_mdr_checkbox" type="checkbox" value="talent_slicing" />
                                    <span>Slicing +10%</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Tier 1: Social Versatility -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_social_versatility_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_social_versatility" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_social_versatility_label">Social Versatility</span></label>
                        <span class="sheet-talent-description">
                            <span name="attr_human_social_versatility_description">Once per session, reroll any failed Charm, Deception, or Persuade check.</span>
                        </span>
                    </div>

                    <!-- Tier 1: Battle-Tested Gut -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_battle_tested_gut_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_battle_tested_gut" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_battle_tested_gut_label">Battle-Tested Gut</span></label>
                        <span class="sheet-talent-description">
                            <span name="attr_human_battle_tested_gut_description">Once per session, when entering a potentially dangerous situation, ask the GM: Do I feel something is off? The GM must answer truthfully (vaguely if appropriate).</span>
                        </span>
                    </div>

                    <!-- Tier 1: Skilled Focus (with skill selection) -->
                    <div class="sheet-talent-row">
                        <input name="attr_show_skilled_focus_bonus" type="hidden" value="0" />
                        <input name="attr_human_skilled_focus_lockflag" type="hidden" value="0" />
                        <input name="attr_human_skilled_focus_lockflag_skill" type="hidden" value="0" />
                        <input class="sheet-talent-checkbox" name="attr_human_skilled_focus" type="checkbox" value="1" />
                        <label class="sheet-talent-label">
                            <span name="attr_human_skilled_focus_label">Skilled Focus</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_human_skilled_focus_description">Choose one: gain +10% to any non-combat, non-magic skill. This choice is permanent and may only be taken once.</span>
                        </span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="2">
					<h3 class="sheet-talent-tier-header">Tier 2 Talents</h3>

                    <!-- Tier 2: Quick Learner -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_quick_learner_enabled" value="0" />
                        <input type="hidden" name="attr_human_quick_learner_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_quick_learner" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_quick_learner_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_quick_learner_description"></span></span>
                    </div>

                    <!-- Tier 2: Situational Awareness -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_situational_awareness_enabled" value="0" />
                        <input type="hidden" name="attr_human_situational_awareness_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_situational_awareness" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_situational_awareness_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_situational_awareness_description"></span></span>
                    </div>

                    <!-- Tier 2: Spontaneous Strategist -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_spontaneous_strategist_enabled" value="0" />
                        <input type="hidden" name="attr_human_spontaneous_strategist_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_spontaneous_strategist" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_spontaneous_strategist_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_spontaneous_strategist_description"></span></span>
                    </div>

                    <!-- Tier 2: Lucky Timing -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_lucky_timing_enabled" value="0" />
                        <input type="hidden" name="attr_human_lucky_timing_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_lucky_timing" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_lucky_timing_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_lucky_timing_description"></span></span>
                    </div>

                    <!-- Tier 2: Improvised Tools -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_improvised_tools_enabled" value="0" />
                        <input type="hidden" name="attr_human_improvised_tools_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_improvised_tools" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_improvised_tools_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_improvised_tools_description"></span></span>
                    </div>

                    <!-- Tier 2: Defiant Resilience -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_defiant_resilience_enabled" value="0" />
                        <input type="hidden" name="attr_human_defiant_resilience_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_defiant_resilience" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_defiant_resilience_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_defiant_resilience_description"></span></span>
                    </div>

                    <!-- Tier 2: Cross-Trained -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_cross_trained_enabled" value="0" />
                        <input type="hidden" name="attr_human_cross_trained_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_cross_trained" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_cross_trained_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_cross_trained_description"></span></span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="3">
					<h3 class="sheet-talent-tier-header">Tier 3 Talents</h3>

                    <!-- Tier 3: Momentum Shift -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_momentum_shift_enabled" value="0" />
                        <input type="hidden" name="attr_human_momentum_shift_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_momentum_shift" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_momentum_shift_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_momentum_shift_description"></span></span>
                    </div>

                    <!-- Tier 3: Pull From Memory -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_pull_from_memory_enabled" value="0" />
                        <input type="hidden" name="attr_human_pull_from_memory_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_pull_from_memory" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_pull_from_memory_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_pull_from_memory_description"></span></span>
                    </div>

                    <!-- Tier 3: Chain of Luck -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_chain_of_luck_enabled" value="0" />
                        <input type="hidden" name="attr_human_chain_of_luck_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_chain_of_luck" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_chain_of_luck_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_chain_of_luck_description"></span></span>
                    </div>

                    <!-- Tier 3: Dig Deep -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_dig_deep_enabled" value="0" />
                        <input type="hidden" name="attr_human_dig_deep_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_dig_deep" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_dig_deep_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_dig_deep_description"></span></span>
                    </div>

                    <!-- Tier 3: Just Enough Prep -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_just_enough_prep_enabled" value="0" />
                        <input type="hidden" name="attr_human_just_enough_prep_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_just_enough_prep" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_just_enough_prep_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_just_enough_prep_description"></span></span>
                    </div>

                    <!-- Tier 3: Break the Pattern -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_break_the_pattern_enabled" value="0" />
                        <input type="hidden" name="attr_human_break_the_pattern_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_break_the_pattern" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_break_the_pattern_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_break_the_pattern_description"></span></span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="4">
					<h3 class="sheet-talent-tier-header">Tier 4 Talents (Capstone)</h3>

                    <!-- Tier 4: Tactical Improviser -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_tactical_improviser_enabled" value="0" />
                        <input type="hidden" name="attr_human_tactical_improviser_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_tactical_improviser" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_tactical_improviser_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_tactical_improviser_description"></span></span>
                    </div>

                    <!-- Tier 4: Luck Bends for Me -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_luck_bends_for_me_enabled" value="0" />
                        <input type="hidden" name="attr_human_luck_bends_for_me_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_luck_bends_for_me" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_luck_bends_for_me_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_luck_bends_for_me_description"></span></span>
                    </div>

                    <!-- Tier 4: Unshakable Focus -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_unshakable_focus_enabled" value="0" />
                        <input type="hidden" name="attr_human_unshakable_focus_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_unshakable_focus" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_unshakable_focus_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_unshakable_focus_description"></span></span>
                    </div>

                    <!-- Tier 4: Master of None -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_master_of_none_enabled" value="0" />
                        <input type="hidden" name="attr_human_master_of_none_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_master_of_none" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_master_of_none_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_master_of_none_description"></span></span>
                    </div>
				</div>

			</div>
			<!-- Khadra Talents -->
			<div class="sheet-racials5">
				<input type="checkbox" style="display:none" class="sheet-showracials" name="attr_showracials" />
				<div class="sheet-section">
					<input type="hidden" name="attr_khadra_talent_tab" class="sheet-tab-controller" value="" />
					<div class="sheet-tab-buttons">
						<!-- Khadra talent buttons go here -->
					</div>
					<!-- Khadra talent blocks go here -->
				</div>
			</div>
			<!-- Kitsu Talents -->
			<div class="sheet-racials6">
				<input type="checkbox" style="display:none" class="sheet-showracials" name="attr_showracials" />
				<div class="sheet-section">
					<input type="hidden" name="attr_kitsu_talent_tab" class="sheet-tab-controller" value="" />
					<div class="sheet-tab-buttons">
						<!-- Kitsu talent buttons go here -->
					</div>
					<!-- Kitsu talent blocks go here -->
				</div>
			</div>
			<!-- Lyranni Talents -->
			<div class="sheet-racials7">

				<div class="sheet-talent-tier" data-tier="1">
					<h3 class="sheet-talent-tier-header">Tier 1 Talents</h3>
                     <!-- Tier 1: Veilsight -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_veilsight_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_veilsight" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_lyranni_veilsight_label"></span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_lyranni_veilsight_description"></span>
                        </span>
                    </div>

                    <!-- Tier 1: Threadwalker -->

					<div class="sheet-talent-row">
						<input type="hidden" name="attr_show_threadwalker_bonus" value="0" />
						<input type="hidden" name="attr_lyranni_threadwalker_lockflag" value="0" />
						<input type="hidden" name="attr_lyranni_threadwalker_lockflag_skill" value="0" />
						<input type="checkbox" name="attr_lyranni_threadwalker" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label">
							<span name="attr_lyranni_threadwalker_label"></span>
						</label>
						<span class="sheet-talent-description">
							<span name="attr_lyranni_threadwalker_description"></span>
						</span>
						<div class="sheet-skill-choice-placeholder">
							<div class="sheet-skill-choice-options" name="attr_threadwalker_choices">
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_lyranni_threadwalker_arcana" />
									<span>Arcana</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_lyranni_threadwalker_spirit_lore" />
									<span>Spirit Lore</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_lyranni_threadwalker_occult_lore" />
									<span>Occult Lore</span>
								</label>
							</div>
						</div>
					</div>

                    <!-- Tier 1: Legacy Spark -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_legacy_spark_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_legacy_spark" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_lyranni_legacy_spark_label"></span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_lyranni_legacy_spark_description"></span>
                        </span>
                    </div>

                    <!-- Tier 1: Social Ghost -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_social_ghost_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_social_ghost" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_lyranni_social_ghost_label"></span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_lyranni_social_ghost_description"></span>
                        </span>
                    </div>

                    <!-- Tier 1: Aether Override -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_show_aether_override_bonus" value="0" />
                        <input type="hidden" name="attr_lyranni_aether_override_lockflag" value="0" />
                        <input type="hidden" name="attr_lyranni_aether_override_lockflag_skill" value="0" />
                        <input type="checkbox" name="attr_lyranni_aether_override" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_lyranni_aether_override_label"></span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_lyranni_aether_override_description"></span>
                        </span>
                        <div class="sheet-skill-choice-placeholder">
                            <div class="sheet-skill-choice-options" name="attr_aether_override_choices">
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_lyranni_aether_override_mdr_checkbox" value="talent_slicing" />
                                    <span>Slicing +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_lyranni_aether_override_mdr_checkbox" value="talent_electronics" />
                                    <span>Electronics +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_lyranni_aether_override_mdr_checkbox" value="talent_mechanics" />
                                    <span>Mechanics +10%</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Tier 1: Echo in the Veins -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_show_echo_in_the_veins_bonus" value="0" />
                        <input type="hidden" name="attr_lyranni_echo_in_the_veins_lockflag" value="0" />
                        <input type="hidden" name="attr_lyranni_echo_in_the_veins_lockflag_skill" value="0" />
                        <input type="checkbox" name="attr_lyranni_echo_in_the_veins" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_lyranni_echo_in_the_veins_label"></span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_lyranni_echo_in_the_veins_description"></span>
                        </span>
                        <div class="sheet-skill-choice-placeholder">
                            <div class="sheet-skill-choice-options" name="attr_echo_in_the_veins_choices">
								<label class="sheet-skill-option">
										<input type="checkbox" name="attr_lyranni_echo_in_the_veins_mdr_checkbox" value="talent_chant" />
										<span>Chant +10%</span>
								</label>
								<label class="sheet-skill-option">
										<input type="checkbox" name="attr_lyranni_echo_in_the_veins_mdr_checkbox" value="talent_dance" />
										<span>Dance +10%</span>
								</label>
								<label class="sheet-skill-option">
										<input type="checkbox" name="attr_lyranni_echo_in_the_veins_mdr_checkbox" value="talent_impersonation" />
										<span>Impersonation +10%</span>
								</label>
								<label class="sheet-skill-option">
										<input type="checkbox" name="attr_lyranni_echo_in_the_veins_mdr_checkbox" value="talent_instrument" />
										<span>Instrument +10%</span>
								</label>
								<label class="sheet-skill-option">
										<input type="checkbox" name="attr_lyranni_echo_in_the_veins_mdr_checkbox" value="talent_singing" />
										<span>Singing +10%</span>
								</label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_lyranni_echo_in_the_veins_mdr_checkbox" value="talent_insight" />
                                    <span>Insight +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_lyranni_echo_in_the_veins_mdr_checkbox" value="talent_streetwise" />
                                    <span>Streetwise +10%</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Tier 1: Veil-Blooded Sense -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_veil_blooded_sense_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_veil_blooded_sense" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_lyranni_veil_blooded_sense_label"></span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_lyranni_veil_blooded_sense_description"></span>
                        </span>
                    </div>

                    <!-- Tier 1: Glimmerstep -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_glimmerstep_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_glimmerstep" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_lyranni_glimmerstep_label"></span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_lyranni_glimmerstep_description"></span>
                        </span>
                    </div>

                    <!-- Tier 1: Resonant Poise -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_resonant_poise_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_resonant_poise" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_lyranni_resonant_poise_label"></span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_lyranni_resonant_poise_description"></span>
                        </span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="2">
					<h3 class="sheet-talent-tier-header">Tier 2 Talents</h3>

                    <!-- Tier 2: Spirit-Favored -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_spirit_favored_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_spirit_favored_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_spirit_favored" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_spirit_favored_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_spirit_favored_description"></span></span>
                    </div>

                    <!-- Tier 2: Whispers Beyond -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_whispers_beyond_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_whispers_beyond_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_whispers_beyond" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_whispers_beyond_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_whispers_beyond_description"></span></span>
                    </div>

                    <!-- Tier 2: Ancestral Resonance -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_ancestral_resonance_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_ancestral_resonance_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_ancestral_resonance" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_ancestral_resonance_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_ancestral_resonance_description"></span></span>
                    </div>

                    <!-- Tier 2: Veil Dancer -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_veil_dancer_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_veil_dancer_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_veil_dancer" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_veil_dancer_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_veil_dancer_description"></span></span>
                    </div>

                    <!-- Tier 2: Rite-Bound -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_rite_bound_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_rite_bound_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_rite_bound" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_rite_bound_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_rite_bound_description"></span></span>
                    </div>

                    <!-- Tier 2: Veilsplice -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_veilsplice_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_veilsplice_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_veilsplice" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_veilsplice_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_veilsplice_description"></span></span>
                        <div class="sheet-skill-choice-placeholder">
                            <div class="sheet-skill-choice-options" name="attr_veilsplice_choices">
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_lyranni_veilsplice_mdr_checkbox" value="talent_slicing" />
                                    <span>Slicing +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_lyranni_veilsplice_mdr_checkbox" value="talent_electronics" />
                                    <span>Electronics +10%</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Tier 2: Illuminated Touch -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_illuminated_touch_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_illuminated_touch_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_illuminated_touch" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_illuminated_touch_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_illuminated_touch_description"></span></span>
                    </div>

                    <!-- Tier 2: Words Like Silk -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_words_like_silk_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_words_like_silk_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_words_like_silk" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_words_like_silk_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_words_like_silk_description"></span></span>
                    </div>

                    <!-- Tier 2: Memory-Bound Echo -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_memory_bound_echo_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_memory_bound_echo_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_memory_bound_echo" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_memory_bound_echo_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_memory_bound_echo_description"></span></span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="3">
					<h3 class="sheet-talent-tier-header">Tier 3 Talents</h3>
                    <!-- Tier 3: True Veilsight -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_true_veilsight_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_true_veilsight_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_true_veilsight" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_true_veilsight_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_true_veilsight_description"></span></span>
                    </div>

                    <!-- Tier 3: Blood Rite Channeling -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_blood_rite_channeling_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_blood_rite_channeling_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_blood_rite_channeling" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_blood_rite_channeling_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_blood_rite_channeling_description"></span></span>
                    </div>

                    <!-- Tier 3: Lyranni Discipline -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_lyranni_discipline_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_lyranni_discipline_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_lyranni_discipline" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_lyranni_discipline_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_lyranni_discipline_description"></span></span>
                    </div>

                    <!-- Tier 3: Subtle Authority -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_subtle_authority_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_subtle_authority_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_subtle_authority" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_subtle_authority_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_subtle_authority_description"></span></span>
                    </div>

                    <!-- Tier 3: Veil-Laced Command -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_veil_laced_command_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_veil_laced_command_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_veil_laced_command" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_veil_laced_command_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_veil_laced_command_description"></span></span>
                    </div>

                    <!-- Tier 3: Shadow Echo Step -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_shadow_echo_step_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_shadow_echo_step_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_shadow_echo_step" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_shadow_echo_step_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_shadow_echo_step_description"></span></span>
                    </div>

                    <!-- Tier 3: Echo Binding -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_echo_binding_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_echo_binding_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_echo_binding" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_echo_binding_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_echo_binding_description"></span></span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="4">
					<h3 class="sheet-talent-tier-header">Tier 4 Talents (Capstone)</h3>
                    <!-- Tier 4: Voice of the Ancestors -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_voice_of_the_ancestors_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_voice_of_the_ancestors_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_voice_of_the_ancestors" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_voice_of_the_ancestors_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_voice_of_the_ancestors_description"></span></span>
                    </div>

                    <!-- Tier 4: Veil-Linked Will -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_veil_linked_will_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_veil_linked_will_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_veil_linked_will" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_veil_linked_will_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_veil_linked_will_description"></span></span>
                    </div>

                    <!-- Tier 4: Echo of Elegance -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_echo_of_elegance_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_echo_of_elegance_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_echo_of_elegance" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_echo_of_elegance_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_echo_of_elegance_description"></span></span>
                    </div>

                    <!-- Tier 4: Breath of the Veil -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_breath_of_the_veil_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_breath_of_the_veil_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_breath_of_the_veil" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_breath_of_the_veil_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_breath_of_the_veil_description"></span></span>
                    </div>
				</div>
			</div>
			<!-- Veyra Talents -->
			<div class="sheet-racials8">
				<input type="checkbox" style="display:none" class="sheet-showracials" name="attr_showracials" />
				<div class="sheet-section">
					<input type="hidden" name="attr_veyra_talent_tab" class="sheet-tab-controller" value="" />
					<div class="sheet-tab-buttons">
						<!-- Veyra talent buttons go here -->
					</div>
					<!-- Veyra talent blocks go here -->
				</div>
			</div>
			<!-- Text Area -->
			<div class="sheet-section">
				<h4 class="section-head">Tiers</h4>
				<div class="sheet-section sheet-talents-flex">
					<div class="sheet-talent-label" name="attr_talent_tier1" data-i18n="tier1_talents-u">Tier 1</div>
					<textarea name="attr_talent_tier1" class="sheet-talent-textarea"></textarea>
					<div class="sheet-talent-label" name="attr_talent_tier2" data-i18n="tier2_talents-u">Tier 2</div>
					<textarea name="attr_talent_tier2" class="sheet-talent-textarea"></textarea>
					<div class="sheet-talent-label" name="attr_talent_tier3" data-i18n="tier3_talents-u">Tier 3</div>
					<textarea name="attr_talent_tier3" class="sheet-talent-textarea"></textarea>
					<div class="sheet-talent-label" name="attr_talent_tier4" data-i18n="tier4_talents-u">Tier 4</div>
					<textarea name="attr_talent_tier4" class="sheet-talent-textarea"></textarea>
				</div>
			</div>
		</div>

		<!-- ------------------- Careers  -------------------- -->
		<div class="sheet-tab-content sheet-careers">
			<h4 class="section-head" data-i18n="careers-u">Careers</h4>
			<div class="sheet-section">
				<div class="sheet-career-label" name="attr_career1" data-i18n="careers1-u">Career 1</div>
				<textarea name="attr_career1" class="sheet-career-textarea"></textarea>
				<div class="sheet-career-label" name="attr_career2" data-i18n="careers2-u">Career 2</div>
				<textarea name="attr_career2" class="sheet-career-textarea"></textarea>
			</div>
			<div class="sheet-section">
				<h4 class="section-head">Tiers</h4>
				<div class="sheet-section sheet-careers-flex">
					<div class="sheet-career-label" name="attr_career_tier1" data-i18n="tier1_careers-u">Tier 1</div>
					<textarea name="attr_career_tier1" class="sheet-career-textarea"></textarea>
					<div class="sheet-career-label" name="attr_career_tier2" data-i18n="tier2_careers-u">Tier 2</div>
					<textarea name="attr_career_tier2" class="sheet-career-textarea"></textarea>
					<div class="sheet-career-label" name="attr_career_tier3" data-i18n="tier3_careers-u">Tier 3</div>
					<textarea name="attr_career_tier3" class="sheet-career-textarea"></textarea>
					<div class="sheet-career-label" name="attr_career_tier4" data-i18n="tier4_careers-u">Tier 4</div>
					<textarea name="attr_career_tier4" class="sheet-career-textarea"></textarea>
					<div class="sheet-career-label" name="attr_career_tier5" data-i18n="tier5_careers-u">Tier 5</div>
					<textarea name="attr_career_tier5" class="sheet-career-textarea"></textarea>
				</div>
			</div>
		</div>

		<!-- -------------------------- Modern Combat -------------------------- -->
		<div class="sheet-tab-content sheet-combat">
		<input type="checkbox" style="display:none" class="sheet-hide" name="attr_sheet-hide">
			<div class="sheet-colrow">
				<h4 class="section-head" data-i18n="armor-u">Armor</h4>
				<div class="section">
					<div class="sheet-armor-header">
						<div class="flex-row">
							<div class="flex-cell armor-name"><span data-i18n="armor_name-u">Armor</span></div>
							<div class="flex-cell armor-equipped"><span data-i18n="armor_equipped-u">E</span></div>
							<div class="flex-cell armor-physical"><span data-i18n="armor_physical-u">Physical</span></div>
							<div class="flex-cell armor-arcane"><span data-i18n="armor_arcane-u">Arcane</span></div>
							<div class="flex-cell armor-layer"><span data-i18n="armor_layer-u">Layer</span></div>
							<div class="flex-cell armor-category"><span data-i18n="armor_category-u">Category</span></div>
							<div class="flex-cell armor-traits"><span data-i18n="armor_traits-u">Traits</span></div>
						</div>
					</div>
					<div class="sheet-armor-default">
						<div class="flex-row">
							<div class="flex-cell armor-name"><input type="text" name="attr_armor1_name_mdr" placeholder="Armor Name"></div>
							<div class="flex-cell armor-equipped"><input type="checkbox" name="attr_armor1_equipped_checkbox"></div>
							<div class="flex-cell armor-physical"><input type="text" name="attr_armor1_physical_mdr" placeholder="P"></div>
							<div class="flex-cell armor-arcane"><input type="text" name="attr_armor1_arcane_mdr" placeholder="A"></div>
							<div class="flex-cell armor-layer"><input type="text" name="attr_armor1_layer_mdr" placeholder="Layer"></div>
							<div class="flex-cell armor-category"><input type="text" name="attr_armor1_category_mdr" placeholder="Category"></div>
							<div class="flex-cell armor-traits"><input type="text" name="attr_armor1_traits_mdr" placeholder="Traits"></div>
						</div>
						<div class="flex-row">
							<div class="flex-cell armor-name"><input type="text" name="attr_armor2_name_mdr" placeholder="Armor Name"></div>
							<div class="flex-cell armor-equipped"><input type="checkbox" name="attr_armor2_equipped_checkbox"></div>
							<div class="flex-cell armor-physical"><input type="text" name="attr_armor2_physical_mdr" placeholder="P"></div>
							<div class="flex-cell armor-arcane"><input type="text" name="attr_armor2_arcane_mdr" placeholder="A"></div>
							<div class="flex-cell armor-layer"><input type="text" name="attr_armor2_layer_mdr" placeholder="Layer"></div>
							<div class="flex-cell armor-category"><input type="text" name="attr_armor2_category_mdr" placeholder="Category"></div>
							<div class="flex-cell armor-traits"><input type="text" name="attr_armor2_traits_mdr" placeholder="Traits"></div>
						</div>
					</div>
					<fieldset class="repeating_armorsmdr">
						<div class="flex-row">
							<div class="flex-cell armor-name"><input type="text" name="attr_armor_name_mdr" placeholder="Armor Name"></div>
							<div class="flex-cell armor-equipped"><input type="checkbox" name="attr_armor_equipped_checkbox"></div>
							<div class="flex-cell armor-physical"><input type="text" name="attr_armor_physical_mdr" placeholder="P"></div>
							<div class="flex-cell armor-arcane"><input type="text" name="attr_armor_arcane_mdr" placeholder="A"></div>
							<div class="flex-cell armor-layer"><input type="text" name="attr_armor_layer_mdr" placeholder="Layer"></div>
							<div class="flex-cell armor-category"><input type="text" name="attr_armor_category_mdr" placeholder="Category"></div>
							<div class="flex-cell armor-traits"><input type="text" name="attr_armor_traits_mdr" placeholder="Traits"></div>
						</div>
					</fieldset>
				</div>
			</div>
			<div class="sheet-colrow">
				<h4 class="section-head" data-i18n="weapons-u">Weapons</h4>
				<div class="section">
					<!-- Header -->
					<div class="sheet-weapon-header">
						<div class="flex-row">
							<div class="flex-cell weapon-name"><span data-i18n="weaponname-u">Weapon</span></div>
							<div class="flex-cell weapon-impale">I</div>
							<div class="flex-cell weapon-roll"><!-- Empty for roll --></div>
							<div class="flex-cell weapon-skill"><span data-i18n="skill-u">Skill</span></div>
							<div class="flex-cell weapon-damage"><span data-i18n="damage-u">Damage</span></div>
							<div class="flex-cell weapon-damage-bonus"><span>DB</span></div>
							<div class="flex-cell weapon-range"><span data-i18n="range-u">Range</span></div>
							<div class="flex-cell weapon-attacks"><span data-i18n="attacks-u">Attacks</span></div>
							<div class="flex-cell weapon-ammo"><span data-i18n="ammo-u">Ammo</span></div>
							<div class="flex-cell weapon-malf"><span data-i18n="malf-u">Malf</span></div>
							<div class="flex-cell weapon-contested"><span data-i18n="constested-u">Contested</span></div>
							<div class="flex-cell weapon-strain"><span data-i18n="strain-u">Strain</span></div>
						</div>
					</div>
					<!-- Default Row (Unarmed) -->
					<div class="sheet-weapon-default">
						<div class="flex-row">
							<div class="flex-cell weapon-name"><input type="text" placeholder="Unarmed" data-i18n-placeholder="unarmed-z" readonly></div>
							<div class="flex-cell weapon-impale"><input type="checkbox" name="attr_attack_impale_checkbox" value="1"></div>
							<div class="flex-cell weapon-roll"><button type="roll" class="new-roll" name="@{weapon-name}" value="&{template:coc-attack-1-noimpale} {{name=@{unarmed_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{unarmed_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{unarmed_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{unarmed_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{damage=[[1d3]]}} {{extremedamage=[[0 + (1*3)]]}} {{strain=[[ 0 + 0 ]]}}" ></button></div>
							<div class="flex-cell weapon-skill"><input type="text" placeholder="Unarmed" data-i18n-placeholder="unarmed-u" disabled="true"></div>
							<div class="flex-cell weapon-damage"><input type="text" value="1d3" readonly></div>
							<div class="flex-cell weapon-damage-bonus"><input type="text" value="+db" readonly></div>
							<div class="flex-cell weapon-range"><input type="text" value="" readonly></div>
							<div class="flex-cell weapon-attacks"><input type="text" value="1" readonly></div>
							<div class="flex-cell weapon-ammo"><input type="text" value="" readonly></div>
							<div class="flex-cell weapon-malf"><input type="text" value="" readonly></div>
							<div class="flex-cell weapon-contested"><input type="text" value="" readonly></div>
							<div class="flex-cell weapon-strain"><input type="text" value="" readonly></div>
						</div>
					</div>
					<!-- Fixed Weapon 1 -->
					<div class="sheet-weapon-block">
						<div class="flex-row">
							<!-- Hidden parsing fields for Weapon1 -->
							<input type="hidden" name="attr_weapon1_mdr_damage_numdice" value="0">
							<input type="hidden" name="attr_weapon1_mdr_damage_dicesize" value="0">
							<input type="hidden" name="attr_weapon1_mdr_damage_bonus" value="0">
							<input type="hidden" name="attr_weapon1_mdr_strain" value="0">
							<div class="flex-cell weapon-name"><input type="text" name="attr_weapon1_mdr_name" placeholder="Weapon Name"></div>
							<input type="checkbox" class="flex-cell weapon-impale" name="attr_roll_weapon1_mdr_attack_impale_checkbox" value="1" />
							<div class="flex-cell weapon-roll">
								<input type="hidden" name="attr_attack_mode_toggle" class="sheet-attack-toggle" value="noimpale"/>
								<button type="roll" class="new-roll sheet-roll-noimpale" name="roll_weapon1_mdr_attack_noimpale" value="&{template:coc-attack-1-noimpale} {{name=@{weapon1_mdr_name}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{weapon1_skill_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{weapon1_skill_mdr} + @{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{weapon1_skill_mdr} + @{dice_modifier_checkbox})/5)]]}} {{malf=@{weapon1_mdr_malf}}} {{roll1=[[1d100]]}} {{damage=[[@{weapon1_mdr_damage}@{weapon1_mdr_db}]]}} {{extremedamage=[[(@{weapon1_mdr_damage_numdice}*@{weapon1_mdr_damage_dicesize})+@{weapon1_mdr_damage_bonus}]]}} {{strain=[[ @{weapon1_mdr_strain} + 0 ]]}}"></button>
								<button type="roll" class="new-roll sheet-roll-impale" name="roll_weapon1_mdr_attack_impale" value="&{template:coc-attack-1-impale} {{name=@{weapon1_mdr_name}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{weapon1_skill_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{weapon1_skill_mdr} + @{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{weapon1_skill_mdr} + @{dice_modifier_checkbox})/5)]]}} {{malf=@{weapon1_mdr_malf}}} {{roll1=[[1d100]]}} {{damage=[[@{weapon1_mdr_damage}@{weapon1_mdr_db}]]}} {{extremedamage=[[(@{weapon1_mdr_damage_numdice}*@{weapon1_mdr_damage_dicesize})+@{weapon1_mdr_damage_bonus}]]}} {{strain=[[ @{weapon1_mdr_strain} + 0 ]]}}"></button>
							</div>
							<div class="flex-cell weapon-skill">
								<select name="attr_weapon1_skill_mdr">
									<option value="@{unarmed_mdr}" data-i18n="unarmed-u">Unarmed</option>
									<option value="@{archery_mdr}" data-i18n="archery-u">Archery</option>
									<option value="@{gunnery_mdr}" data-i18n="gunnery-u">Gunnery</option>
									<option value="@{heavy_weapons_mdr}" data-i18n="heavy_weapons-u">Heavy Weapons</option>
									<option value="@{melee_weapons_mdr}" data-i18n="melee_weapons-u">Melee Weapons</option>
									<option value="@{firearms_handgun_mdr}" data-i18n="firearms(hg)-u">Pistol</option>
									<option value="@{firearms_rifle_mdr}" data-i18n="firearms_rifle-u">Rifle/Shotgun</option>
									<option value="@{firearms_smg_mdr}" data-i18n="firearms_s_m_g-u">Submachine Gun</option>
									<option value="@{throw_mdr}" data-i18n="throw-u">Throw</option>
									<option value="@{magic_universal_mdr}" data-i18n="magic_universal-u">Magic</option>
   							   </select>
							</div>
							<div class="flex-cell weapon-damage"><input type="text" name="attr_weapon1_mdr_damage" placeholder="Damage"></div>
								<div class="flex-cell weapon-damage-bonus">
									<select name="attr_weapon1_mdr_db">
										<option value="+0">+0</option>
										<option value="+round((@{damage_bonus})/2)">+db</option>
										<option value="+@{damage_bonus}">+db</option>
									</select>
								</div>
							<div class="flex-cell weapon-range"><input type="text" name="attr_weapon1_mdr_range" placeholder="Range"></div>
							<div class="flex-cell weapon-attacks"><input type="text" name="attr_weapon1_mdr_attacks" placeholder="Attacks"></div>
							<div class="flex-cell weapon-ammo"><input type="text" name="attr_weapon1_mdr_ammo" placeholder="Ammo"></div>
							<div class="flex-cell weapon-malf"><input type="text" name="attr_weapon1_mdr_malf" placeholder="Malf"></div>
							<div class="flex-cell weapon-contested"><input type="text" name="attr_weapon1_mdr_contested" placeholder="-"></div>
							<div class="flex-cell weapon-strain"><input type="text" name="attr_weapon1_mdr_strain" placeholder="Strain"></div>
						</div>
					</div>
					<!-- Repeating Weapons -->
					<fieldset class="repeating_weaponsmdr">
						<div class="flex-row">
							<input type="hidden" name="attr_damage_numdice" value="0">
							<input type="hidden" name="attr_damage_dicesize" value="0">
							<input type="hidden" name="attr_damage_bonus" value="0">
							<input type="hidden" name="attr_weaponstrain_mdr" value="0">
							<div class="flex-cell weapon-name"><input type="text" name="attr_weaponname_mdr"></div>
							<input type="checkbox" class="flex-cell weapon-impale" name="attr_attack_impale_checkbox" value="1" />
							<div class="flex-cell weapon-roll">
								<input type="hidden" name="attr_attack_mode_toggle" class="sheet-attack-toggle" value="noimpale"/>
								<button type="roll" class="new-roll sheet-roll-noimpale" name="roll_weaponskill_mdr_check_noimpale" value="&{template:coc-attack-1-noimpale} {{name=@{weaponname_mdr}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{weaponskill_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{weaponskill_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{weaponskill_mdr}+@{dice_modifier_checkbox})/5)]]}} {{malf=@{weaponmalf_mdr}}} {{roll1=[[1d100]]}} {{damage=[[@{weapondamage_mdr}@{weapondb_mdr}]]}} {{extremedamage=[[(@{damage_numdice}*@{damage_dicesize})+@{damage_bonus}]]}} {{strain=[[ @{weaponstrain_mdr} + 0 ]]}}"></button>
								<button type="roll" class="new-roll sheet-roll-impale" name="roll_weaponskill_mdr_check_impale" value="&{template:coc-attack-1-impale} {{name=@{weaponname_mdr}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{weaponskill_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{weaponskill_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{weaponskill_mdr}+@{dice_modifier_checkbox})/5)]]}} {{malf=@{weaponmalf_mdr}}} {{roll1=[[1d100]]}} {{damage=[[@{weapondamage_mdr}@{weapondb_mdr}]]}} {{extremedamage=[[(@{damage_numdice}*@{damage_dicesize})+@{damage_bonus}]]}} {{strain=[[ @{weaponstrain_mdr} + 0 ]]}}"></button>
							</div>
							<div class="flex-cell weapon-skill">
								<select name="attr_weaponskill_mdr">
									<option value="@{unarmed_mdr}" data-i18n="unarmed-u">Unarmed</option>
									<option value="@{archery_mdr}" data-i18n="archery-u">Archery</option>
									<option value="@{gunnery_mdr}" data-i18n="gunnery-u">Gunnery</option>
									<option value="@{heavy_weapons_mdr}" data-i18n="heavy_weapons-u">Heavy Weapons</option>
									<option value="@{melee_weapons_mdr}" data-i18n="melee_weapons-u">Melee Weapons</option>
									<option value="@{firearms_handgun_mdr}" data-i18n="firearms(hg)-u">Pistol</option>
									<option value="@{firearms_rifle_mdr}" data-i18n="firearms_rifle-u">Rifle/Shotgun</option>
									<option value="@{firearms_smg_mdr}" data-i18n="firearms_s_m_g-u">Submachine Gun</option>
									<option value="@{throw_mdr}" data-i18n="throw-u">Throw</option>
									<option value="@{magic_universal_mdr}" data-i18n="magic_universal-u">Magic</option>
								</select>
							</div>
							<div class="flex-cell weapon-damage"><input type="text" name="attr_weapondamage_mdr"></div>
							<div class="flex-cell weapon-damage-bonus">
								<select name="attr_weapondb_mdr">
									<option value="+0">+0</option>
									<option value="+round((@{damage_bonus})/2)">+db</option>
									<option value="+@{damage_bonus}">+db</option>
								</select>
							</div>
							<div class="flex-cell weapon-range"><input type="text" name="attr_weaponrange_mdr"></div>
							<div class="flex-cell weapon-attacks"><input type="text" name="attr_weaponattacks_mdr"></div>
							<div class="flex-cell weapon-ammo"><input type="text" name="attr_weaponammo_mdr"></div>
							<div class="flex-cell weapon-malf"><input type="text" name="attr_weaponmalf_mdr"></div>
							<div class="flex-cell weapon-contested"><input type="text" name="attr_weaponcontested"></div>
							<div class="flex-cell weapon-strain"><input type="text" name="attr_weaponstrain_mdr"></div>
						</div>
					</fieldset>
				</div>
			</div>
			<div class="sheet-colrow">
				<h4 class="section-head" data-i18n="spells-u">Spells</h4>
				<div class="section">
					<div class="sheet-spell-header">
						<div class="flex-row">
							<div class="flex-cell spell-name"><span data-i18n="spell_name-u">Spell Name</span></div>
							<div class="flex-cell spell-prepared"><span data-i18n="spell_prepared-u">P</span></div>
							<div class="flex-cell spell-roll"><span data-i18n="spell_roll-u"><!-- Blank --></span></div>
							<div class="flex-cell spell-skill"><span data-i18n="spell_skill-u">Skill</span></div>
							<div class="flex-cell spell-damage"><span data-i18n="spell_damage-u">Damage</span></div>
							<div class="flex-cell spell-concentration"><span data-i18n="spell_concentration-u">Concentration</span></div>
							<div class="flex-cell spell-range"><span data-i18n="spell_range-u">Range</span></div>
							<div class="flex-cell spell-attacks"><span data-i18n="spell_attacks-u">Attacks</span></div>
							<div class="flex-cell spell-element"><span data-i18n="spell_element-u">Element</span></div>
							<div class="flex-cell spell-contested"><span data-i18n="spell_contested-u">Contested</span></div>
							<div class="flex-cell spell-strain"><span data-i18n="spell_strain-u">Strain</span></div>
						</div>
					</div>
					<fieldset class="repeating_spellsmdr">
						<div class="flex-row">
							<input type="hidden" name="attr_damage_numdice" value="0">
							<input type="hidden" name="attr_damage_dicesize" value="0">
							<input type="hidden" name="attr_damage_bonus" value="0">
							<input type="hidden" name="attr_spell_strain_mdr" value="0">

							<div class="flex-cell spell-name"><input type="text" name="attr_spell_name_mdr" placeholder="Spell Name"></div>
							<div class="flex-cell spell-prepared"><input type="checkbox" name="attr_spell_prepared_mdr" value="1"></div>
							<div class="flex-cell spell-roll">
								<button type="roll" class="new-roll" name="roll_spell_mdr_attack" value="&{template:coc-attack-1-noimpale} {{name=@{spell_name_mdr}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{spell_skill_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{spell_skill_mdr} + @{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{spell_skill_mdr} + @{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{damage=[[@{spell_damage_mdr}]]}} {{extremedamage=[[(@{damage_numdice}*@{damage_dicesize})+@{damage_bonus}]]}} {{strain=[[ @{spell_strain_mdr} + 0 ]]}}"></button>
							</div>
							<div class="flex-cell spell-skill">
								<select name="attr_spell_skill_mdr">
									<option value="@{magic_universal_mdr}" data-i18n="magic_universal-u">Universal</option>
									<option value="@{magic_alteration_mdr}" data-i18n="magic_alteration-u">Alteration</option>
									<option value="@{magic_elemental_mdr}" data-i18n="magic_elemental-u">Elemental</option>
									<option value="@{magic_enchantment_mdr}" data-i18n="magic_enchantment-u">Enchantment</option>
									<option value="@{magic_illusion_mdr}" data-i18n="magic_illusion-u">Illusion</option>
									<option value="@{magic_necromancy_mdr}" data-i18n="magic_necromancy-u">Necromancy</option>
									<option value="@{magic_restoration_mdr}" data-i18n="magic_restoration-u">Restoration</option>
									<option value="@{magic_summoning_mdr}" data-i18n="magic_summoning-u">Summoning</option>
									<option value="@{magic_technomancy_mdr}" data-i18n="magic_technomancy-u">Technomancy</option>
									<option value="@{magic_warding_mdr}" data-i18n="magic_warding-u">Warding</option>
								</select>
							</div>
							<div class="flex-cell spell-damage"><input type="text" name="attr_spell_damage_mdr"></div>
							<div class="flex-cell spell-concentration"><input type="text" name="attr_spell_concentration_mdr" placeholder="No"></div>
							<div class="flex-cell spell-range"><input type="text" name="attr_spell_range_mdr" placeholder="Short"></div>
							<div class="flex-cell spell-attacks"><input type="text" name="attr_spell_attacks_mdr" placeholder="1"></div>
							<div class="flex-cell spell-element"><input type="text" name="attr_spell_element_mdr" placeholder="Arcane"></div>
							<div class="flex-cell spell-contested"><input type="text" name="attr_spell_contested_mdr" placeholder="-"></div>
							<div class="flex-cell spell-strain"><input type="text" name="attr_spell_strain_mdr" placeholder="0"></div>
						</div>
					</fieldset>
				</div>
			</div>
			<div class="sheet-colrow">
				<h4 class="section-head" data-i18n="omnidecks-u">Omnidecks</h4>
				<div class="section">
					<div class="sheet-omnideck-header">
						<div class="flex-row">
							<div class="flex-cell omnideck-name"><span data-i18n="omnideck_name-u">Omnideck Name</span></div>
							<div class="flex-cell omnideck-equipped"><span data-i18n="omnideck_equipped-u">E</span></div>
							<div class="flex-cell omnideck-skill"><span data-i18n="omnideck_skill-u">Skill</span></div>
							<div class="flex-cell omnideck-ir"><span data-i18n="omnideck_ir-u">IR</span></div>
							<div class="flex-cell omnideck-mr"><span data-i18n="omnideck_mr-u">MR</span></div>
							<div class="flex-cell omnideck-fr"><span data-i18n="omnideck_fr-u">FR</span></div>
							<div class="flex-cell omnideck-dic"><span data-i18n="omnideck_dic-u">DIC</span></div>
							<div class="flex-cell omnideck-dit"><span data-i18n="omnideck_dit-u">DIT</span></div>
							<div class="flex-cell omnideck-ar"><span data-i18n="omnideck_ar-u">AR</span></div>
							<div class="flex-cell omnideck-prog_slots"><span data-i18n="omnideck_prog_slots-u">Program Slots</span></div>
							<div class="flex-cell omnideck-mod_slots"><span data-i18n="omnideck_mod_slots-u">Mod Slots</span></div>
						</div>
					</div>
					<fieldset class="repeating_omnidecksmdr">
						<div class="flex-row">
							<div class="flex-cell omnideck-name"><input type="text" name="attr_omnideck_name" placeholder="Omnideck Name"></div>
							<div class="flex-cell omnideck-equipped"><input type="checkbox" name="attr_omnideck_equipped" value="1"></div>
							<div class="flex-cell omnideck-skill">
								<select name="attr_omnideck_skill_mdr">
									<option value="@{slicing_mdr}" data-i18n="slicing-u">Slicing</option>
									<option value="@{computer_use_mdr}" data-i18n="computeruse-u">Computer Use</option>
								</select>
							</div>
							<div class="omnideck-roll-wrapper">
								<div class="flex-cell omnideck-roll">
									<button type="roll" class="new-roll" name="roll_omnideck_ir_mdr_attack" value="&{template:coc-1} {{name=@{omnideck_name} - IR Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[(floor(@{omnideck_skill_mdr}/5))+@{omnideck_ir}+@{dice_modifier_checkbox}]]}} {{hard=[[floor(((floor(@{omnideck_skill_mdr}/5))+@{omnideck_ir}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor(((floor(@{omnideck_skill_mdr}/5))+@{omnideck_ir}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
								</div>
								<div class="flex-cell omnideck-ir"><input name="attr_omnideck_ir" type="text" /></div>
							</div>
							<div class="omnideck-roll-wrapper">
								<div class="flex-cell omnideck-roll">
									<button type="roll" class="new-roll" name="roll_omnideck_mr_mdr_attack" value="&{template:coc-1} {{name=@{omnideck_name} - MR Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[(floor(@{omnideck_skill_mdr}/5))+@{omnideck_mr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor(((floor(@{omnideck_skill_mdr}/5))+@{omnideck_mr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor(((floor(@{omnideck_skill_mdr}/5))+@{omnideck_mr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
								</div>
								<div class="flex-cell omnideck-mr"><input name="attr_omnideck_mr" type="text" /></div>
							</div>
							<div class="omnideck-roll-wrapper">
								<div class="flex-cell omnideck-roll">
									<button type="roll" class="new-roll" name="roll_omnideck_fr_mdr_attack" value="&{template:coc-1} {{name=@{omnideck_name} - FR Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[(floor(@{omnideck_skill_mdr}/5))+@{omnideck_fr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor(((floor(@{omnideck_skill_mdr}/5))+@{omnideck_fr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor(((floor(@{omnideck_skill_mdr}/5))+@{omnideck_fr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
								</div>
								<div class="flex-cell omnideck-fr"><input name="attr_omnideck_fr" type="text" /></div>
							</div>
							<div class="flex-cell omnideck-dic"><input type="text" name="attr_omnideck_dic" placeholder="DIC"></div>
							<div class="flex-cell omnideck-dit"><input type="text" name="attr_omnideck_dit" placeholder="DIT"></div>
							<div class="flex-cell omnideck-ar"><input type="text" name="attr_omnideck_ar" placeholder="AR"></div>
							<div class="flex-cell omnideck-prog_slots"><input type="text" name="attr_omnideck_prog_slots" placeholder="0"></div>
							<div class="flex-cell omnideck-mod_slots"><input type="text" name="attr_omnideck_mod_slots" placeholder="0"></div>
						</div>
					</fieldset>
				</div>
			</div>
			<div class="sheet-colrow">
				<h4 class="section-head" data-i18n="programs-u">Programs</h4>
				<div class="section">
					<div class="sheet-program-header">
						<div class="flex-row">
							<div class="flex-cell program-name"><span data-i18n="program_name-u">Program Name</span></div>
							<div class="flex-cell program-active"><span data-i18n="program_active-u">A</span></div>
							<div class="flex-cell program-roll"><span data-i18n="program_roll-u"><!-- Blank --></span></div>
							<div class="flex-cell program-damage"><span data-i18n="program_damage-u">Damage</span></div>
							<div class="flex-cell program-effect"><span data-i18n="program_effect-u">Effect</span></div>
						</div>
					</div>
					<fieldset class="repeating_programsmdr">
						<div class="flex-row">
							<input type="hidden" name="attr_damage_numdice" value="0">
							<input type="hidden" name="attr_damage_dicesize" value="0">
							<input type="hidden" name="attr_damage_bonus" value="0">

							<div class="flex-cell program-name"><input type="text" name="attr_program_name_mdr" placeholder="Program Name"></div>
							<div class="flex-cell program-active"><input type="checkbox" name="attr_program_active_mdr" value="1"></div>
							<div class="flex-cell program-roll">
								<button type="roll" class="new-roll" name="roll_program_mdr_attack" value="&{template:coc-dice-roll} {{name=Program - @{program_name_mdr}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[@{program_damage_mdr}]]}} "></button>
							</div>
							<div class="flex-cell program-damage"><input type="text" name="attr_program_damage_mdr"></div>
							<div class="flex-cell program-effect"><input type="text" name="attr_program_affect_mdr" placeholder="-"></div>
						</div>
					</fieldset>
				</div>
			</div>
		</div>

		<!-- -------------------------- Spells -------------------------- -->
		<div class="sheet-tab-content sheet-spells">
			<h4 class="section-head" data-i18n="spells-u">Spells</h4>
			<!-- Prep Spell Cost / Arcane Capacity Tracker -->
			<div class="sheet-section">
				<div class="sheet-spell-tracker-wrapper">
					<div class="sheet-spell-tracker">
						<div>
							<div class="sheet-spell-tracker-header">Prep Spell Cost / Arcane Capacity</div>
							<div class="sheet-spell-tracker-box">
								<input type="hidden" class="sheet-overflow-mirror" name="attr_spellcost_overflow" />
								<input type="text" name="attr_total_spellcost" class="spell-cost-input sheet-overflow-sensitive" placeholder="0">
								<span class="slash-divider">/</span>
								<input type="text" name="attr_ac" class="spell-capacity-input" placeholder="60">
							</div>
						</div>
						<div>
							<div class="sheet-spell-tracker-header">Strain</div>
							<div class="sheet-spell-tracker-box">
								<input class="spell-cost-input sheet-edit-toggle-field" type="text" name="attr_strain" placeholder="current" data-i18n-placeholder="current" />
								<div class="sheet-strain-slash">/</div>
								<input class="spell-capacity-input" type="text" name="attr_strain_max" placeholder="max" readonly />
							</div>
						</div>
					</div>
					<div class="sheet-strain-buttons">
						<div class="sheet-rest-button-wrapper">
							<span class="sheet-roll-label">Full Rest</span>
							<button type="action" class="sheet-roll-hidden sheet-rest-button" name="act_strain_full_rest"></button>
						</div>
						<div class="sheet-roll-wrapper">
							<span class="sheet-roll-label">Short Rest</span>
							<button type="action" name="act_strain_short_rest" class="sheet-roll-hidden"></button>
						</div>
					</div>
				</div>
				<hr/>
				<!-- Repeating Spells Block -->
				<fieldset class="repeating_spells">
					<div class="sheet-spell-row-wrapper">
						<!-- Left Column -->
						<div class="sheet-spell-info-left">
							<div class="sheet-spell-meta-row">
								<div class="sheet-spell-label" data-i18n="spellname-u">Spell Name</div>
								<input class="sheet-wide-input" type="text" name="attr_spellname" />
							</div>
							<div class="sheet-spell-meta-row">
								<div class="sheet-spell-label" data-i18n="cost-u">Cost</div>
								<input class="sheet-wide-input" type="text" name="attr_spellcost" />
							</div>
							<div class="sheet-spell-meta-row">
								<div class="sheet-spell-label" data-i18n="castime-u">Casting Time</div>
								<input class="sheet-wide-input" type="text" name="attr_spellcastime" />
							</div>
							<div class="sheet-spell-meta-row">
								<div class="sheet-spell-label" data-i18n="prepared-u">Prepared</div>
								<input type="hidden" class="sheet-prepared-mirror" name="attr_spellprepared_mirror" />
								<select name="attr_spellprepared" class="sheet-prepared-toggle">
									<option value="0" selected>Off</option>
									<option value="1">On</option>
								</select>
							</div>
						</div>
						<!-- Right Column -->
						<div class="sheet-spell-info-right">
							<div class="sheet-spell-label" data-i18n="description-u">Description</div>
							<textarea name="attr_spelldescription" class="sheet-spell-textarea"></textarea>
						</div>
					</div>
					<hr />
				</fieldset>
			</div>
		</div>

		<!-- ------------------------- Gear and Possessions ------------------------- -->
		<div class="sheet-tab-content sheet-inventory">
			<div class="sheet-2colrow">
				<!-- Gear & Possessions Column -->
				<div class="sheet-col">
					<h4 class="section-head" data-i18n="gearandpossessions-u">Gear and Possessions</h4>
					<div class="sheet-section sheet-gear-flex">
						<textarea name="attr_gear_and_posessions" class="sheet-gear-textarea"></textarea>
						<textarea name="attr_gear_and_posessions1" class="sheet-gear-textarea"></textarea>
					</div>
				</div>
				<!-- Cash & Assets Column -->
				<div class="sheet-col">
					<h4 class="section-head" data-i18n="cashandassets-u">Cash and Assets</h4>
					<div class="sheet-section sheet-cash-grid">
						<div class="sheet-cash-row">
							<div class="sheet-cash-label" data-i18n="spendinglevel-u">Spending Level</div>
							<input type="text" name="attr_spending_level" class="sheet-wide-input" />
						</div>
						<div class="sheet-cash-row">
							<div class="sheet-cash-label" data-i18n="cash-u">Cash</div>
							<input type="text" name="attr_cash" class="sheet-wide-input" />
						</div>
						<div class="sheet-cash-row">
							<div class="sheet-cash-label" data-i18n="assets-u">Assets</div>
							<textarea name="attr_assets" class="sheet-gear-textarea"></textarea>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- ------------------------- Backstory ------------------------- -->
		<div class="sheet-tab-content sheet-backstory">
			<h4 class="section-head" data-i18n="backstory-u">Backstory</h4>
				<div class="sheet-section sheet-backstory-grid">
					<!-- Column 1 -->
					<div class="sheet-backstory-col">
					<div class="sheet-backstory-label" data-i18n="Personal Description">Personal Description</div>
					<textarea name="attr_personal_description" class="sheet-backstory-textarea"></textarea>
					<div class="sheet-backstory-label" data-i18n="Ideology/Beliefs">Ideology/Beliefs</div>
					<textarea name="attr_ideaology_beliefs" class="sheet-backstory-textarea"></textarea>
					<div class="sheet-backstory-label" data-i18n="Significant People">Significant People</div>
					<textarea name="attr_significant_people" class="sheet-backstory-textarea"></textarea>
					<div class="sheet-backstory-label" data-i18n="Meaningful Locations">Meaningful Locations</div>
					<textarea name="attr_meaningful_locations" class="sheet-backstory-textarea"></textarea>
					<div class="sheet-backstory-label" data-i18n="Treasured Possessions">Treasured Possessions</div>
					<textarea name="attr_treasured_posessions" class="sheet-backstory-textarea"></textarea>
				</div>
				<!-- Column 2 -->
				<div class="sheet-backstory-col">
					<div class="sheet-backstory-label" data-i18n="Traits">Traits</div>
					<textarea name="attr_traits" class="sheet-backstory-textarea"></textarea>
					<div class="sheet-backstory-label" data-i18n="Injuries & Scars">Injuries & Scars</div>
					<textarea name="attr_injuries_scars" class="sheet-backstory-textarea"></textarea>
					<div class="sheet-backstory-label" data-i18n="Phobias/Manias">Phobias/Manias</div>
					<textarea name="attr_phobias_manias" class="sheet-backstory-textarea"></textarea>
					<div class="sheet-backstory-label" data-i18n="Tomes, Spells and Artifacts">Tomes, Spells and Artifacts</div>
					<textarea name="attr_tomes_spells_artifacts" class="sheet-backstory-textarea"></textarea>
					<div class="sheet-backstory-label" data-i18n="Encounters with Strange Entities-z">Encounters with Strange Entities</div>
					<textarea name="attr_encounters_with_strange_entities" class="sheet-backstory-textarea"></textarea>
				</div>
			</div>
		</div>

		<!-- ------------------------- NPC Companions (Converted to Grid/Flex Layout) -->
		<div class="sheet-tab-content sheet-npcs">
			<div class="sheet-companions">
				<h4 class="section-head" data-i18n="companions&mounts-u">NPCs</h4>
				<div class="sheet-section">
					<fieldset class="repeating_minion">
						<div class="sheet-npcblock-flex">
							<!-- Left Column -->
							<div class="sheet-npc-content-left">
								<div class="sheet-npc-info-section">
									<div class="sheet-companion-info-header">Information</div>
									<div class="sheet-npc-grid">
										<div class="sheet-npc-row">
											<div class="sheet-npc-label" data-i18n="name-u">Name</div>
											<div class="sheet-npc-val">
												<input type="text" name="attr_minion_name" class="sheet-wide-input" placeholder="Name" />
											</div>
										</div>
										<div class="sheet-npc-mini-flex">
											<div class="sheet-npc-row">
												<div class="sheet-npc-label">HP / Strain</div>
												<div class="sheet-npc-val">
													<input type="text" name="attr_minionhp" class="sheet-narrow-input" placeholder="HP" /> /
													<input type="text" name="attr_minionmp" class="sheet-narrow-input" placeholder="Strain" />
												</div>
											</div>
											<div class="sheet-npc-row">
												<div class="sheet-npc-label">MOV</div>
												<div class="sheet-npc-val">
													<input type="text" name="attr_minionmove" class="sheet-wide-input" placeholder="Movement" />
												</div>
											</div>
											<div class="sheet-npc-row">
												<div class="sheet-npc-label">B / DB</div>
												<div class="sheet-npc-val">
													<input type="text" name="attr_minionbuild" class="sheet-narrow-input" placeholder="Build" /> /
													<input type="text" name="attr_miniondb" class="sheet-narrow-input" placeholder="DB" />
												</div>
											</div>
										</div>
										<div class="sheet-npc-row">
											<div class="sheet-npc-label" data-i18n="armor-z">Armor</div>
											<div class="sheet-npc-val">
												<input type="text" name="attr_minionarmorname" class="sheet-wide-input" placeholder="Armor Name" />
												<input type="text" name="attr_minionarmor" class="sheet-narrow-input" placeholder="Def" />
												<button type="roll" class="smallnonskillbutton-roll" name="roll_minionarmor" value="&{template:coc-miniondef} {{name=@{minion_name} @{minionarmorname}}} {{defence=[[@{minionarmor}]]}}"></button>
											</div>
										</div>
										<div class="sheet-npc-row">
											<div class="sheet-npc-label" data-i18n="generalinfo-u">General Info</div>
											<div class="sheet-npc-val">
												<textarea name="attr_minion_stats_info" class="sheet-npc-textarea" placeholder="General Info"></textarea>
											</div>
										</div>
									</div>
								</div>
								<div class="sheet-npc-attribute-section">
									<!-- Attributes Section -->
									<div class="sheet-companion-attr-header">Attributes</div>
									<div class="sheet-npc-attribute-grid">
										<!-- Column 1 -->
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">STR</div>
											<input type="text" name="attr_minionattr1" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr1_check" value="&{template:coc-1} {{name=@{minion_name} rolling STR}} {{success=[[@{minionattr1}]]}} {{hard=[[floor(@{minionattr1}/2)]]}} {{extreme=[[floor(@{minionattr1}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">CON</div>
											<input type="text" name="attr_minionattr2" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr2_check" value="&{template:coc-1} {{name=@{minion_name} rolling CON}} {{success=[[@{minionattr2}]]}} {{hard=[[floor(@{minionattr2}/2)]]}} {{extreme=[[floor(@{minionattr2}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">SIZ</div>
											<input type="text" name="attr_minionattr3" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr3_check" value="&{template:coc-1} {{name=@{minion_name} rolling SIZ}} {{success=[[@{minionattr3}]]}} {{hard=[[floor(@{minionattr3}/2)]]}} {{extreme=[[floor(@{minionattr3}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">APP</div>
											<input type="text" name="attr_minionattr4" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr4_check" value="&{template:coc-1} {{name=@{minion_name} rolling APP}} {{success=[[@{minionattr4}]]}} {{hard=[[floor(@{minionattr4}/2)]]}} {{extreme=[[floor(@{minionattr4}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">DEX</div>
											<input type="text" name="attr_minionattr5" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr5_check" value="&{template:coc-1} {{name=@{minion_name} rolling DEX}} {{success=[[@{minionattr5}]]}} {{hard=[[floor(@{minionattr5}/2)]]}} {{extreme=[[floor(@{minionattr5}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<!-- Column 2 -->
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">INT</div>
											<input type="text" name="attr_minionattr6" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr6_check" value="&{template:coc-1} {{name=@{minion_name} rolling INT}} {{success=[[@{minionattr6}]]}} {{hard=[[floor(@{minionattr6}/2)]]}} {{extreme=[[floor(@{minionattr6}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">POW</div>
											<input type="text" name="attr_minionattr7" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr7_check" value="&{template:coc-1} {{name=@{minion_name} rolling POW}} {{success=[[@{minionattr7}]]}} {{hard=[[floor(@{minionattr7}/2)]]}} {{extreme=[[floor(@{minionattr7}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">EDU</div>
											<input type="text" name="attr_minionattr8" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr8_check" value="&{template:coc-1} {{name=@{minion_name} rolling EDU}} {{success=[[@{minionattr8}]]}} {{hard=[[floor(@{minionattr8}/2)]]}} {{extreme=[[floor(@{minionattr8}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">MAG</div>
											<input type="text" name="attr_minionattr9" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr9_check" value="&{template:coc-1} {{name=@{minion_name} rolling MAG}} {{success=[[@{minionattr9}]]}} {{hard=[[floor(@{minionattr9}/2)]]}} {{extreme=[[floor(@{minionattr9}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
									</div>
								</div>
								<div class="sheet-npc-skills-section">
									<div class="sheet-companion-skill-header">Skills</div>
									<div class="sheet-npc-attribute-grid">
										<!-- Skill 1 -->
										<div class="sheet-npc-attribute-cell">
											<input type="text" name="attr_minionskill1" class="sheet-wide-input" placeholder="Skill 1" />
											<input type="text" name="attr_minionskillval1" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionskill1_check" value="&{coc-minionattack} {{name=@{minion_name}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionskillval1}]]}} {{hard=[[floor(@{minionskillval1}/2)]]}} {{extreme=[[floor(@{minionskillval1}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<!-- Skill 2 -->
										<div class="sheet-npc-attribute-cell">
											<input type="text" name="attr_minionskill2" class="sheet-wide-input" placeholder="Skill 2" />
											<input type="text" name="attr_minionskillval2" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionskill2_check" value="&{template:coc-1} {{name=@{minion_name} rolling @{minionskill2}}} {{success=[[@{minionskillval2}]]}} {{hard=[[floor(@{minionskillval2}/2)]]}} {{extreme=[[floor(@{minionskillval2}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<!-- Skill 3 -->
										<div class="sheet-npc-attribute-cell">
											<input type="text" name="attr_minionskill3" class="sheet-wide-input" placeholder="Skill 3" />
											<input type="text" name="attr_minionskillval3" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionskill3_check" value="&{template:coc-1} {{name=@{minion_name} rolling @{minionskill3}}} {{success=[[@{minionskillval3}]]}} {{hard=[[floor(@{minionskillval3}/2)]]}} {{extreme=[[floor(@{minionskillval3}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<!-- Skill 4 -->
										<div class="sheet-npc-attribute-cell">
											<input type="text" name="attr_minionskill4" class="sheet-wide-input" placeholder="Skill 4" />
											<input type="text" name="attr_minionskillval4" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionskill4_check" value="&{template:coc-1} {{name=@{minion_name} rolling @{minionskill4}}} {{success=[[@{minionskillval4}]]}} {{hard=[[floor(@{minionskillval4}/2)]]}} {{extreme=[[floor(@{minionskillval4}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<!-- Skill 5 -->
										<div class="sheet-npc-attribute-cell">
											<input type="text" name="attr_minionskill5" class="sheet-wide-input" placeholder="Skill 5" />
											<input type="text" name="attr_minionskillval5" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionskill5_check" value="&{template:coc-1} {{name=@{minion_name} rolling @{minionskill5}}} {{success=[[@{minionskillval5}]]}} {{hard=[[floor(@{minionskillval5}/2)]]}} {{extreme=[[floor(@{minionskillval5}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<!-- Skill 6 -->
										<div class="sheet-npc-attribute-cell">
											<input type="text" name="attr_minionskill6" class="sheet-wide-input" placeholder="Skill 6" />
											<input type="text" name="attr_minionskillval6" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionskill6_check" value="&{template:coc-1} {{name=@{minion_name} rolling @{minionskill6}}} {{success=[[@{minionskillval6}]]}} {{hard=[[floor(@{minionskillval6}/2)]]}} {{extreme=[[floor(@{minionskillval6}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<!-- Skill 7 -->
										<div class="sheet-npc-attribute-cell">
											<input type="text" name="attr_minionskill7" class="sheet-wide-input" placeholder="Skill 7" />
											<input type="text" name="attr_minionskillval7" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionskill7_check" value="&{template:coc-1} {{name=@{minion_name} rolling @{minionskill7}}} {{success=[[@{minionskillval7}]]}} {{hard=[[floor(@{minionskillval7}/2)]]}} {{extreme=[[floor(@{minionskillval7}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<!-- Skill 8 -->
										<div class="sheet-npc-attribute-cell">
											<input type="text" name="attr_minionskill8" class="sheet-wide-input" placeholder="Skill 8" />
											<input type="text" name="attr_minionskillval8" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionskill8_check" value="&{template:coc-1} {{name=@{minion_name} rolling @{minionskill8}}} {{success=[[@{minionskillval8}]]}} {{hard=[[floor(@{minionskillval8}/2)]]}} {{extreme=[[floor(@{minionskillval8}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
									</div>
								</div>
							</div>
							<!-- Right Column: Weapons -->
							<div class="sheet-npc-content-right">
								<div class="sheet-npc-grid">
									<div class="sheet-companion-weapon-header">Weapons</div>
									<div class="sheet-npc-row">
										<div class="sheet-npc-val">
											<input type="text" name="attr_minionweapon1" class="sheet-wide-input" placeholder="Weapon 1 (Skill 6)" />
											<input type="text" name="attr_miniondamage1" class="sheet-narrow-input" placeholder="Dam+DB" />
											<button type="roll" class="smallbutton-roll" name="roll_miniondamage1" value="&{template:coc-minionattack} {{name=@{minion_name} attacking with @{minionweapon1}}}  {{success=[[ @{minionskillval6} ]]}} {{hard=[[ floor(@{minionskillval6} / 2) ]]}} {{extreme=[[ floor(@{minionskillval6} / 5) ]]}} {{roll1=[[1d100]]}} {{damage=[[ @{miniondamage1} ]]}}"></button>
										</div>
									</div>
									<div class="sheet-npc-row">
										<div class="sheet-npc-val">
											<input type="text" name="attr_minionweapon2" class="sheet-wide-input" placeholder="Weapon 2 (Skill 7)" />
											<input type="text" name="attr_miniondamage2" class="sheet-narrow-input" placeholder="Dam+DB" />
											<button type="roll" class="smallbutton-roll" name="roll_miniondamage2" value="&{template:coc-minionattack} {{name=@{minion_name} attacking with @{minionweapon2}}} {{success=[[@{minionskillval7}]]}} {{hard=[[floor(@{minionskillval7}/2)]]}} {{extreme=[[floor(@{minionskillval7}/5)]]}} {{roll1=[[1d100]]}} {{damage=[[@{miniondamage2}]]}}"></button>
										</div>
									</div>
									<div class="sheet-npc-row">
										<div class="sheet-npc-val">
											<input type="text" name="attr_minionweapon3" class="sheet-wide-input" placeholder="Weapon 3 (Skill 8)" />
											<input type="text" name="attr_miniondamage3" class="sheet-narrow-input" placeholder="Dam+DB" />
											<button type="roll" class="smallbutton-roll" name="roll_miniondamage3" value="&{template:coc-minionattack} {{name=@{minion_name} attacking with @{minionweapon3}}} {{success=[[@{minionskillval8}]]}} {{hard=[[floor(@{minionskillval8}/2)]]}} {{extreme=[[floor(@{minionskillval8}/5)]]}} {{roll1=[[1d100]]}} {{damage=[[@{miniondamage3}]]}}"></button>
										</div>
									</div>
								</div>
							</div>
						</div>
						<hr />
					</fieldset>
				</div>
			</div>
		</div>

		<!-- ------------------------- Vehicles ------------------------- -->
		<div class="sheet-tab-content sheet-vehicles">
			<div class="sheet-vehicles-wrapper">
				<h4 class="section-head" data-i18n="vehicles-u">Vehicles</h4>
				<div class="sheet-vehicles-section">
					<fieldset class="repeating_vehicle">
						<div class="sheet-vehicle-grid">
							<!-- Left Block -->
							<div class="sheet-vehicle-column-left">
								<div class="sheet-vehicle-grid-header">
									<div class="sheet-vehicle-info">
										<div class="sheet-name-row">
											<div class="sheet-vehicle-col-label" data-i18n="name-u">Name</div>
											<div class="sheet-vehicle-col-value">
												<input type="text" class="sheet-wide-input" name="attr_vehicle_name" placeholder="Name" data-i18n-placeholder="name-u" />
											</div>
										</div>
										<div class="sheet-vehicle-row">
											<div class="sheet-vehicle-col-label" data-i18n="build-u">Build</div>
											<div class="sheet-vehicle-col-value">
												<input type="text" class="sheet-wide-input" name="attr_vehiclebuild" placeholder="Current" data-i18n-placeholder="current-u" />
												<span>/</span>
												<input type="text" class="sheet-wide-input" name="attr_vehiclebuildmax" placeholder="Max" data-i18n-placeholder="max-u" />
											</div>
										</div>
										<div class="sheet-vehicle-row">
											<div class="sheet-vehicle-col-label" data-i18n="MOV-u">MOV</div>
											<div class="sheet-vehicle-col-value">
												<input type="text" class="sheet-wide-input" name="attr_vehiclemove" />
											</div>
										</div>
										<div class="sheet-vehicle-row">
											<div class="sheet-vehicle-col-label" data-i18n="armor-z">Armor</div>
											<div class="sheet-vehicle-col-value">
												<input type="text" class="sheet-wide-input" name="attr_vehiclearmor" />
												<button class="smallnonskillbutton-roll" type="roll" name="roll_vehiclearmor" value="&{template:coc-miniondef} {{name=@{vehicle_name} Armor}} {{defence=[[@{vehiclearmor}]]}}"></button>
											</div>
										</div>
										<div class="sheet-vehicle-row">
											<div class="sheet-vehicle-col-label" data-i18n="cap-u">Capacity</div>
											<div class="sheet-vehicle-col-value">
												<input type="text" class="sheet-wide-input" name="attr_vehiclecap" />
											</div>
										</div>
									</div>
									<div class="sheet-vehicle-weaponblock">
										<div class="sheet-vehicle-impact-row">
											<div>
												<div class="sheet-vehicle-col-label" data-i18n="vehicleattack-u">Vehicular Impact Attack</div>
												<div class="sheet-vehicle-col-label" data-i18n="vehicleattack_req-u">Vehicular Impact Attack Requirement</div>
											</div>
											<button class="smallbutton-roll" type="roll" name="roll_vehicleattack_check" value="&{template:coc-vehicleattack} {{name=@{vehicle_name} attacking with @{operatorskillname}}}{{success=[[@{operatorskill}]]}} {{hard=[[floor(@{operatorskill}/2)]]}} {{extreme=[[floor(@{operatorskill}/5)]]}} {{roll1=[[1d100]]}} {{builddam=[[@{vehiclebuild}d10/10]]}}"></button>
										</div>
										<div>
											<input type="text" class="sheet-wide-input" name="attr_operatorskillname" placeholder="Operator's Skill" data-i18n-placeholder="operatorskill" />
											<input type="text" class="sheet-wide-input" name="attr_operatorskill" />
											<button class="smallbutton-roll" type="roll" name="roll_operatorskill_check" value="&{template:coc-1} {{name=@{vehicle_name} rolling @{operatorskillname}}} {{success=[[@{operatorskill}]]}} {{hard=[[floor(@{operatorskill}/2)]]}} {{extreme=[[floor(@{operatorskill}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div>
											<input type="text" class="sheet-wide-input" name="attr_vehicleweaponskillname" placeholder="Mounted Weapon Skill" data-i18n-placeholder="MountedWeaponSkill" />
											<input type="text" class="sheet-wide-input" name="attr_vehicleweaponskill" />
											<button class="smallbutton-roll" type="roll" name="roll_vehicleweaponskill_check" value="&{template:coc-1} {{name=@{vehicle_name} rolling @{vehicleweaponskillname}}} {{success=[[@{vehicleweaponskill}]]}} {{hard=[[floor(@{vehicleweaponskill}/2)]]}} {{extreme=[[floor(@{vehicleweaponskill}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div>
											<input type="text" class="sheet-wide-input" name="attr_vehicleweaponname" placeholder="Mounted Weapon" />
											<input type="text" class="sheet-wide-input" name="attr_vehicleweapondamage" placeholder="Dam" data-i18n-placeholder="dam-z" />
											<button class="smallbutton-roll" type="roll" name="roll_vehicleweaponattack" value="&{template:coc-minionattack} {{name=@{vehicle_name} attacking with @{vehicleweaponname}}} {{success=[[@{vehicleweaponskill}]]}} {{hard=[[floor(@{vehicleweaponskill}/2)]]}} {{extreme=[[floor(@{vehicleweaponskill}/5)]]}} {{roll1=[[1d100]]}} {{damage=[[@{vehicleweapondamage}]]}}"></button>
										</div>
									</div>
								</div>
							</div>
							<!-- Right Block -->
							<div class="sheet-vehicle-column-right">
								<div class="sheet-vehicle-col-label" data-i18n="generalinfo-u">General Info</div>
								<textarea name="attr_vehicle_stats_info" class="sheet-vehicle-textarea" placeholder="General Info" data-i18n-placeholder="generalinfo-u"></textarea>
								<div class="sheet-vehicle-col-label" data-i18n="cargo-u">Cargo</div>
								<textarea name="attr_vehicle_stats_info_2" class="sheet-vehicle-textarea" placeholder="Cargo" data-i18n-placeholder="cargo-u"></textarea>
								<div class="sheet-vehicle-col-label" data-i18n="passengers-u">Passengers</div>
								<textarea name="attr_vehicle_stats_info_3" class="sheet-vehicle-textarea" placeholder="Passengers" data-i18n-placeholder="passengers-u"></textarea>
							</div>
						</div>
					<hr />
					</fieldset>
				</div>
			</div>
		</div>
	</div>
</div>

<!------------------------- Translations? ------------------------->
<input type="hidden" name="attr_str_txt" value="STR ROLL"/>
<input type="hidden" name="attr_dex_txt" value="DEX ROLL"/>
<input type="hidden" name="attr_pow_txt" value="POW ROLL"/>
<input type="hidden" name="attr_con_txt" value="CON Roll"/>
<input type="hidden" name="attr_app_txt" value="APP Roll"/>
<input type="hidden" name="attr_edu_txt" value="EDU Roll"/>
<input type="hidden" name="attr_siz_txt" value="SIZ Roll"/>
<input type="hidden" name="attr_int_txt" value="INT Roll"/>
<input type="hidden" name="attr_mag_txt" value="MAG Roll"/>
<input type="hidden" name="attr_luck_txt" value="Luck ROLL"/>
<input type="hidden" name="attr_archanotech_txt" value="Archanotech Roll"/>
<input type="hidden" name="attr_archery_txt" value="Archery Roll"/>
<input type="hidden" name="attr_accounting_txt" value="Accounting Roll"/>
<input type="hidden" name="attr_alchemy_txt" value="Alchemy Roll"/>
<input type="hidden" name="attr_anthropology_txt" value="Anthropology Roll"/>
<input type="hidden" name="attr_animalhandling_txt" value="Animal Handling Roll"/>
<input type="hidden" name="attr_appraise_txt" value="Appraise Roll"/>
<input type="hidden" name="attr_arcana_txt" value="Arcana Roll"/>
<input type="hidden" name="attr_archaeology_txt" value="Archaeology Roll"/>
<input type="hidden" name="attr_architecture_txt" value="Architecture Roll"/>
<input type="hidden" name="attr_biology_txt" value="Biology Roll"/>
<input type="hidden" name="attr_chant_txt" value="Chant Roll"/>
<input type="hidden" name="attr_charm_txt" value="Charm Roll"/>
<input type="hidden" name="attr_chemistry_txt" value="Chemistry Roll"/>
<input type="hidden" name="attr_climb_txt" value="Climb Roll"/>
<input type="hidden" name="attr_computeruse_txt" value="Computer Use Roll"/>
<input type="hidden" name="attr_computermaint_txt" value="Computer Maint. Roll"/>
<input type="hidden" name="attr_creditrating_txt" value="Credit Rating Roll"/>
<input type="hidden" name="attr_cthulhumythos_txt" value="Cthulhu Mythos Roll"/>
<input type="hidden" name="attr_cybernetics_txt" value="Cybernetics Roll"/>
<input type="hidden" name="attr_cybertech_txt" value="Cybertech Roll"/>
<input type="hidden" name="attr_dance_txt" value="Dance Roll"/>
<input type="hidden" name="attr_deception_txt" value="Deception Roll"/>
<input type="hidden" name="attr_demolitions_txt" value="Demolitions Roll"/>
<input type="hidden" name="attr_disguise_txt" value="Disguise Roll"/>
<input type="hidden" name="attr_dodge_txt" value="Dodge Roll"/>
<input type="hidden" name="attr_driveauto_txt" value="Drive Auto"/>
<input type="hidden" name="attr_drone_operation_txt" value="Drone Operation Roll"/>
<input type="hidden" name="attr_elecrepair_txt" value="Elec. Repair Roll"/>
<input type="hidden" name="attr_electronics_txt" value="Electronics Roll"/>
<input type="hidden" name="attr_engineering_txt" value="Engineering Roll"/>
<input type="hidden" name="attr_etiquette_high_society_txt" value="Etiquette(High Society) Roll"/>
<input type="hidden" name="attr_etiquette_other_txt" value="Etiquette(Other) Roll"/>
<input type="hidden" name="attr_fasttalk_txt" value="Fast Talk Roll"/>
<input type="hidden" name="attr_fighting_brawl_txt" value="Brawl Roll"/>
<input type="hidden" name="attr_firearms_hg_txt" value="Pistol Roll"/>
<input type="hidden" name="attr_firearms_rifle_txt" value="Rifle/Shotgun Roll"/>
<input type="hidden" name="attr_first_aid_txt" value="First Aid Roll"/>
<input type="hidden" name="attr_forbidden_lore_txt" value="Forbidden Lore Roll"/>
<input type="hidden" name="attr_gunnery_txt" value="Gunnery Roll"/>
<input type="hidden" name="attr_heavy_weapons_txt" value="Heavy Weapons Roll"/>
<input type="hidden" name="attr_history_txt" value="History Roll"/>
<input type="hidden" name="attr_impersonation_txt" value="Impersonation Roll"/>
<input type="hidden" name="attr_instrument_txt" value="Instrument Roll"/>
<input type="hidden" name="attr_intimidate_txt" value="Intimidate Roll"/>
<input type="hidden" name="attr_insight_txt" value="Insight Roll"/>
<input type="hidden" name="attr_investigation_txt" value="Investigation Roll"/>
<input type="hidden" name="attr_jump_txt" value="Jump Roll"/>
<input type="hidden" name="attr_law_txt" value="Law Roll"/>
<input type="hidden" name="attr_libraryuse_txt" value="Library Use Roll"/>
<input type="hidden" name="attr_listen_txt" value="Listen Roll"/>
<input type="hidden" name="attr_locksmith_txt" value="Locksmith Roll"/>
<input type="hidden" name="attr_mechrepair_txt" value="Mech. Repair Roll"/>
<input type="hidden" name="attr_mechanics_txt" value="Mech. Repair Roll"/>
<input type="hidden" name="attr_medicine_txt" value="Medicine Roll"/>
<input type="hidden" name="attr_melee_weapons_txt" value="Melee Weapons Roll"/>
<input type="hidden" name="attr_naturalworld_txt" value="Natural World Roll"/>
<input type="hidden" name="attr_navigate_txt" value="Navigate Roll"/>
<input type="hidden" name="attr_occult_txt" value="Occult Roll"/>
<input type="hidden" name="attr_ophvmachine_txt" value="Op. Hv. Machine Roll"/>
<input type="hidden" name="attr_perception_txt" value="Perception Roll"/>
<input type="hidden" name="attr_persuade_txt" value="Persuade Roll"/>
<input type="hidden" name="attr_physics_txt" value="Physics Roll"/>
<input type="hidden" name="attr_pilotaircraft_txt" value="Pilot Aircraft"/>
<input type="hidden" name="attr_pilotboat_txt" value="Pilot Boat"/>
<input type="hidden" name="attr_psychology_txt" value="Psychology Roll"/>
<input type="hidden" name="attr_psychoanalysis_txt" value="Psychoanalysis Roll"/>
<input type="hidden" name="attr_ride_txt" value="Ride Roll"/>
<input type="hidden" name="attr_security_txt" value="Security System Roll"/>
<input type="hidden" name="attr_singing_txt" value="Singing Roll"/>
<input type="hidden" name="attr_sleightofhand_txt" value="Sleight of Hand Roll"/>
<input type="hidden" name="attr_slicing_txt" value="Slicing Roll"/>
<input type="hidden" name="attr_spirit_lore_txt" value="Spirit Lore Roll"/>
<input type="hidden" name="attr_spothidden_txt" value="Spot Hidden Roll"/>
<input type="hidden" name="attr_stealth_txt" value="Stealth Roll"/>
<input type="hidden" name="attr_streetwise_txt" value="Streetwise Roll"/>
<input type="hidden" name="attr_survival_txt" value="Survival(Wilderness) Roll"/>
<input type="hidden" name="attr_swim_txt" value="Swim Roll"/>
<input type="hidden" name="attr_throw_txt" value="Throw Roll"/>
<input type="hidden" name="attr_track_txt" value="Track Roll"/>
<input type="hidden" name="attr_veil_lore_txt" value="Veil Lore Roll"/>
<input type="hidden" name="attr_unarmed_txt" value="Unarmed Attack"/>
<input type="hidden" name="attr_ac" value="Arcane Capacity"/>

<!----------------------------------------------------------------ROLL TEMPLATES -------------------------------------------------------------------------->

<!--
&{template:coc-dice-roll} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-dice-roll">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr>
			<td class="template_label" data-i18n="rolled">Rolled:</td><td class="template_value">{{diceroll}}</td>
		</tr>
    </table>
</rolltemplate>

<!--
Body Hit Location---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-body-hit-loc">
    <table>
        <caption data-i18n="body-hit-location">Body Hit Location</caption>
	        <tr>
            	<!--   -->
                {{#rollTotal() roll1 1}}
                  <td class="template_label" data-i18n="right-leg" style="font-weight:bold"><b>Right Leg</b></td>
                {{/rollTotal() roll1 1}}
                <!--   -->
                {{#rollTotal() roll1 2}}
                  <td class="template_label" data-i18n="right-leg" style="font-weight:bold"><b>Right Leg</b></td>
                {{/rollTotal() roll1 2}}
                <!--   -->
                {{#rollTotal() roll1 3}}
                  <td class="template_label" data-i18n="right-leg" style="font-weight:bold"><b>Right Leg</b></td>
                {{/rollTotal() roll1 3}}
                <!--   -->
                {{#rollTotal() roll1 4}}
                  <td class="template_label" data-i18n="left-leg" style="font-weight:bold"><b>Left Leg</b></td>
                {{/rollTotal() roll1 4}}
                <!--   -->
                {{#rollTotal() roll1 5}}
                  <td class="template_label" data-i18n="left-leg" style="font-weight:bold"><b>Left Leg</b></td>
                {{/rollTotal() roll1 5}}
                <!--   -->
                {{#rollTotal() roll1 6}}
                  <td class="template_label" data-i18n="left-leg" style="font-weight:bold"><b>Left Leg</b></td>
                {{/rollTotal() roll1 6}}
                <!--   -->
                {{#rollTotal() roll1 7}}
                  <td class="template_label" data-i18n="abdomen" style="font-weight:bold"><b>Abdomen</b></td>
                {{/rollTotal() roll1 7}}
                <!--   -->
                {{#rollTotal() roll1 8}}
                  <td class="template_label" data-i18n="abdomen" style="font-weight:bold"><b>Abdomen</b></td>
                {{/rollTotal() roll1 8}}
                <!--   -->
                {{#rollTotal() roll1 9}}
                  <td class="template_label" data-i18n="abdomen" style="font-weight:bold"><b>Abdomen</b></td>
                {{/rollTotal() roll1 9}}
                <!--   -->
                {{#rollTotal() roll1 10}}
                  <td class="template_label" data-i18n="abdomen" style="font-weight:bold"><b>Abdomen</b></td>
                {{/rollTotal() roll1 10}}
                <!--   -->
                {{#rollTotal() roll1 11}}
                  <td class="template_label" data-i18n="chest" style="font-weight:bold"><b>Chest</b></td>
                {{/rollTotal() roll1 11}}
                <!--   -->
                {{#rollTotal() roll1 12}}
                  <td class="template_label" data-i18n="chest" style="font-weight:bold"><b>Chest</b></td>
                {{/rollTotal() roll1 12}}
                <!--   -->
                {{#rollTotal() roll1 13}}
                  <td class="template_label" data-i18n="chest" style="font-weight:bold"><b>Chest</b></td>
                {{/rollTotal() roll1 13}}
                <!--   -->
                {{#rollTotal() roll1 14}}
                  <td class="template_label" data-i18n="chest" style="font-weight:bold"><b>Chest</b></td>
                {{/rollTotal() roll1 14}}
                <!--   -->
                {{#rollTotal() roll1 15}}
                  <td class="template_label" data-i18n="chest" style="font-weight:bold"><b>Chest</b></td>
                {{/rollTotal() roll1 15}}
                <!--   -->
                {{#rollTotal() roll1 16}}
                  <td class="template_label" data-i18n="right-arm" style="font-weight:bold"><b>Right Arm</b></td>
                {{/rollTotal() roll1 16}}
                <!--   -->
                {{#rollTotal() roll1 17}}
                  <td class="template_label" data-i18n="right-arm" style="font-weight:bold"><b>Right Arm</b></td>
                {{/rollTotal() roll1 17}}
                <!--   -->
                {{#rollTotal() roll1 18}}
                  <td class="template_label" data-i18n="left-arm" style="font-weight:bold"><b>Left Arm</b></td>
                {{/rollTotal() roll1 18}}
                <!--   -->
                {{#rollTotal() roll1 19}}
                  <td class="template_label" data-i18n="left-arm" style="font-weight:bold"><b>Left Arm</b></td>
                {{/rollTotal() roll1 19}}
                <!--   -->
                {{#rollTotal() roll1 20}}
                  <td class="template_label" data-i18n="head" style="font-weight:bold"><b>Head</b></td>
                {{/rollTotal() roll1 20}}
            </tr>
    </table>
</rolltemplate>

<!--
&{template:coc-defence} {{name=Test}} {{success=[[50]]}} {{hard=[[floor(50/2)]]}} {{extreme=[[floor(50/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}
-->
<rolltemplate class="sheet-rolltemplate-coc-defence">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr><td class="template_label">Value:</td><td class="template_value">{{success}}/{{hard}}/{{extreme}}</td></tr>
        <tr><td class="template_label">Rolled:</td><td class="template_value">{{roll1}}, {{roll2}}, {{roll3}}</td></tr>
        <tr style="background:#DFF0D8;">
            <td class="template_label">+2:</td>
            <!-- Is roll2 less than roll1 -->
            {{#rollLess() roll2 roll1}}
              <!-- Is roll3 less than roll2-->
              {{#rollLess() roll3 roll2}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll2}}
              <!-- Is roll2 less than roll3 -->
              {{#rollLess() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollLess() roll2 roll3}}
              <!-- Are roll2 and roll3 equal-->
              {{#rollTotal() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollTotal() roll2 roll3}}
            {{/rollLess() roll2 roll1}}
            <!-- Is roll1 less than roll2 -->
            {{#rollLess() roll1 roll2}}
              <!-- Is roll3 less than roll1-->
              {{#rollLess() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll1}}
              <!-- Is roll1 less than roll3 -->
              {{#rollLess() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollLess() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollLess() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- Is roll3 less than roll1-->
              {{#rollLess() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll1}}
              <!-- Is roll1 less than roll3 -->
              {{#rollLess() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollLess() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#D9EDF7;">
            <td class="template_label">+1:</td>
            <!-- Is roll2 lower than roll1 -->
            {{#rollLess() roll2 roll1}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll2 1}}
                <td class="template_value"><b>Critical</b></td>
              {{/rollTotal() roll2 1}}
              <!-- Is Success -->
              {{#rollBetween() roll2 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll2 hard}}
                  <td class="template_value">Success</td>
                {{/rollGreater() roll2 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll2 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll2 extreme}}
                    <td class="template_value">Hard</td>
                  {{/rollGreater() roll2 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll2 2 extreme}}
                    <td class="template_value"><b>Extreme</b></td>
                  {{/rollBetween() roll2 2 extreme}}
                {{/rollBetween() roll2 2 hard}}
              {{/rollBetween() roll2 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll2 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll2 100}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollTotal() roll2 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 100}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll2 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll2 95}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollGreater() roll2 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 96}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll2 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll2 success}}
            {{/rollLess() roll2 roll1}}
            <!-- Is roll1 lower than roll2 -->
            {{#rollLess() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b>Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b>Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollLess() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b>Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b>Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#D3D3D3;">
            <td class="template_label">&nbsp;&nbsp;0:</td>
            <!-- 01 is always Critical -->
            {{#rollTotal() roll1 1}}
              <td class="template_value"><b>Critical</b></td>
            {{/rollTotal() roll1 1}}
            <!-- Is Success -->
            {{#rollBetween() roll1 2 success}}
              <!-- Is Standard -->
              {{#rollGreater() roll1 hard}}
                <td class="template_value">Success</td>
              {{/rollGreater() roll1 hard}}
              <!-- Is Hard or Extreme -->
              {{#rollBetween() roll1 2 hard}}
                <!-- Is Hard -->
                {{#rollGreater() roll1 extreme}}
                  <td class="template_value">Hard</td>
                {{/rollGreater() roll1 extreme}}
                <!-- Is Extreme -->
                {{#rollBetween() roll1 2 extreme}}
                  <td class="template_value"><b>Extreme</b></td>
                {{/rollBetween() roll1 2 extreme}}
              {{/rollBetween() roll1 2 hard}}
            {{/rollBetween() roll1 2 success}}
            <!-- Is Not Success -->
            {{#rollGreater() roll1 success}}
              <!-- Is skill >= 50 -->
              {{#rollGreater() success 49}}
                <!-- Is Fumble -->
                {{#rollTotal() roll1 100}}
                  <td class="template_value"><b>Fumble</b></td>
                {{/rollTotal() roll1 100}}
                <!-- Is Fail -->
                {{#rollLess() roll1 100}}
                  <td class="template_value">Fail</td>
                {{/rollLess() roll1 100}}
              {{/rollGreater() success 49}}
              <!-- Is skill < 50 -->
              {{#rollLess() success 50}}
                <!-- Is Fumble -->
                {{#rollGreater() roll1 95}}
                  <td class="template_value"><b>Fumble</b></td>
                {{/rollGreater() roll1 95}}
                <!-- Is Fail -->
                {{#rollLess() roll1 96}}
                  <td class="template_value">Fail</td>
                {{/rollLess() roll1 96}}
              {{/rollLess() success 50}}
            {{/rollGreater() roll1 success}}
        </tr>
        <tr style="background:#FCF8E3;">
            <td class="template_label">-1:</td>
            <!-- Is roll2 greater than roll1 -->
            {{#rollGreater() roll2 roll1}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll2 1}}
                <td class="template_value"><b>Critical</b></td>
              {{/rollTotal() roll2 1}}
              <!-- Is Success -->
              {{#rollBetween() roll2 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll2 hard}}
                  <td class="template_value">Success</td>
                {{/rollGreater() roll2 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll2 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll2 extreme}}
                    <td class="template_value">Hard</td>
                  {{/rollGreater() roll2 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll2 2 extreme}}
                    <td class="template_value"><b>Extreme</b></td>
                  {{/rollBetween() roll2 2 extreme}}
                {{/rollBetween() roll2 2 hard}}
              {{/rollBetween() roll2 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll2 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll2 100}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollTotal() roll2 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 100}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll2 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll2 95}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollGreater() roll2 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 96}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll2 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll2 success}}
            {{/rollGreater() roll2 roll1}}
            <!-- Is roll1 greater than roll2 -->
            {{#rollGreater() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b>Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b>Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollGreater() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b>Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b>Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#F2DEDE;">
            <td class="template_label">-2:</td>
            <!-- Is roll2 greater than roll1 -->
            {{#rollGreater() roll2 roll1}}
              <!-- Is roll3 greater than roll2-->
              {{#rollGreater() roll3 roll2}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll2}}
              <!-- Is roll2 greater than roll3 -->
              {{#rollGreater() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollGreater() roll2 roll3}}
              <!-- Are roll2 and roll3 equal-->
              {{#rollTotal() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollTotal() roll2 roll3}}
            {{/rollGreater() roll2 roll1}}
            <!-- Is roll1 greater than roll2 -->
            {{#rollGreater() roll1 roll2}}
              <!-- Is roll3 greater than roll1-->
              {{#rollGreater() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll1}}
              <!-- Is roll1 greater than roll3 -->
              {{#rollGreater() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollGreater() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollGreater() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- Is roll3 greater than roll1-->
              {{#rollGreater() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll1}}
              <!-- Is roll1 greater than roll3 -->
              {{#rollGreater() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollGreater() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr><td class="template_label">Def:</td><td class="template_value">{{defence}}</td></tr>
    </table>
</rolltemplate>

<!--
&{template:coc-defence-1} {{name=Test}} {{success=[[50]]}} {{hard=[[floor(50/2)]]}} {{extreme=[[floor(50/5)]]}} {{roll1=[[1d100]]}}
-->
<rolltemplate class="sheet-rolltemplate-coc-defence-1">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr><td class="template_label">Value:</td><td class="template_value">{{success}}/{{hard}}/{{extreme}}</td></tr>
        <tr><td class="template_label">Rolled:</td><td class="template_value">{{roll1}}</td></tr>
        <tr style="background:#BEBEBE;">
            <td class="template_label">Result:</td>
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td style="background:Lime;" class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td style="background:DarkGreen;" class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td style="background:Green;" class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td style="background:LightGreen;" class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td style="background:Red;" class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td style="background:Crimson;" class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td style="background:Red;" class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td style="background:Crimson;" class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
        </tr>
        <tr>
		<td class="template_label">Def:</td><td class="template_value">{{defence}}</td>
	</tr>
    </table>
</rolltemplate>

<!--
&{template:coc-vehicleattack} ---------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-vehicleattack">
    <table>
 		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr><td class="template_label">Value:</td><td class="template_value">{{success}}/{{hard}}/{{extreme}}</td></tr>
        <tr><td class="template_label">Rolled:</td><td class="template_value">{{roll1}}</td></tr>
        <tr style="background:#BEBEBE;">
            <td class="template_label">Result:</td>
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td style="background:Lime;" class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td style="background:DarkGreen;" class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td style="background:Green;" class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td style="background:LightGreen;" class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td style="background:Red;" class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td style="background:Crimson;" class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td style="background:Red;" class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td style="background:Crimson;" class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
        </tr>
        <tr>
		<td class="template_label">Build Dam:</td><td class="template_value">{{builddam}}</td>
	</tr>
    </table>
</rolltemplate>

<!--
&{template:coc-defence-2} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-defence-2">
    <table>
 		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr>
		<td class="template_label">Def:</td><td class="template_value">{{defence}}</td>
	</tr>
    </table>
</rolltemplate>

    <!--
&{template:coc-minionattack-} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-minionattack">

    <table>
        <caption>{{name}}</caption>
        <tr><td class="template_label" data-i18n="value">Value:</td><td class="template_value">{{success}}/{{hard}}/{{extreme}}</td></tr>
        <tr><td class="template_label" data-i18n="rolled">Rolled:</td><td class="template_value">{{roll1}}</td></tr>
        <tr style="background:#BEBEBE;">
            <td class="template_label" data-i18n="result">Result:</td>
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td style="background:Lime;" class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td style="background:DarkGreen;" class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td style="background:Green;" class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td style="background:LightGreen;" class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td style="background:Red;" class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td style="background:Crimson;" class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td style="background:Red;" class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td style="background:Crimson;" class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
        </tr>
        <tr>
			<td class="template_label" data-i18n="dam">Dam:</td><td class="template_value">{{damage}}</td>
		</tr>
    </table>
</rolltemplate>

<!--
&{template:coc-miniondef} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-miniondef">
    <table>
 		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr>
		<td class="template_label">Def:</td><td class="template_value">{{defence}}</td>
	</tr>
    </table>
</rolltemplate>

<!--
&{template:coc} {{name=Test}} {{success=[[50]]}} {{hard=[[floor(50/2)]]}} {{extreme=[[floor(50/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr>
            <td class="template_label" data-i18n="value">Value:</td>
            <td class="template_value">{{success}}/{{hard}}/{{extreme}}</td>
        </tr>
        <tr>
            <td class="template_label" data-i18n="rolled">Rolled:</td>
            <td class="template_value">{{roll1}}, {{roll2}}, {{roll3}}</td>
        </tr>
        <tr style="background:#DFF0D8;">
            <td class="template_label">+2:</td>
            <!-- Is roll2 less than roll1 -->
            {{#rollLess() roll2 roll1}}
              <!-- Is roll3 less than roll2-->
              {{#rollLess() roll3 roll2}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll2}}
              <!-- Is roll2 less than roll3 -->
              {{#rollLess() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollLess() roll2 roll3}}
              <!-- Are roll2 and roll3 equal-->
              {{#rollTotal() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollTotal() roll2 roll3}}
            {{/rollLess() roll2 roll1}}
            <!-- Is roll1 less than roll2 -->
            {{#rollLess() roll1 roll2}}
              <!-- Is roll3 less than roll1-->
              {{#rollLess() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll1}}
              <!-- Is roll1 less than roll3 -->
              {{#rollLess() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollLess() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollLess() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- Is roll3 less than roll1-->
              {{#rollLess() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll1}}
              <!-- Is roll1 less than roll3 -->
              {{#rollLess() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollLess() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#D9EDF7;">
            <td class="template_label">+1:</td>
            <!-- Is roll2 lower than roll1 -->
            {{#rollLess() roll2 roll1}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll2 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll2 1}}
              <!-- Is Success -->
              {{#rollBetween() roll2 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll2 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll2 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll2 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll2 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll2 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll2 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll2 2 extreme}}
                {{/rollBetween() roll2 2 hard}}
              {{/rollBetween() roll2 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll2 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll2 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll2 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll2 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll2 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll2 success}}
            {{/rollLess() roll2 roll1}}
            <!-- Is roll1 lower than roll2 -->
            {{#rollLess() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollLess() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#D3D3D3;">
            <td class="template_label">&nbsp;&nbsp;0:</td>
            <!-- 01 is always Critical -->
            {{#rollTotal() roll1 1}}
              <td class="template_value"><b data-i18n="critical">Critical</b></td>
            {{/rollTotal() roll1 1}}
            <!-- Is Success -->
            {{#rollBetween() roll1 2 success}}
              <!-- Is Standard -->
              {{#rollGreater() roll1 hard}}
                <td class="template_value" data-i18n="success">Success</td>
              {{/rollGreater() roll1 hard}}
              <!-- Is Hard or Extreme -->
              {{#rollBetween() roll1 2 hard}}
                <!-- Is Hard -->
                {{#rollGreater() roll1 extreme}}
                  <td class="template_value" data-i18n="hard">Hard</td>
                {{/rollGreater() roll1 extreme}}
                <!-- Is Extreme -->
                {{#rollBetween() roll1 2 extreme}}
                  <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                {{/rollBetween() roll1 2 extreme}}
              {{/rollBetween() roll1 2 hard}}
            {{/rollBetween() roll1 2 success}}
            <!-- Is Not Success -->
            {{#rollGreater() roll1 success}}
              <!-- Is skill >= 50 -->
              {{#rollGreater() success 49}}
                <!-- Is Fumble -->
                {{#rollTotal() roll1 100}}
                  <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                {{/rollTotal() roll1 100}}
                <!-- Is Fail -->
                {{#rollLess() roll1 100}}
                  <td class="template_value" data-i18n="fail">Fail</td>
                {{/rollLess() roll1 100}}
              {{/rollGreater() success 49}}
              <!-- Is skill < 50 -->
              {{#rollLess() success 50}}
                <!-- Is Fumble -->
                {{#rollGreater() roll1 95}}
                  <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                {{/rollGreater() roll1 95}}
                <!-- Is Fail -->
                {{#rollLess() roll1 96}}
                  <td class="template_value" data-i18n="fail">Fail</td>
                {{/rollLess() roll1 96}}
              {{/rollLess() success 50}}
            {{/rollGreater() roll1 success}}
        </tr>
        <tr style="background:#FCF8E3;">
            <td class="template_label">-1:</td>
            <!-- Is roll2 greater than roll1 -->
            {{#rollGreater() roll2 roll1}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll2 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll2 1}}
              <!-- Is Success -->
              {{#rollBetween() roll2 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll2 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll2 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll2 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll2 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll2 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll2 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll2 2 extreme}}
                {{/rollBetween() roll2 2 hard}}
              {{/rollBetween() roll2 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll2 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll2 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll2 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll2 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll2 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll2 success}}
            {{/rollGreater() roll2 roll1}}
            <!-- Is roll1 greater than roll2 -->
            {{#rollGreater() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollGreater() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#F2DEDE;">
            <td class="template_label">-2:</td>
            <!-- Is roll2 greater than roll1 -->
            {{#rollGreater() roll2 roll1}}
              <!-- Is roll3 greater than roll2-->
              {{#rollGreater() roll3 roll2}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll2}}
              <!-- Is roll2 greater than roll3 -->
              {{#rollGreater() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollGreater() roll2 roll3}}
              <!-- Are roll2 and roll3 equal-->
              {{#rollTotal() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollTotal() roll2 roll3}}
            {{/rollGreater() roll2 roll1}}
            <!-- Is roll1 greater than roll2 -->
            {{#rollGreater() roll1 roll2}}
              <!-- Is roll3 greater than roll1-->
              {{#rollGreater() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll1}}
              <!-- Is roll1 greater than roll3 -->
              {{#rollGreater() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollGreater() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollGreater() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- Is roll3 greater than roll1-->
              {{#rollGreater() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll1}}
              <!-- Is roll1 greater than roll3 -->
              {{#rollGreater() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollGreater() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollTotal() roll1 roll2}}
        </tr>
    </table>
</rolltemplate>

<!--
&{template:coc-bonus} {{name=Test}} {{success=[[50]]}} {{hard=[[floor(50/2)]]}} {{extreme=[[floor(50/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-bonus">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr>
            <td class="template_label" data-i18n="value">Value:</td>
            <td class="template_value">{{success}}/{{hard}}/{{extreme}}</td>
        </tr>
        <tr>
            <td class="template_label" data-i18n="rolled">Rolled:</td>
            <td class="template_value">{{roll1}}, {{roll2}}</td>
        </tr>
         <tr style="background:#D9EDF7;">
            <td class="template_label">+1:</td>
            <!-- Is roll2 lower than roll1 -->
            {{#rollLess() roll2 roll1}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll2 1}}
                <td class="template_value_critical"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll2 1}}
              <!-- Is Success -->
              {{#rollBetween() roll2 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll2 hard}}
                  <td class="template_value_success" data-i18n="success">Success</td>
                {{/rollGreater() roll2 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll2 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll2 extreme}}
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll2 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll2 2 extreme}}
                    <td class="template_value_extreme"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll2 2 extreme}}
                {{/rollBetween() roll2 2 hard}}
              {{/rollBetween() roll2 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll2 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll2 100}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll2 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 100}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll2 95}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll2 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 96}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll2 success}}
            {{/rollLess() roll2 roll1}}
            <!-- Is roll1 lower than roll2 -->
            {{#rollLess() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value_critical"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value_success" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value_extreme"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollLess() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value_critical"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value_success" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value_extreme"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#D3D3D3;">
            <td class="template_label">&nbsp;&nbsp;0:</td>
            <!-- 01 is always Critical -->
            {{#rollTotal() roll1 1}}
              <td class="template_value_critical"><b data-i18n="critical">Critical</b></td>
            {{/rollTotal() roll1 1}}
            <!-- Is Success -->
            {{#rollBetween() roll1 2 success}}
              <!-- Is Standard -->
              {{#rollGreater() roll1 hard}}
                <td class="template_value_success" data-i18n="success">Success</td>
              {{/rollGreater() roll1 hard}}
              <!-- Is Hard or Extreme -->
              {{#rollBetween() roll1 2 hard}}
                <!-- Is Hard -->
                {{#rollGreater() roll1 extreme}}
                  <td class="template_value_hard" data-i18n="hard">Hard</td>
                {{/rollGreater() roll1 extreme}}
                <!-- Is Extreme -->
                {{#rollBetween() roll1 2 extreme}}
                  <td class="template_value_extreme"><b data-i18n="extreme">Extreme</b></td>
                {{/rollBetween() roll1 2 extreme}}
              {{/rollBetween() roll1 2 hard}}
            {{/rollBetween() roll1 2 success}}
            <!-- Is Not Success -->
            {{#rollGreater() roll1 success}}
              <!-- Is skill >= 50 -->
              {{#rollGreater() success 49}}
                <!-- Is Fumble -->
                {{#rollTotal() roll1 100}}
                  <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                {{/rollTotal() roll1 100}}
                <!-- Is Fail -->
                {{#rollLess() roll1 100}}
                  <td class="template_value_fail" data-i18n="fail">Fail</td>
                {{/rollLess() roll1 100}}
              {{/rollGreater() success 49}}
              <!-- Is skill < 50 -->
              {{#rollLess() success 50}}
                <!-- Is Fumble -->
                {{#rollGreater() roll1 95}}
                  <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                {{/rollGreater() roll1 95}}
                <!-- Is Fail -->
                {{#rollLess() roll1 96}}
                  <td class="template_value_fail" data-i18n="fail">Fail</td>
                {{/rollLess() roll1 96}}
              {{/rollLess() success 50}}
            {{/rollGreater() roll1 success}}
        </tr>
    </table>
</rolltemplate>

<!--
&{template:coc-penalty} {{name=Test}} {{success=[[50]]}} {{hard=[[floor(50/2)]]}} {{extreme=[[floor(50/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-penalty">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr>
            <td class="template_label" data-i18n="value">Value:</td>
            <td class="template_value">{{success}}/{{hard}}/{{extreme}}</td>
        </tr>
        <tr>
            <td class="template_label" data-i18n="rolled">Rolled:</td>
            <td class="template_value">{{roll1}}, {{roll2}}</td>
        </tr>
        <tr style="background:#D3D3D3;">
            <td class="template_label">&nbsp;&nbsp;0:</td>
            <!-- 01 is always Critical -->
            {{#rollTotal() roll1 1}}
              <td class="template_value_critical"><b data-i18n="critical">Critical</b></td>
            {{/rollTotal() roll1 1}}
            <!-- Is Success -->
            {{#rollBetween() roll1 2 success}}
              <!-- Is Standard -->
              {{#rollGreater() roll1 hard}}
                <td class="template_value_success" data-i18n="success">Success</td>
              {{/rollGreater() roll1 hard}}
              <!-- Is Hard or Extreme -->
              {{#rollBetween() roll1 2 hard}}
                <!-- Is Hard -->
                {{#rollGreater() roll1 extreme}}
                  <td class="template_value_hard" data-i18n="hard">Hard</td>
                {{/rollGreater() roll1 extreme}}
                <!-- Is Extreme -->
                {{#rollBetween() roll1 2 extreme}}
                  <td class="template_value_extreme"><b data-i18n="extreme">Extreme</b></td>
                {{/rollBetween() roll1 2 extreme}}
              {{/rollBetween() roll1 2 hard}}
            {{/rollBetween() roll1 2 success}}
            <!-- Is Not Success -->
            {{#rollGreater() roll1 success}}
              <!-- Is skill >= 50 -->
              {{#rollGreater() success 49}}
                <!-- Is Fumble -->
                {{#rollTotal() roll1 100}}
                  <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                {{/rollTotal() roll1 100}}
                <!-- Is Fail -->
                {{#rollLess() roll1 100}}
                  <td class="template_value_fail" data-i18n="fail">Fail</td>
                {{/rollLess() roll1 100}}
              {{/rollGreater() success 49}}
              <!-- Is skill < 50 -->
              {{#rollLess() success 50}}
                <!-- Is Fumble -->
                {{#rollGreater() roll1 95}}
                  <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                {{/rollGreater() roll1 95}}
                <!-- Is Fail -->
                {{#rollLess() roll1 96}}
                  <td class="template_value_fail" data-i18n="fail">Fail</td>
                {{/rollLess() roll1 96}}
              {{/rollLess() success 50}}
            {{/rollGreater() roll1 success}}
        </tr>
        <tr style="background:#FCF8E3;">
            <td class="template_label">-1:</td>
            <!-- Is roll2 greater than roll1 -->
            {{#rollGreater() roll2 roll1}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll2 1}}
                <td class="template_value_critical"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll2 1}}
              <!-- Is Success -->
              {{#rollBetween() roll2 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll2 hard}}
                  <td class="template_value_success" data-i18n="success">Success</td>
                {{/rollGreater() roll2 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll2 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll2 extreme}}
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll2 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll2 2 extreme}}
                    <td class="template_value_extreme"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll2 2 extreme}}
                {{/rollBetween() roll2 2 hard}}
              {{/rollBetween() roll2 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll2 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll2 100}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll2 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 100}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll2 95}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll2 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 96}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll2 success}}
            {{/rollGreater() roll2 roll1}}
            <!-- Is roll1 greater than roll2 -->
            {{#rollGreater() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value_critical"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value_success" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value_extreme"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollGreater() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value_critical"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value_success" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value_extreme"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollTotal() roll1 roll2}}
        </tr>

    </table>
</rolltemplate>

<!--
&{template:coc-attack} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-attack">
    <table>
        {{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr><td class="template_label" data-i18n="value">Value:</td><td class="template_value">{{success}}/{{hard}}/{{extreme}}</td></tr>
        {{#malf}}
            <tr><td class="template_label" data-i18n="malf">Malf:</td><td class="template_value">{{malf}}</td></tr>
        {{/malf}}
        <tr><td class="template_label" data-i18n="rolled">Rolled:</td><td class="template_value">{{roll1}}, {{roll2}}, {{roll3}}</td></tr>
        <tr style="background:#DFF0D8;">
            <td class="template_label">+2:</td>
            <!-- Is roll2 less than roll1 -->
            {{#rollLess() roll2 roll1}}
              <!-- Is roll3 less than roll2-->
              {{#rollLess() roll3 roll2}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll2}}
              <!-- Is roll2 less than roll3 -->
              {{#rollLess() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollLess() roll2 roll3}}
              <!-- Are roll2 and roll3 equal-->
              {{#rollTotal() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollTotal() roll2 roll3}}
            {{/rollLess() roll2 roll1}}
            <!-- Is roll1 less than roll2 -->
            {{#rollLess() roll1 roll2}}
              <!-- Is roll3 less than roll1-->
              {{#rollLess() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll1}}
              <!-- Is roll1 less than roll3 -->
              {{#rollLess() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollLess() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollLess() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- Is roll3 less than roll1-->
              {{#rollLess() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll1}}
              <!-- Is roll1 less than roll3 -->
              {{#rollLess() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollLess() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#D9EDF7;">
            <td class="template_label">+1:</td>
            <!-- Is roll2 lower than roll1 -->
            {{#rollLess() roll2 roll1}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll2 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll2 1}}
              <!-- Is Success -->
              {{#rollBetween() roll2 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll2 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll2 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll2 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll2 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll2 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll2 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll2 2 extreme}}
                {{/rollBetween() roll2 2 hard}}
              {{/rollBetween() roll2 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll2 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll2 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll2 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll2 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll2 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll2 success}}
            {{/rollLess() roll2 roll1}}
            <!-- Is roll1 lower than roll2 -->
            {{#rollLess() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollLess() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#D3D3D3;">
            <td class="template_label">&nbsp;&nbsp;0:</td>
            <!-- 01 is always Critical -->
            {{#rollTotal() roll1 1}}
              <td class="template_value"><b data-i18n="critical">Critical</b></td>
            {{/rollTotal() roll1 1}}
            <!-- Is Success -->
            {{#rollBetween() roll1 2 success}}
              <!-- Is Standard -->
              {{#rollGreater() roll1 hard}}
                <td class="template_value" data-i18n="success">Success</td>
              {{/rollGreater() roll1 hard}}
              <!-- Is Hard or Extreme -->
              {{#rollBetween() roll1 2 hard}}
                <!-- Is Hard -->
                {{#rollGreater() roll1 extreme}}
                  <td class="template_value" data-i18n="hard">Hard</td>
                {{/rollGreater() roll1 extreme}}
                <!-- Is Extreme -->
                {{#rollBetween() roll1 2 extreme}}
                  <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                {{/rollBetween() roll1 2 extreme}}
              {{/rollBetween() roll1 2 hard}}
            {{/rollBetween() roll1 2 success}}
            <!-- Is Not Success -->
            {{#rollGreater() roll1 success}}
              <!-- Is skill >= 50 -->
              {{#rollGreater() success 49}}
                <!-- Is Fumble -->
                {{#rollTotal() roll1 100}}
                  <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                {{/rollTotal() roll1 100}}
                <!-- Is Fail -->
                {{#rollLess() roll1 100}}
                  <td class="template_value" data-i18n="fail">Fail</td>
                {{/rollLess() roll1 100}}
              {{/rollGreater() success 49}}
              <!-- Is skill < 50 -->
              {{#rollLess() success 50}}
                <!-- Is Fumble -->
                {{#rollGreater() roll1 95}}
                  <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                {{/rollGreater() roll1 95}}
                <!-- Is Fail -->
                {{#rollLess() roll1 96}}
                  <td class="template_value" data-i18n="fail">Fail</td>
                {{/rollLess() roll1 96}}
              {{/rollLess() success 50}}
            {{/rollGreater() roll1 success}}
        </tr>
        <tr style="background:#FCF8E3;">
            <td class="template_label">-1:</td>
            <!-- Is roll2 greater than roll1 -->
            {{#rollGreater() roll2 roll1}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll2 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll2 1}}
              <!-- Is Success -->
              {{#rollBetween() roll2 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll2 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll2 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll2 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll2 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll2 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll2 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll2 2 extreme}}
                {{/rollBetween() roll2 2 hard}}
              {{/rollBetween() roll2 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll2 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll2 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll2 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll2 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll2 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll2 success}}
            {{/rollGreater() roll2 roll1}}
            <!-- Is roll1 greater than roll2 -->
            {{#rollGreater() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollGreater() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#F2DEDE;">
            <td class="template_label">-2:</td>
            <!-- Is roll2 greater than roll1 -->
            {{#rollGreater() roll2 roll1}}
              <!-- Is roll3 greater than roll2-->
              {{#rollGreater() roll3 roll2}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll2}}
              <!-- Is roll2 greater than roll3 -->
              {{#rollGreater() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollGreater() roll2 roll3}}
              <!-- Are roll2 and roll3 equal-->
              {{#rollTotal() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollTotal() roll2 roll3}}
            {{/rollGreater() roll2 roll1}}
            <!-- Is roll1 greater than roll2 -->
            {{#rollGreater() roll1 roll2}}
              <!-- Is roll3 greater than roll1-->
              {{#rollGreater() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll1}}
              <!-- Is roll1 greater than roll3 -->
              {{#rollGreater() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollGreater() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollGreater() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- Is roll3 greater than roll1-->
              {{#rollGreater() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll1}}
              <!-- Is roll1 greater than roll3 -->
              {{#rollGreater() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollGreater() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr><td class="template_label" data-i18n="dam">Dam:</td><td class="template_value">{{damage}}</td></tr>
    </table>
</rolltemplate>

<!--  Smaller Template
&{template:coc-1} {{name=Test}} {{modifier=[[10]]}} {{success=[[50]]}} {{hard=[[floor(50/2)]]}} {{extreme=[[floor(50/5)]]}} {{roll1=[[1d100]]}}---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-1">
    <table>
        {{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}

        <tr>
            <td class="template_label" data-i18n="value">Value:</td>
            <td class="template_value">{{success}}/{{hard}}/{{extreme}}</td>
        </tr>

        <tr>
            <td class="template_label" data-i18n="rolled">Rolled:</td>
            <td class="template_value">{{roll1}}</td>
        </tr>

        <!-- Results Section -->

        {{#rollTotal() roll1 1}}
        <tr class="template_row_background">
            <td class="template_label" data-i18n="result">Result:</td>
            <td class="template_value_critical" data-i18n="critical">Critical</td>
        </tr>
        {{/rollTotal() roll1 1}}

        {{#rollBetween() roll1 2 success}}
            {{#rollGreater() roll1 hard}}
            <tr class="template_row_background">
                <td class="template_label" data-i18n="result">Result:</td>
                <td class="template_value_success" data-i18n="success">Success</td>
            </tr>
            {{/rollGreater() roll1 hard}}

            {{#rollBetween() roll1 2 hard}}
                {{#rollGreater() roll1 extreme}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                </tr>
                {{/rollGreater() roll1 extreme}}

                {{#rollBetween() roll1 2 extreme}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_extreme" data-i18n="extreme">Extreme</td>
                </tr>
                {{/rollBetween() roll1 2 extreme}}
            {{/rollBetween() roll1 2 hard}}
        {{/rollBetween() roll1 2 success}}

        {{#rollGreater() roll1 success}}
            {{#rollGreater() success 49}}
                {{#rollTotal() roll1 100}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fumble" data-i18n="fumble">Fumble</td>
                </tr>
                {{/rollTotal() roll1 100}}

                {{#rollLess() roll1 100}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                </tr>
                {{/rollLess() roll1 100}}
            {{/rollGreater() success 49}}

            {{#rollLess() success 50}}
                {{#rollGreater() roll1 95}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                </tr>
                {{/rollGreater() roll1 95}}

                {{#rollLess() roll1 96}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                </tr>
                {{/rollLess() roll1 96}}
            {{/rollLess() success 50}}
        {{/rollGreater() roll1 success}}

    </table>
</rolltemplate>

<!--
&{template:coc-attack-1} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-attack-1">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}

		<tr>
            <td class="template_label" data-i18n="value">Value:</td>
            <td class="template_value">{{success}}/{{hard}}/{{extreme}}</td>
        </tr>

        {{#malf}}
        <tr>
            <td class="template_label" data-i18n="malf">Malf:</td>
            <td class="template_value">{{malf}}</td>
        </tr>
        {{/malf}}

        <tr>
            <td class="template_label" data-i18n="rolled">Rolled:</td>
            <td class="template_value">{{roll1}}</td>
        </tr>

        <!-- Results Row(s) - Each condition outputs a full <tr> -->

        {{#rollTotal() roll1 1}}
        <tr class="template_row_background">
            <td class="template_label" data-i18n="result">Result:</td>
            <td class="template_value_critical" data-i18n="critical">Critical</td>
        </tr>
        {{/rollTotal() roll1 1}}

        {{#rollBetween() roll1 2 success}}
            {{#rollGreater() roll1 hard}}
            <tr class="template_row_background">
                <td class="template_label" data-i18n="result">Result:</td>
                <td class="template_value_success" data-i18n="success">Success</td>
            </tr>
            {{/rollGreater() roll1 hard}}

            {{#rollBetween() roll1 2 hard}}
                {{#rollGreater() roll1 extreme}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                </tr>
                {{/rollGreater() roll1 extreme}}

                {{#rollBetween() roll1 2 extreme}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_extreme" data-i18n="extreme">Extreme</td>
                </tr>
                {{/rollBetween() roll1 2 extreme}}
            {{/rollBetween() roll1 2 hard}}
        {{/rollBetween() roll1 2 success}}

        {{#rollGreater() roll1 success}}
            {{#rollGreater() success 49}}
                {{#rollTotal() roll1 100}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fumble" data-i18n="fumble">Fumble</td>
                </tr>
                {{/rollTotal() roll1 100}}

                {{#rollLess() roll1 100}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                </tr>
                {{/rollLess() roll1 100}}
            {{/rollGreater() success 49}}

            {{#rollLess() success 50}}
                {{#rollGreater() roll1 95}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fumble" data-i18n="fumble">Fumble</td>
                </tr>
                {{/rollGreater() roll1 95}}

                {{#rollLess() roll1 96}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                </tr>
                {{/rollLess() roll1 96}}
            {{/rollLess() success 50}}
        {{/rollGreater() roll1 success}}

        <!-- Damage and Other Info -->

        <tr>
            <td class="template_label" data-i18n="dam">Dam:</td>
            <td class="template_value">{{damage}}</td>
        </tr>

        {{#rollTotal() roll1 1}}
        <tr>
            <td class="template_label" data-i18n="extreme-damage">Extreme Dam:</td>
            <td class="template_value">{{extremedamage}}</td>
        </tr>
        {{/rollTotal() roll1 1}}

        {{#rollBetween() roll1 2 extreme}}
        <tr>
            <td class="template_label" data-i18n="extreme-damage">Extreme Dam:</td>
            <td class="template_value">{{extremedamage}}</td>
        </tr>
        {{/rollBetween() roll1 2 extreme}}

        {{#^rollTotal() strain 0}}
        <tr>
            <td class="template_label" data-i18n="strain">Strain:</td>
            <td class="template_value">{{strain}}</td>
        </tr>
        {{/^rollTotal() strain 0}}

    </table>
</rolltemplate>

<!--
&{template:coc-attack-1-impale} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-attack-1-impale">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}

		<tr>
            <td class="template_label" data-i18n="value">Value:</td>
            <td class="template_value">{{success}}/{{hard}}/{{extreme}}</td>
        </tr>

        {{#malf}}
        <tr>
            <td class="template_label" data-i18n="malf">Malf:</td>
            <td class="template_value">{{malf}}</td>
        </tr>
        {{/malf}}

        <tr>
            <td class="template_label" data-i18n="rolled">Rolled:</td>
            <td class="template_value">{{roll1}}</td>
        </tr>

        <!-- Results Row(s) - Each condition outputs a full <tr> -->

        {{#rollTotal() roll1 1}}
        <tr class="template_row_background">
            <td class="template_label" data-i18n="result">Result:</td>
            <td class="template_value_critical" data-i18n="critical">Critical</td>
        </tr>
        {{/rollTotal() roll1 1}}

        {{#rollBetween() roll1 2 success}}
            {{#rollGreater() roll1 hard}}
            <tr class="template_row_background">
                <td class="template_label" data-i18n="result">Result:</td>
                <td class="template_value_success" data-i18n="success">Success</td>
            </tr>
            {{/rollGreater() roll1 hard}}

            {{#rollBetween() roll1 2 hard}}
                {{#rollGreater() roll1 extreme}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                </tr>
                {{/rollGreater() roll1 extreme}}

                {{#rollBetween() roll1 2 extreme}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_extreme" data-i18n="extreme">Extreme</td>
                </tr>
                {{/rollBetween() roll1 2 extreme}}
            {{/rollBetween() roll1 2 hard}}
        {{/rollBetween() roll1 2 success}}

        {{#rollGreater() roll1 success}}
            {{#rollGreater() success 49}}
                {{#rollTotal() roll1 100}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fumble" data-i18n="fumble">Fumble</td>
                </tr>
                {{/rollTotal() roll1 100}}

                {{#rollLess() roll1 100}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                </tr>
                {{/rollLess() roll1 100}}
            {{/rollGreater() success 49}}

            {{#rollLess() success 50}}
                {{#rollGreater() roll1 95}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fumble" data-i18n="fumble">Fumble</td>
                </tr>
                {{/rollGreater() roll1 95}}

                {{#rollLess() roll1 96}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                </tr>
                {{/rollLess() roll1 96}}
            {{/rollLess() success 50}}
        {{/rollGreater() roll1 success}}

        <!-- Damage and Other Info -->

        <tr>
            <td class="template_label" data-i18n="dam">Dam:</td>
            <td class="template_value">{{damage}}</td>
        </tr>

        {{#rollTotal() roll1 1}}
        <tr>
            <td class="template_label" data-i18n="extreme-damage">Extreme Dam:</td>
            <td class="template_value">{{extremedamage}}</td>
        </tr>
        {{/rollTotal() roll1 1}}

        {{#rollBetween() roll1 2 extreme}}
        <tr>
            <td class="template_label" data-i18n="extreme-damage">Extreme Dam:</td>
            <td class="template_value">{{extremedamage}}</td>
        </tr>
        {{/rollBetween() roll1 2 extreme}}

        {{#^rollTotal() strain 0}}
        <tr>
            <td class="template_label" data-i18n="strain">Strain:</td>
            <td class="template_value">{{strain}}</td>
        </tr>
        {{/^rollTotal() strain 0}}

    </table>
</rolltemplate>

<!--
&{template:coc-attack-1-noimpale} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-attack-1-noimpale">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}

		<tr>
            <td class="template_label" data-i18n="value">Value:</td>
            <td class="template_value">{{success}}/{{hard}}/{{extreme}}</td>
        </tr>

        {{#malf}}
        <tr>
            <td class="template_label" data-i18n="malf">Malf:</td>
            <td class="template_value">{{malf}}</td>
        </tr>
        {{/malf}}

        <tr>
            <td class="template_label" data-i18n="rolled">Rolled:</td>
            <td class="template_value">{{roll1}}</td>
        </tr>

        <!-- Results Row(s) - Each condition outputs a full <tr> -->

        {{#rollTotal() roll1 1}}
        <tr class="template_row_background">
            <td class="template_label" data-i18n="result">Result:</td>
            <td class="template_value_critical" data-i18n="critical">Critical</td>
        </tr>
        {{/rollTotal() roll1 1}}

        {{#rollBetween() roll1 2 success}}
            {{#rollGreater() roll1 hard}}
            <tr class="template_row_background">
                <td class="template_label" data-i18n="result">Result:</td>
                <td class="template_value_success" data-i18n="success">Success</td>
            </tr>
            {{/rollGreater() roll1 hard}}

            {{#rollBetween() roll1 2 hard}}
                {{#rollGreater() roll1 extreme}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                </tr>
                {{/rollGreater() roll1 extreme}}

                {{#rollBetween() roll1 2 extreme}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_extreme" data-i18n="extreme">Extreme</td>
                </tr>
                {{/rollBetween() roll1 2 extreme}}
            {{/rollBetween() roll1 2 hard}}
        {{/rollBetween() roll1 2 success}}

        {{#rollGreater() roll1 success}}
            {{#rollGreater() success 49}}
                {{#rollTotal() roll1 100}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fumble" data-i18n="fumble">Fumble</td>
                </tr>
                {{/rollTotal() roll1 100}}

                {{#rollLess() roll1 100}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                </tr>
                {{/rollLess() roll1 100}}
            {{/rollGreater() success 49}}

            {{#rollLess() success 50}}
                {{#rollGreater() roll1 95}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fumble" data-i18n="fumble">Fumble</td>
                </tr>
                {{/rollGreater() roll1 95}}

                {{#rollLess() roll1 96}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                </tr>
                {{/rollLess() roll1 96}}
            {{/rollLess() success 50}}
        {{/rollGreater() roll1 success}}

        <!-- Damage and Other Info -->

        <!-- Show only damage on normal hit -->
        {{#rollGreater() roll1 extreme}}
        <tr>
			<td class="template_label" data-i18n="dam">Dam:</td>
			<td class="template_value">{{damage}}</td>
		</tr>
		{{/rollGreater() roll1 extreme}}

		<!-- Show only extreme damage if crit/extreme -->
		{{#rollTotal() roll1 1}}
		<tr>
			<td class="template_label" data-i18n="extreme-damage">Extreme Dam:</td>
			<td class="template_value">{{extremedamage}}</td>
		</tr>
		{{/rollTotal() roll1 1}}

		{{#rollBetween() roll1 2 extreme}}
		<tr>
			<td class="template_label" data-i18n="extreme-damage">Extreme Dam:</td>
			<td class="template_value">{{extremedamage}}</td>
		</tr>
		{{/rollBetween() roll1 2 extreme}}

        {{#^rollTotal() strain 0}}
        <tr>
            <td class="template_label" data-i18n="strain">Strain:</td>
            <td class="template_value">{{strain}}</td>
        </tr>
        {{/^rollTotal() strain 0}}

    </table>
</rolltemplate>

<!-- WORKERS -->
<script type="text/worker">
const debug_on = true;
const debug_on_trace = false;

// Maps //
const raceDataMap = {
  "alteri": {
    label: "Alteri",
    language: "Nualeth",
    stats: {
      str: { base: 15, max: 75 }, dex: { base: 15, max: 80 }, con: { base: 15, max: 75 },
      siz: { base: 40, max: 80 }, int: { base: 40, max: 80 }, edu: { base: 15, max: 80 },
      pow: { base: 15, max: 85 }, app: { base: 15, max: 85 }, mag: { base: 0, max: 80 }
    }
  },
  "draevi": {
    label: "Draevi",
    language: "Khevala",
    stats: {
      str: { base: 15, max: 70 }, dex: { base: 15, max: 80 }, con: { base: 15, max: 90 },
      siz: { base: 40, max: 80 }, int: { base: 40, max: 80 }, edu: { base: 15, max: 80 },
      pow: { base: 15, max: 80 }, app: { base: 15, max: 80 }, mag: { base: 0, max: 80 }
    }
  },
  "feran": {
    label: "Feran",
    language: "A",
    stats: {
      str: { base: 15, max: 80 }, dex: { base: 15, max: 90 }, con: { base: 15, max: 80 },
      siz: { base: 35, max: 70 }, int: { base: 40, max: 80 }, edu: { base: 15, max: 80 },
      pow: { base: 15, max: 80 }, app: { base: 15, max: 80 }, mag: { base: 0, max: 80 }
    }
  },
  "human": {
    label: "Human",
    language: "Caltheran",
    stats: {
      str: { base: 15, max: 80 }, dex: { base: 15, max: 80 }, con: { base: 15, max: 80 },
      siz: { base: 40, max: 80 }, int: { base: 40, max: 80 }, edu: { base: 15, max: 80 },
      pow: { base: 15, max: 80 }, app: { base: 15, max: 80 }, mag: { base: 0, max: 80 }
    }
  },
  "khadra": {
    label: "Khadra",
    language: "Nari",
    stats: {
      str: { base: 15, max: 90 }, dex: { base: 15, max: 70 }, con: { base: 15, max: 80 },
      siz: { base: 50, max: 90 }, int: { base: 40, max: 80 }, edu: { base: 15, max: 80 },
      pow: { base: 15, max: 80 }, app: { base: 15, max: 70 }, mag: { base: 0, max: 80 }
    }
  },
  "kitsu": {
    label: "Kitsu",
    language: "B",
    stats: {
      str: { base: 15, max: 75 }, dex: { base: 15, max: 80 }, con: { base: 15, max: 80 },
      siz: { base: 35, max: 75 }, int: { base: 40, max: 85 }, edu: { base: 15, max: 80 },
      pow: { base: 15, max: 80 }, app: { base: 15, max: 80 }, mag: { base: 0, max: 85 }
    }
  },
  "lyranni": {
    label: "Lyranni",
    language: "ThalResh",
    stats: {
      str: { base: 15, max: 70 }, dex: { base: 15, max: 80 }, con: { base: 15, max: 80 },
      siz: { base: 30, max: 70 }, int: { base: 40, max: 80 }, edu: { base: 15, max: 80 },
      pow: { base: 15, max: 90 }, app: { base: 15, max: 80 }, mag: { base: 0, max: 90 }
    }
  },
  "veyra": {
    label: "Veyra",
    language: "C",
    stats: {
      str: { base: 15, max: 80 }, dex: { base: 15, max: 80 }, con: { base: 15, max: 80 },
      siz: { base: 30, max: 60 }, int: { base: 40, max: 90 }, edu: { base: 40, max: 90 },
      pow: { base: 15, max: 80 }, app: { base: 15, max: 80 }, mag: { base: 0, max: 80 }
    }
  }
};

const skillMapTable = {
 "Archery": { label: "archery", base: "10", skill: "archery_skill_mdr", bonus: "archery_mdr", group: "Combat", notes: "Archery" },
 "Dodge (DEX/2)": { label: "dodge", base: "0", skill: "dodge_skill_mdr", bonus: "dodge_mdr", group: "Combat", notes: "Half of your DEX score" },
 "Gunnery": { label: "gunnery", base: "10", skill: "gunnery_skill_mdr", bonus: "gunnery_mdr", group: "Combat", notes: "Vehicle-mounted or automated weapons" },
 "Heavy Weapons": { label: "heavy_weapons", base: "10", skill: "heavy_weapons_skill_mdr", bonus: "heavy_weapons_mdr", group: "Combat", notes: "Heavy Weapons" },
 "Melee Weapons": { label: "melee_weapons", base: "20", skill: "melee_weapons_skill_mdr", bonus: "melee_weapons_mdr", group: "Combat", notes: "Melee Weapons" },
 "Pistols": { label: "firearms_handgun", base: "20", skill: "firearms_handgun_skill_mdr", bonus: "firearms_handgun_mdr", group: "Combat", notes: "Pistols" },
 "Rifles/Shotguns": { label: "firearms_rifle", base: "25", skill: "firearms_rifle_skill_mdr", bonus: "firearms_rifle_mdr", group: "Combat", notes: "Rifles/Shotguns" },
 "Submachine Guns (SMGs)": { label: "firearms_smg", base: "15", skill: "firearms_smg_skill_mdr", bonus: "firearms_smg_mdr", group: "Combat", notes: "Submachine Guns (SMGs)" },
 "Thrown Weapons": { label: "throw", base: "20", skill: "throw_skill_mdr", bonus: "throw_mdr", group: "Combat", notes: "Thrown Weapons" },
 "Unarmed": { label: "unarmed", base: "25", skill: "unarmed_skill_mdr", bonus: "unarmed_mdr", group: "Combat", notes: "Unarmed combat" },
 "Athletics": { label: "athletics", base: "20", skill: "athletics_skill_mdr", bonus: "athletics_mdr", group: "Physical", notes: "Running, jumping, climbing, endurance" },
 "Coordination": { label: "coordination", base: "20", skill: "coordination_skill_mdr", bonus: "coordination_mdr", group: "Physical", notes: "Balance, agility, acrobatics" },
 "Swim": { label: "swim", base: "20", skill: "swim_skill_mdr", bonus: "swim_mdr", group: "Physical", notes: "Swim" },
 "Alteration": { label: "magic_alteration", base: "0", skill: "magic_alteration_skill_mdr", bonus: "magic_alteration_mdr", group: "Magic", notes: "Enhances physical attributes or alters the physical world. Includes speed, strength, resilience, and spatial shifts." },
 "Elemental": { label: "magic_elemental", base: "0", skill: "magic_elemental_skill_mdr", bonus: "magic_elemental_mdr", group: "Magic", notes: "The art of shaping and controlling natural elements such as fire, water, air, and earth through arcane force. Focuses on raw power and environmental manipulation." },
 "Enchantment": { label: "magic_enchantment", base: "0", skill: "magic_enchantment_skill_mdr", bonus: "magic_enchantment_mdr", group: "Magic", notes: "Mental influencing magic that alters thoughts, emotions, or behavior. Includes charms, compulsions, and emotional sway." },
 "Illusion": { label: "magic_illusion", base: "0", skill: "magic_illusion_skill_mdr", bonus: "magic_illusion_mdr", group: "Magic", notes: "Magic of trickery and perception. Creates false images, alters appearances, or hides things through manipulation of the senses." },
 "Necromancy": { label: "magic_necromancy", base: "0", skill: "magic_necromancy_skill_mdr", bonus: "magic_necromancy_mdr", group: "Magic", notes: "Manipulates the forces of death and the soul. Involves raising the dead, draining life, or communicating with spirits of the deceased." },
 "Restoration": { label: "magic_restoration", base: "0", skill: "magic_restoration_skill_mdr", bonus: "magic_restoration_mdr", group: "Magic", notes: "Healing, cleansing, and regeneration magic that mends wounds, purifies corruption, or restores vitality." },
 "Summoning": { label: "magic_summoning", base: "0", skill: "magic_summoning_skill_mdr", bonus: "magic_summoning_mdr", group: "Magic", notes: "Calls forth spirits, creatures, or arcane constructs from beyond to aid, defend, or serve the caster." },
 "Technomancy": { label: "magic_technomancy", base: "0", skill: "magic_technomancy_skill_mdr", bonus: "magic_technomancy_mdr", group: "Magic", notes: "The fusion of magic with technology. Enables interaction with archanotech, digital constructs, and spell-driven machines." },
 "Warding": { label: "magic_warding", base: "0", skill: "magic_warding_skill_mdr", bonus: "magic_warding_mdr", group: "Magic", notes: "Protective magic used to shield, block, or dispel incoming threats both physical and magical." },
 "Universal": { label: "magic_universal", base: "0", skill: "magic_universal_skill_mdr", bonus: "magic_universal_mdr", group: "Magic", notes: "Covers basic arcane techniques used across traditions detecting, sensing, or disrupting magical phenomena." },
 "Archanotech": { label: "archanotech", base: "1", skill: "archanotech_skill_mdr", bonus: "archanotech_mdr", group: "Tech/Cyber", notes: "Construction, repair, and interfacing with arcane-tech hybrids" },
 "Computer Use": { label: "computer_use", base: "10", skill: "computer_use_skill_mdr", bonus: "computer_use_mdr", group: "Tech/Cyber", notes: "General software and system operation" },
 "Cybernetics": { label: "cybernetics", base: "1", skill: "cybernetics_skill_mdr", bonus: "cybernetics_mdr", group: "Tech/Cyber", notes: "Installing and maintaining cyberware" },
 "Demolitions": { label: "demolitions", base: "1", skill: "demolitions_skill_mdr", bonus: "demolitions_mdr", group: "Tech/Cyber", notes: "Demolitions" },
 "Electronics": { label: "electronics", base: "10", skill: "electronics_skill_mdr", bonus: "electronics_mdr", group: "Tech/Cyber", notes: "circuitry, electronic repair" },
 "Mechanics": { label: "mechanics", base: "10", skill: "mechanics_skill_mdr", bonus: "mechanics_mdr", group: "Tech/Cyber", notes: "Mechanics" },
 "Security Systems": { label: "security", base: "1", skill: "security_systems_skill_mdr", bonus: "security_systems_mdr", group: "Tech/Cyber", notes: "Understanding and bypassing surveillance, sensors, magitech security, and physical/digital alarm systems." },
 "Slicing": { label: "slicing", base: "5", skill: "slicing_skill_mdr", bonus: "slicing_mdr", group: "Tech/Cyber", notes: "Digital infiltration, cybersecurity" },
 "Drive (Ground Vehicles)": { label: "drive_auto", base: "20", skill: "drive_auto_skill_mdr", bonus: "drive_auto_mdr", group: "Pilot", notes: "Drive (Ground Vehicles)" },
 "Drone Operation": { label: "drone_operation", base: "10", skill: "drone_operation_skill_mdr", bonus: "drone_operation_mdr", group: "Pilot", notes: "Drone Operation" },
 "Pilot (Aircraft)": { label: "pilotaircraft", base: "1", skill: "pilotaircraft_skill_mdr", bonus: "pilotaircraft_mdr", group: "Pilot", notes: "Pilot (Aircraft)" },
 "Pilot (ARC)": { label: "pilotarc", base: "5", skill: "pilotarc_skill_mdr", bonus: "pilotarc_mdr", group: "Pilot", notes: "Pilot (ARC)" },
 "Pilot (Boat)": { label: "pilotboat", base: "1", skill: "pilotboat_skill_mdr", bonus: "pilotboat_mdr", group: "Pilot", notes: "Pilot (Boat)" },
 "Alchemy": { label: "alchemy", base: "1", skill: "alchemy_skill_mdr", bonus: "alchemy_mdr", group: "Science/Knowledge", notes: "Science (Alchemy)" },
 "Anthropology": { label: "anthropology", base: "1", skill: "anthropology_skill_mdr", bonus: "anthropology_mdr", group: "Science/Knowledge", notes: "Science(Anthropology)" },
 "Arcana": { label: "arcana", base: "5", skill: "arcana_skill_mdr", bonus: "arcana_mdr", group: "Science/Knowledge", notes: "Understanding of magical theory and principles" },
 "Archaeology": { label: "archaeology", base: "1", skill: "archaeology_skill_mdr", bonus: "archaeology_mdr", group: "Science/Knowledge", notes: "Science(Archaeology)" },
 "Architecture": { label: "architecture", base: "1", skill: "architecture_skill_mdr", bonus: "architecture_mdr", group: "Science/Knowledge", notes: "Architecture" },
 "Biology": { label: "biology", base: "1", skill: "biology_skill_mdr", bonus: "biology_mdr", group: "Science/Knowledge", notes: "Science (Biology)" },
 "Chemistry": { label: "chemistry", base: "1", skill: "chemistry_skill_mdr", bonus: "chemistry_mdr", group: "Science/Knowledge", notes: "Science (Chemistry)" },
 "Engineering": { label: "engineering", base: "1", skill: "engineering_skill_mdr", bonus: "engineering_mdr", group: "Science/Knowledge", notes: "Science (Engineering)" },
 "Forbidden Lore": { label: "forbidden_lore", base: "0", skill: "forbidden_lore_skill_mdr", bonus: "forbidden_lore_mdr", group: "Science/Knowledge", notes: "Cosmic horrors, veiled truths" },
 "History": { label: "history", base: "5", skill: "history_skill_mdr", bonus: "history_mdr", group: "Science/Knowledge", notes: "History" },
 "Investigation": { label: "investigation", base: "10", skill: "investigation_skill_mdr", bonus: "investigation_mdr", group: "Science/Knowledge", notes: "Used to reconstruct events, analyze clues, interpret evidence, and solve mysteries." },
 "Law": { label: "law", base: "5", skill: "law_skill_mdr", bonus: "law_mdr", group: "Science/Knowledge", notes: "Law" },
 "Medicine": { label: "medicine", base: "1", skill: "medicine_skill_mdr", bonus: "medicine_mdr", group: "Science/Knowledge", notes: "Medicine" },
 "Natural World": { label: "natural_world", base: "10", skill: "natural_world_skill_mdr", bonus: "natural_world_mdr", group: "Science/Knowledge", notes: "Natural World" },
 "Occult Lore": { label: "occult", base: "5", skill: "occult_skill_mdr", bonus: "occult_mdr", group: "Science/Knowledge", notes: "Non-practitioner knowledge of magic and the supernatural" },
 "Physics": { label: "physics", base: "1", skill: "physics_skill_mdr", bonus: "physics_mdr", group: "Science/Knowledge", notes: "Science (Physics)" },
 "Spirit Lore": { label: "spirit_lore", base: "5", skill: "spirit_lore_skill_mdr", bonus: "spirit_lore_mdr", group: "Science/Knowledge", notes: "Spirit Lore" },
 "Veil Lore": { label: "veil_lore", base: "5", skill: "veil_lore_skill_mdr", bonus: "veil_lore_mdr", group: "Science/Knowledge", notes: "Veil Lore" },
 "Bureaucracy": { label: "bureaucracy", base: "5", skill: "bureaucracy_skill_mdr", bonus: "bureaucracy_mdr", group: "Social", notes: "Understanding and navigating administrative, legal, and governmental systems." },
 "Chant": { label: "chant", base: "5", skill: "chant_skill_mdr", bonus: "chant_mdr", group: "Social", notes: "Chant" },
 "Charm": { label: "charm", base: "15", skill: "charm_skill_mdr", bonus: "charm_mdr", group: "Social", notes: "Charm" },
 "Dance": { label: "dance", base: "5", skill: "dance_skill_mdr", bonus: "dance_mdr", group: "Social", notes: "Performance (Dance)" },
 "Deception": { label: "deception", base: "5", skill: "deception_skill_mdr", bonus: "deception_mdr", group: "Social", notes: "Deception" },
 "Disguise": { label: "disguise", base: "5", skill: "disguise_skill_mdr", bonus: "disguise_mdr", group: "Social", notes: "Disguise" },
 "Etiquette (High Society)": { label: "etiquette_high_society", base: "10", skill: "etiquette_high_society_skill_mdr", bonus: "etiquette_high_society_mdr", group: "Social", notes: "Etiquette (High Society)" },
 "Etiquette (Lyranni)": { label: "etiquette_lyranni", base: "10", skill: "etiquette_lyranni_skill_mdr", bonus: "etiquette_lyranni_mdr", group: "Social", notes: "Etiquette (Lyranni)" },
 "Etiquette (Other)": { label: "etiquette_other", base: "10", skill: "etiquette_other_skill_mdr", bonus: "etiquette_other_mdr", group: "Social", notes: "Etiquette may be specialized: (Corporate), (Military), (Underworld), (Racial), etc." },
 "Forgery": { label: "forgery", base: "1", skill: "forgery_skill_mdr", bonus: "forgery_mdr", group: "Social", notes: "Creating falsified documents, IDs, credentials physical or digital." },
 "Impersonation": { label: "impersonation", base: "5", skill: "impersonation_skill_mdr", bonus: "impersonation_mdr", group: "Social", notes: "Performance (Impersonation)" },
 "Insight": { label: "insight", base: "10", skill: "insight_skill_mdr", bonus: "insight_mdr", group: "Social", notes: "Insight" },
 "Instrument": { label: "instrument", base: "5", skill: "instrument_skill_mdr", bonus: "instrument_mdr", group: "Social", notes: "Performance (Instrument)" },
 "Intimidate": { label: "intimidate", base: "15", skill: "intimidate_skill_mdr", bonus: "intimidate_mdr", group: "Social", notes: "Lying, bluffing, maintaining covers, and creating false narratives across a wide range of scenarios." },
 "Interrogation": { label: "interrogation", base: "5", skill: "interrogation_skill_mdr", bonus: "interrogation_mdr", group: "Social", notes: "Extracting information through questioning, pressure, or manipulation." },
 "Persuade": { label: "persuade", base: "10", skill: "persuade_skill_mdr", bonus: "persuade_mdr", group: "Social", notes: "Persuade" },
 "Singing": { label: "singing", base: "5", skill: "singing_skill_mdr", bonus: "singing_mdr", group: "Social", notes: "Performance (Singing)" },
 "Streetwise": { label: "streetwise", base: "10", skill: "streetwise_skill_mdr", bonus: "streetwise_mdr", group: "Social", notes: "Streetwise" },
 "Animal Handling": { label: "animalhandling", base: "5", skill: "animalhandling_skill_mdr", bonus: "animalhandling_mdr", group: "Survival", notes: "Animal Handling" },
 "First Aid": { label: "first_aid", base: "30", skill: "first_aid_skill_mdr", bonus: "first_aid_mdr", group: "Survival", notes: "First Aid" },
 "Listen": { label: "listen", base: "20", skill: "listen_skill_mdr", bonus: "listen_mdr", group: "Survival", notes: "Listen" },
 "Navigate": { label: "navigate", base: "10", skill: "navigate_skill_mdr", bonus: "navigate_mdr", group: "Survival", notes: "Navigate" },
 "Perception": { label: "perception", base: "25", skill: "perception_skill_mdr", bonus: "perception_mdr", group: "Survival", notes: "Perception" },
 "Sleight of Hand": { label: "sleight_of_hand", base: "10", skill: "sleight_of_hand_skill_mdr", bonus: "sleight_of_hand_mdr", group: "Survival", notes: "Sleight of Hand" },
 "Stealth": { label: "stealth", base: "20", skill: "stealth_skill_mdr", bonus: "stealth_mdr", group: "Survival", notes: "Stealth" },
 "Survival (Wilderness)": { label: "survival", base: "10", skill: "survival_skill_mdr", bonus: "survival_mdr", group: "Survival", notes: "Survival (Wilderness)" },
 "Track": { label: "track", base: "10", skill: "track_skill_mdr", bonus: "track_mdr", group: "Survival", notes: "Track" },
 "Language(Racial)": { label: "language_own", base: "75", skill: "language_own_skill_mdr", bonus: "language_own_mdr", group: "Language", notes: "Racial Language" },
 "Language(Caltheran)": { label: "language_caltheran", base: "0", skill: "language_caltheran_skill_mdr", bonus: "language_caltheran_mdr", group: "Language", notes: "Calthern language" }
};

const backgroundSkillMap = {
  alteri: {
    break_faced_radical: {
      deception: "Deception", persuade: "Persuade"
    },
    ghostline_runner: {
      slicing: "Slicing", streetwise: "Streetwise"
    },
    legacy_bearer: {
      history: "History", impersonation: "Impersonation"
    },
    soft_year_drifter: {
      insight: "Insight", stealth: "Stealth"
    },
    veilhaven_attendant: {
      arcana: "Arcana", disguise: "Disguise"
    }
  },
  draevi: {
    forgeblood_scavenger: {
      electronics: "Electronics", mechanics: "Mechanics"
    },
    horn_carved_wanderer: {
      navigate: "Navigate", survival: "Survival"
    },
    spiritbound_techshaper: {
      slicing: "Slicing", spirit_lore: "Spirit Lore"
    },
    tradition_keeper: {
      occult: "Occult Lore", veil_lore: "Veil Lore"
    },
    urban_tread: {
      athletics: "Athletics", streetwise: "Streetwise"
    }
  },
  human: {
    ash_war_refugee: {
      first_aid: "First Aid", insight: "Insight"
    },
    data_hatched: {
      alchemy: "Alchemy", anthropology: "Anthropology", archaeology: "Archaeology", architecture: "Architecture", biology: "Biology", chemistry: "Chemistry", engineering: "Engineering", medicine: "Medicine", physics: "Physics", slicing: "Slicing"
    },
    enclave_born: {
      etiquette_high_society: "Etiquette(H. Soc.)", persuade: "Persuade"
    },
    gutter_fire_youth: {
      stealth: "Stealth", streetwise: "Streetwise"
    },
    outpost_raised: {
      survival: "Survival(Wild)", firearms_rifle: "Rifle/Shotgun"
    },
    scavsteel_whelp: {
      electronics: "Electronics", mechanics: "Mechanics"
    }
  },
  lyranni: {
    aelvareth_devotee: {
      etiquette_lyranni: "Etiquette(Lyranni)", occult: "Occult Lore"
    },
    echoborne: {
      arcana: "Arcana", etiquette_lyranni: "Etiquette(Lyranni)"
    },
    glide_spire_scion: {
      persuade: "Persuade", streetwise: "Streetwise"
    },
    whisper_walker: {
      occult: "Occult Lore", perception: "Perception"
    },
    zurethkai_flameborn: {
      magic_technomancy: "Magic(Technomancy)", slicing: "Slicing"
    }
  }
};

const talentDataMap = {
  alteri: {
    second_skin: {
      name: "Second Skin",
      description: "You gain an additional Maska fully realized persona with a name, appearance, and backstory. Switching to this Mask takes 1 Action and no longer imposes Strain unless done under stress (GM discretion).",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    reflexive_shift: {
      name: "Reflexive Shift",
      description: "Once per scene, as a Reaction, rapidly alter your appearance (hair, skin tone, voice, etc.) to avoid identification. Grants a bonus die to Disguise or deception-based Deception. Costs 1d4 Strain.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    echoed_voice: {
      name: "Echoed Voice",
      description: "Once per session, mimic the voice and speech of someone known to you or studied for at least one full scene. Grants a bonus die to Performance (Impersonation) or any roll to pass as the individual.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    maskwrights_grace: {
      name: "Maskwrights Grace",
      description: "Choose one: gain +10% to Disguise, Insight, or Performance (Impersonation). This choice is permanent and may only be taken once.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    social_chameleon: {
      name: "Social Chameleon",
      description: "Use Charm in place of Deception or Persuade when navigating unfamiliar cultures or coded social environments.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    ghost_protocol: {
      name: "Ghost Protocol",
      description: "Once per session, erase your trail. Gain a bonus die to Stealth or Slicing when spoofing ID, bypassing basic surveillance, or escaping recognition. If followed by a successful Disguise, it leaves no trace.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    shaped_for_subtlety: {
      name: "Shaped for Subtlety",
      description: "Choose one: gain +10% to Stealth, Slicing, or Insight. This choice is permanent and may only be taken once.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    whisper_touched: {
      name: "Whisper-Touched",
      description: "Once per session, gain a bonus die when casting Illusion or Enchantment spells.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    grace_of_the_many: {
      name: "Grace of the Many",
      description: "Once per session, reroll a failed Disguise, Insight, or Stealth check. Take the better result.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
	facial_recalibration: {
      name: "Facial Recalibration",
      description: "Once per session, mimic a persons face, posture, and speech after observing them for at least one turn. Grants a bonus die to Disguise or Performance (Impersonation). Costs 1 Strain.",
      prerequisite: ["echoed_voice", "second_skin"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    adaptive_memory: {
      name: "Adaptive Memory",
      description: "Once per session, recall useful details from a person you've interacted with in person. Gain a bonus die to a social roll involving deception or impersonation with them or their associates.",
      prerequisite: ["social_chameleon", "maskwrights_grace"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    shift_reflex: {
      name: "Shift Reflex",
      description: "Once per scene, use a Reaction to confuse a target mid-scan or strike. Gain a bonus die to Dodge or Stealth.",
      prerequisite: ["reflexive_shift"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    deep_mask_integration: {
      name: "Deep Mask Integration",
      description: "Gain +10% to Disguise or Insight (your choice). You may maintain two active Masks and switch between them without prep or Strain outside combat.",
      prerequisite: ["second_skin"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    ghost_signature: {
      name: "Ghost Signature",
      description: "Once per session, spoof or bypass a low-grade biometric scan (e.g., facial recognition, voiceprint, retinal) with a bonus die to Slicing or Electronics.",
      prerequisite: ["ghost_protocol"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    mirror_weave: {
      name: "Mirror Weave",
      description: "Once per session, illusions or enchantments you cast can deceive digital or mechanical observers. Costs 1 Strain per additional ally affected. Cannot deceive hostile systems.",
      prerequisite: ["whisper_touched"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    persona_anchor: {
      name: "Persona Anchor",
      description: "Choose one: gain +10% to Performance (Impersonation), Arcana, or Slicing. Reflects how your persona enhances certain skills.",
      prerequisite: ["grace_of_the_many"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    veil_echo_memory: {
      name: "Veil Echo Memory",
      description: "Once per session, gain a sensory impression or memory from a place or person you've touched. Grants a bonus die to the next Arcana, Insight, or Occult Lore roll. Costs 1 Strain.",
      prerequisite: ["whisper_touched", "ghost_protocol"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    silent_archive: {
      name: "Silent Archive",
      description: "Store a secondary identity with full recall: appearance, history, contacts, accent, and routine. Once per session, switch instantly. Costs 1d4 Strain if used during a scene. Free outside scenes.",
      prerequisite: ["deep_mask_integration"],
      tier: 2,
      cost: "20",
      capstone: false
    },
	perfect_mimicry: {
      name: "Perfect Mimicry",
      description: "Once per session, flawlessly replicate a persons full persona (appearance, mannerisms, tone). Grants a bonus die to Disguise, Performance, or Deception.",
      prerequisite: ["facial_recalibration", "echoed_voice"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    biometric_phantom: {
      name: "Biometric Phantom",
      description: "Once per session, spoof or override corporate-grade biometric or magitech ID systems if you've had contact with the target. Bonus die to Slicing or Electronics.",
      prerequisite: ["ghost_signature"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    memory_graft: {
      name: "Memory Graft",
      description: "Once per session, tap into a stored Masks memory for insight. Gain a bonus die to one Arcana, Insight, or Performance (Impersonation) roll tied to that personas experience.",
      prerequisite: ["deep_mask_integration"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    veil_shaped_will: {
      name: "Veil-Shaped Will",
      description: "Once per session, reroll a failed Illusion, Alteration, or Enchantment spellcasting. If successful, reduce the Strain die by one step (e.g., 1d6  1d4).",
      prerequisite: ["mirror_weave", "whisper_touched"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    social_echo: {
      name: "Social Echo",
      description: "Once per session, adapt your behavior to match a targets subconscious expectations. Gain a bonus die to Charm, Deception, or Persuade. Costs 1 Strain if targeting two or more people.",
      prerequisite: ["social_chameleon", "adaptive_memory"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    identity_cascade: {
      name: "Identity Cascade",
      description: "Once per scene, switch Masks mid-encounter (even mid-dialogue or mid-combat). Grants a bonus die to Disguise or Insight. Costs 1d4 Strain if under pressure or direct observation.",
      prerequisite: ["deep_mask_integration"],
      tier: 3,
      cost: "30",
      capstone: false
    },
	immaculate_impersonation: {
      name: "Immaculate Impersonation",
      description: "Once per session, flawlessly impersonate a known targetdown to retinal scan, bio-sig, and vocal cadence. Bonus die to all Disguise, Slicing, or Performance (Impersonation) checks for the entire scene.",
      prerequisite: ["perfect_mimicry", "biometric_phantom"],
      tier: 4,
      cost: "40",
      capstone: true
    },
    living_mask_archive: {
      name: "Living Mask Archive",
      description: "Maintain up to four active Masks. Once per session, instantly switch between any of them. Grants a bonus die to your next social or Stealth roll. Costs 1 Strain if used during a scene.",
      prerequisite: ["memory_graft", "identity_cascade"],
      tier: 4,
      cost: "40",
      capstone: true
    },
    veil_mirroring_ritual: {
      name: "Veil-Mirroring Ritual",
      description: "Once per session, reflect a single Illusion or Enchantment spell cast on you, or redirect it to another visible target. Spell must be reflectable by nature.",
      prerequisite: ["veil_shaped_will"],
      tier: 4,
      cost: "40",
      capstone: true
    },
    author_of_the_lie: {
      name: "Author of the Lie",
      description: "Once per session, automatically succeed on a Disguise, Performance, or Deception roll involving deception. You may declare one falsehood about your Mask as true for the rest of the scene. Costs 2 Strain if used under direct scrutiny or in a digital surveillance zone.",
      prerequisite: ["social_echo", "deep_mask_integration"],
      tier: 4,
      cost: "40",
      capstone: true
    }
  },
  draevi: {
    iron_stomach: {
      name: "Iron Stomach",
      description: "Gain a bonus die on Constitution rolls to resist poison, spoiled food, or ingested toxins. You can consume nearly anything without penalty.",
	  prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false
    },
    clan_blooded: {
      name: "Clan-Blooded",
      description: "Choose one: gain +10% to Intimidate, Survival, or Track. This reflects your upbringing within a strong clan tradition. This choice is permanent and may only be taken once.",
      prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false
    },
    urban_climber: {
      name: "Urban Climber",
      description: "Once per session, gain a bonus die to any Athletics or Coordination roll made while navigating vertical, unstable, or cramped environments.",
	  prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false
    },
    scavengers_edge: {
      name: "Scavengers Edge",
      description: "Choose one: gain +10% to Mechanics, Electronics, or Streetwise. This reflects your clans practical knowledge of scavenging and repair. This choice is permanent and may only be taken once.",
	  prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false
    },
    spirits_in_stone: {
      name: "Spirits-in-Stone",
      description: "Once per session, gain a bonus die on a Spirit Lore roll related to ancestor rites, ruins, or natural spirit dwellings.",
	  prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false
    },
    trailborn_reflexes: {
      name: "Trailborn Reflexes",
      description: "Once per scene, gain a bonus die to any Dodge roll.",
	  prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false
    },
    gutter_stalker: {
      name: "Gutter-Stalker",
      description: "Once per session, gain a bonus die on a Stealth roll made in an urban or tight, vertical space (vents, scaffolding, alleys).",
	  prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false
    },
    bone_sung_memory: {
      name: "Bone-Sung Memory",
      description: "Once per session, gain a bonus die when attempting to recall a location, creature, or spiritual phenomenon youve personally witnessed before.",
	  prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false
    },
    silent_step_sharp_ear: {
      name: "Silent Step, Sharp Ear",
      description: "Gain a bonus die on Stealth checks when moving through natural terrain. Optional: spend 1 Strain to also gain a bonus die on the next Listen or Perception check in the same scene.",
	  prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false
    },
    hardened_trailwalker: {
      name: "Hardened Trailwalker",
      description: "Once per session, gain a bonus die to a Survival check. If that check fails, suffer only half the usual Strain from failure.",
      prerequisite: ["iron_stomach", "trailborn_reflexes"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    urban_tracker: {
      name: "Urban Tracker",
      description: "You may reroll one failed Streetwise, Stealth, or Track check made while tracking in an urban environment.",
      prerequisite: ["gutter_stalker"],
      tier: 2,
      cost: "20",
	  capstone: false
    },
    instinctive_counter: {
      name: "Instinctive Counter",
      description: "Once per scene, gain a bonus die to either a Dodge, Unarmed Combat, or Melee roll when reacting to an attack.",
      prerequisite: ["trailborn_reflexes"],
      tier: 2,
      cost: "20",
	  capstone: false
    },
    veins_of_stone: {
      name: "Veins of Stone",
      description: "Once per session, automatically succeed on a failed Constitution roll against fatigue, poison, or environmental strain.",
      prerequisite: ["iron_stomach", "clan_blooded"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    echo_binders_rite: {
      name: "Echo-Binders Rite",
      description: "Once per session, gain a bonus die to a Magic (Summoning) or Spirit Lore roll to commune with a spirit or bind an ancestral echo.",
      prerequisite: ["spirits_in_stone"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    scent_the_shift: {
      name: "Scent the Shift",
      description: "Once per session, detect a hidden threat, spirit, or Veil anomaly in your immediate area. Grants a bonus die to the next Perception or Spirit Lore check made to investigate it.",
      prerequisite: ["trailborn_reflexes", "spirits_in_stone"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    tales_etched_in_horn: {
      name: "Tales Etched in Horn",
      description: "Once per session, when recalling a story, rite, or ancestral lesson, gain a bonus die on any Occult Lore, Spirit Lore, or Etiquette (Clan) check related to Draevi culture or spirits.",
      prerequisite: ["clan_blooded"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    root_stance_tenacity: {
      name: "Root-Stance Tenacity",
      description: "Once per session, when you fail a Strength or Constitution roll to resist knockback, fatigue, or being overpowered, you may reroll with a bonus die. Optional: spend 2 Strain to remain standing even if the second roll fails.",
      prerequisite: ["iron_stomach", "clan_blooded"],
      tier: 2,
      cost: "20",
      capstone: false
    },
	spirit_touched_mastery: {
      name: "Spirit-Touched Mastery",
      description: "Once per session, reroll a failed Spirit Lore or Magic (Summoning) roll. If successful, reduce the spells Strain cost by one die step.",
      prerequisite: ["echo_binders_rite"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    spiritual_vanguard: {
      name: "Spiritual Vanguard",
      description: "Once per session, gain a bonus die when casting a Counterspell on behalf of an ally. Also gain a bonus die when banishing a hostile spirit.",
      prerequisite: ["scent_the_shift", "tales_etched_in_horn"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    emberlash_retaliation: {
      name: "Emberlash Retaliation",
      description: "Once per session, when struck by a melee or ranged attack, make a counterattack with a bonus die. If your counterattack hits, the target suffers a penalty die on their next action.",
      prerequisite: ["instinctive_counter"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    ancestors_pulse: {
      name: "Ancestors Pulse",
      description: "Once per session, gain two bonus dice on a Magic (Divination), Spirit Lore, or Magic (Summoning) roll when invoking ancestral insight. On success, the insight reveals a hidden danger or opportunity relevant to the scene.",
      prerequisite: ["tales_etched_in_horn"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    pathfinders_edge: {
      name: "Pathfinders Edge",
      description: "Once per session, ignore natural terrain penalties for movement or Survival for a full scene. Gain a bonus die to Track or Navigate during this time.",
      prerequisite: ["hardened_trailwalker", "veins_of_stone"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    wild_tamers_gaze: {
      name: "Wild Tamers Gaze",
      description: "Once per session, choose a non-hostile creature or spirit (animal, summoned being, or elemental-type). You may calm, redirect, or guide it with a Spirit Lore or Animal Handling check rolled with a bonus die. Optional: spend 2 Strain to influence it even if it's Veil-corrupted or hostile.",
      prerequisite: ["echo_binders_rite", "ancestors_pulse"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    legacy_reforged: {
      name: "Legacy Reforged",
      description: "Once per session, choose one Tier 1 Draevi Talent you possess. For the rest of the scene, it may be used twice without expending Strain. Optional: spend 1 Strain to immediately activate that Tier 1 talent now.",
	  prerequisite: "",
      prerequisiteAny: { tier: 2, count: 2 },
      tier: 3,
      cost: "30",
      capstone: false
    },
    soul_of_the_wild_hunt: {
      name: "Soul of the Wild Hunt",
      description: "Once per session, enter Hunt State for the remainder of a scene: gain a bonus die on Stealth and Tracking checks, ignore terrain penalties, and reroll one failed Unarmed Combat or Melee attack.",
      prerequisite: ["pathfinders_edge", "emberlash_retaliation"],
      tier: 4,
      cost: "40",
      capstone: true
    },
    echo_flame_warden: {
      name: "Echo-Flame Warden",
      description: "Once per session, invoke a Ward of Legacy: you and up to two allies gain a bonus die on Constitution and Power rolls during a combat or ritual scene. You may also reduce incoming damage to one target by 1d6 (once per session).",
      prerequisite: ["veins_of_stone", "spiritual_vanguard"],
      tier: 4,
      cost: "40",
      capstone: true
    },
    ancestral_mirror: {
      name: "Ancestral Mirror",
      description: "Once per session, call on an ancestral vision to gain two bonus dice on a Spirit Lore, Magic (Summoning), or Magic (Divination) roll. On success, gain a hidden insight or location tied to the current conflict.",
      prerequisite: ["spirit_touched_mastery", "echo_binders_rite"],
      tier: 4,
      cost: "40",
      capstone: true
    },
    path_of_the_remembered: {
      name: "Path of the Remembered",
      description: "Once per session, declare a location as bound by memory. For the scene, you and allies who can hear you gain a bonus die on Perception, Survival, or Willpower-related rolls within that area. You may also spend 3 Strain once during the scene to invoke a flash of ancestral memory, revealing a secret path, hidden threat, or forgotten rite.",
      prerequisite: ["ancestors_pulse", "tales_etched_in_horn"],
      tier: 4,
      cost: "40",
      capstone: true
    }
  },
  human : {
    hard_lesson: {
      name: "Hard Lesson",
      description: "Once per session, reroll a failed skill check. You must take the second result. This reflects the human knack for learning through pain and persistence. Optional: Spend 2 Strain to attempt a second reroll immediately after the first.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    instinct_over_training: {
      name: "Instinct Over Training",
      description: "Use Education in place of any untrained knowledge skill (Arcana, Occult Lore, Forbidden Lore, History, Law, etc.) once per session, at one difficulty higher.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    makeshift_medic: {
      name: "Makeshift Medic",
      description: "Once per session, when attempting a First Aid check without proper medical tools, gain a bonus die. Humans improvise with what they have.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    no_stranger_to_pain: {
      name: "No Stranger to Pain",
      description: "Once per session, roll with a bonus die when making a CON roll to stay conscious after suffering a major wound.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    quick_fixer: {
      name: "Quick Fixer",
      description: "Choose one: gain +10% to Electronics, Mechanics, or Slicing. This reflects cross-training in common survival tech. This choice is permanent and may only be taken once.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    social_versatility: {
      name: "Social Versatility",
      description: "Once per session, reroll any failed Charm, Deception, or Persuade check. This reflects the human gift for adapting socially on the fly.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    battle_tested_gut: {
      name: "Battle-Tested Gut",
      description: "Once per session, when entering a potentially dangerous situation, ask the GM: Do I feel something is off? The GM must answer truthfully (vaguely if appropriate).",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    skilled_focus: {
      name: "Skilled Focus",
      description: "Choose one: gain +10% to any non-combat, non-magic skill. This reflects training or life experience in a particular area. May only be taken once.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    quick_learner: {
      name: "Quick Learner",
      description: "When you succeed at a roll for an untrained skill (one not granted by your Race or Profession), gain a bonus die the next time you use that skill during this session.",
      prerequisite: ["hard_lesson", "instinct_over_training", "makeshift_medic", "no_stranger_to_pain", "quick_fixer", "social_versatility", "battle_tested_gut", "skilled_focus"],

      tier: 2,
      cost: "20",
      capstone: false
    },
    situational_awareness: {
      name: "Situational Awareness",
      description: "Once per session, gain a bonus die to a Perception, Insight, or Listen check during a high-stress scene (combat, infiltration, or tense social standoff).",
      prerequisite: ["battle_tested_gut", "instinct_over_training"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    spontaneous_strategist: {
      name: "Spontaneous Strategist",
      description: "Once per scene, gain a bonus die on a Dodge, Persuade, or Tactical (if used) roll made in response to an unexpected turn of events. Optional: Spend 1 Strain to activate this outside your normal action, as a reactive call.",
      prerequisite: ["hard_lesson"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    lucky_timing: {
      name: "Lucky Timing",
      description: "Once per session, choose one other player. After they fail a skill check, you may declare, WaitIve got this. You immediately attempt the same roll yourself with a bonus die.",
      prerequisite: ["social_versatility", "skilled_focus"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    improvised_tools: {
      name: "Improvised Tools",
      description: "Once per session, ignore the penalty for lacking tools when making a Mechanics, Electronics, or Slicing check. Youve duct-taped worse.",
      prerequisite: ["quick_fixer"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    defiant_resilience: {
      name: "Defiant Resilience",
      description: "Once per session, ignore the effects of one failed Fear or Mental Trauma check (GM discretion). Optional: Spend 2 Strain to also gain a bonus die to your next Willpower or Insight check during the same scene.",
      prerequisite: ["no_stranger_to_pain"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    cross_trained: {
      name: "Cross-Trained",
      description: "Choose one additional Class Skill from any profession and gain +10% in it. This may only be taken once. Optional: Spend 1 Strain to treat a skill as trained for advancement purposes until the end of session.",
      prerequisite: ["skilled_focus", "quick_learner"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    momentum_shift: {
      name: "Momentum Shift",
      description: "Once per session, after a successful roll, you may immediately attempt another action (of a different skill) with a bonus die. Can be used for daring combos or sudden shifts in tempo.",
      prerequisite: ["spontaneous_strategist", "quick_learner"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    pull_from_memory: {
      name: "Pull From Memory",
      description: "Once per session, ask the GM: Have I read, seen, or heard of this before? If yes, gain a bonus die to a related Lore, History, or Magic (any) roll.",
      prerequisite: ["instinct_over_training"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    chain_of_luck: {
      name: "Chain of Luck",
      description: "Once per session, when you roll a natural 0105 on any skill check, immediately gain a bonus die to your next roll.",
      prerequisite: ["lucky_timing", "hard_lesson"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    dig_deep: {
      name: "Dig Deep",
      description: "Once per session, push through a wound or mental strain: ignore a penalty die from fatigue, injury, or Veil exposure for one roll. Optional: Spend 2 Strain to ignore two penalty dice or apply the effect to two rolls this scene.",
      prerequisite: ["defiant_resilience"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    just_enough_prep: {
      name: "Just Enough Prep",
      description: "Once per session, declare you prepped for this. Reveal a basic tool, piece of info, or contact that reasonably helps the scene. Gain a bonus die to one roll using it. Optional: Spend 2 Strain to declare an additional prep aid during the same scene.",
      prerequisite: ["situational_awareness", "improvised_tools"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    break_the_pattern: {
      name: "Break the Pattern",
      description: "Once per session, negate one enemys bonus die (declared after they roll, before results are finalized).",
      prerequisite: ["social_versatility", "lucky_timing"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    tactical_improviser: {
      name: "Tactical Improviser",
      description: "Once per session, declare a flexible plan mid-scene. One ally you designate gains a bonus die once per round for the remainder of the scene, as long as their actions align with your stated approach. Optional: Spend 2 Strain per round to allow a second ally to benefit as well.",
      prerequisite: ["momentum_shift", "just_enough_prep"],
      tier: 4,
      cost: "40",
      capstone: true
    },
    luck_bends_for_me: {
      name: "Luck Bends for Me",
      description: "At the start of each session, make two Luck advancement rolls instead of one. If you fail a roll, gain +1d10 Luck. Additionally, once per session, spend 5 Luck to reroll a failed skill roll.",
      prerequisite: ["chain_of_luck", "hard_lesson"],
      tier: 4,
      cost: "40",
      capstone: true
    },
    unshakable_focus: {
      name: "Unshakable Focus",
      description: "Once per session, become immune to Fear, Pain, or Mental Trauma for the duration of a scene. While active, gain a bonus die to any Willpower-related roll. Optional: Instead of using it once per session, you may activate this once per scene by spending 4 Strain.",
      prerequisite: ["dig_deep", "defiant_resilience"],
      tier: 4,
      cost: "40",
      capstone: true
    },
    master_of_none: {
      name: "Master of None",
      description: "Choose three skills in which you have at least 50%. Gain +10% in each. These do not have to be from the same category or Class list.",
      prerequisite: ["cross_trained", "skilled_focus"],
      tier: 4,
      cost: "40",
      capstone: true
    }
  },
  lyranni :{
    veilsight: {
      name: "Veilsight",
      description: "Activate as an action to perceive spirits, magical echoes, and arcane disturbances layered in the Veil. While active, gain a bonus die to Arcana or Spirit Lore to analyze anomalies. Spend 1 strain for 1 round or spend 4 strain to maintain for the entire scene.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    threadwalker: {
      name: "Threadwalker",
      description: "Gain a bonus die to Arcana, Spirit Lore, or Occult Lore (choose one) when interacting with Veil phenomena. May be taken multiple times, once per skill.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    legacy_spark: {
      name: "Legacy Spark",
      description: "Once per session, reroll a failed Arcana, Occult Lore, or Etiquette (Lyranni) check.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    social_ghost: {
      name: "Social Ghost",
      description: "Use Charm in place of Persuade or Intimidate when relying on elegance, mystique, or cultural presence.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    aether_override: {
      name: "Aether Override",
      description: "Choose one: gain +10% to Slicing, Electronics, or Mechanics. Permanent; may only be taken once.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    echo_in_the_veins: {
      name: "Echo in the Veins",
      description: "Choose one: gain +10% to Performance (any), Insight, or Streetwise. Reflects the lyrical awareness and social perception of the Lyranni.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    veil_blooded_sense: {
      name: "Veil-Blooded Sense",
      description: "Once per session, detect the nearest major source of Veil activity (spirit, ward, corruption, or echo). Gain a bonus die on your next Arcana or Spirit Lore roll to investigate.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    glimmerstep: {
      name: "Glimmerstep",
      description: "Once per scene, spend 1 Strain to blur your magical footprint. Gain a bonus die on your next Stealth or Arcana roll to avoid detection by magical, spiritual, or surveillance effects.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    resonant_poise: {
      name: "Resonant Poise",
      description: "Once per scene, gain a bonus die to Etiquette (High Society) or Charm when dealing with those who recognize your Veilmark or ancestral lineage.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false
    },
    spirit_favored: {
      name: "Spirit-Favored",
      description: "Roll with a bonus die on Charm, Persuade, or Insight checks when interacting with spirits or Veil-bound entities.",
      prerequisite: ["veilsight"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    whispers_beyond: {
      name: "Whispers Beyond",
      description: "Once per session, commune with a minor spirit or residual echo to receive a cryptic insight or spiritual impression.",
      prerequisite: ["veilsight"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    ancestral_resonance: {
      name: "Ancestral Resonance",
      description: "Gain a bonus die on Arcana, Occult Lore, or Spirit Lore checks involving ancestral spirits, relics, or Lyranni rites.",
      prerequisite: ["legacy_spark"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    veil_dancer: {
      name: "Veil Dancer",
      description: "Once per session, gain a bonus die to Deception, Stealth, or Performance (any).",
      prerequisite: ["echo_in_the_veins"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    rite_bound: {
      name: "Rite-Bound",
      description: "Once per session, attempt to banish a spirit using any trained Magic skill. You must flavor the action through a Lyranni rite or ancestral tradition.",
      prerequisite: ["veil_blooded_sense"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    veilsplice: {
      name: "Veilsplice",
      description: "Choose one: gain +10% to Slicing or Electronics. Permanent; may only be taken once.",
      prerequisite: ["aether_override"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    illuminated_touch: {
      name: "Illuminated Touch",
      description: "Once per scene, spend 1 Strain to interact with spiritual residue or arcane emotion in a location or item. Gain a bonus die to Insight or Spirit Lore when analyzing the impression.",
      prerequisite: ["veilsight", "threadwalker"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    words_like_silk: {
      name: "Words Like Silk",
      description: "Once per session, declare one social statement to be treated as credible by neutral NPCs unless given a strong reason to doubt. Gain a bonus die to Charm or Persuade during that interaction.",
      prerequisite: ["social_ghost"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    memory_bound_echo: {
      name: "Memory-Bound Echo",
      description: "Once per session, choose Arcana, Occult Lore, or Spirit Lore and gain a bonus die on all checks with that skill for the remainder of the scene.",
      prerequisite: ["legacy_spark"],
      tier: 2,
      cost: "20",
      capstone: false
    },
    true_veilsight: {
      name: "True Veilsight",
      description: "Veilsight may now be activated reflexively as a free action. While active, gain a bonus die to Arcana or Spirit Lore when studying arcane/spiritual effects. Spend 1 strain for 1 round or spend 4 strain to maintain for the entire scene.",
      prerequisite: ["veilsight"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    blood_rite_channeling: {
      name: "Blood Rite Channeling",
      description: "When below half Strain, you may cast a spell with a bonus die, but the Strain die is increased by one step (e.g., 1d6  1d8).",
      prerequisite: ["spirit_favored", "whispers_beyond", "ancestral_resonance", "veil_dancer", "rite_bound", "veilsplice", "illuminated_touch", "words_like_silk", "memory_bound_echo"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    lyranni_discipline: {
      name: "Lyranni Discipline",
      description: "When above half Strain, you may reduce your Strain die by one step for one spell cast. May not be used with Blood Rite Channeling.",
      prerequisite: ["spirit_favored", "whispers_beyond", "ancestral_resonance", "veil_dancer", "rite_bound", "veilsplice", "illuminated_touch", "words_like_silk", "memory_bound_echo"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    subtle_authority: {
      name: "Subtle Authority",
      description: "Once per session, gain a bonus die to Charm, Performance, or Etiquette (High Society) during a formal or elite social exchange.",
      prerequisite: ["social_ghost"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    veil_laced_command: {
      name: "Veil-Laced Command",
      description: "Once per scene, spend 1 Strain when issuing a direct command in a formal or ritual setting. Gain a bonus die to Persuade or Intimidate, as long as you invoke Veilborn status or tradition.",
      prerequisite: ["spirit_favored", "words_like_silk"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    shadow_echo_step: {
      name: "Shadow Echo Step",
      description: "Once per scene, after evading a spell or attack, move up to one range band up to long range as if phasing through shadow. Gain a bonus die to Dodge or Stealth.",
      prerequisite: ["glimmerstep", "veil_dancer"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    echo_binding: {
      name: "Echo Binding",
      description: "Once per session, bind a minor cooperative spirit. It aids for the scene, granting a bonus die to Perception, Arcana, or one Magic skill (chosen on binding).",
      prerequisite: ["memory_bound_echo", "rite_bound"],
      tier: 3,
      cost: "30",
      capstone: false
    },
    voice_of_the_ancestors: {
      name: "Voice of the Ancestors",
      description: "Once per session, gain a bonus die on any social skill roll or spell targeting spirits or Veil entities. You also roll with a bonus die when banishing a hostile spirit.",
      prerequisite: ["spirit_favored", "ancestral_resonance"],
      tier: 4,
      cost: "40",
      capstone: true
    },
    veil_linked_will: {
      name: "Veil-Linked Will",
      description: "Once per session, cast a spell with a bonus die, and reduce its Strain die by one step, regardless of your current Strain level.",
      prerequisite: ["lyranni_discipline"],
      tier: 4,
      cost: "40",
      capstone: true
    },
    echo_of_elegance: {
      name: "Echo of Elegance",
      description: "Once per session, ignore one penalty die on a social roll and gain a bonus die instead. You may also automatically succeed on one opposed Charm or Performance contest against a neutral or friendly target.",
      prerequisite: ["subtle_authority"],
      tier: 4,
      cost: "40",
      capstone: true
    },
	breath_of_the_veil: {
	  name: "Breath of the Veil",
	  description: "Once per session, spend 3 Strain to enter a state of deep arcane attunement. For the rest of the scene, gain a bonus die to Arcana, Spirit Lore, and Magic (Illusion or Enchantment) . If used in a formal ritual, the result is considered exceptional (GM discretion).",
	  prerequisite: ["true_veilsight"],
	  prerequisiteAny: { tier: 3, count: 1},
	  tier: 4,
	  cost: "40",
	  capstone: true
	}
  }
};

const talentSkillMap = {
  alteri: {
    maskwrights_grace: {
      disguise: "Disguise", impersonation: "Impersonation", insight: "Insight"
    },
    shaped_for_subtlety: {
      insight: "Insight", slicing: "Slicing", stealth: "Stealth"
    },
	deep_mask_integration: {
	  disguise: "Disguise", insight: "Insight"
	},
	persona_anchor: {
	  arcana: "Arcana", impersonation: "Impersonation", slicing: "Slicing"
	}
  },
  draevi: {
    clan_blooded: {
      intimidate: "Intimidate", survival: "Survival", track: "Track"
    },
    scavengers_edge: {
      electronics: "Electronics", mechanics: "Mechanics", streetwise: "Streetwise"
    }
  },
  human: {
    quick_fixer: {
      electronics: "Electronics", mechanics: "Mechanics", slicing: "Slicing"
    },
    skilled_focus: {
      // Checkbox will add -10 to Skill Point Total to indicate the choice.
    },
	cross_trained: {
	  // Checkbox will add -10 to Skill Point Total to indicate the choice.
	},
	master_of_none: {
	  // Checkbox will add -30 to Skill Point Total to indicate the choice.
	}
  },
  lyranni: {
	threadwalker : {
	  arcana: "Arcana", occult: "Occult Lore", spirit_lore: "Spirit Lore"
	},
    aether_override: {
      electronics: "Electronics", mechanics: "Mechanics", slicing: "Slicing"
    },
    echo_in_the_veins: {
      chant: "Chant", dance: "Dance", impersonation: "Impersonation", instrument: "Instrument", singing: "Singing", insight: "Insight", streetwise: "Streetwise"
    },
	veilsplice : {
	  electronics: "Electronics", slicing: "Slicing"
	}
  }
};

const careerDataMap = {
    codeweaver: {
        name: "Codeweaver",
        career_type: "arcane",
        career_type_name: "Arcane",
        skill_points_primary_formula: {
            attributes: ["EDU", "INT"],
            multipliers: [2, 2]
        },
        skill_points_primary_display: "EDU  2 + INT  2",
        skill_point_secondary: 20,
        spell_xp_primary: 30,
        spell_xp_secondary: 10,
        primary_skills: {
            magic_technomancy: "Magic (Technomancy)",
            slicing: "Slicing",
            electronics: "Electronics",
            computer_use: "Computer Use"
        },
        secondary_skills: {
            security_systems: "Security Systems",
            drone_operation: "Drone Operation",
            insight: "Insight",
            perception: "Perception",
            arcana: "Arcana",
            spirit_lore: "Spirit Lore"
        },
        talents: {
            signal_sync: {
                name: "Signal Sync",
                description: "Once per scene, gain a bonus die on a Magic (Technomancy) or Slicing check when interfacing with a digital system, drone, or magitech device. If successful, reduce the spells Strain cost by one die step.",
                prerequisite: "",
                tier: 1,
                cost: "5",
                capstone: false
            },
            veil_thread_tap: {
                name: "Veil Thread Tap",
                description: "Once per scene, detect nearby digital activity or magitech signatures within short range  even if encrypted or cloaked. Gain a bonus die to your next Perception or Slicing check related to that system.",
                prerequisite: "",
                tier: 1,
                cost: "5",
                capstone: false
            },
            hardlight_override: {
                name: "Hardlight Override",
                description: "Once per scene, spend 2 Strain to project a hardlight sigil into a nearby device (e.g., door, turret, drone). You may trigger a basic function (open, shut down, disengage) without a skill check.",
                prerequisite: "",
                tier: 1,
                cost: "5",
                capstone: false
            },
            recursive_pulse: {
                name: "Recursive Pulse",
                description: "Once per scene, after a failed attempt to access or affect a device, you may reroll with a penalty die. If successful, regain 1 Strain.",
                prerequisite: "",
                tier: 1,
                cost: "5",
                capstone: false
            },
            strain_buffer: {
                name: "Strain Buffer",
                description: "Increase your maximum Strain by +1. This talent may appear in multiple Career Trees.",
                prerequisite: "",
                tier: 1,
                cost: "5",
                capstone: false
            },
            pulse_hijack: {
                name: "Pulse Hijack",
                description: "Spend 2 Strain to take control of a simple device or automated system (e.g., surveillance cam, basic drone, access node) for one round.",
                prerequisite: "hardlight_override",
                tier: 2,
                cost: "10",
                capstone: false
            },
            code_injection: {
                name: "Code Injection",
                description: "Once per scene, after a successful Technomancy spell or Slicing check, implant a command packet that allows you to issue one additional command later in the same scene without a new check.",
                prerequisite: "signal_sync",
                tier: 2,
                cost: "10",
                capstone: false
            },
            scramble_protocol: {
                name: "Scramble Protocol",
                description: "Spend 2 Strain to disrupt a single active drone or magitech system for one round. It suffers a penalty die on all tech-based or automated actions.",
                prerequisite: "recursive_pulse",
                tier: 2,
                cost: "10",
                capstone: false
            },
            arc_sigil_link: {
                name: "Arc-Sigil Link",
                description: "You may roll Magic (Technomancy) in place of Electronics or Computer Use when interacting with magitech systems. This does not apply to physical repairs or mechanical breakdowns.",
                prerequisite: "veil_thread_tap",
                tier: 2,
                cost: "10",
                capstone: false
            },
            clean_loop_feedback: {
                name: "Clean Loop Feedback",
                description: "Once per session, after successfully casting a Technomancy spell on a device, regain 1d4 Strain.",
                prerequisite: "",
                prerequisiteAny: { tier: 1, count: 1 },
                tier: 2,
                cost: "10",
                capstone: false
            },
            magelock_cascade: {
                name: "Magelock Cascade",
                description: "Once per session, when you successfully disable or control a device, you may immediately target a second device within short range. The second target rolls resistance with a penalty die.",
                prerequisite: "pulse_hijack",
                tier: 3,
                cost: "15",
                capstone: false
            },
            null_loop_echo: {
                name: "Null Loop Echo",
                description: "Spend 2 Strain to create a disruption field around you (short range) for one round. All drones, magitech, and automated systems inside suffer a penalty die on targeting, reactions, or interfacing.",
                prerequisite: "scramble_protocol",
                tier: 3,
                cost: "15",
                capstone: false
            },
            arc_thread_override: {
                name: "Arc-Thread Override",
                description: "Once per scene, when a hostile device activates, you may cast a Technomancy spell as a reaction. The spell must affect technology (jam, crash, reroute, etc.).",
                prerequisite: "code_injection",
                tier: 3,
                cost: "15",
                capstone: false
            },
            subroutine_leash: {
                name: "Subroutine Leash",
                description: "You may take control of a single drone you have accessed. It acts as an allied NPC on your turn for the duration of the spell or control effect.",
                prerequisite: "arc_sigil_link",
                tier: 3,
                cost: "15",
                capstone: false
            },
            synthetic_harmony: {
                name: "Synthetic Harmony",
                description: "Once per scene, after casting a Technomancy spell or succeeding a Slicing check, gain a bonus die on your next spellcasting or social skill check.",
                prerequisite: "",
                prerequisiteAny: { tier: 2, count: 1 },
                tier: 3,
                cost: "15",
                capstone: false
            },
            command_injection: {
                name: "Command Injection",
                description: "Once per scene, after casting a Technomancy spell or issuing a drone command, you may issue two distinct commands instead of one.",
                prerequisite: "subroutine_leash",
                tier: 4,
                cost: "20",
                capstone: false
            },
            crash_field: {
                name: "Crash Field",
                description: "Once per session, create a crash zone (medium range) for one round. All affected drones or magitech systems must succeed a POW or INT roll or become disabled until the start of your next turn.",
                prerequisite: "null_loop_echo",
                tier: 4,
                cost: "20",
                capstone: false
            },
            live_patch_redirect: {
                name: "Live Patch Redirect",
                description: "Once per session, when an ally is targeted by a spell, ability, or tech effect, you may spend 2 Strain to redirect the effect to yourself or a controlled construct.",
                prerequisite: "arc_thread_override",
                tier: 4,
                cost: "20",
                capstone: false
            },
            backdoor_ritual: {
                name: "Backdoor Ritual",
                description: "Once per scene, you may embed a persistent arcane anchor in a system you access. If the system is triggered again this scene, you may act on it immediately without a new roll. Only one Backdoor may be active at a time.",
                prerequisite: "arc_thread_override",
                tier: 4,
                cost: "20",
                capstone: false
            },
            veil_reactor_stabilizer: {
                name: "Veil-Reactor Stabilizer",
                description: "Once per session, spend 2 Strain to negate a Veil corruption effect, a magitech malfunction, or to reduce incoming damage by 1d6 from a tech-based or Veil-powered source.",
                prerequisite: "",
                prerequisiteAny: { tier: 3, count: 1 },
                tier: 4,
                cost: "20",
                capstone: false
            },
            overcode_detonation: {
                name: "Overcode Detonation",
                description: "Once per session, trigger a system cascade affecting any magitech network or drone field within medium range. All affected systems must roll POW or INT or suffer shutdown, 1d6 damage, or go berserk (your choice per target). Cybernetic limbs and smart weapons tied to living users are unaffected.",
                prerequisite: "",
                prerequisiteAny: { tier: 4, count: 1 },
                tier: 5,
                cost: "30",
                capstone: true
            },
            signal_possession: {
                name: "Signal Possession",
                description: "Once per session, take full control of a drone, turret, or magitech construct within medium range for the rest of the scene. If the target is destroyed or disconnected, you may transfer control to another valid device once.",
                prerequisite: "",
                prerequisiteAny: { tier: 4, count: 1 },
                tier: 5,
                cost: "30",
                capstone: true
            },
            reality_patch: {
                name: "Reality Patch",
                description: "Once per session, cast a Technomancy spell with a casting time of 1 action or less as a reaction to a failed defense, corrupted system, or Veil event. The spell automatically succeeds but costs double Strain.",
                prerequisite: "",
                prerequisiteAny: { tier: 4, count: 1 },
                tier: 5,
                cost: "30",
                capstone: true
            },
            stat_boost: {
                name: "+5% Stat Boost",
                description: "Increase any one core stat  including Magic  by +5%, up to your racial maximum. May only be taken once.",
                prerequisite: "",
                prerequisiteAny: { tier: 4, count: 1 },
                tier: 5,
                cost: "30",
                capstone: true
            }
        }
    }
};

//----------------------- Tab Workers Start ----------------------//

// --------------------------------------
// Sheet Worker: Edit Mode Toggle
// --------------------------------------
on("clicked:edit_mode", () => {
  getAttrs(["edit_mode"], (values) => {
    const current = values.edit_mode || "off";
    const next = current === "on" ? "off" : "on";
    setAttrs({ edit_mode: next });
    if (typeof debug_on !== "undefined" && debug_on) {
      console.log(`Toggled Edit Mode: ${next}`);
    }
  });
});

// Dice Modifier Button Handler
on("clicked:-20 clicked:-10 clicked:10 clicked:20", (event) => {
  const clicked = event.triggerName.replace("clicked:", "");
  getAttrs(["dice_modifier_checkbox"], (values) => {
    const current = values.dice_modifier_checkbox || "0";
    const next = current === clicked ? "0" : clicked;
    setAttrs({ dice_modifier_checkbox: next });
  });
});

on("clicked:strain_full_rest", () => {
  getAttrs(["strain_max", "name"], (values) => {
    const maxStrain = parseInt(values.strain_max, 10) || 0;

    // Use maxStrain in the roll template
    const rollStr = `&{template:coc-dice-roll} {{name=Full Rest - @{name}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[${maxStrain}]]}}`;

    startRoll(rollStr, (rollData) => {
      setAttrs({ strain: maxStrain });
      finishRoll(rollData.rollId);
    });
  });
});

on("clicked:strain_short_rest", () => {
  startRoll("&{template:coc-dice-roll} {{name=Short Rest - @{name}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1d6]]}}", (rollData) => {
    const recovered = rollData.results.diceroll.result;

    getAttrs(["strain", "strain_max"], (values) => {
      const current = parseInt(values.strain, 10) || 0;
      const max = parseInt(values.strain_max, 10) || 0;
      const newStrain = Math.min(current + recovered, max);
      setAttrs({ strain: newStrain });
    });

    finishRoll(rollData.rollId);
  });
});

const tabList = ["skills", "background", "talents", "careers", "combat", "spells", "inventory", "backstory", "npcs", "vehicles"];

tabList.forEach(tab => {
    on(`clicked:${tab}`, () => {
		if (debug_on) console.log("Clicked tab", tab);
		setAttrs({ selected_tab: tab });
    });
});

const alteriBackgroundTabs = ["break_faced_radical", "ghostline_runner", "legacy_bearer", "soft_year_drifter", "veilhaven_attendant"];

alteriBackgroundTabs.forEach(tab => {
	on(`clicked:${tab}`, () => {
		if (debug_on)  console.log("Clicked tab", tab);
		setAttrs({ alteri_background_choice: tab });
		race_default_trigger: Date.now() // Triggers recalculation and is watched
	});
});

const draeviBackgroundTabs = ["forgeblood_scavenger", "horn_carved_wanderer", "spiritbound_techshaper", "tradition_keeper"];

draeviBackgroundTabs.forEach(tab => {
	on(`clicked:${tab}`, () => {
		if (debug_on) console.log("Clicked tab", tab);
		setAttrs({ draevi_background_choice: tab });
		race_default_trigger: Date.now() // Triggers recalculation and is watched
	});
});

const humanBackgroundTabs = ["ash_war_refugee", "data_hatched", "enclave_born", "gutter_fire_youth", "outpost_raised", "scavsteel_whelp"];

humanBackgroundTabs.forEach(tab => {
	on(`clicked:${tab}`, () => {
		if (debug_on) console.log("Clicked tab", tab);
		setAttrs({ human_background_choice: tab });
		race_default_trigger: Date.now() // Triggers recalculation and is watched
	});
});

const lyranniBackgroundTabs = ["aelvareth_devotee", "echoborne", "glide_spire_scion", "whisper_walker", "zurethkai_flameborn"];

lyranniBackgroundTabs.forEach(tab => {
	on(`clicked:${tab}`, () => {
		if (debug_on) console.log("Clicked tab", tab);
		setAttrs({ lyranni_background_choice: tab });
		race_default_trigger: Date.now() // Triggers recalculation and is watched
	});
});

//----------------------- Tab Workers End ----------------------//

//----------------------- Hidden Dice Trick Start --------------------//

on("change:roll_weapon1_mdr_attack_impale_checkbox", function () {
  getAttrs(["roll_weapon1_mdr_attack_impale_checkbox"], function (v) {
    setAttrs({
		attack_mode_toggle: v.roll_weapon1_mdr_attack_impale_checkbox === "1" ? "impale" : "noimpale"
    });
  });
});

on("change:repeating_weaponsmdr:attack_impale_checkbox", function(eventInfo) {
  const rowId = eventInfo.sourceAttribute.match(/repeating_weaponsmdr_([^_]+)_/)[1];
  const impaleAttr = `repeating_weaponsmdr_${rowId}_attack_impale_checkbox`;
  const toggleAttr = `repeating_weaponsmdr_${rowId}_attack_mode_toggle`;

  getAttrs([impaleAttr], function(v) {
    setAttrs({
      [toggleAttr]: v[impaleAttr] === "1" ? "impale" : "noimpale"
    });
  });
});

//----------------------- Hidden Dice Trick End --------------------//

//----------------------- Repeating Spells --------------------//

// Mirror select dropdown value to hidden input (for CSS Wizardry styling)
on("change:repeating_spells:spellprepared", function(eventInfo) {
  if (debug_on_trace) console.log ("[change:repeating_spells:spellprepared] Start");
  const match = eventInfo.sourceAttribute.match(/repeating_spells_([^_]+)_/);
  if (!match) return;

  const rowId = match[1];
  const sourceAttr = `repeating_spells_${rowId}_spellprepared`;
  const mirrorAttr = `repeating_spells_${rowId}_spellprepared_mirror`;

  getAttrs([sourceAttr], function(values) {
    const mirrorValue = values[sourceAttr] === "1" ? "1" : "0";
    setAttrs({ [mirrorAttr]: mirrorValue });
  });
});

// Sum spellcosts only for prepared spells
on("change:repeating_spells:spellcost change:repeating_spells:spellprepared remove:repeating_spells", function() {
  if (debug_on_trace) console.log ("[change:repeating_spells:spellcost change:repeating_spells:spellprepared remove:repeating_spells] Start");
  getSectionIDs("repeating_spells", function(ids) {
    const attrsToGet = ids.flatMap(id => [
      `repeating_spells_${id}_spellcost`,
      `repeating_spells_${id}_spellprepared`
    ]);

    getAttrs(attrsToGet, function(values) {
      let total = 0;
      ids.forEach(id => {
        const cost = parseFloat(values[`repeating_spells_${id}_spellcost`] || 0);
        const isPrepared = values[`repeating_spells_${id}_spellprepared`] === "1";
        if (isPrepared) total += cost;
      });
      setAttrs({ total_spellcost: total });
    });
  });
});

//----------------------- Spell Cost Calculation --------------------//
// Update overflow flag when spellcost or AC changes
on("change:total_spellcost change:ac", function () {
  if (debug_on_trace) console.log ("[change:total_spellcost change:ac] Start");
  getAttrs(["total_spellcost", "ac"], function (values) {
    const cost = parseFloat(values.total_spellcost) || 0;
    const capacity = parseFloat(values.ac) || 0;
    const isOver = cost > capacity ? "1" : "0";

    // Log the raw values and the comparison result
    if (debug_on) console.log("Total Spell Cost:", cost);
    if (debug_on) console.log("Arcane Capacity:", capacity);
    if (debug_on) console.log("Is Over Capacity:", isOver);

    setAttrs({ spellcost_overflow: isOver });
  });
});

//----------------------- Skill, Backgrounds, and Talents --------------------//
function getAllBackgroundSkills(race) {
		if (debug_on_trace) console.log ("[getAllBackgroundSkills] Start");
  const skills = new Set();
  const backgrounds = backgroundSkillMap[race] || {};
  Object.values(backgrounds).forEach(skillGroup => {
    Object.keys(skillGroup).forEach(skill => skills.add(skill));
  });
  return [...skills];
}

function getAllTalentSkills(race) {
	if (debug_on_trace) console.log ("[getAllTalentSkills] Start");
  const skills = new Set();
  const talents = talentSkillMap[race] || {};
  Object.values(talents).forEach(skillGroup => {
    Object.keys(skill => skills.add(skill));
  });
  return [...skills];
}

function resetAllMDRToBase(race, callback) {
		if (debug_on_trace) console.log ("[resetAllMDRToBase] Start");
  const skills = Object.keys(skillMapTable);
  const attrsToGet = skills.map(skill => `${skill}_skill_mdr`).concat(skills.map(skill => `${skill}_mdr`));

  getAttrs(attrsToGet, values => {
    const updates = {};
    skills.forEach(skill => {
      const base = parseInt(values[`${skill}_skill_mdr`] || "0", 10);
      updates[`${skill}_mdr`] = base;
    });
    if (debug_on) console.log("[resetAllMDRToBase]", updates);
    setAttrs(updates, callback);
  });
}

function applyAllSkillBonuses(race) {
	if (debug_on_trace) console.log ("[applyAllSkillBonuses] Start");
  const backgroundSkills = getAllBackgroundSkills(race);
  const talentSkills = getAllTalentSkills(race);

  const updates = {};
  Object.assign(updates, setDefaultSkillBonuses(race, backgroundSkills));
  Object.assign(updates, setDefaultTalentBonuses(race, talentSkills));

  if (debug_on) console.log("[applyAllSkillBonuses]", updates);
  setAttrs(updates);
}

on("change:showracials", () => {
  if (debug_on_trace) console.log("[change:showracials] Start");

  getAttrs(["showracials", "language_own_txt", "language_caltheran_txt"], values => {
    const race = values.showracials || "";

    // === Race Data ===
    if (!raceDataMap[race]) {
      if (debug_on) console.log("[Skill Init] No race data for:", race);
      return;
    }

    const raceData = raceDataMap[race];
    const racialLang = raceData.language || "Racial";
    const otherLang = race === "human" ? "Other" : "Caltheran";

    if (debug_on) {
      console.log("[showracials handler] Race:", race);
      console.log(`Racial Lang: ${racialLang}`);
    }

    handleRaceChange(race);

    const updates = {
      language_own_txt: `${racialLang}(75%)`,
      language_caltheran_txt: `${otherLang}(EDU)`
    };

    // === Talent Labels and Descriptions ===
    const raceTalents = talentDataMap[race];
    if (raceTalents) {
      for (let [key, data] of Object.entries(raceTalents)) {
        updates[`${race}_${key}_label`] = data.name;
        updates[`${race}_${key}_description`] = data.description;
      }
    }

    setAttrs(updates);

    // === Recalculate Enable/Lock Flags
    if (raceTalents) {
      updateTalentEnables(race);
    }
  });
});

// === Talent Prerequisite / Enable Watcher ===
const registerPrerequisiteWatcher = () => {
  on(allTalentChangeEvents.join(" "), function () {
    getAttrs(["showracials"], function (values) {
      const race = values.showracials;
      updateTalentEnables(race);
    });
  });
};

const registerTalentSummaryWatcher = () => {
  const allChangeEvents = Object.entries(talentDataMap)
    .flatMap(([race, talents]) =>
      Object.keys(talents).map(talentKey => `change:${race}_${talentKey}`)
    );

  on(allChangeEvents.join(" "), function () {
    getAttrs(["showracials"], function (values) {
      const race = values.showracials;
      const raceTalents = talentDataMap[race];
      if (!raceTalents) return;

      const watchedTalentAttrs = Object.keys(raceTalents).map(k => `${race}_${k}`);

      getAttrs(watchedTalentAttrs, function (talentValues) {
        const summaryLines = [];

        for (let [key, data] of Object.entries(raceTalents)) {
          const fullKey = `${race}_${key}`;
          if (talentValues[fullKey] === "1") {
            summaryLines.push(`T${data.tier}: ${data.name}  ${data.description}`);
          }
        }

        const summaryText = summaryLines.length
          ? summaryLines.join("\n\n")
          : " "; // Avoid Roll20 collapse on empty value

        setAttrs({ talent_summary: summaryText });
      });
    });
  });
};

// === Talent Uncheck Lock Enforcement ===
const registerTalentUncheckGate = () => {
  on(allTalentChangeEvents.join(" "), function (eventInfo) {
    const attr = eventInfo.sourceAttribute;
    const match = attr.match(/^([^_]+)_(.+)$/);
    if (!match) return;

    const [, race, changedTalent] = match;
    const raceTalents = talentDataMap[race];
    if (!raceTalents) return;

    const allTalentKeys = Object.keys(raceTalents);
    const allAttrs = allTalentKeys
      .map(k => `${race}_${k}`)
      .concat(Object.keys(talentSkillMap[race] || {}).map(talent => `${race}_${talent}_mdr_checkbox`));

    getAttrs(allAttrs, function (values) {
      const stillChecked = (key) => values[`${race}_${key}`] === "1";

      const reverseMap = {};
      for (let [key, data] of Object.entries(raceTalents)) {

        if (Array.isArray(data.prerequisite)) {
          data.prerequisite.forEach(pr => {
            if (!reverseMap[pr]) reverseMap[pr] = new Set();
            reverseMap[pr].add(key);
          });
        }
      }

      const isLocked = (target) => {
        const visited = new Set();
        const stack = [...(reverseMap[target] || [])];

        while (stack.length) {
          const current = stack.pop();
          if (visited.has(current)) continue;
          visited.add(current);

          const talentSelected = stillChecked(current);
          const prereqs = raceTalents[current]?.prerequisite || [];

          const isSolelyDependent = talentSelected &&
            prereqs.includes(target) &&
            !prereqs.some(p => p !== target && stillChecked(p));

          if (isSolelyDependent) return true;

          if (reverseMap[current]) {
            reverseMap[current].forEach(t => stack.push(t));
          }
        }
        return false;
      };

      const updatedLocks = {};
      for (let key of Object.keys(raceTalents)) {
        let lock = isLocked(key) ? "1" : "0";

        // Check skill lock
        const skillMap = talentSkillMap[race] || {};
        if (skillMap[key]) {
          const skillCheckbox = values[`${race}_${key}_mdr_checkbox`] || "";
          if (skillCheckbox !== "") lock = "1";
        }

        updatedLocks[`${race}_${key}_lockflag`] = lock;
      }

      setAttrs(updatedLocks, {}, () => {
		if (debug_on) console.log("[Talent Uncheck Gate] Locks applied:", updatedLocks);
	  });

    });
  });
};

const registerTalentSkillBonusWatchers = () => {
  const races = Object.keys(talentSkillMap);

  races.forEach(race => {
    const talents = Object.keys(talentSkillMap[race]);

    talents.forEach(talent => {
      const checkboxAttr = `${race}_${talent}_mdr_checkbox`;
      const talentAttr = `${race}_${talent}`;
      const lockAttr = `${race}_${talent}_lockflag_skill`;
      const showAttr = `show_${talent}_bonus`;

      const watchedAttrs = [checkboxAttr, talentAttr];

      on(`change:${checkboxAttr} change:${talentAttr}`, () => {
        getAttrs(watchedAttrs.concat(["showracials"]), values => {
          const isTalentChecked = values[talentAttr] === "1";
          const skillChoice = values[checkboxAttr] || "0";

          const shouldShow = isTalentChecked || skillChoice !== "0";
          const isLocked = skillChoice !== "0"; // Lock if any skill choice is selected

          if (debug_on) console.log(`[Generic Bonus Watcher] ${race}.${talent}`);
          if (debug_on) console.log("Talent Checked:", isTalentChecked);
          if (debug_on) console.log("Skill Selected:", skillChoice);
          if (debug_on) console.log(" Show Skills?", shouldShow ? "Yes" : "No");
          if (debug_on) console.log(" Lock Talent?", isLocked ? "Yes" : "No");

          const updates = {};
          updates[showAttr] = shouldShow ? "1" : "0";
          updates[lockAttr] = isLocked ? "1" : "0";

          setAttrs(updates, () => {
            const raceFromSheet = values.showracials;
            updateTalentEnables(raceFromSheet);
          });
        });
      });
    });
  });
};

const registeredRaces = new Set();

function registerSkillHandler(racePrefix, triggerSkills, talentSources = []) {

	if (debug_on_trace) console.log ("[registerSkillHandler] Start");

	const key = `${racePrefix}`;

	if (registeredRaces.has(key)) return;

	registeredRaces.add(key);

	const allSkills = Object.values(skillMapTable).map(s => s.label);
	const otherSkills = Array.from({ length: 10 }, (_, i) => `otherskill${i + 1}`);
	const baseSkillLookup = Object.values(skillMapTable).reduce((map, skill) => {
		map[skill.label] = parseInt(skill.base || "0", 10);
		return map;
	}, {});

	const magicSchools = Object.values(skillMapTable)
	.filter(skill => skill.group === "Magic" && skill.label !== "magic_universal")
	.map(skill => skill.bonus); // bonus field is like "magic_alteration_mdr", "magic_elemental_mdr", etc

	const watched = [
		`${racePrefix}_mdr_checkbox`,
		"dex",
		"edu",
		"language_caltheran_skill_mdr",
		...magicSchools,
		...allSkills.map(skill => `${skill}_skill_mdr`),
		...otherSkills.map(skill => `${skill}_skill_mdr`),
		...triggerSkills.flatMap(skill => [
			`${racePrefix}_${skill}_bonus_mdr`,
			`${racePrefix}_talent_${skill}_bonus_mdr`
		]),
		...Object.keys(talentSkillMap[racePrefix]).map(talentKey => `${racePrefix}_${talentKey}_mdr_checkbox`)
	];

	const skillsToAttrs = allSkills.reduce((map, skill) => {
		map[skill] = [
			`${skill}_skill_mdr`,
			`${skill}_mdr`,
			`${racePrefix}_${skill}_bonus_mdr`,
			`${racePrefix}_talent_${skill}_bonus_mdr`
		];
		return map;
	}, {});

	const globalAttrs = [
		"dex",
		"edu",
		"language_caltheran_skill_mdr",
		...magicSchools,
		`${racePrefix}_mdr_checkbox`,
		"showracials",
		"skill_points_talent_refund",
		...Object.keys(talentSkillMap[racePrefix] || {}).map(talent => `${racePrefix}_${talent}_mdr_checkbox`)
	];

	if (debug_on) console.log("[registerSkillHandler Init]", { watched });

	const otherSkillAttrs = otherSkills.flatMap(skill => [
		`${skill}_skill_mdr`,
		`${skill}_mdr`
		]);

	// BEGIN Sheet Worker Watcher
	on([...new Set(watched)].map(s => `change:${s}`).join(" "), () => {
		getAttrs(globalAttrs.concat(...Object.values(skillsToAttrs), otherSkillAttrs), values => {
			const activeRace = values.showracials || "unknown"; // minimal change here
			if (activeRace !== racePrefix) return;

			const bgSkill = values[`${racePrefix}_mdr_checkbox`] || null;
			const talentSkills = Object.entries(talentSkillMap[racePrefix] || {})
				.map(([talentKey, skills]) => {
					const val = values[`${racePrefix}_${talentKey}_mdr_checkbox`];
					return val && val.startsWith("talent_") ? val.replace("talent_", "") : null;
				})
				.filter(Boolean);

			const update = {};
			let totalSkillPointsSpent = 0;

			allSkills.forEach(skill => {
				let base = parseInt(values[`${skill}_skill_mdr`], 10);
				const defaultBase = baseSkillLookup[skill] || 0;
				if (isNaN(base)) {
				// Auto-correct missing or blank input to default
					base = defaultBase; // << use defaultBase here
					update[`${skill}_skill_mdr`] = base;
				}
				const spent = base - defaultBase;
				update[`${skill}_improved_label`] = spent > 0 ? "#" : spent < 0 ? "*" : "";

				totalSkillPointsSpent += spent;

				const bgBonus = bgSkill === skill ? parseInt(values[`${racePrefix}_${skill}_bonus_mdr`] || "0", 10) : 0;
/*
				const talentBonus = talentSkills.includes(skill) ? parseInt(values[`${racePrefix}_talent_${skill}_bonus_mdr`] || "0", 10) : 0;
*/
				const talentBonus = Object.entries(talentSkillMap[racePrefix] || {}).reduce((sum, [talentKey, skillMap]) => {
					const selectedValue = values[`${racePrefix}_${talentKey}_mdr_checkbox`] || "";
					const targetValue = `talent_${skill}`;

					// Check if this talent is currently applying its bonus to this skill
					if (selectedValue === targetValue) {
						const attr = `${racePrefix}_talent_${skill}_bonus_mdr`;
						const bonus = parseInt(values[attr] || "0", 10);
						return sum + bonus;
					}
					return sum;
				}, 0);

				let total = base + bgBonus + talentBonus;

				if (skill === "dodge") {
					const idex = parseInt(values.dex || "0", 10);
					const dexBonus = Math.floor(idex / 2);
					total += dexBonus;
					if (debug_on) console.log(`[Dodge Adjustment] DEX=${idex}, +${dexBonus} added`);
				}

				if (skill === "athletics") { // Movement Rate Update (DEX + Athletics) / 10, max 14
					const athletics = parseInt(values.athletics_skill_mdr || "0", 10);
					const idex = parseInt(values.dex || "0", 10);
					const movCalc = Math.min(14, Math.floor((idex + athletics) / 10));
					update.mov = movCalc;
					if (debug_on) console.log (`[Move updated]: DEX=${idex}, Athletics=${athletics}, Move=${movCalc}`);
				}

				update[`${skill}_mdr`] = total;

				if (debug_on && (bgBonus || talentBonus || skill === "dodge")) {
					console.log(`[Skill Calc] ${skill}: base=${base}, bgBonus=${bgBonus}, talentBonus=${talentBonus}, total=${total}`);
				}
			});

			otherSkills.forEach(skill => {
				const base = parseInt(values[`${skill}_skill_mdr`], 10) || 0;
				const spent = base; // no base value to subtract from
				totalSkillPointsSpent += spent;
				update[`${skill}_improved_label`] = spent > 0 ? "#" : spent < 0 ? "*" : "";
				update[`${skill}_mdr`] = base;
			});

			const icaltheran = Math.min(75, parseInt(values.language_caltheran_skill_mdr || "0", 10));
			const iedu = Math.min(75, parseInt(values.edu || "0", 10));
			update["language_caltheran_mdr"] = icaltheran + iedu;

			const refund = parseInt(values.skill_points_talent_refund, 10) || 0;
			if (debug_on) console.log (`[Refund]: ${refund}`);

			totalSkillPointsSpent += refund;

			update["total_skill_points_spent"] = totalSkillPointsSpent;

			// Universal Magic Skill
			const schoolValues = magicSchools.slice(0, 9).map(attr => parseInt(values[attr], 10) || 0);
			const baseUniversal = parseInt(values.magic_universal_skill_mdr, 10) || 0;
			const highestSchool = Math.max(...schoolValues);
			update["magic_universal_mdr"] = highestSchool + baseUniversal;

			if (debug_on) {
				console.log(`Highest Magic School: ${highestSchool}`);
				console.log(`Universal Base: ${baseUniversal}`);
				console.log(`Total Universal: ${highestSchool + baseUniversal}`);
			}

			setAttrs(update);
		});
	});
	// END Sheet Worker Watcher

	if (debug_on) {
		console.log("[registerSkillHandler] Manual initialization on load");
		console.log("[registerSkillHandler] Skills to initialize:", triggerSkills);
	}

	// BEGIN Manual Initialization
	getAttrs(globalAttrs.concat(...Object.values(skillsToAttrs), otherSkillAttrs), values => {
		const activeRace = values.showracials || "unknown"; // minimal change here
		if (activeRace !== racePrefix) return;

		const bgSkill = values[`${racePrefix}_mdr_checkbox`] || null;
		const talentSkills = Object.entries(talentSkillMap[racePrefix] || {})
			.map(([talentKey, skills]) => {
				const val = values[`${racePrefix}_${talentKey}_mdr_checkbox`];
				return val && val.startsWith("talent_") ? val.replace("talent_", "") : null;
			})
			.filter(Boolean);

		const update = {};
		let totalSkillPointsSpent = 0;

		allSkills.forEach(skill => {
			let base = parseInt(values[`${skill}_skill_mdr`], 10);
			const defaultBase = baseSkillLookup[skill] || 0;
			if (isNaN(base)) {
				// Auto-correct missing or blank input to default
				base = defaultBase; // << use defaultBase here
				update[`${skill}_skill_mdr`] = base;
			}
			const spent = base - defaultBase;
			update[`${skill}_improved_label`] = spent > 0 ? "#" : spent < 0 ? "*" : "";
			totalSkillPointsSpent += spent;

			const bgBonus = bgSkill === skill ? parseInt(values[`${racePrefix}_${skill}_bonus_mdr`] || "0", 10) : 0;
/*
			const talentBonus = talentSkills.includes(skill) ? parseInt(values[`${racePrefix}_talent_${skill}_bonus_mdr`] || "0", 10) : 0;
*/
			const talentBonus = Object.entries(talentSkillMap[racePrefix] || {}).reduce((sum, [talentKey, skillMap]) => {
				const selectedValue = values[`${racePrefix}_${talentKey}_mdr_checkbox`] || "";
				const targetValue = `talent_${skill}`;

				// Check if this talent is currently applying its bonus to this skill
				if (selectedValue === targetValue) {
					const attr = `${racePrefix}_talent_${skill}_bonus_mdr`;
					const bonus = parseInt(values[attr] || "0", 10);
					return sum + bonus;
				}

				return sum;
			}, 0);

			let total = base + bgBonus + talentBonus;

			if (skill === "dodge") {
				const idex = parseInt(values.dex || "0", 10);
				const dexBonus = Math.floor(idex / 2);
				total += dexBonus;
				if (debug_on) console.log(`[Manual Dodge Adjustment] DEX=${idex}, +${dexBonus} added`);
			}

			update[`${skill}_mdr`] = total;

			if (debug_on && (bgBonus || talentBonus || skill === "dodge")) {
				console.log(`[Manual Init Skill Calc] ${skill}: base=${base}, bgBonus=${bgBonus}, talentBonus=${talentBonus}, total=${total}`);
			}
		});

		otherSkills.forEach(skill => {
			const base = parseInt(values[`${skill}_skill_mdr`], 10) || 0;
			const spent = base; // no base value to subtract from
			totalSkillPointsSpent += spent;
			update[`${skill}_improved_label`] = spent > 0 ? "#" : spent < 0 ? "*" : "";
			update[`${skill}_mdr`] = base;
		});

		const icaltheran = Math.min(75, parseInt(values.language_caltheran_skill_mdr || "0", 10));
		const iedu = Math.min(75, parseInt(values.edu || "0", 10));
		update["language_caltheran_mdr"] = icaltheran + iedu;

		const refund = parseInt(values.skill_points_talent_refund, 10) || 0;
		totalSkillPointsSpent += refund;
		if (debug_on) console.log (`[Refund]: ${refund}`);

		update["total_skill_points_spent"] = totalSkillPointsSpent;

		const schoolValues = magicSchools.slice(0, 9).map(attr => parseInt(values[attr], 10) || 0);
		const baseUniversal = parseInt(values.magic_universal_skill_mdr, 10) || 0;
		const highestSchool = Math.max(...schoolValues);
		update["magic_universal_mdr"] = highestSchool + baseUniversal;

		if (debug_on) {
			console.log(`Highest Magic School: ${highestSchool}`);
			console.log(`Universal Base: ${baseUniversal}`);
			console.log(`Total Universal: ${highestSchool + baseUniversal}`);
		}

		setAttrs(update);
	});
	// END Manual Initialization
}

function setDefaultSkillBonuses(race) {
		  if (debug_on_trace) console.log ("[setDefaultSkillBonuses] Start");
  const updates = {};
  const raceBackgrounds = backgroundSkillMap[race];

  if (!raceBackgrounds) return updates;

  Object.values(raceBackgrounds).forEach(skillSet => {
    Object.keys(skillSet).forEach(skill => {
      const attr = `${race}_${skill}_bonus_mdr`;
      if (!(attr in updates)) updates[attr] = 5;
    });
  });

//  if (debug_on) console.log("[setDefaultSkillBonuses]", updates);
  setAttrs(updates);
  return updates;
}

function setDefaultTalentBonuses(race) {
	  if (debug_on_trace) console.log ("[setDefaultTalentBonuses] Start");
  const updates = {};
  const raceTalents = talentSkillMap[race];

  if (!raceTalents) return updates;

  Object.values(raceTalents).forEach(skillSet => {
    Object.keys(skillSet).forEach(skill => {
      const attr = `${race}_talent_${skill}_bonus_mdr`;
      if (!(attr in updates)) updates[attr] = 10;
    });
  });

//  if (debug_on) console.log("[setDefaultTalentBonuses]", updates);
  setAttrs(updates);
  return updates;
}

// Shared talent change watchers
const allTalentChangeEvents = Object.entries(talentDataMap)
  .flatMap(([race, talents]) =>
    Object.keys(talents).map(talentKey => `change:${race}_${talentKey}`)
  );

// === XP Tracker (Total, Spent, Remaining) ===
on(`change:xp_pool_total_talent change:showracials ${allTalentChangeEvents.join(" ")}`, function () {
  getAttrs(["xp_pool_total_talent", "showracials"], function (values) {
    const race = values.showracials || "alteri";
    const raceTalents = talentDataMap[race];
    if (!raceTalents) return;

    const talentKeys = Object.keys(raceTalents);
    const watchedAttrs = talentKeys.map(key => `${race}_${key}`);

	const skillPointRefunds = {
		draevi: {},
		alteri: {},
		human: {
			skilled_focus: -10,
			cross_trained: -10,
			master_of_none: -30
		}
	};

    getAttrs([...watchedAttrs, "total_skill_points_spent", "skill_points_talent_refund"], function (talentValues) {
      let spent = 0;
	  let refund = 0;

      for (let key of talentKeys) {
        const attrName = `${race}_${key}`;
        const selected = talentValues[attrName] === "1";
        const cost = parseInt(raceTalents[key].cost, 10) || 0;
        if (selected) {
			spent += cost;

			const raceRefundMap = skillPointRefunds[race] || {};

			if (raceRefundMap[key]) {
				refund += raceRefundMap[key];
				if (debug_on) console.log(`[XP Tracker Refund] ${key} gives ${raceRefundMap[key]}`);
			}
		}
	  }

	  const previousRefund = parseInt(talentValues["skill_points_talent_refund"], 10) || 0;
	  const refundDelta = refund - previousRefund;

	  const skillSpent = parseInt(talentValues["total_skill_points_spent"], 10) || 0;
	  const adjustedSkillSpent = skillSpent + refundDelta;

      const total = parseInt(values.xp_pool_total_talent, 10) || 0;
      const remaining = Math.max(0, total - spent);

	    if (debug_on) {
			console.log(`[Old Refund]: ${previousRefund}`);
			console.log(`[New Refund]: ${refund}`);
			console.log(`[Delta Refund]: ${refundDelta}`);
			console.log(`[Original Skill Points Spent]: ${skillSpent}`);
			console.log(`[Adjusted Skill Points Spent]: ${adjustedSkillSpent}`);
		}

	  setAttrs({
		xp_spent_talent: spent,
		xp_remaining_talent: remaining,
		skill_points_talent_refund: refund,
		total_skill_points_spent: adjustedSkillSpent
	  });
	});
  });
});


const updateTalentEnables = (race) => {
  const raceTalents = talentDataMap[race];
  if (!raceTalents) return;

  const allTalentCheckboxes = Object.keys(raceTalents).map(k => `${race}_${k}`);
  if (debug_on) console.log("Fetched checkbox values:", allTalentCheckboxes);

  const skillLockKeys = Object.entries(raceTalents)
    .map(([k]) => `${race}_${k}_lockflag_skill`);

  const allPrereqKeys = Object.entries(raceTalents)
    .filter(([_, t]) => Array.isArray(t.prerequisite))
    .flatMap(([_, t]) => t.prerequisite);

  const prereqAttrKeys = [...new Set(allPrereqKeys)].map(pr => `${race}_${pr}`);
  const tier4Checkboxes = Object.entries(raceTalents)
    .filter(([_, t]) => t.tier === 4)
    .map(([k]) => `${race}_${k}`);

  getAttrs([...prereqAttrKeys, ...tier4Checkboxes, ...skillLockKeys, ...allTalentCheckboxes], function (values) {
    const selected = new Set(
      Object.entries(values)
        .filter(([_, v]) => v === "1")
        .map(([k]) => k.replace(`${race}_`, ""))
    );
	if (debug_on) console.log ("getAttrs: ", values);

    const updates = {};

    // Enable logic
    for (let [key, data] of Object.entries(raceTalents)) {
      if (Array.isArray(data.prerequisite) && data.prerequisite.length > 0) {
        const unlocked = data.prerequisite.some(pr => selected.has(pr));
        updates[`${race}_${key}_enabled`] = unlocked ? "1" : "0";
      }
    }

	// --- Handle prerequisiteAny (e.g., Legacy Reforged) and handle prerequisiteAny + prerequisite ---
	for (let [key, data] of Object.entries(raceTalents)) {
		if ( data && typeof data === "object" && data.prerequisiteAny && typeof data.prerequisiteAny.tier === "number" && typeof data.prerequisiteAny.count === "number") {
			const { tier, count } = data.prerequisiteAny;
			const hardPrereqs = Array.isArray(data.prerequisite) ? data.prerequisite : [];

			// Gather all talents at the matching tier
			const sameTierKeys = Object.entries(raceTalents)
				.filter(([_, t]) => t && t.tier === tier)
				.map(([k]) => `${race}_${k}`);

			// Exclude the ones listed as static prerequisites
			const filteredTierKeys = sameTierKeys.filter(attr => {
				const keyPart = attr.replace(`${race}_`, "");
				return !hardPrereqs.includes(keyPart);
			});

			const checked = filteredTierKeys.filter(attr => values[attr] === "1");
			const selected = checked.slice(0, count);

			const staticReqMet =
				hardPrereqs.length === 0 ||
				hardPrereqs.some(pr => values[`${race}_${pr}`] === "1");

			const anyReqMet = checked.length >= count;

			updates[`${race}_${key}_enabled`] = staticReqMet && anyReqMet ? "1" : "0";
			updates[`${race}_${key}_sources`] = selected.join(",");

			if (values[`${race}_${key}`] === "1" && anyReqMet && staticReqMet) {
				for (let src of selected) {
					updates[`${src}_lockflag`] = "1";
				}
			}

			if (debug_on) {
				console.log(`[${key}] prerequisiteAny valid, tier ${tier}, count ${count}`);
				console.log(`  Static Prereqs: ${hardPrereqs}`);
				console.log(`  Filtered Tier Pool: ${filteredTierKeys}`);
				console.log(`  Checked: ${checked}`);
				console.log(`  Selected (locked if active): ${selected}`);
			}
		}
	}

    // Tier 4 exclusivity lock
    const selectedTier4 = tier4Checkboxes.filter(key => values[key] === "1");
    const capstoneLock = selectedTier4.length > 0;
    for (let key of tier4Checkboxes) {
      updates[`${key}_lockflag`] = capstoneLock && values[key] !== "1" ? "1" : "0";
    }
	if (debug_on) console.log("tier4locks:", selectedTier4);

    // Prerequisite-based lock calculation
    const reverseMap = {};
    for (let [key, data] of Object.entries(raceTalents)) {
      if (Array.isArray(data.prerequisite)) {
        data.prerequisite.forEach(pr => {
          if (!reverseMap[pr]) reverseMap[pr] = new Set();
          reverseMap[pr].add(key);
        });
      }
    }
	if (debug_on) console.log("reverseMap:", reverseMap);

    const stillChecked = (k) => values[`${race}_${k}`] === "1";

    const isLocked = (target) => {
      const visited = new Set();
      const stack = [...(reverseMap[target] || [])];

      while (stack.length) {
        const current = stack.pop();
        if (visited.has(current)) continue;
        visited.add(current);

        const talentSelected = stillChecked(current);
        const prereqs = raceTalents[current]?.prerequisite || [];

        const solelyDepends = talentSelected &&
          prereqs.includes(target) &&
          !prereqs.some(p => p !== target && stillChecked(p));

        if (solelyDepends) return true;
        if (reverseMap[current]) {
          reverseMap[current].forEach(t => stack.push(t));
        }
      }
      return false;
    };

    for (let [key] of Object.entries(raceTalents)) {
      const prereqLock = isLocked(key) ? "1" : "0";
      const skillLock = values[`${race}_${key}_lockflag_skill`] || "0";
      updates[`${race}_${key}_lockflag_prereq`] = prereqLock;
      const existingLock = updates[`${race}_${key}_lockflag`] || values[`${race}_${key}_lockflag`] || "0";
	  const finalLock = (existingLock === "1" || prereqLock === "1" || skillLock === "1") ? "1" : "0";
	  updates[`${race}_${key}_lockflag`] = finalLock;
    }


    //  Log all lockflag and enabled values before applying
    const lockDebug = Object.fromEntries(
      Object.entries(updates)
        .filter(([k]) => k.includes("_lockflag") || k.includes("_enabled"))
    );
    if (debug_on) console.log("[updateTalentEnables] Final lock/enabled updates:", lockDebug);

    setAttrs(updates);
  });
};

function applyRacialBaseStats(race) {
  if (!raceDataMap[race] || !raceDataMap[race].stats) {
    if (debug_on) console.log("[applyRacialBaseStats] No stats found for race:", race);
    return;
  }

  const raceStats = raceDataMap[race].stats;
  const statKeys = ["str", "dex", "pow", "con", "app", "edu", "siz", "int", "mag"];

  getAttrs(statKeys, values => {
    const updates = {};

    statKeys.forEach(stat => {
      const currentRaw = values[stat];
      const current = parseInt(currentRaw, 10);
      const racialBase = raceStats[stat]?.base;

      if (isNaN(current) || current < racialBase) {
        updates[stat] = racialBase;
        if (debug_on) console.log(`[applyRacialBaseStats] ${stat.toUpperCase()} raised from ${current} to ${racialBase}`);
      }
    });

    if (Object.keys(updates).length > 0) {
      setAttrs(updates);
    }
  });
}

let lastRaceHandled = null;

function handleRaceChange(race) {
  if (debug_on_trace) console.log ("[handleRaceChange] Start");
  if (race === lastRaceHandled) {
    if (debug_on) console.log(`[handleRaceChange] Skipped duplicate init for race: ${race}`);
    return;
  }
  lastRaceHandled = race;

//  if (debug_on) console.log("[handleRaceChange]", race);

  resetAllMDRToBase();
  applyRacialBaseStats(race);
  applyAllSkillBonuses(race);

  const skillList = Object.values(backgroundSkillMap[race] || {}).flatMap(obj => Object.keys(obj));
  const talentList = Object.values(talentSkillMap[race] || {}).flatMap(obj => Object.keys(obj));


  registerSkillHandler(race, skillList, talentList);
  if (debug_on) console.log ("[registerSkillHandler] fired");

  registerPrerequisiteWatcher();
  if (debug_on) console.log ("[registerPrerequisiteWatcher] fired");

  registerTalentUncheckGate();
  if (debug_on) console.log ("[registerTalentUncheckGate] fired");

  registerTalentSkillBonusWatchers();
  if (debug_on) console.log ("[registerTalentSkillBonusWatchers] fired");

  registerTalentSummaryWatcher();
  if (debug_on) console.log ("[registerTalentSummaryWatcher] fired");
}

on("sheet:opened", function () {
  if (debug_on_trace) console.log("[sheet:opened] New Character check");

  getAttrs(["showracials", "new_character_flag"], values => {
    const isNew = values.new_character_flag === "1";
    const race = values.showracials || "unknown"; //  direct from showracials now
    const updates = {};

    //    if (debug_on) console.log("[sheet:opened]", { race, isNew });
	getAttrs(["showskills"], values => {
        if (!values.showskills || values.showskills === "0") {
            setAttrs({ showskills: "3" });
        }
    });

    // Always run skill init if new character
    if (isNew) {
      Object.entries(skillMapTable).forEach(([key, { label, base, notes }]) => {
        const val = parseInt(base, 10) || 0;
        updates[`${label}_skill_mdr`] = val;
        updates[`${label}_mdr`] = val;
        updates[`${label}_note`] = notes || "";
      });
      updates.new_character_flag = "0";

      if (debug_on) console.log("[New Character Skill Init]", updates);
    }

    setAttrs(updates, () => {
	  if (debug_on) console.log ("[sheet:opened] Checking for undefined or unknown race");
      if (race && race !== "unknown" && race !== "0") {
        // Handle race bonus init
		if (debug_on) console.log (`[sheet:opened] Race: "${race}" being initialized`);
        handleRaceChange(race);
      }
	  registerStatHandler();
    });
  });
});

function registerStatHandler() {
	if (debug_on_trace) console.log ("[registerStatHandler] Start");
    const watched = [
        "age", "str", "dex", "pow", "con", "app", "edu", "siz", "int", "mag", "vitality"
    ];

    if (debug_on) console.log("[registerStatHandler Init] Watching:", watched);

    on(watched.map(s => `change:${s}`).join(" "), () => {
        getAttrs(watched, values => {
		    const iage = parseInt(values.age) || 0;
			const istr = parseInt(values.str) || 0;
			const idex = parseInt(values.dex) || 0;
			const ipow = parseInt(values.pow) || 0;
            const icon = parseInt(values.con) || 0;
			const iapp = parseInt(values.app) || 0;
            const iedu = parseInt(values.edu) || 0;
            const isiz = parseInt(values.siz) || 0;
            const iint = parseInt(values.int) || 0;
            const imag = parseInt(values.mag) || 0;
            const ivit = parseInt(values.vitality) || 0;

            const update = {};

			update["vitality_max"]= ipow;
			update["pulphp_max"] = Math.floor((icon + isiz)/5);
			update["strain_max"] = Math.floor((ipow + icon)/5);

			update["social_mode_toggle"] = (iapp <= 40 ) ? 1 : ( iapp >= 70 ) ? 2 : 0;

			// Attribute Points Total Calculation
			const statKeys = ["str", "dex", "pow", "con", "app", "edu", "siz", "int", "mag"];

			let totalAttrPointsSpent = 0;

			statKeys.forEach(stat => {
				const val = parseInt(values[stat], 10) || 0;
				totalAttrPointsSpent += val;
			});

			update["total_attr_points_spent"] = totalAttrPointsSpent;

            // Arcane Capcity = min(MAG, VITALITY)
            update.ac = Math.min(imag, ivit);

            // Damage Bonus and Build
            const siz_str_tot = istr + isiz;
            if (siz_str_tot < 65) {
                update.damage_bonus = "-2";
                update.build = "-2";
            } else if (siz_str_tot < 85) {
                update.damage_bonus = "-1";
                update.build = "-1";
            } else if (siz_str_tot < 125) {
                update.damage_bonus = "0";
                update.build = "0";
            } else if (siz_str_tot < 165) {
                update.damage_bonus = "1d4";
                update.build = "+1";
            } else if (siz_str_tot < 205) {
                update.damage_bonus = "1d6";
                update.build = "+2";
            } else if (siz_str_tot < 285) {
                update.damage_bonus = "2d6";
                update.build = "+3";
            } else if (siz_str_tot < 365) {
                update.damage_bonus = "3d6";
                update.build = "+4";
            } else if (siz_str_tot < 445) {
                update.damage_bonus = "4d6";
                update.build = "+5";
            } else if (siz_str_tot < 525) {
                update.damage_bonus = "5d6";
                update.build = "+6";
            }

			update.mdr_dex_crit_threshold = 1;
			update.mdr_dex_extreme_threshold = Math.floor(idex / 5);
			update.mdr_dex_hard_threshold = Math.floor(idex / 2);
			update.mdr_dex_normal_threshold = idex;
			update.mdr_dex_crit_value = 4000 + idex;
			update.mdr_dex_extreme_value = 3000 + idex;
			update.mdr_dex_hard_value = 2000 + idex;
			update.mdr_dex_normal_value = 1000 + idex;
			update.mdr_dex_fail_value = idex;

            if (debug_on) {
                console.log("[Stat Calc] STR+SIZ=", siz_str_tot);
                console.log("[Stat Calc] AC=", update.ac);
                console.log("[Stat Calc] DMG Bonus / Build=", update.damage_bonus, update.build);
            }

            setAttrs(update);
        });
    });
}

// Common parser function
function parseDamageString(damageString, prefix) {
  const updates = {};

  const match = damageString.match(/^(\d+)[dD](\d+)([+\-]\d+)?$/);

  if (match) {
    const numDice = parseInt(match[1], 10) || 0;
    const diceSize = parseInt(match[2], 10) || 0;
    const bonus = parseInt(match[3] || "0", 10) || 0;
	console.log (`prefix: ${prefix}, numDice: ${numDice}, diceSize: ${diceSize}, bonus: ${bonus}`);

    updates[`${prefix}_damage_numdice`] = numDice;
    updates[`${prefix}_damage_dicesize`] = diceSize;
    updates[`${prefix}_damage_bonus`] = bonus;
  } else {
    updates[`${prefix}_damage_numdice`] = 0;
    updates[`${prefix}_damage_dicesize`] = 0;
    updates[`${prefix}_damage_bonus`] = 0;
  }

  return updates;
}

// Auto-calculate damage components for fixed weapon (weapon1_mdr)
on("change:weapon1_mdr_damage", function() {
  getAttrs(["weapon1_mdr_damage"], function(values) {
    const damageString = values.weapon1_mdr_damage || "";
    const updates = parseDamageString(damageString, "weapon1_mdr");
    setAttrs(updates);
  });
});

// Auto-calculate damage components for repeating weapons (repeating_weaponsmdr) - change only
on("change:repeating_weaponsmdr:weapondamage_mdr", function(eventInfo) {
  const repeatingId = eventInfo.sourceAttribute.match(/repeating_weaponsmdr_([^_]+)_/)[1];

  getAttrs([`repeating_weaponsmdr_${repeatingId}_weapondamage_mdr`], function(values) {
    const damageString = values[`repeating_weaponsmdr_${repeatingId}_weapondamage_mdr`] || "";
    const updates = parseDamageString(damageString, `repeating_weaponsmdr_${repeatingId}`);
    setAttrs(updates);
  });
});

// Auto-calculate damage components for repeating weapons (repeating_weaponsmdr) - change only
on("change:repeating_spellsmdr:spell_damage_mdr", function(eventInfo) {
  const repeatingId = eventInfo.sourceAttribute.match(/repeating_spellsmdr_([^_]+)_/)[1];
  getAttrs([`repeating_spellsmdr_${repeatingId}_spell_damage_mdr`], function(values) {
    const damageString = values[`repeating_spellsmdr_${repeatingId}_spell_damage_mdr`] || "";
    const updates = parseDamageString(damageString, `repeating_spellsmdr_${repeatingId}`);
    setAttrs(updates);
  });
});

// Auto-calculate damage components for repeating weapons (repeating_weaponsmdr) - change only
on("change:repeating_programsmdr:program_damage_mdr", function(eventInfo) {
  const repeatingId = eventInfo.sourceAttribute.match(/repeating_programsmdr_([^_]+)_/)[1];
  getAttrs([`repeating_programsmdr_${repeatingId}_program_damage_mdr`], function(values) {
    const damageString = values[`repeating_programsmdr_${repeatingId}_program_damage_mdr`] || "";
	console.log (`damageString: ${damageString}`);
    const updates = parseDamageString(damageString, `repeating_programsmdr_${repeatingId}`);
    setAttrs(updates);
  });
});


  on('sheet:opened', function () {
	  if (debug_on_trace) console.log ("[sheet:opened] Translation");
  const translationFields = [
    "str_txt", "dex_txt", "pow_txt", "con_txt", "app_txt", "edu_txt", "siz_txt", "int_txt", "mag_txt", "luck_txt",
    "accounting_txt", "alchemy_txt", "animalhandling_txt", "anthropology_txt", "appraise_txt", "arcana_txt",
    "archaeology_txt", "archanotech_txt", "archery_txt", "architecture_txt", "biology_txt", "bureaucracy_txt",
    "chant_txt", "charm_txt", "chemistry_txt", "climb_txt", "computeruse_txt", "creditrating_txt", "cthulhumythos_txt",
    "cybernetics_txt", "dance_txt", "demolitions_txt", "disguise_txt", "deception_txt", "dodge_txt", "driveauto_txt",
    "drone_operation_txt", "elecrepair_txt", "engineering_txt", "etiquette_high_society_txt", "etiquette_lyranni_txt", "fasttalk_txt",
    "fighting_brawl_txt", "firearms_hg_txt", "firearms_rifle_txt", "firearms_smg_txt", "first_aid_txt", "forbidden_lore_txt",
    "forgery_txt", "gunnery_txt", "heavy_weapons_txt", "history_txt", "impersonation_txt", "instrument_txt",
    "intimidate_txt", "interrogation_txt", "insight_txt", "investigation_txt", "jump_txt", "law_txt", "libraryuse_txt",
    "listen_txt", "locksmith_txt", "magic_alteration_txt", "magic_elemental_txt", "magic_enchantment_txt",
    "magic_illusion_txt", "magic_necromancy_txt", "magic_restoration_txt", "magic_summoning_txt", "magic_technomancy_txt",
    "magic_warding_txt", "magic_universal_txt", "mechrepair_txt", "mechanics_txt", "medicine_txt", "melee_weapons_txt",
    "naturalworld_txt", "navigate_txt", "occult_txt", "ophvmachine_txt", "perception_txt", "persuade_txt", "physics_txt",
    "pilotaircraft_txt", "pilotarc_txt", "pilotboat_txt", "psychology_txt", "psychoanalysis_txt", "ride_txt", "security_txt",
    "singing_txt", "sleightofhand_txt", "slicing_txt", "spirit_lore_txt", "spothidden_txt", "stealth_txt", "streetwise_txt",
    "survival_txt", "athletics_txt", "coordination_txt", "swim_txt", "throw_txt", "track_txt", "unarmed_txt", "veil_lore_txt"
  ];

  getAttrs(translationFields, values => {
    const updates = {};

    translationFields.forEach(field => {
      const translationKey = field.replace("_txt", "-r-txt")
        .replace("luck_txt", "luck-u")
		.replace("unarmed_txt", "unarmed-z")
		.replace("str-r-txt", "STR-r-txt")
		.replace("dex-r-txt", "DEX-r-txt")
		.replace("pow-r-txt", "POW-r-txt")
		.replace("con-r-txt", "CON-r-txt")
		.replace("app-r-txt", "APP-r-txt")
		.replace("edu-r-txt", "EDU-r-txt")
		.replace("siz-r-txt", "SIZ-r-txt")
		.replace("int-r-txt", "INT-r-txt")
		.replace("mag-r-txt", "MAG-r-txt");

      const correctText = getTranslationByKey(translationKey);
      if (values[field] !== correctText) {
        updates[field] = correctText;
      }
    });

    if (Object.keys(updates).length > 0) {
      setAttrs(updates);
    }
  });
});
</script>