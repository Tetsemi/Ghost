<!------------------------- Options Start ------------------------->
<input type="hidden" name="attr_new_character_flag" value="1" />
<input type="hidden" name="attr_skill_points_talent_refund" value="0" />

<!-------------------------  Options End  ------------------------->

<div class="sheet-layout">
<!-- Hidden Edit Mode Toggle Controller -->
<input type="hidden" class="sheet-edit-controller" name="attr_edit_mode" value="off" />
<!-- Hidden Edit Mode Toggle Controller -->
	<!-- Top Section -->
	<div class="sheet-top">
			<!-- 2 Cols (50/50): Investigator Info + Characteristics -->
			<div class="sheet-top-2col">
				<div class="sheet-section">
					<h4 class="sheet-section-head" data-i18n="investigatorinfo-u">Ghost Info</h4>
					<div class="sheet-grid-investigatorinfo">
						<div class="sheet-info-label" data-i18n="name-u">Name</div>
						<input class="sheet-attr-input-long" type="text" name="attr_name" />
						<div class="sheet-info-label" data-i18n="player-u">Player</div>
						<input class="sheet-attr-input-long" type="text" name="attr_player" />
						<div class="sheet-info-label" data-i18n="occupation-u">Occupation</div>
						<input class="sheet-attr-input-long" type="text" name="attr_occupation" />
						<div class="sheet-info-label" data-i18n="age-u">Age</div>
						<div class="sheet-grid-age-sex">
							<input class="sheet-attr-input-long" type="text" name="attr_age" />
							<div class="sheet-info-label" data-i18n="sex-u">Sex</div>
							<input class="sheet-attr-input-long" type="text" name="attr_sex" />
						</div>
						<div class="sheet-info-label" data-i18n="residence-u">Residence</div>
						<input class="sheet-attr-input-long" type="text" name="attr_residence" />
						<div class="sheet-info-label" data-i18n="birthplace-u">Birthplace</div>
						<input class="sheet-attr-input-long" type="text" name="attr_birthplace" />
						<div class="sheet-info-label" data-i18n="career-u">Career</div>
						<input class="sheet-attr-input-long" type="text" name="attr_career" />
						<div class="sheet-info-label" data-i18n="other-u">Other</div>
						<input class="sheet-attr-input-long" type="text" name="attr_other" />
					</div>
				</div>
				<div class="sheet-section">
					<h4 class="sheet-section-head" data-i18n="characteristics-u">Characteristics</h4>
					<!-- Row 1: STR / DEX / POW / VITALITY -->
					<div class="sheet-grid-characteristics">
						<!-- STR -->
						<div class="sheet-attr-label" data-i18n="STR-u">STR</div>
						<div class="sheet-str-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_str" type="text" />
							<button class="sheet-str-roll" type="roll" name="roll_str_check" value="&{template:coc-1} {{name=@{str_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{str}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{str}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{str}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
						</div>

						<!-- DEX -->
						<div class="sheet-attr-label" data-i18n="DEX-u">DEX</div>
						<div class="sheet-dex-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_dex" type="text" />
							<button class="sheet-dex-roll" type="roll" name="roll_dex_check" value="&{template:coc-1} {{name=@{dex_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{dex}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{dex}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{dex}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
						</div>

						<!-- POW -->
						<div class="sheet-attr-label" data-i18n="POW-u">POW</div>
						<div class="sheet-pow-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_pow" type="text" />
							<button class="sheet-pow-roll" type="roll" name="roll_pow_check" value="&{template:coc-1} {{name=@{pow_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{pow}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{pow}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{pow}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
						</div>
						<div class="sheet-vertical-divider"></div>

						<!-- VITALITY -->
						<div class="sheet-attr-label" data-i18n="vitality-u">Vitality</div>
						<input class="sheet-attr-input sheet-edit-toggle-field" type="text" name="attr_vitality" placeholder="current" data-i18n-placeholder="current" />
						<div class="sheet-vitality-slash">/</div>
						<input class="sheet-attr-input" type="text" name="attr_vitality_max" placeholder="max" readonly />

						<!-- Row 2: CON / APP / EDU / STRAIN -->
						<!-- CON -->
						<div class="sheet-attr-label" data-i18n="CON-u">CON</div>
						<div class="sheet-con-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_con" type="text" />
							<button class="sheet-con-roll" type="roll" name="roll_con_check" value="&{template:coc-1} {{name=@{con_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{con}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{con}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{con}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
						</div>

						<!-- APP -->
						<div class="sheet-attr-label" data-i18n="APP-u">APP</div>
						<div class="sheet-app-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_app" type="text" />
							<button class="sheet-app-roll" type="roll" name="roll_app_check" value="&{template:coc-1} {{name=@{app_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{app}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{app}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{app}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
						</div>

						<!-- EDU -->
						<div class="sheet-attr-label" data-i18n="EDU-u">EDU</div>
						<div class="sheet-edu-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_edu" type="text" />
							<button class="sheet-edu-roll" type="roll" name="roll_edu_check" value="&{template:coc-1} {{name=@{edu_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{edu}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{edu}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{edu}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
						</div>
						<div class="sheet-vertical-divider"></div>

						<!-- STRAIN -->
 						<div class="sheet-attr-label" data-i18n="strain-u">Strain</div>
						<input class="sheet-attr-input sheet-edit-toggle-field" type="text" name="attr_strain" placeholder="current" data-i18n-placeholder="current" />
						<div class="sheet-strain-slash">/</div>
						<input class="sheet-attr-input" type="text" name="attr_strain_max" placeholder="max" readonly />

						<!-- Row 3: SIZ / INT / MAG / HP -->
						<!-- SIZ -->
 						<div class="sheet-attr-label" data-i18n="SIZ-u">SIZ</div>
						<div class="sheet-siz-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_siz" type="text" />
							<button class="sheet-siz-roll" type="roll" name="roll_siz_check" value="&{template:coc-1} {{name=@{siz_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{siz}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{siz}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{siz}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
						</div>

						<!-- INT -->
						<div class="sheet-attr-label" data-i18n="INT-u">INT</div>
  						<div class="sheet-int-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_int" type="text" />
							<button class="sheet-int-roll" type="roll" name="roll_int_check" value="&{template:coc-1} {{name=@{int_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{int}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{int}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{int}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
 						</div>

 						<!-- MAG -->
						<div class="sheet-attr-label" data-i18n="MAG-u">MAG</div>
						<div class="sheet-mag-wrapper sheet-input-roll-wrapper">
							<input class="sheet-attr-input sheet-edit-toggle-field" name="attr_mag" type="text" />
							<button class="sheet-mag-roll" type="roll" name="roll_mag_check" value="&{template:coc-1} {{name=@{mag_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{mag}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{mag}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{mag}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
						</div>
						<div class="sheet-vertical-divider"></div>

						<!-- HP -->
						<div class="sheet-attr-label" data-i18n="HP-u">Hit Points</div>
						<input class="sheet-attr-input sheet-edit-toggle-field" type="text" name="attr_hp" placeholder="current" data-i18n-placeholder="current" />
						<div class="sheet-hp-slash">/</div>
						<input class="sheet-attr-input" type="text" name="attr_pulphp_max" placeholder="max" readonly />
					</div>
					 <!-- Separator -->
					<div class="sheet-attr-separator"></div>

					<!-- Row 4: BUILD / MOVE / AC / Init / Luck -->
					<div class="sheet-grid-characteristics-lower">
						<div class="sheet-grid-inline">
							<label class="sheet-attr-label" data-i18n="build-u">Build</label>
							<input class="sheet-attr-input" type="text" name="attr_build" readonly />
						</div>
						<div class="sheet-grid-inline sheet-move-wrapper">
							<label class="sheet-attr-label" data-i18n="Move rate-u">Move rate</label>
							<div class="sheet-grid-move">
								<input class="sheet-attr-input sheet-edit-toggle-field" type="text" name="attr_mov" />
								<button class="sheet-move-roll" type="roll" name="roll_mov_check" value="&{template:coc-dice-roll} {{name=Initiative (Chase) - @{name}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1d10 + @{mov} &{tracker}]]}}"></button>
							</div>
						</div>

						<div class="sheet-grid-inline">
							<label class="sheet-attr-label" data-i18n="arcane_capacity-u">Arc. Cap.</label>
							<input class="sheet-attr-input" type="text" name="attr_ac" readonly />
						</div>

						<div class="sheet-vertical-divider"></div>

						<div class="sheet-grid-inline sheet-init-wrapper">
							<label class="sheet-attr-label" data-i18n="initiative-u">Init</label>
							<div class="sheet-grid-initiative">
								<input class="sheet-attr-input sheet-readonly" type="text" name="attr_dex" />
								<button class="sheet-init-roll-button" type="roll" name="roll_initdex" value="!initdex" ></button>
							</div>
						</div>

						<div class="sheet-grid-inline sheet-luck-wrapper">
							<label class="sheet-attr-label" data-i18n="luck-u">Luck</label>
							<div class="sheet-grid-luck">
								<input class="sheet-attr-input sheet-edit-toggle-field" type="text" name="attr_luck" />
								<button class="sheet-luck-roll" type="roll" name="roll_luck_check" value="&{template:coc-1} {{name=@{luck_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{luck}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{luck}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{luck}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
							</div>
						</div>
					</div>
                </div>
			</div>

			<!-- 4 Cols (25/25/25/25): Race / Spenders / Damage Bonus / Build -->
			<div class="sheet-top-4col">
				<div class="sheet-section">
					<div class="sheet-race">
						<h4 class="sheet-section-head" data-i18n="race-u">Race</h4>
						<select class="sheet-selection-full" name="attr_showracials">
							<option value="0" selected>-- Choose Race --</option>
							<option value="alteri">Alteri</option>
							<option value="draevi">Draevi</option>
							<option value="feran">Feran</option>
							<option value="human">Human</option>
							<option value="khadra">Khadra</option>
							<option value="kitsu">Kitsu</option>
							<option value="lyranni">Lyranni</option>
							<option value="veyra">Veyra</option>
						</select>
					</div>
				</div>
				<div class="sheet-section">
					<div class="sheet-damage_bonus">
						<h4 class="sheet-section-head" data-i18n="damagebonus-u">Damage Bonus</h4>
						<select class="sheet-select-full" name="attr_damage_bonus">
							<option value="-2">-2</option>
							<option value="-1">-1</option>
							<option value="0" selected data-i18n="None">None</option>
							<option value="1d4">+1d4</option>
							<option value="1d6">+1d6</option>
							<option value="2d6">+2d6</option>
							<option value="3d6">+3d6</option>
							<option value="4d6">+4d6</option>
							<option value="5d6">+5d6</option>
							<option value="6d6">+6d6</option>
							<option value="7d6">+7d6</option>
							<option value="8d6">+8d6</option>
							<option value="9d6">+9d6</option>
							<option value="10d6">+10d6</option>
						</select>
					</div>
				</div>
                <div class="sheet-section">
                    <div class="sheet-spenders">
                        <h4 class="sheet-section-head" data-i18n="spenders-u">Spenders</h4>
                        <div class="sheet-grid-spenders">
                            <div class="sheet-info-label-small" data-i18n="total_attr_points_spent-u">AS</div>
                            <input class="sheet-attr-input-small sheet-readonly" type="text" name="attr_total_attr_points_spent" />
                            <div></div>
                            <div class="sheet-info-label-small" data-i18n="total_skill_points_spent-u">SPS</div>
                            <input class="sheet-attr-input-small sheet-readonly" type="text" name="attr_total_skill_points_spent" />
                        </div>
                    </div>
                </div>
				<div class="sheet-section">
					<div class="sheet-edit-toggle">
						<h4 class="sheet-section-head" data-i18n="editmode-u">Edit Mode</h4>
						<input type="hidden" class="sheet-edit-controller" name="attr_edit_mode" value="off" />
						<button type="action" name="act_edit_mode">Edit Mode</button>
					</div>
				</div>
			</div>
		</div>

	<!-- Middle Section -->
	<div class="sheet-middle">
		<!-- Combined 3-Column Layout: Dice Rolls (34%), Modifiers (16%), Wounds (25%), Statuses (25%) -->
		<div class="sheet-middle-3col">
			<div class="sheet-dice">
			<h4 class="sheet-section-head" data-i18n="dicerolls-u">Dice Rolls</h4>
				<div class="sheet-dice-roll-grid">
					<div class="sheet-dice-roll-wrapper"><span>1D3</span><button type="roll" name="roll_1D3" value="&{template:coc-dice-roll} {{name=Rolling 1D3}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D3+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span>1D4</span><button type="roll" name="roll_1D4" value="&{template:coc-dice-roll} {{name=Rolling 1D4}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D4+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span>1D5</span><button type="roll" name="roll_1D5" value="&{template:coc-dice-roll} {{name=Rolling 1D5}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D5+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span>1D6</span><button type="roll" name="roll_1D6" value="&{template:coc-dice-roll} {{name=Rolling 1D6}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D6+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span>1D7</span><button type="roll" name="roll_1D7" value="&{template:coc-dice-roll} {{name=Rolling 1D7}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D7+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span>1D8</span><button type="roll" name="roll_1D8" value="&{template:coc-dice-roll} {{name=Rolling 1D8}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D8+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span>1D10</span><button type="roll" name="roll_1D10" value="&{template:coc-dice-roll} {{name=Rolling 1D10}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D10+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span>1D12</span><button type="roll" name="roll_1D12" value="&{template:coc-dice-roll} {{name=Rolling 1D12}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D12+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span>1D20</span><button type="roll" name="roll_1D20" value="&{template:coc-dice-roll} {{name=Rolling 1D20}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1D20+@{dice_modifier_checkbox}]]}}"></button></div>
					<div class="sheet-dice-roll-wrapper"><span data-i18n="body-hit-location">Hit Loc.</span><button type="roll" name="roll_body_hit_loc" value="&{template:coc-body-hit-loc} {{roll1=[[1D20]]}}"></button></div>
					<div class="sheet-dice-custom">
						<input type="text" name="attr_dice_roll" class="dice-roll-input" placeholder="Custom" data-i18n-placeholder="custom-u" />
						<button type="roll" name="roll_custom_roll" value="&{template:coc-dice-roll} {{name=Rolling @{dice_roll}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[@{dice_roll}+@{dice_modifier_checkbox}]]}}"></button>
					</div>
				</div>
			</div>

			<div class="sheet-dice_modifiers">
				<div class="sheet-dice-modifier-tabs">
					<h4 class="sheet-section-head" data-i18n="dicemodifiers-u">Dice Modifiers</h4>

					<input type="hidden" name="attr_dice_modifier_checkbox" value="0" />

					<button type="action" name="act_20">+20 target number</button>
					<button type="action" name="act_10">+10 target number</button>
					<button type="action" name="act_-10">-10 target number</button>
					<button type="action" name="act_-20">-20 target number</button>
				</div>
			</div>

			<div class="sheet-wounds">
				<h4 class="sheet-section-head" data-i18n="wounds-u">Wounds</h4>
				<div class="sheet-wounds-tabs">

										
					<div class="sheet-wounds-wrapper">
						<input class="sheet-attr-input-small sheet-readonly" type="text" name="attr_major_wounds" />
						<input type="hidden" name="attr_major_wounds_checkbox" value="0" />
						<button type="action" name="act_major_wounds">Major Wounds</button>
					</div>
					<div class="sheet-wounds-wrapper">
						<div></div>
						<input type="hidden" name="attr_unconcious_checkbox" value="0" />
						<button type="action" name="act_unconcious">Unconcious</button>
					</div>
					<div class="sheet-wounds-wrapper">
						<div></div>
						<input type="hidden" name="attr_dying_checkbox" value="0" />
						<button type="action" name="act_dying">Dying</button>
					</div>
				</div>
			</div>

			<div class="sheet-statuses">
				<h4 class="sheet-section-head" data-i18n="statuses-u">Statuses</h4>
				<div class="sheet-statuses-wrapper">
					<input type="text" class="sheet-statuses-input" name="attr_status1" placeholder="Status 1"/>
					<input type="text" class="sheet-statuses-input" name="attr_status2" placeholder="Status 2" />
					<input type="text" class="sheet-statuses-input" name="attr_status3" placeholder="Status 3" />
					<input type="text" class="sheet-statuses-input" name="attr_status4" placeholder="Status 4" />
				</div>
			</div>
		</div>
	</div>

	<!-- Bottom Section -->
	<div class="sheet-bottom">
		<!-- Hidden tab value controller -->
		<input type="hidden" class="sheet-tab-controller" name="attr_selected_tab" value="skills" />
			<!-- Tab Buttons -->
		<div class="sheet-tab-buttons">
			<button type="action" name="act_skills">Skills</button>
			<button type="action" name="act_background">Background</button>
			<button type="action" name="act_talents">Racials</button>
			<button type="action" name="act_careers">Careers</button>
			<button type="action" name="act_combat">Combat</button>
			<button type="action" name="act_spells">Spells</button>
			<button type="action" name="act_inventory">Inventory</button>
			<button type="action" name="act_backstory">Backstory</button>
			<button type="action" name="act_ledger">Ledger</button>
			<button type="action" name="act_tracker">Tracker</button>
			<button type="action" name="act_npcs">NPCs</button>
			<button type="action" name="act_vehicles">Vehicles</button>

		</div>

		<!-- ------------------- SKILLS -------------------- -->
		<div class="sheet-tab-content sheet-skills">
			<div class="sheet-3colrow">
				<h4 class="section-head" data-i18n="investigatorskills-u">Skills</h4>
				<div class="sheet-skill-columns">
					<div class="sheet-skill-column">
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Combat</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_archery_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_archery_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="archery-u">Archery(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_archery_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_archery_mdr" readonly />
								<button type="roll" name="roll_archery_mdr_check" value="&{template:coc-1} {{name=@{archery_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{archery_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{archery_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{archery_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_dodge_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_dodge_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="dodge-u">Dodge(DEX/2)</span></div>
							<div><input class="skill-input" type="text" name="attr_dodge_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="skill-input" type="text" name="attr_dodge_mdr" readonly />
								<button type="roll" name="roll_dodge_mdr_check" value="&{template:coc-1} {{name=@{dodge_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{dodge_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{dodge_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{dodge_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_gunnery_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_gunnery_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="gunnery-u">Gunnery(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_gunnery_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_gunnery_mdr" readonly />
								<button type="roll" name="roll_gunnery_mdr_check" value="&{template:coc-1} {{name=@{gunnery_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{gunnery_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{gunnery_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{gunnery_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_heavy_weapons_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_heavy_weapons_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="heavy_weapons-u">Heavy Weapons(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_heavy_weapons_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_heavy_weapons_mdr" readonly />
								<button type="roll" name="roll_heavy_weapons_mdr_check" value="&{template:coc-1} {{name=@{heavy_weapons_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{heavy_weapons_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{heavy_weapons_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{heavy_weapons_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_melee_weapons_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_melee_weapons_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="melee_weapons-u">Melee Weapon(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_melee_weapons_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_melee_weapons_mdr" readonly />
								<button type="roll" name="roll_melee_weapons_mdr_check" value="&{template:coc-1} {{name=@{melee_weapons_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{melee_weapons_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{melee_weapons_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{melee_weapons_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_firearms_handgun_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_firearms_handgun_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="firearms(hg)-u">Pistols(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_firearms_handgun_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_firearms_handgun_mdr" readonly />
								<button type="roll" name="roll_firearms_handgun_mdr_check" value="&{template:coc-1} {{name=@{firearms_hg_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{firearms_handgun_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{firearms_handgun_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{firearms_handgun_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_firearms_rifle_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_firearms_rifle_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="firearms_rifle-u">Rifle/Shotgun(25%)</span></div>
							<div><input class="skill-input" type="text" name="attr_firearms_rifle_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_firearms_rifle_mdr" readonly />
								<button type="roll" name="roll_firearms_rifle_mdr_check" value="&{template:coc-1} {{name=@{firearms_rifle_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{firearms_rifle_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{firearms_rifle_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{firearms_rifle_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_firearms_smg_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_firearms_s_m_g_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="firearms_s_m_g-u">Submachine Guns(15%)</span></div>
							<div><input class="skill-input" type="text" name="attr_firearms_smg_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_firearms_smg_mdr" readonly />
								<button type="roll" name="roll_firearms_smg_mdr_check" value="&{template:coc-1} {{name=@{firearms_smg_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{firearms_smg_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{firearms_smg_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{firearms_smg_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_throw_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_throw_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="throw-u">Throw(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_throw_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_throw_mdr" readonly />
								<button type="roll" name="roll_throw_mdr_check" value="&{template:coc-1} {{name=@{throw_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{throw_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{throw_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{throw_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_unarmed_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_unarmed_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="unarmed-u">Unarmed(25%)</span></div>
							<div><input class="skill-input" type="text" name="attr_unarmed_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_unarmed_mdr" readonly />
								<button type="roll" name="roll_unarmed_mdr_check" value="&{template:coc-1} {{name=@{unarmed_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{unarmed_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{unarmed_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{unarmed_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill1_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill1_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill1_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill1_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill1_mdr" readonly />
								<button type="roll" name="roll_otherskill1_mdr_check" value="&{template:coc-1} {{name=@{otherskill1_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill1_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill1_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill1_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
						<div class="sheet-skill-spacer"></div>
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Magic</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_magic_alteration_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_alteration_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_alteration-u">Alteration(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_alteration_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_alteration_mdr" readonly />
								<button type="roll" name="roll_magic_alteration_mdr_check" value="&{template:coc-1} {{name=@{magic_alteration_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_alteration_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_alteration_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_alteration_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_elemental_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_elemental_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_elemental-u">Elemental(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_elemental_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_elemental_mdr" readonly />
								<button type="roll" name="roll_magic_elemental_mdr_check" value="&{template:coc-1} {{name=@{magic_elemental_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_elemental_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_elemental_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_elemental_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_enchantment_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_enchantment_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_enchantment-u">Enchantment(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_enchantment_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_enchantment_mdr" readonly />
								<button type="roll" name="roll_magic_enchantment_mdr_check" value="&{template:coc-1} {{name=@{magic_enchantment_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_enchantment_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_enchantment_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_enchantment_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_illusion_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_illusion_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_illusion-u">Illusion(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_illusion_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_illusion_mdr" readonly />
								<button type="roll" name="roll_magic_illusion_mdr_check" value="&{template:coc-1} {{name=@{magic_illusion_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_illusion_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_illusion_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_illusion_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_necromancy_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_necromancy_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_necromancy-u">Necromancy(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_necromancy_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_necromancy_mdr" readonly />
								<button type="roll" name="roll_magic_necromancy_mdr_check" value="&{template:coc-1} {{name=@{magic_necromancy_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_necromancy_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_necromancy_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_necromancy_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_restoration_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_restoration_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_restoration-u">Restoration(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_restoration_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_restoration_mdr" readonly />
								<button type="roll" name="roll_magic_restoration_mdr_check" value="&{template:coc-1} {{name=@{magic_restoration_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_restoration_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_restoration_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_restoration_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_summoning_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_summoning_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_summoning-u">Summoning(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_summoning_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_summoning_mdr" readonly />
								<button type="roll" name="roll_magic_summoning_mdr_check" value="&{template:coc-1} {{name=@{magic_summoning_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_summoning_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_summoning_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_summoning_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_technomancy_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_technomancy_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_technomancy-u">Technomancy(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_technomancy_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_technomancy_mdr" readonly />
								<button type="roll" name="roll_magic_technomancy_mdr_check" value="&{template:coc-1} {{name=@{magic_technomancy_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_technomancy_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_technomancy_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_technomancy_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_warding_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_warding_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_warding-u">Warding(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_warding_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_warding_mdr" readonly />
								<button type="roll" name="roll_magic_warding_mdr_check" value="&{template:coc-1} {{name=@{magic_warding_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_warding_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_warding_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_warding_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_magic_universal_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_magic_universal_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="magic_universal-u">Universal(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_magic_universal_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_magic_universal_mdr" readonly />
								<button type="roll" name="roll_magic_universal_mdr_check" value="&{template:coc-1} {{name=@{magic_universal_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{magic_universal_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{magic_universal_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{magic_universal_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill2_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill2_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill2_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill2_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill2_mdr" readonly />
								<button type="roll" name="roll_otherskill2_mdr_check" value="&{template:coc-1} {{name=@{otherskill2_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill2_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill2_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill2_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
						<div class="sheet-skill-spacer"></div>
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Language</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_language_own_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_language_own_improved_label" class="sheet-improved-indicator" readonly /><div class="skill-label"><span name="attr_language_own_txt"></span></div></div>
							<div><input class="skill-input" type="text" name="attr_language_own_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_language_own_mdr" readonly />
								<button type="roll" name="roll_language_own_mdr_check" value="&{template:coc-1} {{name=@{language_own_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{language_own_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{language_own_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{language_own_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_language_caltheran_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_language_caltheran_improved_label" class="sheet-improved-indicator" readonly /><div class="skill-label"><span name="attr_language_caltheran_txt"></span></div></div>
							<div><input class="skill-input" type="text" name="attr_language_caltheran_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_language_caltheran_mdr" readonly />
								<button type="roll" name="roll_language_caltheran_mdr_check" value="&{template:coc-1} {{name=@{language_caltheran_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{language_caltheran_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{language_caltheran_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{language_caltheran_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill3_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill3_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill3_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill3_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill3_mdr" readonly />
								<button type="roll" name="roll_otherskill3_mdr_check" value="&{template:coc-1} {{name=@{otherskill3_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill3_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill3_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill3_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
						<div class="sheet-spacer-row"></div>
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Other</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_otherskill10_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill10_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill10_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill10_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="skill-input" type="text" name="attr_otherskill10_mdr" readonly />
								<button type="roll" name="roll_otherskill10_mdr_check" value="&{template:coc-1} {{name=@{otherskill10_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill10_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill10_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill10_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
						<fieldset class="repeating_skillsmdr">
							<div class="sheet-skill-grid">
								<div><input type="checkbox" name="attr_checkbox_mdr" /></div>
								<div class="skill-label"><input class="sheet-skill-name-input" type="text" name="attr_skillname_mdr" /></div>
								<div><input class="skill-input" type="text" name="attr_skill_mdr" /></div>
								<div class="sheet-val-roll-static">
									<input class="skill-input" type="text" name="attr_skill_mdr" readonly />
									<button type="roll" name="roll_skill_mdr_check" value="&{template:coc-1} {{name=@{skillname_mdr} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{skill_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{skill_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{skill_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								</div>
							</div>
						</fieldset>
						<div class="sheet-skill-spacer"></div>
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Physical</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_athletics_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_athletics_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="athletics-u">Athletics(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_athletics_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_athletics_mdr" readonly />
								<button type="roll" name="roll_athletics_mdr_check" value="&{template:coc-1} {{name=@{athletics_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{athletics_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{athletics_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{athletics_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_coordination_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_coordination_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="coordination-u">Coordination(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_coordination_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_coordination_mdr" readonly />
								<button type="roll" name="roll_coordination_mdr_check" value="&{template:coc-1} {{name=@{coordination_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{coordination_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{coordination_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{coordination_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_swim_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_swim_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="swim-u">Swim(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_swim_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_swim_mdr" readonly />
								<button type="roll" name="roll_swim_mdr_check" value="&{template:coc-1} {{name=@{swim_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{swim_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{swim_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{swim_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill4_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill4_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill4_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill4_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill4_mdr" readonly />
								<button type="roll" name="roll_otherskill4_mdr_check" value="&{template:coc-1} {{name=@{otherskill4_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill4_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill4_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill4_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
						<div class="sheet-skill-spacer"></div>
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Pilot</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_drive_auto_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_drive_auto_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="driveauto-u">Drive Auto(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_drive_auto_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_drive_auto_mdr" readonly />
								<button type="roll" name="roll_drive_auto_mdr_check" value="&{template:coc-1} {{name=@{driveauto_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{drive_auto_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{drive_auto_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{drive_auto_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_drone_operation_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_drone_operation_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="drone_operation-u">Drone Operation(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_drone_operation_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_drone_operation_mdr" readonly />
								<button type="roll" name="roll_drone_operation_mdr_check" value="&{template:coc-1} {{name=@{drone_operation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{drone_operation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{drone_operation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{drone_operation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_pilotaircraft_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_pilotaircraft_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="pilotaircraft-u">Pilot Aircraft(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_pilotaircraft_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_pilotaircraft_mdr" readonly />
								<button type="roll" name="roll_pilotaircraft_mdr_check" value="&{template:coc-1} {{name=@{pilotaircraft_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{pilotaircraft_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{pilotaircraft_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{pilotaircraft_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_pilotarc_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_pilotarc_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="pilotarc-u">Pilot Arc(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_pilotarc_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_pilotarc_mdr" readonly />
								<button type="roll" name="roll_pilotarc_mdr_check" value="&{template:coc-1} {{name=@{pilotarc_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{pilotarc_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{pilotarc_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{pilotarc_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_pilotboat_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_pilotboat_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="pilotboat-u">Pilot Boat(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_pilotboat_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_pilotboat_mdr" readonly />
								<button type="roll" name="roll_pilotboat_mdr_check" value="&{template:coc-1} {{name=@{pilotboat_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{pilotboat_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{pilotboat_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{pilotboat_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill5_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill5_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill5_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill5_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill5_mdr" readonly />
								<button type="roll" name="roll_otherskill5_mdr_check" value="&{template:coc-1} {{name=@{otherskill5_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill5_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill5_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill5_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
					</div>
					<div class="sheet-skill-column">
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Science/Knowledge</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_alchemy_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_alchemy_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="alchemy-u">Alchemy(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_alchemy_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_alchemy_mdr" readonly />
								<button type="roll" name="roll_alchemy_mdr_check" value="&{template:coc-1} {{name=@{alchemy_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{alchemy_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{alchemy_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{alchemy_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_anthropology_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_anthropology_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="anthropology-u">Anthropology(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_anthropology_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_anthropology_mdr" readonly />
								<button type="roll" name="roll_anthropology_mdr_check" value="&{template:coc-1} {{name=@{anthropology_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{anthropology_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{anthropology_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{anthropology_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_arcana_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_arcana_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="arcana-u">Arcana(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_arcana_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_arcana_mdr" readonly />
								<button type="roll" name="roll_arcana_mdr_check" value="&{template:coc-1} {{name=@{arcana_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{arcana_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{arcana_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{arcana_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_archaeology_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_archaeology_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="archaeology-u">Archaeology(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_archaeology_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_archaeology_mdr" readonly />
								<button type="roll" name="roll_archaeology_mdr_check" value="&{template:coc-1} {{name=@{archaeology_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{archaeology_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{archaeology_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{archaeology_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_architecture_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_architecture_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="architecture-u">Architecture(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_architecture_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_architecture_mdr" readonly />
								<button type="roll" name="roll_architecture_mdr_check" value="&{template:coc-1} {{name=@{architecture_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{architecture_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{architecture_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{architecture_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_biology_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_biology_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="biology-u">Biology(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_biology_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_biology_mdr" readonly />
								<button type="roll" name="roll_biology_mdr_check" value="&{template:coc-1} {{name=@{biology_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{biology_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{biology_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{biology_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_chemistry_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_chemistry_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="chemistry-u">Chemistry(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_chemistry_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_chemistry_mdr" readonly />
								<button type="roll" name="roll_chemistry_mdr_check" value="&{template:coc-1} {{name=@{chemistry_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{chemistry_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{chemistry_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{chemistry_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_engineering_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_engineering_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="engineering-u">Engineering(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_engineering_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_engineering_mdr" readonly />
								<button type="roll" name="roll_engineering_mdr_check" value="&{template:coc-1} {{name=@{engineering_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{engineering_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{engineering_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{engineering_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_forbidden_lore_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_forbidden_lore_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="forbidden_lore-u">Forbidden Lore(0%)</span></div>
							<div><input class="skill-input" type="text" name="attr_forbidden_lore_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_forbidden_lore_mdr" readonly />
								<button type="roll" name="roll_forbidden_lore_mdr_check" value="&{template:coc-1} {{name=@{forbidden_lore_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{forbidden_lore_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{forbidden_lore_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{forbidden_lore_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_history_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_history_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="history-u">History(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_history_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_history_mdr" readonly />
								<button type="roll" name="roll_history_mdr_check" value="&{template:coc-1} {{name=@{history_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{history_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{history_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{history_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_investigation_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_investigation_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="investigation-u">Investigation(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_investigation_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_investigation_mdr" readonly />
								<button type="roll" name="roll_investigation_mdr_check" value="&{template:coc-1} {{name=@{investigation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{investigation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{investigation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{investigation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_law_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_law_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="law-u">Law(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_law_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_law_mdr" readonly />
								<button type="roll" name="roll_law_mdr_check" value="&{template:coc-1} {{name=@{law_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{law_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{law_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{law_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_medicine_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_medicine_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="medicine-u">Medicine(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_medicine_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_medicine_mdr" readonly />
								<button type="roll" name="roll_medicine_mdr_check" value="&{template:coc-1} {{name=@{medicine_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{medicine_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{medicine_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{medicine_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_natural_world_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_natural_world_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="naturalworld-u">Natural World(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_natural_world_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_natural_world_mdr" readonly />
								<button type="roll" name="roll_natural_world_mdr_check" value="&{template:coc-1} {{name=@{naturalworld_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{natural_world_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{natural_world_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{natural_world_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_occult_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_occult_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="occult-u">Occult Lore(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_occult_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_occult_mdr" readonly />
								<button type="roll" name="roll_occult_mdr_check" value="&{template:coc-1} {{name=@{occult_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{occult_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{occult_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{occult_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_physics_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_physics_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="physics-u">Physics(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_physics_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_physics_mdr" readonly />
								<button type="roll" name="roll_physics_mdr_check" value="&{template:coc-1} {{name=@{physics_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{physics_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{physics_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{physics_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_spirit_lore_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_spirit_lore_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="spirit_lore-u">Spirit Lore(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_spirit_lore_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_spirit_lore_mdr" readonly />
								<button type="roll" name="roll_spirit_lore_mdr_check" value="&{template:coc-1} {{name=@{spirit_lore_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{spirit_lore_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{spirit_lore_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{spirit_lore_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_veil_lore_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_veil_lore_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="veil_lore-u">Veil Lore(5%)</span></div>
							<div><input class="skill-input" type="text" name="attr_veil_lore_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_veil_lore_mdr" readonly />
								<button type="roll" name="roll_veil_lore_mdr_check" value="&{template:coc-1} {{name=@{veil_lore_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{veil_lore_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{veil_lore_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{veil_lore_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill6_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill6_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill6_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill6_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill6_mdr" readonly />
								<button type="roll" name="roll_otherskill6_mdr_check" value="&{template:coc-1} {{name=@{otherskill6_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill6_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill6_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill6_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
						<div class="sheet-skill-spacer"></div>
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Social</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_bureaucracy_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_bureaucracy_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="bureaucracy-u">Bureaucracy(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_bureaucracy_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_bureaucracy_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_bureaucracy_mdr_check" value="&{template:coc-1} {{name=@{bureaucracy_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{bureaucracy_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{bureaucracy_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{bureaucracy_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_bureaucracy_mdr_check" value="&{template:coc-penalty} {{name=@{bureaucracy_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{bureaucracy_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{bureaucracy_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{bureaucracy_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_bureaucracy_mdr_check" value="&{template:coc-bonus} {{name=@{bureaucracy_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{bureaucracy_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{bureaucracy_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{bureaucracy_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_chant_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_chant_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="chant-u">Chant(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_chant_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_chant_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_chant_mdr_check" value="&{template:coc-1} {{name=@{chant_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{chant_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{chant_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{chant_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_chant_mdr_check" value="&{template:coc-penalty} {{name=@{chant_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{chant_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{chant_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{chant_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_chant_mdr_check" value="&{template:coc-bonus} {{name=@{chant_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{chant_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{chant_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{chant_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_charm_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_charm_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="charm-u">Charm(15%)</span></div>
							<div><input class="skill-input" type="text" name="attr_charm_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_charm_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_charm_mdr_check" value="&{template:coc-1} {{name=@{charm_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{charm_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{charm_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{charm_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_charm_mdr_check" value="&{template:coc-penalty} {{name=@{charm_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{charm_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{charm_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{charm_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_charm_mdr_check" value="&{template:coc-bonus} {{name=@{charm_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{charm_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{charm_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{charm_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_dance_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_dance_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="dance-u">Dance(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_dance_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_dance_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_dance_mdr_check" value="&{template:coc-1} {{name=@{dance_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{dance_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{dance_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{dance_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_dance_mdr_check" value="&{template:coc-penalty} {{name=@{dance_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{dance_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{dance_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{dance_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_dance_mdr_check" value="&{template:coc-bonus} {{name=@{dance_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{dance_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{dance_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{dance_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_deception_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_deception_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="deception-u">Deception(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_deception_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_deception_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_deception_mdr_check" value="&{template:coc-1} {{name=@{deception_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{deception_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{deception_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{deception_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_deception_mdr_check" value="&{template:coc-penalty} {{name=@{deception_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{deception_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{deception_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{deception_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_deception_mdr_check" value="&{template:coc-bonus} {{name=@{deception_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{deception_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{deception_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{deception_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_disguise_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_disguise_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="disguise-u">Disguise(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_disguise_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_disguise_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_disguise_mdr_check" value="&{template:coc-1} {{name=@{disguise_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{disguise_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{disguise_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{disguise_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_disguise_mdr_check" value="&{template:coc-penalty} {{name=@{disguise_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{disguise_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{disguise_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{disguise_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_disguise_mdr_check" value="&{template:coc-bonus} {{name=@{disguise_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{disguise_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{disguise_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{disguise_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_etiquette_alteri_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_etiquette_alteri_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="etiquette_alteri-u">Etiquette (Lyranni)(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_etiquette_alteri_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_etiquette_alteri_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_etiquette_alteri_mdr_check" value="&{template:coc-1} {{name=@{etiquette_alteri_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_alteri_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_alteri_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_alteri_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_etiquette_alteri_mdr_check" value="&{template:coc-penalty} {{name=@{etiquette_alteri_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_alteri_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_alteri_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_alteri_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_etiquette_alteri_mdr_check" value="&{template:coc-bonus} {{name=@{etiquette_alteri_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_alteri_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_alteri_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_alteri_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_etiquette_high_society_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_etiquette_high_society_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="etiquette_high_society-u">Etiquette(H. Soc.)(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_etiquette_high_society_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_etiquette_high_society_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_etiquette_high_society_mdr_check" value="&{template:coc-1} {{name=@{etiquette_high_society_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_high_society_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_high_society_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_high_society_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_etiquette_high_society_mdr_check" value="&{template:coc-penalty} {{name=@{etiquette_high_society_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_high_society_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_high_society_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_high_society_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_etiquette_high_society_mdr_check" value="&{template:coc-bonus} {{name=@{etiquette_high_society_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_high_society_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_high_society_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_high_society_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_etiquette_lyranni_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_etiquette_lyranni_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="etiquette_lyranni-u">Etiquette (Lyranni)(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_etiquette_lyranni_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_etiquette_lyranni_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_etiquette_lyranni_mdr_check" value="&{template:coc-1} {{name=@{etiquette_lyranni_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_etiquette_lyranni_mdr_check" value="&{template:coc-penalty} {{name=@{etiquette_lyranni_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_etiquette_lyranni_mdr_check" value="&{template:coc-bonus} {{name=@{etiquette_lyranni_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_lyranni_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_etiquette_other_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_etiquette_other_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="etiquette_other-u">Etiquette(Other)(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_etiquette_other_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_etiquette_other_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_etiquette_other_mdr_check" value="&{template:coc-1} {{name=@{etiquette_other_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_other_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_other_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_other_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_etiquette_other_mdr_check" value="&{template:coc-penalty} {{name=@{etiquette_other_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_other_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_other_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_other_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_etiquette_other_mdr_check" value="&{template:coc-bonus} {{name=@{etiquette_other_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{etiquette_other_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{etiquette_other_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{etiquette_other_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_forgery_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_forgery_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="forgery-u">Forgery(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_forgery_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_forgery_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_forgery_mdr_check" value="&{template:coc-1} {{name=@{forgery_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{forgery_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{forgery_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{forgery_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_forgery_mdr_check" value="&{template:coc-penalty} {{name=@{forgery_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{forgery_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{forgery_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{forgery_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_forgery_mdr_check" value="&{template:coc-bonus} {{name=@{forgery_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{forgery_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{forgery_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{forgery_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />

							</div>
							<div><input type="checkbox" name="attr_impersonation_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_impersonation_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="impersonation-u">Impersonation(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_impersonation_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_impersonation_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_impersonation_mdr_check" value="&{template:coc-1} {{name=@{impersonation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{impersonation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{impersonation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{impersonation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_impersonation_mdr_check" value="&{template:coc-penalty} {{name=@{impersonation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{impersonation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{impersonation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{impersonation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_impersonation_mdr_check" value="&{template:coc-bonus} {{name=@{impersonation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{impersonation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{impersonation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{impersonation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_insight_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_insight_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="insight-u">Insight(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_insight_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_insight_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_insight_mdr_check" value="&{template:coc-1} {{name=@{insight_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{insight_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{insight_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{insight_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_insight_mdr_check" value="&{template:coc-penalty} {{name=@{insight_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{insight_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{insight_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{insight_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_insight_mdr_check" value="&{template:coc-bonus} {{name=@{insight_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{insight_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{insight_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{insight_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_instrument_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_instrument_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="instrument-u">Instrument(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_instrument_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_instrument_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_instrument_mdr_check" value="&{template:coc-1} {{name=@{instrument_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{instrument_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{instrument_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{instrument_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_instrument_mdr_check" value="&{template:coc-penalty} {{name=@{instrument_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{instrument_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{instrument_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{instrument_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}  {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_instrument_mdr_check" value="&{template:coc-bonus} {{name=@{instrument_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{instrument_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{instrument_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{instrument_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_intimidate_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_intimidate_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="intimidate-u">Intimidate(15%)</span></div>
							<div><input class="skill-input" type="text" name="attr_intimidate_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_intimidate_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_intimidate_mdr_check" value="&{template:coc-1} {{name=@{intimidate_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{intimidate_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{intimidate_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{intimidate_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_intimidate_mdr_check" value="&{template:coc-penalty} {{name=@{intimidate_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{intimidate_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{intimidate_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{intimidate_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_intimidate_mdr_check" value="&{template:coc-bonus} {{name=@{intimidate_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{intimidate_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{intimidate_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{intimidate_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_interrogation_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_interrogation_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="interrogation-u">Interrogation(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_interrogation_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_interrogation_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_interrogation_mdr_check" value="&{template:coc-1} {{name=@{interrogation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{interrogation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{interrogation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{interrogation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_interrogation_mdr_check" value="&{template:coc-penalty} {{name=@{interrogation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{interrogation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{interrogation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{interrogation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_interrogation_mdr_check" value="&{template:coc-bonus} {{name=@{interrogation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{interrogation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{interrogation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{interrogation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_persuade_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_persuade_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="persuade-u">Persuade(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_persuade_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_persuade_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_persuade_mdr_check" value="&{template:coc-1} {{name=@{persuade_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{persuade_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{persuade_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{persuade_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_persuade_mdr_check" value="&{template:coc-penalty} {{name=@{persuade_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{persuade_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{persuade_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{persuade_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_persuade_mdr_check" value="&{template:coc-bonus} {{name=@{persuade_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{persuade_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{persuade_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{persuade_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_recitation_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_recitation_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="recitation-u">Recitation(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_recitation_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_recitation_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_recitation_mdr_check" value="&{template:coc-1} {{name=@{recitation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{recitation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{recitation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{recitation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_recitation_mdr_check" value="&{template:coc-penalty} {{name=@{recitation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{recitation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{recitation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{recitation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_recitation_mdr_check" value="&{template:coc-bonus} {{name=@{recitation_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{recitation_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{recitation_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{recitation_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_singing_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_singing_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="singing-u">Singing(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_singing_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_singing_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_singing_mdr_check" value="&{template:coc-1} {{name=@{singing_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{singing_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{singing_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{singing_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_singing_mdr_check" value="&{template:coc-penalty} {{name=@{singing_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{singing_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{singing_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{singing_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_singing_mdr_check" value="&{template:coc-bonus} {{name=@{singing_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{singing_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{singing_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{singing_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_streetwise_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_streetwise_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="streetwise-u">Streetwise(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_streetwise_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_streetwise_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_streetwise_mdr_check" value="&{template:coc-1} {{name=@{streetwise_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{streetwise_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{streetwise_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{streetwise_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_streetwise_mdr_check" value="&{template:coc-penalty} {{name=@{streetwise_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{streetwise_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{streetwise_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{streetwise_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_streetwise_mdr_check" value="&{template:coc-bonus} {{name=@{streetwise_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{streetwise_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{streetwise_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{streetwise_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_voice_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_voice_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="voice-u">Voice(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_voice_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_voice_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_voice_mdr_check" value="&{template:coc-1} {{name=@{voice_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{voice_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{voice_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{voice_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_voice_mdr_check" value="&{template:coc-penalty} {{name=@{voice_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{voice_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{voice_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{voice_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_voice_mdr_check" value="&{template:coc-bonus} {{name=@{voice_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{voice_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{voice_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{voice_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill7_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill7_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill7_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill7_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill7_mdr" readonly />
								<input type="hidden" name="attr_social_mode_toggle" class="sheet-social-mode-toggle" value="0"/>
								<button type="roll" class="sheet-toggle-social-mode-off" name="roll_otherskill7_mdr_check" value="&{template:coc-1} {{name=@{otherskill7_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill7_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill7_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill7_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-penalty" name="roll_otherskill7_mdr_check" value="&{template:coc-penalty} {{name=@{otherskill7_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill7_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill7_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill7_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
								<button type="roll" class="sheet-toggle-social-mode-on-bonus" name="roll_otherskill7_mdr_check" value="&{template:coc-bonus} {{name=@{otherskill7_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill7_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill7_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill7_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}" />
							</div>
						</div>
					</div>
					<div class="sheet-skill-column">
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Survival</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_animalhandling_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_animalhandling_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="animalhandling-u">Animal Handling(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_animalhandling_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_animalhandling_mdr" readonly />
								<button type="roll" name="roll_animalhandling_mdr_check" value="&{template:coc-1} {{name=@{animalhandling_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{animalhandling_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{animalhandling_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{animalhandling_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_first_aid_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_first_aid_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="firstaid-u">First Aid(30%)</span></div>
							<div><input class="skill-input" type="text" name="attr_first_aid_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_first_aid_mdr" readonly />
								<button type="roll" name="roll_first_aid_mdr_check" value="&{template:coc-1} {{name=@{first_aid_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{first_aid_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{first_aid_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{first_aid_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_listen_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_listen_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="listen-u">Listen(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_listen_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_listen_mdr" readonly />
								<button type="roll" name="roll_listen_mdr_check" value="&{template:coc-1} {{name=@{listen_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{listen_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{listen_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{listen_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_navigate_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_navigate_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="navigate-u">Navigate(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_navigate_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_navigate_mdr" readonly />
								<button type="roll" name="roll_navigate_mdr_check" value="&{template:coc-1} {{name=@{navigate_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{navigate_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{navigate_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{navigate_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_perception_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_perception_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="perception-u">Perception(25%)</span></div>
							<div><input class="skill-input" type="text" name="attr_perception_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_perception_mdr" readonly />
								<button type="roll" name="roll_perception_mdr_check" value="&{template:coc-1} {{name=@{perception_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{perception_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{perception_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{perception_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_sleight_of_hand_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_sleight_of_hand_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="sleightofhand-u">Sleight of Hand(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_sleight_of_hand_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_sleight_of_hand_mdr" readonly />
								<button type="roll" name="roll_sleight_of_hand_mdr_check" value="&{template:coc-1} {{name=@{sleightofhand_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{sleight_of_hand_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{sleight_of_hand_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{sleight_of_hand_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_stealth_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_stealth_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="stealth-u">Stealth(20%)</span></div>
							<div><input class="skill-input" type="text" name="attr_stealth_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_stealth_mdr" readonly />
								<button type="roll" name="roll_stealth_mdr_check" value="&{template:coc-1} {{name=@{stealth_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{stealth_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{stealth_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{stealth_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_survival_urban_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_survival_urban_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="survival_urban-u">Survival(Urban)(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_survival_urban_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_survival_urban_mdr" readonly />
								<button type="roll" name="roll_survival_urban_mdr_check" value="&{template:coc-1} {{name=@{survival_urban_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{survival_urban_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{survival_urban_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{survival_urban_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_survival_wilderness_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_survival_wilderness_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="survival_wilderness-u">survival_wilderness (Wild)(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_survival_wilderness_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_survival_wilderness_mdr" readonly />
								<button type="roll" name="roll_survival_wilderness_mdr_check" value="&{template:coc-1} {{name=@{survival_wilderness_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{survival_wilderness_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{survival_wilderness_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{survival_wilderness_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_track_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_track_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="track-u">Track (10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_track_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_track_mdr" readonly />
								<button type="roll" name="roll_track_mdr_check" value="&{template:coc-1} {{name=@{track_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{track_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{track_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{track_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill8_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill8_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill8_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill8_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill8_mdr" readonly />
								<button type="roll" name="roll_otherskill8_mdr_check" value="&{template:coc-1} {{name=@{otherskill8_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill8_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill8_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill8_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
						<div class="sheet-skill-spacer"></div>
						<div class="sheet-skill-grid-header">
							<div class="sheet-skill-col">T</div>
							<div class="sheet-skill-col">Tech/Cyber</div>
							<div class="sheet-skill-col">SP</div>
							<div class="sheet-skill-col">Val</div>
						</div>
						<div class="sheet-skill-grid">
							<div><input type="checkbox" name="attr_archanotech_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_archanotech_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="archanotech-u">Archanotech(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_archanotech_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_archanotech_mdr" readonly />
								<button type="roll" name="roll_archanotech_mdr_check" value="&{template:coc-1} {{name=@{archanotech_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{archanotech_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{archanotech_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{archanotech_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_computer_use_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_computer_use_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="computeruse-u">Computer Use(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_computer_use_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_computer_use_mdr" readonly />
								<button type="roll" name="roll_computer_use_mdr_check" value="&{template:coc-1} {{name=@{computeruse_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{computer_use_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{computer_use_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{computer_use_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_cybernetics_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_cybernetics_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="cybernetics-u">Cybernetics(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_cybernetics_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_cybernetics_mdr" readonly />
								<button type="roll" name="roll_cybernetics_mdr_check" value="&{template:coc-1} {{name=@{cybernetics_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{cybernetics_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{cybernetics_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{cybernetics_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_demolitions_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_demolitions_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="demolitions-u">Demolitions(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_demolitions_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_demolitions_mdr" readonly />
								<button type="roll" name="roll_demolitions_mdr_check" value="&{template:coc-1} {{name=@{demolitions_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{demolitions_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{demolitions_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{demolitions_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_electronics_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_electronics_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="electronics-u">Electronics(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_electronics_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_electronics_mdr" readonly />
								<button type="roll" name="roll_electronics_mdr_check" value="&{template:coc-1} {{name=@{electronics_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{electronics_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{electronics_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{electronics_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_mechanics_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_mechanics_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="mechanics-u">Mechanics(10%)</span></div>
							<div><input class="skill-input" type="text" name="attr_mechanics_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_mechanics_mdr" readonly />
								<button type="roll" name="roll_mechanics_mdr_check" value="&{template:coc-1} {{name=@{mechanics_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{mechanics_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{mechanics_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{mechanics_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_security_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_security_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="security-u">Security(01%)</span></div>
							<div><input class="skill-input" type="text" name="attr_security_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_security_mdr" readonly />
								<button type="roll" name="roll_security_mdr_check" value="&{template:coc-1} {{name=@{security_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{security_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{security_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{security_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_slicing_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_slicing_improved_label" class="sheet-improved-indicator" readonly /><span class="skill-label" data-i18n="slicing-u">Slicing(05%)</span></div>
							<div><input class="skill-input" type="text" name="attr_slicing_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_slicing_mdr" readonly />
								<button type="roll" name="roll_slicing_mdr_check" value="&{template:coc-1} {{name=@{slicing_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{slicing_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{slicing_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{slicing_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
							<div><input type="checkbox" name="attr_otherskill9_mdr_checkbox" value="1" /></div>
							<div class="skill-label-wrapper"><input type="text" name="attr_otherskill9_improved_label" class="sheet-improved-indicator" readonly /><input class="sheet-skill-name-input" type="text" name="attr_otherskill9_mdr_name" /></div>
							<div><input class="skill-input" type="text" name="attr_otherskill9_skill_mdr" /></div>
							<div class="sheet-val-roll-static">
								<input class="sheet-skill-input" type="text" name="attr_otherskill9_mdr" readonly />
								<button type="roll" name="roll_otherskill9_mdr_check" value="&{template:coc-1} {{name=@{otherskill9_mdr_name} Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{otherskill9_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{otherskill9_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{otherskill9_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}" />
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- ------------------- Backgrounds -------------------- -->
		<div class="sheet-tab-content sheet-background">
			<!-- Controls which racial section is shown -->
			<input type="hidden" name="attr_showracials" class="sheet-tab-controller" />
			<h4 class="section-head" data-i18n="backgrounds-u">Backgrounds</h4>
			<!-- Alteri Backgrounds -->
			<div class="sheet-racials1">
				<div class="sheet-section">
					<!-- Alteri Background Tab Controller -->
					<input type="hidden" name="attr_alteri_background_choice" class="sheet-tab-controller" />
					<!-- Tab Buttons -->
					<div class="sheet-tab-buttons">
						<button type="action" name="act_break_faced_radical">Break-Faced Radical</button>
						<button type="action" name="act_ghostline_runner">Ghostline Runner</button>
						<button type="action" name="act_legacy_bearer">Legacy-Bearer</button>
						<button type="action" name="act_soft_year_drifter">Soft-Year Drifter</button>
						<button type="action" name="act_veilhaven_attendant">Veilhaven Attendant</button>
					</div>

                    <!-- Break-Faced Radical -->
                    <div class="sheet-bgblock sheet-bg-break_faced_radical">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_break_faced_radical_quote-u">background quote</span>
                                <span data-i18n="background_break_faced_radical-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_persuade_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_persuade_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="persuade-u">Persuade</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_deception_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_deception_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="deception-u">Deception</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_impersonation_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_impersonation_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="impersonation-u">Impersonation</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_streetwise_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_streetwise_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="streetwise-u">Streetwise</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_disguise_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_disguise_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="disguise-u">Disguise</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_charm_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_charm_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="charm-u">Charm</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="digital_mask_manifest-u">Digital Mask Manifest</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_alteri_talent" value="alteri_social_chameleon" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_alteri_social_chameleon_from_background" value="0" />
                                    <span data-i18n="social_chameleon-u">Social Chameleon</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_alteri_talent" value="alteri_reflexive_shift" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_alteri_reflexive_shift_from_background" value="0" />
                                    <span data-i18n="reflexive_shift-u">Reflexive Shift</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_alteri_talent" value="alteri_shaped_for_subtlety" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_alteri_shaped_for_subtlety_from_background" value="0" />
                                    <span data-i18n="shaped_for_subtlety-u">Shaped for Subtlety</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- Ghostline Runner -->
                    <div class="sheet-bgblock sheet-bg-ghostline_runner">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
								<span class="sheet-quote" data-i18n="background_ghostline_runner_quote-u">background quote</span>
                                <span data-i18n="background_ghostline_runner-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_slicing_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_slicing_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="slicing-u">Slicing</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_streetwise_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_streetwise_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="streetwise-u">Streetwise</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_stealth_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_stealth_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="stealth-u">Stealth</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_electronics_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_electronics_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="electronics-u">Electronics</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_deception_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_deception_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="deception-u">Deception</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_impersonation_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_impersonation_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="impersonation-u">Impersonation</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="burner_id_package-u">Burner ID Package</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_alteri_talent" value="alteri_ghost_protocol" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_alteri_ghost_protocol_from_background" value="0" />
                                    <span data-i18n="ghost_protocol-u">Ghost Protocol</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_alteri_talent" value="alteri_shaped_for_subtlety" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_alteri_shaped_for_subtlety_from_background" value="0" />
                                    <span data-i18n="shaped_for_subtlety-u">Shaped for Subtlety</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_alteri_talent" value="alteri_echoed_voice" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_alteri_echoed_voice_from_background" value="0" />
                                    <span data-i18n="echoed_voice-u">Echoed Voice</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- Legacy Bearer -->
                    <div class="sheet-bgblock sheet-bg-legacy_bearer">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
								<span class="sheet-quote" data-i18n="background_legacy_bearer_quote-u">background quote</span>
                                <span data-i18n="background_legacy_bearer-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_impersonation_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_impersonation_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="impersonation-u">Impersonation</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_history_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_history_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="history-u">History</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_arcana_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_arcana_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="arcana-u">Arcana</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_etiquette_alteri_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_etiquette_alteri_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="etiquette_alteri-u">Etiquette (Alteri)</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_disguise_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_disguise_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="disguise-u">Disguise</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_occult_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_occult_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="occult-u">Occult Lore</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="legacy_ritual_item-u">Legacy Ritual Item</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_alteri_talent" value="alteri_echoed_voice" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_alteri_echoed_voice_from_background" value="0" />
                                    <span data-i18n="echoed_voice-u">Echoed Voice</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_alteri_talent" value="alteri_maskwrights_grace" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_alteri_maskwrights_grace_from_background" value="0" />
                                    <span data-i18n="maskwrights_grace-u">Maskwright’s Grace</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_alteri_talent" value="alteri_second_skin" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_alteri_second_skin_from_background" value="0" />
                                    <span data-i18n="second_skin-u">Second Skin</span>
                                </label>
                            </div>
                        </div>
					</div>
					<!-- Soft-Year Drifter -->
					<div class="sheet-bgblock sheet-bg-soft_year_drifter">
						<div class="sheet-bgblock-flex">
							<div class="bg-description">
								<span class="sheet-quote" data-i18n="background_soft_year_drifter_quote-u">background quote</span>
                                <span data-i18n="background_soft_year_drifter-u">background</span>
							</div>
							<!-- Trained Skills Section -->
							<div class="sheet-trained-skills">
								<h4 data-i18n="trained_skills-u">Trained Skills</h4>
								<div class="sheet-trained-skill-list">
									<div class="sheet-bg-skill-row">
										<input type="hidden" name="attr_bg_coordination_mdr_checkbox_lock" value="0" />
										<input type="checkbox" name="attr_bg_coordination_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
										<label class="sheet-bg-skill-label" data-i18n="coordination-u">Coordination</label>
									</div>
									<div class="sheet-bg-skill-row">
  										<input type="hidden" name="attr_bg_deception_mdr_checkbox_lock" value="0" />
  										<input type="checkbox" name="attr_bg_deception_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
  										<label class="sheet-bg-skill-label" data-i18n="deception-u">Deception</label>
									</div>
										<div class="sheet-bg-skill-row">
  										<input type="hidden" name="attr_bg_disguise_mdr_checkbox_lock" value="0" />
  										<input type="checkbox" name="attr_bg_disguise_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
  										<label class="sheet-bg-skill-label" data-i18n="disguise-u">Disguise</label>
									</div>
									<div class="sheet-bg-skill-row">
  										<input type="hidden" name="attr_bg_impersonation_mdr_checkbox_lock" value="0" />
  										<input type="checkbox" name="attr_bg_impersonation_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
  										<label class="sheet-bg-skill-label" data-i18n="impersonation-u">Impersonation</label>
									</div>
									<div class="sheet-bg-skill-row">
  										<input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
  										<input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
  										<label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
									</div>
									<div class="sheet-bg-skill-row">
  										<input type="hidden" name="attr_bg_stealth_mdr_checkbox_lock" value="0" />
  										<input type="checkbox" name="attr_bg_stealth_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
  										<label class="sheet-bg-skill-label" data-i18n="stealth-u">Stealth</label>
									</div>
									<div class="sheet-bg-skill-row">
  										<input type="hidden" name="attr_bg_streetwise_mdr_checkbox_lock" value="0" />
  										<input type="checkbox" name="attr_bg_streetwise_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
  										<label class="sheet-bg-skill-label" data-i18n="streetwise-u">Streetwise</label>
									</div>
								</div>
							</div>
							<!-- Starting Item -->
							<div class="sheet-starting-item">
								<h4 data-i18n="starting_item-u">Starting Item</h4>
								<span data-i18n="mask_journal-u">Veilbound Mask Journal</span>
							</div>
							<!-- Starting Talents -->
							<div class="sheet-starting-talents">
								<h4 data-i18n="starting_talents-u">Starting Talents</h4>
								<label><input type="checkbox" name="attr_bg_alteri_talent" value="alteri_second_skin" class="sheet-talent-checkbox" /><input type="hidden" name="attr_alteri_second_skin_from_background" value="0" /><span data-i18n="second_skin-u">Second Skin</span></label>
								<label><input type="checkbox" name="attr_bg_alteri_talent" value="alteri_reflexive_shift" class="sheet-talent-checkbox" /><input type="hidden" name="attr_alteri_reflexive_shift_from_background" value="0" /><span data-i18n="reflexive_shift-u">Reflexive Shift</span></label>
								<label><input type="checkbox" name="attr_bg_alteri_talent" value="alteri_grace_of_the_many" class="sheet-talent-checkbox" /><input type="hidden" name="attr_alteri_grace_of_the_many_from_background" value="0" /><span data-i18n="grace_of_the_many-u">Grace of the Many</span></label>
							</div>
						</div>
					</div>
                    <!-- Veilhaven Attendant -->
                    <div class="sheet-bgblock sheet-bg-veilhaven_attendant">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
								<span class="sheet-quote" data-i18n="background_veilhaven_attendant_quote-u">background quote</span>
                                <span data-i18n="background_veilhaven_attendant-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_arcana_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_arcana_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="arcana-u">Arcana</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_disguise_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_disguise_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="disguise-u">Disguise</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_history_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_history_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="history-u">History</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_etiquette_alteri_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_etiquette_alteri_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="etiquette_alteri-u">Etiquette</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_impersonation_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_impersonation_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="impersonation-u">Impersonation</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_occult_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_occult_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="occult-u">Occult Lore</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="kin_token-u">Kin Token</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_alteri_talent" value="alteri_maskwrights_grace" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_alteri_maskwrights_grace_from_background" value="0" />
                                    <span data-i18n="maskwrights_grace-u">Maskwright’s Grace</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_alteri_talent" value="alteri_whisper_touched" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_alteri_whisper_touched_from_background" value="0" />
                                    <span data-i18n="whisper_touched-u">Whisper-Touched</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_alteri_talent" value="alteri_social_chameleon" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_alteri_social_chameleon_from_background" value="0" />
                                    <span data-i18n="social_chameleon-u">Social Chameleon</span>
                                </label>
                            </div>
                        </div>
                    </div>
				</div>
			</div>
			<!-- Draevi Backgrounds -->
			<div class="sheet-racials2">
				<div class="sheet-section">
					<!-- Draevi Background Tab Controller -->
					<input type="hidden" name="attr_draevi_background_choice" class="sheet-tab-controller" />
					<!-- Tab Buttons -->
					<div class="sheet-tab-buttons">
						<button type="action" name="act_forgeblood_scavenger">Forgeblood Scavenger</button>
						<button type="action" name="act_horn_carved_wanderer">Horn-Carved Wanderer</button>
						<button type="action" name="act_spiritbound_techshaper">Spiritbound Techshaper</button>
						<button type="action" name="act_tradition_keeper">Tradition Keeper</button>
						<button type="action" name="act_urban_tread">Urban Tread</button>
					</div>
                    <!-- Forgeblood Scavenger -->
                    <div class="sheet-bgblock sheet-bg-forgeblood_scavenger">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_forgeblood_scavenger_quote-u">background quote</span>
                                <span data-i18n="background_forgeblood_scavenger-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_mechanics_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_mechanics_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="mechanics-u">Mechanics</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_electronics_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_electronics_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="electronics-u">Electronics</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_streetwise_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_streetwise_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="streetwise-u">Streetwise</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_coordination_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_coordination_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="coordination-u">Coordination</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_perception_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_perception_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="perception-u">Perception</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_survival_wilderness_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_survival_wilderness_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="survival_wilderness-u">Survival</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="salvaged_veil_artifact-u">Salvaged Veil Artifact</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_draevi_talent" value="draevi_scavengers_edge" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_draevi_scavengers_edge_from_background" value="0" />
                                    <span data-i18n="scavengers_edge-u">Scavenger's Edge</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_draevi_talent" value="draevi_iron_stomach" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_draevi_iron_stomach_from_background" value="0" />
                                    <span data-i18n="iron_stomach-u">Iron Stomach</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_draevi_talent" value="draevi_urban_climber" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_draevi_urban_climber_from_background" value="0" />
                                    <span data-i18n="urban_climber-u">Urban Climber</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- Horn-Carved Wanderer -->
                    <div class="sheet-bgblock sheet-bg-horn_carved_wanderer">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_horn_carved_wanderer_quote-u">background quote</span>
                                <span data-i18n="background_horn_carved_wanderer-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_veil_lore_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_veil_lore_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="veil_lore-u">Veil Lore</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_occult_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_occult_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="occult-u">Occult</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_survival_wilderness_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_survival_wilderness_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="survival_wilderness-u">Survival</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_first_aid_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_first_aid_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="first_aid-u">First Aid</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_track_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_track_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="track-u">Track</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_arcana_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_arcana_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="arcana-u">Arcana</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="clan_ritual_token-u">Clan Ritual Token</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_draevi_talent" value="draevi_spirits_in_stone" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_draevi_spirits_in_stone_from_background" value="0" />
                                    <span data-i18n="spirits_in_stone-u">Spirits in Stone</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_draevi_talent" value="draevi_clan_blooded" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_draevi_clan_blooded_from_background" value="0" />
                                    <span data-i18n="clan_blooded-u">Clan-Blooded</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_draevi_talent" value="draevi_iron_stomach" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_draevi_iron_stomach_from_background" value="0" />
                                    <span data-i18n="iron_stomach-u">Iron Stomach</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- Spiritbound Techshaper -->
                    <div class="sheet-bgblock sheet-bg-spiritbound_techshaper">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_spiritbound_techshaper_quote-u">background quote</span>
                                <span data-i18n="background_spiritbound_techshaper-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_slicing_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_slicing_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="slicing-u">Slicing</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_spirit_lore_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_spirit_lore_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="spirit_lore-u">Spirit Lore</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_electronics_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_electronics_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="electronics-u">Electronics</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_arcana_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_arcana_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="arcana-u">Arcana</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_mechanics_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_mechanics_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="mechanics-u">Mechanics</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_streetwise_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_streetwise_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="streetwise-u">Streetwise</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="ram_shell_unfinished-u">RAM Shell (Unfinished)</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_draevi_talent" value="draevi_spirits_in_stone" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_draevi_spirits_in_stone_from_background" value="0" />
                                    <span data-i18n="spirits_in_stone-u">Spirits in Stone</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_draevi_talent" value="draevi_scavengers_edge" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_draevi_scavengers_edge_from_background" value="0" />
                                    <span data-i18n="scavengers_edge-u">Scavenger’s Edge</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_draevi_talent" value="draevi_clan_blooded" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_draevi_clan_blooded_from_background" value="0" />
                                    <span data-i18n="clan_blooded-u">Clan-Blooded</span>
                                </label>
                            </div>
                        </div>
                    </div>
					<!-- Tradition Keeper -->
                    <div class="sheet-bgblock sheet-bg-tradition_keeper">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_tradition_keeper_quote-u">background quote</span>
                                <span data-i18n="background_tradition_keeper-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_survival_wilderness_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_survival_wilderness_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="survival_wildnerness-u">Survival</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_navigate_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_navigate_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="navigate-u">Navigate</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_perception_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_perception_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="perception-u">Perception</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_athletics_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_athletics_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="athletics-u">Athletics</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_occult_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_occult_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="occult-u">Occult</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_track_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_track_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="track-u">Track</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_first_aid_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_first_aid_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="first_aid-u">First Aid</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="rite_of_passage_horn-u">Rite of Passage Horn</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_draevi_talent" value="draevi_trailborn_reflexes" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_draevi_trailborn_reflexes_from_background" value="0" />
                                    <span data-i18n="trailborn_reflexes-u">Trailborn Reflexes</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_draevi_talent" value="draevi_iron_stomach" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_draevi_iron_stomach_from_background" value="0" />
                                    <span data-i18n="iron_stomach-u">Iron Stomach</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_draevi_talent" value="draevi_spirits_in_stone" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_draevi_spirits_in_stone_from_background" value="0" />
                                    <span data-i18n="spirits_in_stone-u">Spirits in Stone</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- Urban Tread -->
                    <div class="sheet-bgblock sheet-bg-urban_tread">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_urban_tread_quote-u">background quote</span>
                                <span data-i18n="background_urban_tread-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_athletics_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_athletics_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="athletics-u">Athletics</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_streetwise_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_streetwise_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="streetwise-u">Streetwise</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_stealth_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_stealth_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="stealth-u">Stealth</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_coordination_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_coordination_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="coordination-u">Coordination</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_perception_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_perception_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="perception-u">Perception</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_mechanics_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_mechanics_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="mechanics-u">Mechanics</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_climb_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_climb_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="climb-u">Climb</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="repurposed_clan_token-u">Repurposed Clan Token</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_draevi_talent" value="draevi_gutter_stalker" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_draevi_gutter_stalker_from_background" value="0" />
                                    <span data-i18n="gutter_stalker-u">Gutter Stalker</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_draevi_talent" value="draevi_urban_climber" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_draevi_urban_climber_from_background" value="0" />
                                    <span data-i18n="urban_climber-u">Urban Climber</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_draevi_talent" value="draevi_trailborn_reflexes" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_draevi_trailborn_reflexes_from_background" value="0" />
                                    <span data-i18n="trailborn_reflexes-u">Trailborn Reflexes</span>
                                </label>
                            </div>
                        </div>
                    </div>
				</div>
			</div>
			<!--  Feran Background -->
			<div class="sheet-racials3">
				<div class="sheet-section">
					<!-- Feran Background Tab Controller -->
					<input type="hidden" name="attr_feran_background_choice" class="sheet-tab-controller" />
				</div>
			</div>
			<!-- Human Background -->
			<div class="sheet-racials4">
				<div class="sheet-section">
					<!-- Human Background Tab Controller -->
					<input type="hidden" name="attr_human_background_choice" class="sheet-tab-controller" />

					<!-- Tab Buttons -->
					<div class="sheet-tab-buttons">
						<button type="action" name="act_ash_war_refugee">Ash War Refugee</button>
						<button type="action" name="act_data_hatched">Data-Hatched</button>
						<button type="action" name="act_enclave_born">Enclave Born</button>
						<button type="action" name="act_gutterfire_youth">Gutterfire Youth</button>
						<button type="action" name="act_outpost_raised">Outpost Raised</button>
						<button type="action" name="act_scavsteel_whelp">Scavsteel Whelp</button>
					</div>
                    <!-- Ash War Refugee -->
                    <div class="sheet-bgblock sheet-bg-ash_war_refugee">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_ash_war_refugee_quote-u">background quote</span>
                                <span data-i18n="background_ash_war_refugee-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_first_aid_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_first_aid_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="first_aid-u">First Aid</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_athletics_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_athletics_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="athletics-u">Athletics</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_dodge_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_dodge_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="dodge-u">Dodge</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_survival_urban_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_survival_urban_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="survival_urban-u">survival_urban</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_perception_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_perception_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="perception-u">Perception</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_stealth_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_stealth_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="stealth-u">Stealth</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="faded_token_of_past-u">Faded Token of the Past</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_makeshift_medic" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_makeshift_medic_from_background" value="0" />
                                    <span data-i18n="makeshift_medic-u">Makeshift Medic</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_no_stranger_to_pain" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_no_stranger_to_pain_from_background" value="0" />
                                    <span data-i18n="no_stranger_to_pain-u">No Stranger to Pain</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_hard_lesson" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_hard_lesson_from_background" value="0" />
                                    <span data-i18n="hard_lesson-u">Hard Lesson</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Data-Hatched -->
                    <div class="sheet-bgblock sheet-bg-data_hatched">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_data_hatched_quote-u">background quote</span>
                                <span data-i18n="background_data_hatched-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_slicing_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_slicing_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="slicing-u">Slicing</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_science_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_science_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="science-u">Science</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_electronics_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_electronics_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="electronics-u">Electronics</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_occult_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_occult_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="occult-u">Occult</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_bureaucracy_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_bureaucracy_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="bureaucracy-u">Bureaucracy</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_recitation_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_recitation_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="recitation-u">Recitation</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="memory_shard-u">Memory Shard</span>
                                <span data-i18n="ai_record-u">AI Record</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_instinct_over_training" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_instinct_over_training_from_background" value="0" />
                                    <span data-i18n="instinct_over_training-u">Instinct Over Training</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_quick_fixer" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_quick_fixer_from_background" value="0" />
                                    <span data-i18n="quick_fixer-u">Quick Fixer</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_skilled_focus" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_skilled_focus_from_background" value="0" />
                                    <span data-i18n="skilled_focus-u">Skilled Focus</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- Enclave Born -->
                    <div class="sheet-bgblock sheet-bg-enclave_born">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_enclave_born_quote-u">background quote</span>
                                <span data-i18n="background_enclave_born-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_etiquette_high_society_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_etiquette_high_society_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="etiquette_high_society-u">Etiquette (High Society)</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_persuade_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_persuade_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="persuade-u">Persuade</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_voice_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_voice_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="voice-u">Voice</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_charm_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_charm_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="charm-u">Charm</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_bureaucracy_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_bureaucracy_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="bureaucracy-u">Bureaucracy</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_history_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_history_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="history-u">History</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="pristine_id_code_uptier_zone-u">Pristine ID Code - Uptier Zone</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_social_versatility" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_social_versatility_from_background" value="0" />
                                    <span data-i18n="social_versatility-u">Social Versatility</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_instinct_over_training" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_instinct_over_training_from_background" value="0" />
                                    <span data-i18n="instinct_over_training-u">Instinct Over Training</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_battle_tested_gut" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_battle_tested_gut_from_background" value="0" />
                                    <span data-i18n="battle_tested_gut-u">Battle-Tested Gut</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- Gutterfire Youth -->
                    <div class="sheet-bgblock sheet-bg-gutterfire_youth">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_gutterfire_youth_quote-u">background quote</span>
                                <span data-i18n="background_gutterfire_youth-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_stealth_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_stealth_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="stealth-u">Stealth</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_streetwise_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_streetwise_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="streetwise-u">Streetwise</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_sleight_of_hand_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_sleight_of_hand_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="sleight_of_hand-u">Sleight of Hand</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_deception_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_deception_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="deception-u">Deception</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_perception_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_perception_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="perception-u">Perception</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_dodge_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_dodge_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="dodge-u">Dodge</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_slicing_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_slicing_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="slicing-u">Slicing</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="personal_survival_kit-u">Personal Survival Kit</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_social_versatility" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_social_versatility_from_background" value="0" />
                                    <span data-i18n="social_versatility-u">Social Versatility</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_hard_lesson" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_hard_lesson_from_background" value="0" />
                                    <span data-i18n="hard_lesson-u">Hard Lesson</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_skilled_focus" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_skilled_focus_from_background" value="0" />
                                    <span data-i18n="skilled_focus-u">Skilled Focus</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- Outpost Raised -->
                    <div class="sheet-bgblock sheet-bg-outpost_raised">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_outpost_raised_quote-u">background quote</span>
                                <span data-i18n="background_outpost_raised-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_survival_wilderness_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_survival_wilderness_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="survival_wilderness-u">Survival</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_firearms_rifle_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_firearms_rifle_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="firearms_rifle-u">Rifles/Shotguns</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_mechanics_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_mechanics_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="mechanics-u">Mechanics</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_navigate_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_navigate_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="navigate-u">Navigate</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_first_aid_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_first_aid_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="first_aid-u">First Aid</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_drive_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_drive_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="drive-u">Drive</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="outpost_keepsake-u">Outpost Keepsake</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_battle_tested_gut" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_battle_tested_gut_from_background" value="0" />
                                    <span data-i18n="battle_tested_gut-u">Battle-Tested Gut</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_no_stranger_to_pain" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_no_stranger_to_pain_from_background" value="0" />
                                    <span data-i18n="no_stranger_to_pain-u">No Stranger to Pain</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_hard_lesson" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_hard_lesson_from_background" value="0" />
                                    <span data-i18n="hard_lesson-u">Hard Lesson</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- Scavsteel Whelp -->
                    <div class="sheet-bgblock sheet-bg-scavsteel_whelp">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_scavsteel_whelp_quote-u">background quote</span>
                                <span data-i18n="background_scavsteel_whelp-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_mechanics_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_mechanics_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="mechanics-u">Mechanics</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_electronics_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_electronics_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="electronics-u">Electronics</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_streetwise_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_streetwise_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="streetwise-u">Streetwise</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_slicing_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_slicing_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="slicing-u">Slicing</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_survival_urban_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_survival_urban_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="survival_urban-u">Survival</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_perception_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_perception_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="perception-u">Perception</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="trusted_toolset-u">Trusted Toolset</span>
                                <span data-i18n="modded_wearable-u">Modded Wearable</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_quick_fixer" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_quick_fixer_from_background" value="0" />
                                    <span data-i18n="quick_fixer-u">Quick Fixer</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_hard_lesson" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_hard_lesson_from_background" value="0" />
                                    <span data-i18n="hard_lesson-u">Hard Lesson</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_human_talent" value="human_skilled_focus" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_human_skilled_focus_from_background" value="0" />
                                    <span data-i18n="skilled_focus-u">Skilled Focus</span>
                                </label>
                            </div>
                        </div>
                    </div>

				</div>
			</div>
			<!-- Khadra Background -->
			<div class="sheet-racials5">
				<div class="sheet-section">
					<!-- Khadra Background Tab Controller -->
					<input type="hidden" name="attr_khadra_background_choice" class="sheet-tab-controller" />
				</div>
			</div>
			<!-- Kitsu Background -->
			<div class="sheet-racials6">
				<div class="sheet-section">
					<!-- Kitsu Background Tab Controller -->
					<input type="hidden" name="attr_kitsu_background_choice" class="sheet-tab-controller" />
					<!-- Placeholder for tab buttons and content -->
				</div>
			</div>
			<!-- Lyranni Background -->
			<div class="sheet-racials7">
				<div class="sheet-section">
					<!-- Lyranni Background Tab Controller -->
					<input type="hidden" name="attr_lyranni_background_choice" class="sheet-tab-controller" />
					<!-- Lyranni Background Tab Buttons -->
					<div class="sheet-tab-buttons">
						<button type="action" name="act_aelvareth_devotee">Ael’Vareth Devotee</button>
						<button type="action" name="act_echoborne">Echoborne</button>
						<button type="action" name="act_glide_spire_scion">Glide-Spire Scion</button>
						<button type="action" name="act_whisper_walker">Whisper-Walker</button>
						<button type="action" name="act_zurethkai_flameborn">Zureth’Kai Flameborn</button>
					</div>
                    <!-- Ael’Vareth Devotee -->
                    <div class="sheet-bgblock sheet-bg-aelvareth_devotee">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_aelvareth_devotee_quote-u">background quote</span>
                                <span data-i18n="background_aelvareth_devotee-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_occult_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_occult_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="occult-u">Occult Lore</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_etiquette_lyranni_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_etiquette_lyranni_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="etiquette_lyranni-u">Etiquette (Lyranni)</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_arcana_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_arcana_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="arcana-u">Arcana</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_chant_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_chant_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="chant-u">Performance (Chant)</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_magic_warding_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_magic_warding_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="magic_warding-u">Magic (Warding)</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_bureaucracy_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_bureaucracy_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="bureaucracy-u">Bureaucracy</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_veil_lore_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_veil_lore_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="veil_lore-u">Veil Lore</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="aelvareth_veilmark-u">Ael’Vareth Veilmark</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_lyranni_talent" value="lyranni_threadwalker" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_lyranni_threadwalker_from_background" value="0" />
                                    <span data-i18n="threadwalker-u">Threadwalker</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_lyranni_talent" value="lyranni_legacy_spark" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_lyranni_legacy_spark_from_background" value="0" />
                                    <span data-i18n="legacy_spark-u">Legacy Spark</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_lyranni_talent" value="lyranni_veilsight" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_lyranni_veilsight_from_background" value="0" />
                                    <span data-i18n="veilsight-u">Veilsight</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- Echoborne -->
                    <div class="sheet-bgblock sheet-bg-echoborne">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_echoborne_quote-u">background quote</span>
                                <span data-i18n="background_echoborne-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_arcana_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_arcana_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="arcana-u">Arcana</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_etiquette_lyranni_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_etiquette_lyranni_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="etiquette_lyranni-u">Etiquette (Lyranni)</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_occult_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_occult_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="occult-u">Occult</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_history_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_history_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="history-u">History</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_voice_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_voice_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="voice-u">Voice</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_bureaucracy_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_bureaucracy_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="bureaucracy-u">Bureaucracy</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="ancestral_veilmark-u">Ancestral Veilmark</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_lyranni_talent" value="lyranni_legacy_spark" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_lyranni_legacy_spark_from_background" value="0" />
                                    <span data-i18n="legacy_spark-u">Legacy Spark</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_lyranni_talent" value="lyranni_veilsight" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_lyranni_veilsight_from_background" value="0" />
                                    <span data-i18n="veilsight-u">Veilsight</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_lyranni_talent" value="lyranni_threadwalker" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_lyranni_threadwalker_from_background" value="0" />
                                    <span data-i18n="threadwalker-u">Threadwalker</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- Glide-Spire Scion -->
                    <div class="sheet-bgblock sheet-bg-glide_spire_scion">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_glide_spire_scion_quote-u">background quote</span>
                                <span data-i18n="background_glide_spire_scion-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_persuade_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_persuade_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="persuade-u">Persuade</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_streetwise_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_streetwise_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="streetwise-u">Streetwise</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_charm_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_charm_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="charm-u">Charm</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_etiquette_high_society_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_etiquette_high_society_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="etiquette_high_society-u">Etiquette (High Society)</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_dance_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_dance_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="dance-u">Performance (Dance)</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_deception_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_deception_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="deception-u">Deception</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="veil_threaded_accessory-u">Veil-threaded Accessory</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_lyranni_talent" value="lyranni_social_ghost" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_lyranni_social_ghost_from_background" value="0" />
                                    <span data-i18n="social_ghost-u">Social Ghost</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_lyranni_talent" value="lyranni_echo_in_the_veins" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_lyranni_echo_in_the_veins_from_background" value="0" />
                                    <span data-i18n="echo_in_the_veins-u">Echo in the Veins</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_lyranni_talent" value="lyranni_legacy_spark" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_lyranni_legacy_spark_from_background" value="0" />
                                    <span data-i18n="legacy_spark-u">Legacy Spark</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Whisper-Walker -->
                    <div class="sheet-bgblock sheet-bg-whisper_walker">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_whisper_walker_quote-u">background quote</span>
                                <span data-i18n="background_whisper_walker-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_perception_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_perception_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="perception-u">Perception</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_occult_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_occult_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="occult-u">Occult Lore</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_spirit_lore_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_spirit_lore_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="spirit_lore-u">Spirit Lore</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_survival_wilderness_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_survival_wilderness_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="survival_wilderness-u">survival_wilderness</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_stealth_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_stealth_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="stealth-u">Stealth</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_magic_warding_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_magic_warding_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="magic_warding-u">Magic (Warding)</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="veilmark_living-sigil-u">Veilmark (Living Sigil)</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_lyranni_talent" value="lyranni_threadwalker" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_lyranni_threadwalker_from_background" value="0" />
                                    <span data-i18n="threadwalker-u">Threadwalker</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_lyranni_talent" value="lyranni_veilsight" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_lyranni_veilsight_from_background" value="0" />
                                    <span data-i18n="veilsight-u">Veilsight</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_lyranni_talent" value="lyranni_veil_blooded_sense" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_lyranni_veil_blooded_sense_from_background" value="0" />
                                    <span data-i18n="veil_blooded_sense-u">Veil-Blooded Sense</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- Zureth’Kai Flameborn -->
                    <div class="sheet-bgblock sheet-bg-zurethkai_flameborn">
                        <div class="sheet-bgblock-flex">
                            <!-- Description -->
                            <div class="bg-description">
                                <span class="sheet-quote" data-i18n="background_zurethkai_flameborn_quote-u">background quote</span>
                                <span data-i18n="background_zurethkai_flameborn-u">background</span>
                            </div>

                            <!-- Trained Skills Section -->
                            <div class="sheet-trained-skills">
                                <h4 data-i18n="trained_skills-u">Trained Skills</h4>
                                <div class="sheet-trained-skill-list">
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_slicing_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_slicing_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="slicing-u">Slicing</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_magic_technomancy_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_magic_technomancy_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="magic_technomancy-u">Magic (Technomancy)</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_electronics_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_electronics_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="electronics-u">Electronics</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_arcana_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_arcana_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="arcana-u">Arcana</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_deception_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_deception_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="deception-u">Deception</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_magic_illusion_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_magic_illusion_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="magic_illusion-u">Magic (Illusion)</label>
                                    </div>
                                    <div class="sheet-bg-skill-row">
                                        <input type="hidden" name="attr_bg_insight_mdr_checkbox_lock" value="0" />
                                        <input type="checkbox" name="attr_bg_insight_mdr_checkbox" value="1" class="sheet-bg-skill-checkbox" />
                                        <label class="sheet-bg-skill-label" data-i18n="insight-u">Insight</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Starting Item -->
                            <div class="sheet-starting-item">
                                <h4 data-i18n="starting_item-u">Starting Item</h4>
                                <span data-i18n="symbolic_magitech_mod-u">Symbolic Magitech Mod</span>
                            </div>

                            <!-- Starting Talents -->
                            <div class="sheet-starting-talents">
                                <h4 data-i18n="starting_talents-u">Starting Talents</h4>
                                <label>
                                    <input type="checkbox" name="attr_bg_lyranni_talent" value="lyranni_aether_override" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_lyranni_aether_override_from_background" value="0" />
                                    <span data-i18n="aether_override-u">Aether Override</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_lyranni_talent" value="lyranni_veil_blooded_sense" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_lyranni_veil_blooded_sense_from_background" value="0" />
                                    <span data-i18n="veil_blooded_sense-u">Veil-Blooded Sense</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="attr_bg_lyranni_talent" value="lyranni_echo_in_the_veins" class="sheet-talent-checkbox" />
                                    <input type="hidden" name="attr_lyranni_echo_in_the_veins_from_background" value="0" />
                                    <span data-i18n="echo_in_the_veins-u">Echo in the Veins</span>
                                </label>
                            </div>
                        </div>
                    </div>


				</div>
			</div>
			<!-- Veyra Background -->
			<div class="sheet-racials8">
				<div class="sheet-section">
					<!-- Veyra Background Tab Controller -->
					<input type="hidden" name="attr_veyra_background_choice" class="sheet-tab-controller" />
				</div>
			</div>
		</div>

		<!-- ------------------- Talents  -------------------- -->
		<div class="sheet-tab-content sheet-talents">
			<input type="hidden" name="attr_showracials" class="sheet-tab-controller" />
			<h4 class="section-head" data-i18n="talents-u">Talents</h4>

			<div class="sheet-section">

				<div class="sheet-xp-tracker">
					<div class="sheet-xp-row">
						<label>Spent XP (Talent)</label>
						<input type="text" name="attr_xp_spent_talent" class="sheet-xp-field sheet-readonly" />
					</div>
				</div>

				<div class="sheet-talent-summary">
					<h3 class="sheet-talent-tier-header">Chosen Talents Summary</h3>
					<span name="attr_talent_summary"></span>
				</div>
			</div>

			<!-- Alteri Talents -->
			<div class="sheet-racials1">

				<div class="sheet-talent-tier" data-tier="1">
					<h3 class="sheet-talent-tier-header">Tier 1 Talents</h3>

					<!-- Second Skin -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_second_skin_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_second_skin" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_second_skin_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_second_skin_description"></span></span>
					</div>

					<!-- Reflexive Shift -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_reflexive_shift_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_reflexive_shift" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_reflexive_shift_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_reflexive_shift_description"></span></span>
					</div>

					<!-- Echoed Voice -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_echoed_voice_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_echoed_voice" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_echoed_voice_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_echoed_voice_description"></span></span>
					</div>

					<!-- Maskwright’s Grace -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_show_maskwrights_grace_bonus" value="0" />
						<input type="hidden" name="attr_alteri_maskwrights_grace_lockflag" value="0" />
						<input type="hidden" name="attr_alteri_maskwrights_grace_lockflag_skill" value="0" />

						<input type="checkbox" name="attr_alteri_maskwrights_grace" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_maskwrights_grace_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_maskwrights_grace_description"></span></span>

						<div class="sheet-skill-choice-placeholder">
							<div class="sheet-skill-choice-options" name="attr_maskwrights_grace_choices">
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_maskwrights_grace_mdr_checkbox" value="talent_disguise" />
									<span>Disguise +10%</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_maskwrights_grace_mdr_checkbox" value="talent_impersonation" />
									<span>Impersonation +10%</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_maskwrights_grace_mdr_checkbox" value="talent_insight" />
									<span>Insight +10%</span>
								</label>
							</div>
						</div>
					</div>

					<!-- Social Chameleon -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_social_chameleon_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_social_chameleon" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_social_chameleon_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_social_chameleon_description"></span></span>
					</div>

					<!-- Ghost Protocol -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_ghost_protocol_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_ghost_protocol" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_ghost_protocol_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_ghost_protocol_description"></span></span>
					</div>

					<!-- Talent: Shaped for Subtlety -->
					<div class="sheet-talent-row">
						<!-- Control Flags -->
						<input type="hidden" name="attr_show_shaped_for_subtlety_bonus" value="0" />
						<input type="hidden" name="attr_alteri_shaped_for_subtlety_lockflag" value="0" />
						<input type="hidden" name="attr_alteri_shaped_for_subtlety_lockflag_skill" value="0" />

						<!-- Main Talent Checkbox -->
						<input type="checkbox" name="attr_alteri_shaped_for_subtlety" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label">
							<span name="attr_alteri_shaped_for_subtlety_label"></span>
						</label>
						<span class="sheet-talent-description">
							<span name="attr_alteri_shaped_for_subtlety_description"></span>
						</span>

						<!-- Skill Selection Grid -->
						<div class="sheet-skill-choice-placeholder">
							<div class="sheet-skill-choice-options" name="attr_shaped_for_subtlety_choices">
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_shaped_for_subtlety_mdr_checkbox" value="talent_insight" />
									<span>Insight +10%</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_shaped_for_subtlety_mdr_checkbox" value="talent_slicing" />
									<span>Slicing +10%</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_shaped_for_subtlety_mdr_checkbox" value="talent_stealth" />
									<span>Stealth +10%</span>
								</label>
							</div>
						</div>
					</div>

					<!-- Whisper-Touched -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_whisper_touched_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_whisper_touched" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_whisper_touched_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_whisper_touched_description"></span></span>
					</div>

					<!-- Grace of the Many -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_grace_of_the_many_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_grace_of_the_many" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_grace_of_the_many_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_grace_of_the_many_description"></span></span>
					</div>
				</div>

				<div class="sheet-talent-tier" data-tier="2">
					<h3 class="sheet-talent-tier-header">Tier 2 Talents</h3>

					<!-- Facial Recalibration (depends on echoed_voice or second_skin) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_facial_recalibration_enabled" value="0" />
						<input type="hidden" name="attr_alteri_facial_recalibration_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_facial_recalibration" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_facial_recalibration_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_facial_recalibration_description"></span></span>
					</div>

					<!-- Adaptive Memory (depends on social_chameleon or maskwrights_grace) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_adaptive_memory_enabled" value="0" />
						<input type="hidden" name="attr_alteri_adaptive_memory_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_adaptive_memory" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_adaptive_memory_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_adaptive_memory_description"></span></span>
					</div>

					<!-- Shift Reflex (depends on reflexive_shift) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_shift_reflex_enabled" value="0" />
						<input type="hidden" name="attr_alteri_shift_reflex_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_shift_reflex" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_shift_reflex_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_shift_reflex_description"></span></span>
					</div>

					<!-- Talent: Deep Mask Integration -->
					<div class="sheet-talent-row">
						<!-- Control Flags -->
						<input type="hidden" name="attr_alteri_deep_mask_integration_enabled" value="0" />
						<input type="hidden" name="attr_show_deep_mask_integration_bonus" value="0" />
						<input type="hidden" name="attr_alteri_deep_mask_integration_lockflag" value="0" />
						<input type="hidden" name="attr_alteri_deep_mask_integration_lockflag_skill" value="0" />

						<!-- Main Talent Checkbox -->
						<input type="checkbox" name="attr_alteri_deep_mask_integration" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label">
							<span name="attr_alteri_deep_mask_integration_label"></span>
						</label>
						<span class="sheet-talent-description">
							<span name="attr_alteri_deep_mask_integration_description"></span>
						</span>

						<!-- Skill Selection Grid -->
						<div class="sheet-skill-choice-placeholder">
							<div class="sheet-skill-choice-options" name="attr_deep_mask_integration_choices">
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_deep_mask_integration_mdr_checkbox" value="talent_disguise" />
									<span>Disguise +10%</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_deep_mask_integration_mdr_checkbox" value="talent_insight" />
									<span>Insight +10%</span>
								</label>
							</div>
						</div>
					</div>

					<!-- Ghost Signature (depends on ghost_protocol) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_ghost_signature_enabled" value="0" />
						<input type="hidden" name="attr_alteri_ghost_signature_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_ghost_signature" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_ghost_signature_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_ghost_signature_description"></span></span>
					</div>

					<!-- Mirror Weave (depends on whisper_touched) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_mirror_weave_enabled" value="0" />
						<input type="hidden" name="attr_alteri_mirror_weave_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_mirror_weave" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_mirror_weave_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_mirror_weave_description"></span></span>
					</div>

					<!-- Persona Anchor (depends on grace_of_the_many) -->
					<div class="sheet-talent-row">
						<!-- Control Flags -->
						<input type="hidden" name="attr_alteri_persona_anchor_enabled" value="0" />
						<input type="hidden" name="attr_show_persona_anchor_bonus" value="0" />
						<input type="hidden" name="attr_alteri_persona_anchor_lockflag" value="0" />
						<input type="hidden" name="attr_alteri_persona_anchor_lockflag_skill" value="0" />

						<!-- Main Talent Checkbox -->
						<input type="checkbox" name="attr_alteri_persona_anchor" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label">
							<span name="attr_alteri_persona_anchor_label"></span>
						</label>
						<span class="sheet-talent-description">
							<span name="attr_alteri_persona_anchor_description"></span>
						</span>
							<!-- Skill Selection Grid -->
						<div class="sheet-skill-choice-placeholder">
							<div class="sheet-skill-choice-options" name="attr_persona_anchor_choices">
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_persona_anchor_mdr_checkbox" value="talent_arcana" />
									<span>Arcana +10%</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_persona_anchor_mdr_checkbox" value="talent_impersonation" />
									<span>Impersonation +10%</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_alteri_persona_anchor_mdr_checkbox" value="talent_slicing" />
									<span>Slicing +10%</span>
								</label>
							</div>
						</div>
					</div>

					<!-- Veil Echo Memory (depends on whisper_touched or ghost_protocol) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_veil_echo_memory_enabled" value="0" />
						<input type="hidden" name="attr_alteri_veil_echo_memory_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_veil_echo_memory" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_veil_echo_memory_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_veil_echo_memory_description"></span></span>
					</div>
						<!-- Silent Archive (depends on deep_mask_integration) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_silent_archive_enabled" value="0" />
						<input type="hidden" name="attr_alteri_silent_archive_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_silent_archive" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_silent_archive_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_silent_archive_description"></span></span>
					</div>
				</div>

				<div class="sheet-talent-tier" data-tier="3">
					<h3 class="sheet-talent-tier-header">Tier 3 Talents</h3>

					<!-- Perfect Mimicry (depends on facial_recalibration or echoed_voice) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_perfect_mimicry_enabled" value="0" />
						<input type="hidden" name="attr_alteri_perfect_mimicry_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_perfect_mimicry" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_perfect_mimicry_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_perfect_mimicry_description"></span></span>
					</div>

					<!-- Biometric Phantom (depends on ghost_signature) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_biometric_phantom_enabled" value="0" />
						<input type="hidden" name="attr_alteri_biometric_phantom_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_biometric_phantom" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_biometric_phantom_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_biometric_phantom_description"></span></span>
					</div>

					<!-- Memory Graft (depends on deep_mask_integration) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_memory_graft_enabled" value="0" />
						<input type="hidden" name="attr_alteri_memory_graft_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_memory_graft" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_memory_graft_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_memory_graft_description"></span></span>
					</div>

					<!-- Veil-Shaped Will (depends on mirror_weave or whisper_touched) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_veil_shaped_will_enabled" value="0" />
						<input type="hidden" name="attr_alteri_veil_shaped_will_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_veil_shaped_will" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_veil_shaped_will_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_veil_shaped_will_description"></span></span>
					</div>

					<!-- Social Echo (depends on social_chameleon or adaptive_memory) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_social_echo_enabled" value="0" />
						<input type="hidden" name="attr_alteri_social_echo_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_social_echo" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_social_echo_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_social_echo_description"></span></span>
					</div>

					<!-- Identity Cascade (depends on deep_mask_integration) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_identity_cascade_enabled" value="0" />
						<input type="hidden" name="attr_alteri_identity_cascade_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_identity_cascade" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_identity_cascade_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_identity_cascade_description"></span></span>
					</div>
				</div>

				<div class="sheet-talent-tier" data-tier="4">
					<h3 class="sheet-talent-tier-header">Tier 4 Talents (Capstone)</h3>

					<!-- Immaculate Impersonation (depends on perfect_mimicry or biometric_phantom) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_immaculate_impersonation_enabled" value="0" />
						<input type="hidden" name="attr_alteri_immaculate_impersonation_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_immaculate_impersonation" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_immaculate_impersonation_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_immaculate_impersonation_description"></span></span>
					</div>

					<!-- Living Mask Archive (depends on memory_graft or identity_cascade) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_living_mask_archive_enabled" value="0" />
						<input type="hidden" name="attr_alteri_living_mask_archive_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_living_mask_archive" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_living_mask_archive_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_living_mask_archive_description"></span></span>
					</div>

					<!-- Veil-Mirroring Ritual (depends on veil_shaped_will) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_veil_mirroring_ritual_enabled" value="0" />
						<input type="hidden" name="attr_alteri_veil_mirroring_ritual_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_veil_mirroring_ritual" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_veil_mirroring_ritual_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_veil_mirroring_ritual_description"></span></span>
					</div>

					<!-- Author of the Lie (depends on social_echo or deep_mask_integration) -->
					<div class="sheet-talent-row">
						<input type="hidden" name="attr_alteri_author_of_the_lie_enabled" value="0" />
						<input type="hidden" name="attr_alteri_author_of_the_lie_lockflag" value="0" />
						<input type="checkbox" name="attr_alteri_author_of_the_lie" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
						<label class="sheet-talent-label"><span name="attr_alteri_author_of_the_lie_label"></span></label>
						<span class="sheet-talent-description"><span name="attr_alteri_author_of_the_lie_description"></span></span>
					</div>
				</div>

			</div>
			<!-- Draevi Talents -->
			<div class="sheet-racials2">

				<div class="sheet-talent-tier" data-tier="1">
					<h3 class="sheet-talent-tier-header">Tier 1 Talents</h3>

					<!-- Tier 1 Talents – 10 XP for Draevi -->
                    <!-- Talent: Iron Stomach -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_draevi_iron_stomach_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_iron_stomach" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_iron_stomach_label">Iron Stomach</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_iron_stomach_description">
                                Gain a bonus die on Constitution rolls to resist poison, spoiled food, or ingested toxins. You can consume nearly anything without penalty.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Clan-Blooded -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_show_clan_blooded_bonus" value="0" />
                        <input type="hidden" name="attr_draevi_clan_blooded_lockflag" value="0" />
                        <input type="hidden" name="attr_draevi_clan_blooded_lockflag_skill" value="0" />
                        <input type="checkbox" name="attr_draevi_clan_blooded" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_clan_blooded_label">Clan-Blooded</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_clan_blooded_description">
                                Choose one: gain +10% to Intimidate, Survival, or Track. This reflects your upbringing within a strong clan tradition. This choice is permanent and may only be taken once.
                            </span>
                        </span>
                        <div class="sheet-skill-choice-placeholder">
                            <div class="sheet-skill-choice-options" name="attr_clan_blooded_choices">
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_draevi_clan_blooded_mdr_checkbox" value="talent_intimidate" />
                                    <span>Intimidate +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_draevi_clan_blooded_mdr_checkbox" value="talent_survival_wilderness" />
                                    <span>Survival +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_draevi_clan_blooded_mdr_checkbox" value="talent_track" />
                                    <span>Track +10%</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Talent: Urban Climber -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_draevi_urban_climber_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_urban_climber" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_urban_climber_label">Urban Climber</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_urban_climber_description">
                                Once per session, gain a bonus die to any Athletics or Coordination roll made while navigating vertical, unstable, or cramped environments.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Scavenger’s Edge -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_show_scavengers_edge_bonus" value="0" />
                        <input type="hidden" name="attr_draevi_scavengers_edge_lockflag" value="0" />
                        <input type="hidden" name="attr_draevi_scavengers_edge_lockflag_skill" value="0" />
                        <input type="checkbox" name="attr_draevi_scavengers_edge" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_scavengers_edge_label">Scavenger’s Edge</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_scavengers_edge_description">
                                Choose one: gain +10% to Mechanics, Electronics, or Streetwise. This reflects your clan’s practical knowledge of scavenging and repair. This choice is permanent and may only be taken once.
                            </span>
                        </span>
                        <div class="sheet-skill-choice-placeholder">
                            <div class="sheet-skill-choice-options" name="attr_scavengers_edge_choices">
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_draevi_scavengers_edge_mdr_checkbox" value="talent_mechanics" />
                                    <span>Mechanics +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_draevi_scavengers_edge_mdr_checkbox" value="talent_electronics" />
                                    <span>Electronics +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_draevi_scavengers_edge_mdr_checkbox" value="talent_streetwise" />
                                    <span>Streetwise +10%</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Talent: Spirits-in-Stone -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_draevi_spirits_in_stone_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_spirits_in_stone" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_spirits_in_stone_label">Spirits-in-Stone</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_spirits_in_stone_description">
                                Once per session, gain a bonus die on a Spirit Lore roll related to ancestor rites, ruins, or natural spirit dwellings.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Trailborn Reflexes -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_draevi_trailborn_reflexes_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_trailborn_reflexes" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_trailborn_reflexes_label">Trailborn Reflexes</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_trailborn_reflexes_description">
                                Once per scene, gain a bonus die to any Dodge roll.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Gutter-Stalker -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_draevi_gutter_stalker_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_gutter_stalker" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_gutter_stalker_label">Gutter-Stalker</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_gutter_stalker_description">
                                Once per session, gain a bonus die on a Stealth roll made in an urban or tight, vertical space (vents, scaffolding, alleys).
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Bone-Sung Memory -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_draevi_bone_sung_memory_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_bone_sung_memory" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_bone_sung_memory_label">Bone-Sung Memory</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_bone_sung_memory_description">
                                Once per session, gain a bonus die when attempting to recall a location, creature, or spiritual phenomenon you’ve personally witnessed before.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Silent Step, Sharp Ear -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_draevi_silent_step_sharp_ear_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_silent_step_sharp_ear" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_silent_step_sharp_ear_label">Silent Step, Sharp Ear</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_silent_step_sharp_ear_description">
                                Gain a bonus die on Stealth checks when moving through natural terrain. Optional: spend 1 Strain to also gain a bonus die on the next Listen or Perception check in the same scene.
                            </span>
                        </span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="2">
					<h3 class="sheet-talent-tier-header">Tier 2 Talents</h3>
					<!-- Tier 2 Talents – 20 XP for Draevi -->

                    <!-- Talent: Hardened Trailwalker -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_hardened_trailwalker_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_hardened_trailwalker_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_hardened_trailwalker" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_hardened_trailwalker_label">Hardened Trailwalker</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_hardened_trailwalker_description">
                                Once per session, gain a bonus die to a Survival check. If that check fails, suffer only half the usual Strain from failure.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Urban Tracker -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_urban_tracker_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_urban_tracker_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_urban_tracker" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_urban_tracker_label">Urban Tracker</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_urban_tracker_description">
                                You may reroll one failed Streetwise, Stealth, or Track check made while tracking in an urban environment.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Instinctive Counter -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_instinctive_counter_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_instinctive_counter_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_instinctive_counter" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_instinctive_counter_label">Instinctive Counter</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_instinctive_counter_description">
                                Once per scene, gain a bonus die to either a Dodge, Unarmed Combat, or Melee roll when reacting to an attack.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Veins of Stone -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_veins_of_stone_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_veins_of_stone_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_veins_of_stone" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_veins_of_stone_label">Veins of Stone</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_veins_of_stone_description">
                                Once per session, automatically succeed on a failed Constitution roll against fatigue, poison, or environmental strain.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Echo-Binder’s Rite -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_echo_binders_rite_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_echo_binders_rite_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_echo_binders_rite" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_echo_binders_rite_label">Echo-Binder’s Rite</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_echo_binders_rite_description">
                                Once per session, gain a bonus die to a Magic (Summoning) or Spirit Lore roll to commune with a spirit or bind an ancestral echo.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Scent the Shift -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_scent_the_shift_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_scent_the_shift_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_scent_the_shift" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_scent_the_shift_label">Scent the Shift</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_scent_the_shift_description">
                                Once per session, detect a hidden threat, spirit, or Veil anomaly in your immediate area. Grants a bonus die to the next Perception or Spirit Lore check made to investigate it.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Tales Etched in Horn -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_tales_etched_in_horn_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_tales_etched_in_horn_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_tales_etched_in_horn" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_tales_etched_in_horn_label">Tales Etched in Horn</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_tales_etched_in_horn_description">
                                Once per session, when recalling a story, rite, or ancestral lesson, gain a bonus die on any Occult Lore, Spirit Lore, or Etiquette (Clan) check related to Draevi culture or spirits.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Root-Stance Tenacity -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_root_stance_tenacity_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_root_stance_tenacity_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_root_stance_tenacity" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_root_stance_tenacity_label">Root-Stance Tenacity</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_root_stance_tenacity_description">
                                Once per session, when you fail a Strength or Constitution roll to resist knockback, fatigue, or being overpowered, you may reroll with a bonus die. Optional: spend 2 Strain to remain standing even if the second roll fails.
                            </span>
                        </span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="3">
					<h3 class="sheet-talent-tier-header">Tier 3 Talents</h3>

					<!-- Tier 3 Talents – 30 XP for Draevi -->

                    <!-- Talent: Spirit-Touched Mastery -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_spirit_touched_mastery_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_spirit_touched_mastery_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_spirit_touched_mastery" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_spirit_touched_mastery_label">Spirit-Touched Mastery</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_spirit_touched_mastery_description">
                                Once per session, reroll a failed Spirit Lore or Magic (Summoning) roll. If successful, reduce the spell’s Strain cost by one die step.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Spiritual Vanguard -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_spiritual_vanguard_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_spiritual_vanguard_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_spiritual_vanguard" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_spiritual_vanguard_label">Spiritual Vanguard</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_spiritual_vanguard_description">
                                Once per session, gain a bonus die when casting a Counterspell on behalf of an ally. Also gain a bonus die when banishing a hostile spirit.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Emberlash Retaliation -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_emberlash_retaliation_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_emberlash_retaliation_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_emberlash_retaliation" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_emberlash_retaliation_label">Emberlash Retaliation</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_emberlash_retaliation_description">
                                Once per session, when struck by a melee or ranged attack, make a counterattack with a bonus die. If your counterattack hits, the target suffers a penalty die on their next action.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Ancestor’s Pulse -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_ancestors_pulse_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_ancestors_pulse_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_ancestors_pulse" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_ancestors_pulse_label">Ancestor’s Pulse</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_ancestors_pulse_description">
                                Once per session, gain two bonus dice on a Magic (Divination), Spirit Lore, or Magic (Summoning) roll when invoking ancestral insight. On success, the insight reveals a hidden danger or opportunity relevant to the scene.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Pathfinder’s Edge -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_pathfinders_edge_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_pathfinders_edge_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_pathfinders_edge" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_pathfinders_edge_label">Pathfinder’s Edge</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_pathfinders_edge_description">
                                Once per session, ignore natural terrain penalties for movement or Survival for a full scene. Gain a bonus die to Track or Navigate during this time.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Wild Tamer’s Gaze -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_wild_tamers_gaze_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_wild_tamers_gaze_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_wild_tamers_gaze" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_wild_tamers_gaze_label">Wild Tamer’s Gaze</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_wild_tamers_gaze_description">
                                Once per session, choose a non-hostile creature or spirit (animal, summoned being, or elemental-type). You may calm, redirect, or guide it with a Spirit Lore or Animal Handling check rolled with a bonus die. Optional: spend 2 Strain to influence it even if it's Veil-corrupted or hostile.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Legacy Reforged -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_legacy_reforged_sources" value="" />
						<input type="hidden" name="attr_draevi_legacy_reforged_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_legacy_reforged_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_legacy_reforged" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_legacy_reforged_label">Legacy Reforged</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_legacy_reforged_description">
                                Once per session, choose one Tier 1 Draevi Talent you possess. For the rest of the scene, it may be used twice without expending Strain. Optional: spend 1 Strain to immediately activate that Tier 1 talent now.
                            </span>
                        </span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="4">
					<h3 class="sheet-talent-tier-header">Tier 4 Talents (Capstone)</h3>
					<!-- Capstone Talents – 40 XP for Draevi -->

                    <!-- Talent: Soul of the Wild Hunt -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_soul_of_the_wild_hunt_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_soul_of_the_wild_hunt_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_soul_of_the_wild_hunt" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_soul_of_the_wild_hunt_label">Soul of the Wild Hunt</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_soul_of_the_wild_hunt_description">
                                Once per session, enter Hunt State for the remainder of a scene: gain a bonus die on Stealth and Tracking checks, ignore terrain penalties, and reroll one failed Unarmed Combat or Melee attack.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Echo-Flame Warden -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_echo_flame_warden_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_echo_flame_warden_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_echo_flame_warden" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_echo_flame_warden_label">Echo-Flame Warden</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_echo_flame_warden_description">
                                Once per session, invoke a Ward of Legacy: you and up to two allies gain a bonus die on Constitution and Power rolls during a combat or ritual scene. You may also reduce incoming damage to one target by 1d6 (once per session).
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Ancestral Mirror -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_ancestral_mirror_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_ancestral_mirror_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_ancestral_mirror" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_ancestral_mirror_label">Ancestral Mirror</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_ancestral_mirror_description">
                                Once per session, call on an ancestral vision to gain two bonus dice on a Spirit Lore, Magic (Summoning), or Magic (Divination) roll. On success, gain a hidden insight or location tied to the current conflict.
                            </span>
                        </span>
                    </div>

                    <!-- Talent: Path of the Remembered -->
                    <div class="sheet-talent-row">
						<input type="hidden" name="attr_draevi_path_of_the_remembered_enabled" value="0" />
                        <input type="hidden" name="attr_draevi_path_of_the_remembered_lockflag" value="0" />
                        <input type="checkbox" name="attr_draevi_path_of_the_remembered" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_draevi_path_of_the_remembered_label">Path of the Remembered</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_draevi_path_of_the_remembered_description">
                                Once per session, declare a location as “bound by memory.” For the scene, you and allies who can hear you gain a bonus die on Perception, Survival, or Willpower-related rolls within that area. You may also spend 3 Strain once during the scene to invoke a flash of ancestral memory, revealing a secret path, hidden threat, or forgotten rite.
                            </span>
                        </span>
                    </div>
				</div>

    		</div>
			<!-- Feran Talents -->
			<div class="sheet-racials3">
				<input type="checkbox" style="display:none" class="sheet-showracials" name="attr_showracials" />
				<div class="sheet-section">
					<input type="hidden" name="attr_feran_talent_tab" class="sheet-tab-controller" value="" />
					<div class="sheet-tab-buttons">
						<!-- Feran talent buttons go here -->
					</div>
					<!-- Feran talent blocks go here -->
				</div>
			</div>
			<!-- Human Talents -->
			<div class="sheet-racials4">

				<div class="sheet-talent-tier" data-tier="1">
					<h3 class="sheet-talent-tier-header">Tier 1 Talents</h3>

                    <!-- Tier 1: Hard Lesson -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_hard_lesson_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_hard_lesson" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_hard_lesson_label">Hard Lesson</span></label>
                        <span class="sheet-talent-description">
                            <span name="attr_human_hard_lesson_description">Once per session, reroll a failed skill check. You must take the second result. Optional: Spend 2 Strain to attempt a second reroll immediately after the first.</span>
                        </span>
                    </div>

                    <!-- Tier 1: Instinct Over Training -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_instinct_over_training_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_instinct_over_training" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_instinct_over_training_label">Instinct Over Training</span></label>
                        <span class="sheet-talent-description">
                            <span name="attr_human_instinct_over_training_description">Use Education in place of any untrained knowledge skill (Arcana, Occult Lore, Forbidden Lore, History, Law, etc.) once per session, at one difficulty higher.</span>
                        </span>
                    </div>

                    <!-- Tier 1: Makeshift Medic -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_makeshift_medic_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_makeshift_medic" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_makeshift_medic_label">Makeshift Medic</span></label>
                        <span class="sheet-talent-description">
                            <span name="attr_human_makeshift_medic_description">Once per session, when attempting a First Aid check without proper medical tools, gain a bonus die.</span>
                        </span>
                    </div>

                    <!-- Tier 1: No Stranger to Pain -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_no_stranger_to_pain_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_no_stranger_to_pain" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_no_stranger_to_pain_label">No Stranger to Pain</span></label>
                        <span class="sheet-talent-description">
                            <span name="attr_human_no_stranger_to_pain_description">Once per session, roll with a bonus die when making a CON roll to stay conscious after suffering a major wound.</span>
                        </span>
                    </div>

                    <!-- Tier 1: Quick Fixer (with skill selection) -->
                    <div class="sheet-talent-row">
                        <input name="attr_show_quick_fixer_bonus" type="hidden" value="0" />
                        <input name="attr_human_quick_fixer_lockflag" type="hidden" value="0" />
                        <input name="attr_human_quick_fixer_lockflag_skill" type="hidden" value="0" />
                        <input class="sheet-talent-checkbox" name="attr_human_quick_fixer" type="checkbox" value="1" />
                        <label class="sheet-talent-label">
                            <span name="attr_human_quick_fixer_label">Quick Fixer</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_human_quick_fixer_description">Choose one: gain +10% to Electronics, Mechanics, or Slicing. This choice is permanent and may only be taken once.</span>
                        </span>
                        <div class="sheet-skill-choice-placeholder">
                            <div class="sheet-skill-choice-options" name="attr_quick_fixer_choices">
                                <label class="sheet-skill-option">
                                    <input name="attr_human_quick_fixer_mdr_checkbox" type="checkbox" value="talent_electronics" />
                                    <span>Electronics +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input name="attr_human_quick_fixer_mdr_checkbox" type="checkbox" value="talent_mechanics" />
                                    <span>Mechanics +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input name="attr_human_quick_fixer_mdr_checkbox" type="checkbox" value="talent_slicing" />
                                    <span>Slicing +10%</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Tier 1: Social Versatility -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_social_versatility_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_social_versatility" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_social_versatility_label">Social Versatility</span></label>
                        <span class="sheet-talent-description">
                            <span name="attr_human_social_versatility_description">Once per session, reroll any failed Charm, Deception, or Persuade check.</span>
                        </span>
                    </div>

                    <!-- Tier 1: Battle-Tested Gut -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_battle_tested_gut_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_battle_tested_gut" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_battle_tested_gut_label">Battle-Tested Gut</span></label>
                        <span class="sheet-talent-description">
                            <span name="attr_human_battle_tested_gut_description">Once per session, when entering a potentially dangerous situation, ask the GM: “Do I feel something is off?” The GM must answer truthfully (vaguely if appropriate).</span>
                        </span>
                    </div>

                    <!-- Tier 1: Skilled Focus (with skill selection) -->
                    <div class="sheet-talent-row">
                        <input name="attr_show_skilled_focus_bonus" type="hidden" value="0" />
                        <input name="attr_human_skilled_focus_lockflag" type="hidden" value="0" />
                        <input name="attr_human_skilled_focus_lockflag_skill" type="hidden" value="0" />
                        <input class="sheet-talent-checkbox" name="attr_human_skilled_focus" type="checkbox" value="1" />
                        <label class="sheet-talent-label">
                            <span name="attr_human_skilled_focus_label">Skilled Focus</span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_human_skilled_focus_description">Choose one: gain +10% to any non-combat, non-magic skill. This choice is permanent and may only be taken once.</span>
                        </span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="2">
					<h3 class="sheet-talent-tier-header">Tier 2 Talents</h3>

                    <!-- Tier 2: Quick Learner -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_quick_learner_enabled" value="0" />
                        <input type="hidden" name="attr_human_quick_learner_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_quick_learner" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_quick_learner_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_quick_learner_description"></span></span>
                    </div>

                    <!-- Tier 2: Situational Awareness -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_situational_awareness_enabled" value="0" />
                        <input type="hidden" name="attr_human_situational_awareness_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_situational_awareness" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_situational_awareness_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_situational_awareness_description"></span></span>
                    </div>

                    <!-- Tier 2: Spontaneous Strategist -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_spontaneous_strategist_enabled" value="0" />
                        <input type="hidden" name="attr_human_spontaneous_strategist_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_spontaneous_strategist" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_spontaneous_strategist_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_spontaneous_strategist_description"></span></span>
                    </div>

                    <!-- Tier 2: Lucky Timing -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_lucky_timing_enabled" value="0" />
                        <input type="hidden" name="attr_human_lucky_timing_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_lucky_timing" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_lucky_timing_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_lucky_timing_description"></span></span>
                    </div>

                    <!-- Tier 2: Improvised Tools -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_improvised_tools_enabled" value="0" />
                        <input type="hidden" name="attr_human_improvised_tools_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_improvised_tools" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_improvised_tools_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_improvised_tools_description"></span></span>
                    </div>

                    <!-- Tier 2: Defiant Resilience -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_defiant_resilience_enabled" value="0" />
                        <input type="hidden" name="attr_human_defiant_resilience_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_defiant_resilience" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_defiant_resilience_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_defiant_resilience_description"></span></span>
                    </div>

                    <!-- Tier 2: Cross-Trained -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_cross_trained_enabled" value="0" />
                        <input type="hidden" name="attr_human_cross_trained_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_cross_trained" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_cross_trained_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_cross_trained_description"></span></span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="3">
					<h3 class="sheet-talent-tier-header">Tier 3 Talents</h3>

                    <!-- Tier 3: Momentum Shift -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_momentum_shift_enabled" value="0" />
                        <input type="hidden" name="attr_human_momentum_shift_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_momentum_shift" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_momentum_shift_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_momentum_shift_description"></span></span>
                    </div>

                    <!-- Tier 3: Pull From Memory -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_pull_from_memory_enabled" value="0" />
                        <input type="hidden" name="attr_human_pull_from_memory_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_pull_from_memory" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_pull_from_memory_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_pull_from_memory_description"></span></span>
                    </div>

                    <!-- Tier 3: Chain of Luck -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_chain_of_luck_enabled" value="0" />
                        <input type="hidden" name="attr_human_chain_of_luck_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_chain_of_luck" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_chain_of_luck_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_chain_of_luck_description"></span></span>
                    </div>

                    <!-- Tier 3: Dig Deep -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_dig_deep_enabled" value="0" />
                        <input type="hidden" name="attr_human_dig_deep_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_dig_deep" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_dig_deep_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_dig_deep_description"></span></span>
                    </div>

                    <!-- Tier 3: Just Enough Prep -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_just_enough_prep_enabled" value="0" />
                        <input type="hidden" name="attr_human_just_enough_prep_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_just_enough_prep" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_just_enough_prep_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_just_enough_prep_description"></span></span>
                    </div>

                    <!-- Tier 3: Break the Pattern -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_break_the_pattern_enabled" value="0" />
                        <input type="hidden" name="attr_human_break_the_pattern_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_break_the_pattern" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_break_the_pattern_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_break_the_pattern_description"></span></span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="4">
					<h3 class="sheet-talent-tier-header">Tier 4 Talents (Capstone)</h3>

                    <!-- Tier 4: Tactical Improviser -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_tactical_improviser_enabled" value="0" />
                        <input type="hidden" name="attr_human_tactical_improviser_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_tactical_improviser" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_tactical_improviser_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_tactical_improviser_description"></span></span>
                    </div>

                    <!-- Tier 4: Luck Bends for Me -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_luck_bends_for_me_enabled" value="0" />
                        <input type="hidden" name="attr_human_luck_bends_for_me_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_luck_bends_for_me" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_luck_bends_for_me_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_luck_bends_for_me_description"></span></span>
                    </div>

                    <!-- Tier 4: Unshakable Focus -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_unshakable_focus_enabled" value="0" />
                        <input type="hidden" name="attr_human_unshakable_focus_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_unshakable_focus" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_unshakable_focus_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_unshakable_focus_description"></span></span>
                    </div>

                    <!-- Tier 4: Master of None -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_human_master_of_none_enabled" value="0" />
                        <input type="hidden" name="attr_human_master_of_none_lockflag" value="0" />
                        <input type="checkbox" name="attr_human_master_of_none" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_human_master_of_none_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_human_master_of_none_description"></span></span>
                    </div>
				</div>

			</div>
			<!-- Khadra Talents -->
			<div class="sheet-racials5">
				<input type="checkbox" style="display:none" class="sheet-showracials" name="attr_showracials" />
				<div class="sheet-section">
					<input type="hidden" name="attr_khadra_talent_tab" class="sheet-tab-controller" value="" />
					<div class="sheet-tab-buttons">
						<!-- Khadra talent buttons go here -->
					</div>
					<!-- Khadra talent blocks go here -->
				</div>
			</div>
			<!-- Kitsu Talents -->
			<div class="sheet-racials6">
				<input type="checkbox" style="display:none" class="sheet-showracials" name="attr_showracials" />
				<div class="sheet-section">
					<input type="hidden" name="attr_kitsu_talent_tab" class="sheet-tab-controller" value="" />
					<div class="sheet-tab-buttons">
						<!-- Kitsu talent buttons go here -->
					</div>
					<!-- Kitsu talent blocks go here -->
				</div>
			</div>
			<!-- Lyranni Talents -->
			<div class="sheet-racials7">

				<div class="sheet-talent-tier" data-tier="1">
					<h3 class="sheet-talent-tier-header">Tier 1 Talents</h3>
                     <!-- Tier 1: Veilsight -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_veilsight_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_veilsight" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_lyranni_veilsight_label"></span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_lyranni_veilsight_description"></span>
                        </span>
                    </div>

                    <!-- Tier 1: Threadwalker -->

					<div class="sheet-talent-row">
						<input type="hidden" name="attr_show_threadwalker_bonus" value="0" />
						<input type="hidden" name="attr_lyranni_threadwalker_lockflag" value="0" />
						<input type="hidden" name="attr_lyranni_threadwalker_lockflag_skill" value="0" />
						<input type="checkbox" name="attr_lyranni_threadwalker" value="1" class="sheet-talent-checkbox" />
						<label class="sheet-talent-label">
							<span name="attr_lyranni_threadwalker_label"></span>
						</label>
						<span class="sheet-talent-description">
							<span name="attr_lyranni_threadwalker_description"></span>
						</span>
						<div class="sheet-skill-choice-placeholder">
							<div class="sheet-skill-choice-options" name="attr_threadwalker_choices">
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_lyranni_threadwalker_arcana" />
									<span>Arcana</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_lyranni_threadwalker_spirit_lore" />
									<span>Spirit Lore</span>
								</label>
								<label class="sheet-skill-option">
									<input type="checkbox" name="attr_lyranni_threadwalker_occult_lore" />
									<span>Occult Lore</span>
								</label>
							</div>
						</div>
					</div>

                    <!-- Tier 1: Legacy Spark -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_legacy_spark_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_legacy_spark" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_lyranni_legacy_spark_label"></span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_lyranni_legacy_spark_description"></span>
                        </span>
                    </div>

                    <!-- Tier 1: Social Ghost -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_social_ghost_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_social_ghost" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_lyranni_social_ghost_label"></span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_lyranni_social_ghost_description"></span>
                        </span>
                    </div>

                    <!-- Tier 1: Aether Override -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_show_aether_override_bonus" value="0" />
                        <input type="hidden" name="attr_lyranni_aether_override_lockflag" value="0" />
                        <input type="hidden" name="attr_lyranni_aether_override_lockflag_skill" value="0" />
                        <input type="checkbox" name="attr_lyranni_aether_override" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_lyranni_aether_override_label"></span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_lyranni_aether_override_description"></span>
                        </span>
                        <div class="sheet-skill-choice-placeholder">
                            <div class="sheet-skill-choice-options" name="attr_aether_override_choices">
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_lyranni_aether_override_mdr_checkbox" value="talent_slicing" />
                                    <span>Slicing +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_lyranni_aether_override_mdr_checkbox" value="talent_electronics" />
                                    <span>Electronics +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_lyranni_aether_override_mdr_checkbox" value="talent_mechanics" />
                                    <span>Mechanics +10%</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Tier 1: Echo in the Veins -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_show_echo_in_the_veins_bonus" value="0" />
                        <input type="hidden" name="attr_lyranni_echo_in_the_veins_lockflag" value="0" />
                        <input type="hidden" name="attr_lyranni_echo_in_the_veins_lockflag_skill" value="0" />
                        <input type="checkbox" name="attr_lyranni_echo_in_the_veins" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_lyranni_echo_in_the_veins_label"></span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_lyranni_echo_in_the_veins_description"></span>
                        </span>
                        <div class="sheet-skill-choice-placeholder">
                            <div class="sheet-skill-choice-options" name="attr_echo_in_the_veins_choices">
								<label class="sheet-skill-option">
										<input type="checkbox" name="attr_lyranni_echo_in_the_veins_mdr_checkbox" value="talent_chant" />
										<span>Chant +10%</span>
								</label>
								<label class="sheet-skill-option">
										<input type="checkbox" name="attr_lyranni_echo_in_the_veins_mdr_checkbox" value="talent_dance" />
										<span>Dance +10%</span>
								</label>
								<label class="sheet-skill-option">
										<input type="checkbox" name="attr_lyranni_echo_in_the_veins_mdr_checkbox" value="talent_impersonation" />
										<span>Impersonation +10%</span>
								</label>
								<label class="sheet-skill-option">
										<input type="checkbox" name="attr_lyranni_echo_in_the_veins_mdr_checkbox" value="talent_instrument" />
										<span>Instrument +10%</span>
								</label>
								<label class="sheet-skill-option">
										<input type="checkbox" name="attr_lyranni_echo_in_the_veins_mdr_checkbox" value="talent_singing" />
										<span>Singing +10%</span>
								</label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_lyranni_echo_in_the_veins_mdr_checkbox" value="talent_insight" />
                                    <span>Insight +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_lyranni_echo_in_the_veins_mdr_checkbox" value="talent_streetwise" />
                                    <span>Streetwise +10%</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Tier 1: Veil-Blooded Sense -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_veil_blooded_sense_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_veil_blooded_sense" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_lyranni_veil_blooded_sense_label"></span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_lyranni_veil_blooded_sense_description"></span>
                        </span>
                    </div>

                    <!-- Tier 1: Glimmerstep -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_glimmerstep_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_glimmerstep" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_lyranni_glimmerstep_label"></span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_lyranni_glimmerstep_description"></span>
                        </span>
                    </div>

                    <!-- Tier 1: Resonant Poise -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_resonant_poise_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_resonant_poise" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label">
                            <span name="attr_lyranni_resonant_poise_label"></span>
                        </label>
                        <span class="sheet-talent-description">
                            <span name="attr_lyranni_resonant_poise_description"></span>
                        </span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="2">
					<h3 class="sheet-talent-tier-header">Tier 2 Talents</h3>

                    <!-- Tier 2: Spirit-Favored -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_spirit_favored_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_spirit_favored_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_spirit_favored" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_spirit_favored_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_spirit_favored_description"></span></span>
                    </div>

                    <!-- Tier 2: Whispers Beyond -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_whispers_beyond_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_whispers_beyond_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_whispers_beyond" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_whispers_beyond_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_whispers_beyond_description"></span></span>
                    </div>

                    <!-- Tier 2: Ancestral Resonance -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_ancestral_resonance_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_ancestral_resonance_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_ancestral_resonance" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_ancestral_resonance_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_ancestral_resonance_description"></span></span>
                    </div>

                    <!-- Tier 2: Veil Dancer -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_veil_dancer_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_veil_dancer_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_veil_dancer" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_veil_dancer_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_veil_dancer_description"></span></span>
                    </div>

                    <!-- Tier 2: Rite-Bound -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_rite_bound_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_rite_bound_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_rite_bound" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_rite_bound_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_rite_bound_description"></span></span>
                    </div>

                    <!-- Tier 2: Veilsplice -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_veilsplice_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_veilsplice_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_veilsplice" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_veilsplice_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_veilsplice_description"></span></span>
                        <div class="sheet-skill-choice-placeholder">
                            <div class="sheet-skill-choice-options" name="attr_veilsplice_choices">
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_lyranni_veilsplice_mdr_checkbox" value="talent_slicing" />
                                    <span>Slicing +10%</span>
                                </label>
                                <label class="sheet-skill-option">
                                    <input type="checkbox" name="attr_lyranni_veilsplice_mdr_checkbox" value="talent_electronics" />
                                    <span>Electronics +10%</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Tier 2: Illuminated Touch -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_illuminated_touch_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_illuminated_touch_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_illuminated_touch" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_illuminated_touch_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_illuminated_touch_description"></span></span>
                    </div>

                    <!-- Tier 2: Words Like Silk -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_words_like_silk_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_words_like_silk_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_words_like_silk" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_words_like_silk_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_words_like_silk_description"></span></span>
                    </div>

                    <!-- Tier 2: Memory-Bound Echo -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_memory_bound_echo_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_memory_bound_echo_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_memory_bound_echo" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_memory_bound_echo_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_memory_bound_echo_description"></span></span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="3">
					<h3 class="sheet-talent-tier-header">Tier 3 Talents</h3>
                    <!-- Tier 3: True Veilsight -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_true_veilsight_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_true_veilsight_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_true_veilsight" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_true_veilsight_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_true_veilsight_description"></span></span>
                    </div>

                    <!-- Tier 3: Blood Rite Channeling -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_blood_rite_channeling_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_blood_rite_channeling_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_blood_rite_channeling" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_blood_rite_channeling_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_blood_rite_channeling_description"></span></span>
                    </div>

                    <!-- Tier 3: Lyranni Discipline -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_lyranni_discipline_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_lyranni_discipline_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_lyranni_discipline" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_lyranni_discipline_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_lyranni_discipline_description"></span></span>
                    </div>

                    <!-- Tier 3: Subtle Authority -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_subtle_authority_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_subtle_authority_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_subtle_authority" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_subtle_authority_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_subtle_authority_description"></span></span>
                    </div>

                    <!-- Tier 3: Veil-Laced Command -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_veil_laced_command_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_veil_laced_command_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_veil_laced_command" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_veil_laced_command_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_veil_laced_command_description"></span></span>
                    </div>

                    <!-- Tier 3: Shadow Echo Step -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_shadow_echo_step_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_shadow_echo_step_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_shadow_echo_step" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_shadow_echo_step_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_shadow_echo_step_description"></span></span>
                    </div>

                    <!-- Tier 3: Echo Binding -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_echo_binding_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_echo_binding_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_echo_binding" value="1" class="sheet-talent-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_echo_binding_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_echo_binding_description"></span></span>
                    </div>
				</div>

				<div class="sheet-talent-tier" data-tier="4">
					<h3 class="sheet-talent-tier-header">Tier 4 Talents (Capstone)</h3>
                    <!-- Tier 4: Voice of the Ancestors -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_voice_of_the_ancestors_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_voice_of_the_ancestors_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_voice_of_the_ancestors" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_voice_of_the_ancestors_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_voice_of_the_ancestors_description"></span></span>
                    </div>

                    <!-- Tier 4: Veil-Linked Will -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_veil_linked_will_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_veil_linked_will_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_veil_linked_will" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_veil_linked_will_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_veil_linked_will_description"></span></span>
                    </div>

                    <!-- Tier 4: Echo of Elegance -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_echo_of_elegance_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_echo_of_elegance_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_echo_of_elegance" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_echo_of_elegance_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_echo_of_elegance_description"></span></span>
                    </div>

                    <!-- Tier 4: Breath of the Veil -->
                    <div class="sheet-talent-row">
                        <input type="hidden" name="attr_lyranni_breath_of_the_veil_enabled" value="0" />
                        <input type="hidden" name="attr_lyranni_breath_of_the_veil_lockflag" value="0" />
                        <input type="checkbox" name="attr_lyranni_breath_of_the_veil" value="1" class="sheet-talent-checkbox sheet-tier4-checkbox" />
                        <label class="sheet-talent-label"><span name="attr_lyranni_breath_of_the_veil_label"></span></label>
                        <span class="sheet-talent-description"><span name="attr_lyranni_breath_of_the_veil_description"></span></span>
                    </div>
				</div>
			</div>
			<!-- Veyra Talents -->
			<div class="sheet-racials8">
				<input type="checkbox" style="display:none" class="sheet-showracials" name="attr_showracials" />
				<div class="sheet-section">
					<input type="hidden" name="attr_veyra_talent_tab" class="sheet-tab-controller" value="" />
					<div class="sheet-tab-buttons">
						<!-- Veyra talent buttons go here -->
					</div>
					<!-- Veyra talent blocks go here -->
				</div>
			</div>
			<!-- Text Area -->
			<div class="sheet-section">
				<h4 class="section-head">Tiers</h4>
				<div class="sheet-section sheet-talents-flex">
					<div class="sheet-talent-label" name="attr_talent_tier1" data-i18n="tier1_talents-u">Tier 1</div>
					<textarea name="attr_talent_tier1" class="sheet-talent-textarea"></textarea>
					<div class="sheet-talent-label" name="attr_talent_tier2" data-i18n="tier2_talents-u">Tier 2</div>
					<textarea name="attr_talent_tier2" class="sheet-talent-textarea"></textarea>
					<div class="sheet-talent-label" name="attr_talent_tier3" data-i18n="tier3_talents-u">Tier 3</div>
					<textarea name="attr_talent_tier3" class="sheet-talent-textarea"></textarea>
					<div class="sheet-talent-label" name="attr_talent_tier4" data-i18n="tier4_talents-u">Tier 4</div>
					<textarea name="attr_talent_tier4" class="sheet-talent-textarea"></textarea>
				</div>
			</div>
		</div>

		<!-- ------------------- Careers  -------------------- -->
		<div class="sheet-tab-content sheet-careers">
		
			<div class="sheet-section">
				<!-- ==== Career Tracker (Static Primary Career) ==== -->
				<!-- Career Tracker Header -->
				<div class="sheet-career-tracker">
					<div class="sheet-career-grid sheet-career-header">
						<div>Career</div>
						<div>Starting Skill Points</div>
						<div>Skill→XP</div>
						<div>Career XP Spent</div>
						<div>Career XP Total</div>
						<div>Total Spell XP</div>
					</div>

					<!-- Static Primary Career Row -->
					<div class="sheet-career-grid">
						<select name="attr_primary_career" class="sheet-career-select">
							<option value="">— Select Career —</option>
							<option value="codeweaver">Codeweaver</option>
							<option value="combat_medic">Combat Medic</option>
							<option value="mindbender">Mindbender</option>
							<option value="sigilbound">Sigilbound</option>
							<option value="stormweaver">Stormweaver</option>
							<option value="street_ronin">Street Ronin</option>
						</select>
						<input class="sheet-readonly" type="text" name="attr_primary_career_skill_points" />
						<input class="sheet-readonly" type="text" name="placeholder" placeholder="N/A"/>
						<input class="sheet-readonly" type="text" name="attr_primary_career_xp_spent" />
						<input class="sheet-readonly" type="text" name="attr_primary_career_xp_total" />
						<input class="sheet-readonly" type="text" name="attr_primary_career_spell_xp_total" />
					</div>

					<!-- Repeating Secondary Career Rows -->
					<fieldset class="repeating_secondarycareer">
						<div class="sheet-career-grid">
							<select name="attr_secondary_career" class="sheet-career-select">
								<option value="">— Select Career —</option>
								<option value="codeweaver">Codeweaver</option>
								<option value="combat_medic">Combat Medic</option>
								<option value="mindbender">Mindbender</option>
								<option value="sigilbound">Sigilbound</option>
								<option value="stormweaver">Stormweaver</option>
								<option value="street_ronin">Street Ronin</option>
							</select>
							<input class="sheet-readonly" type="text" name="attr_secondary_career_skill_points" />
							<input type="text" name="attr_secondary_career_skill_to_xp" />
							<input class="sheet-readonly" type="text" name="attr_secondary_career_xp_spent" />
							<input class="sheet-readonly" type="text" name="attr_secondary_career_xp_total" />
							<input class="sheet-readonly" type="text" name="attr_secondary_career_spell_xp_total" />
						</div>
					</fieldset>
				</div>
			</div>

			<div class="sheet-section">
				<div class="sheet-primary-career-summary">
					<h3 class="sheet-career-talent-tier-header">Primary Career Talents Summary</h3>
					<span name="attr_primary_career_talent_summary"></span>
				</div>

				<div class="sheet-secondary-career-summary">
					<h3 class="sheet-career-talent-tier-header">Secondary Career Talents Summary</h3>
					<span name="attr_secondary_career_talent_summary"></span>
				</div>
			</div>

			<div class="sheet-section">
                <!-- === CAREER TAB CONTROLLER === -->
                <input type="hidden" name="attr_selected_career" class="sheet-tab-controller" value="codeweaver" />

                <!-- === CAREER TAB BUTTONS === -->
                <div class="sheet-career-tabs sheet-tab-buttons">
                    <button type="action" name="act_codeweaver">Codeweaver</button>
                    <button type="action" name="act_combat_medic">Combat Medic</button>
                    <button type="action" name="act_mindbender">Mindbender</button>
                    <button type="action" name="act_sigilbound">Sigilbound</button>
                    <button type="action" name="act_stormweaver">Stormweaver</button>
                    <button type="action" name="act_street_ronin">Street Ronin</button>
                </div>

                <!-- === CAREER TABS CONTAINER === -->
                <div class="sheet-career-tabs-container">

					<div class="sheet-career-tab sheet-tab-codeweaver">

						<input type="hidden" name="attr_codeweaver_ready" class="sheet-career-ready-controller" value="0" />
						<div class="sheet-career-locked-overlay">Career not active</div>
						<div class="sheet-career-interactive-block">

						<!-- === CAREER TALENT TREE (Tiers 1–5) === -->
						<div class="sheet-career-talent-tree">

							<input type="hidden" name="attr_show_career_skills" value="0" />

							<div class="sheet-toggle-career-skills sheet-career-tabs">
								<button type="action" name="act_toggle_career_skills">Career Skills</button>
							</div>

							<div class="sheet-career-skill-block">
								<div class="sheet-career-skill-columns">
									<!-- Left Column: Primary -->
									<div class="sheet-career-skill-col">
										<h3 class="sheet-career-skill-header">Primary Skills</h3>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_codeweaver_magic_technomancy_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_codeweaver_magic_technomancy_mdr_checkbox" value="1" />
											<label>Magic (Technomancy)</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_codeweaver_slicing_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_codeweaver_slicing_mdr_checkbox" value="1" />
											<label>Slicing</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_codeweaver_electronics_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_codeweaver_electronics_mdr_checkbox" value="1" />
											<label>Electronics</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_codeweaver_computer_use_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_codeweaver_computer_use_mdr_checkbox" value="1" />
											<label>Computer Use</label>
										</div>
									</div>

									<!-- Right Column: Secondary -->
									<div class="sheet-career-skill-col">
										<h3 class="sheet-career-skill-header">Secondary Skills</h3>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_codeweaver_security_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_codeweaver_security_mdr_checkbox" value="1" />
											<label>Security Systems</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_codeweaver_drone_operation_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_codeweaver_drone_operation_mdr_checkbox" value="1" />
											<label>Drone Operation</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_codeweaver_insight_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_codeweaver_insight_mdr_checkbox" value="1" />
											<label>Insight</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_codeweaver_perception_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_codeweaver_perception_mdr_checkbox" value="1" />
											<label>Perception</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_codeweaver_arcana_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_codeweaver_arcana_mdr_checkbox" value="1" />
											<label>Arcana</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_codeweaver_spirit_lore_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_codeweaver_spirit_lore_mdr_checkbox" value="1" />
											<label>Spirit Lore</label>
										</div>
									</div>
								</div>
							</div>

							<!-- === Tier 1 === -->
							<div class="sheet-career-talent-tier" data-tier="1">
								<h3 class="sheet-career-talent-tier-header">Tier 1 Talents</h3>

								<!-- Signal Sync -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_signal_sync_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_signal_sync" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_signal_sync_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_signal_sync_description"></span></span>
								</div>

								<!-- Veil Thread Tap -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_veil_thread_tap_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_veil_thread_tap" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_veil_thread_tap_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_veil_thread_tap_description"></span></span>
								</div>

								<!-- Hardlight Override -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_hardlight_override_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_hardlight_override" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_hardlight_override_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_hardlight_override_description"></span></span>
								</div>

								<!-- Recursive Pulse -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_recursive_pulse_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_recursive_pulse" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_recursive_pulse_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_recursive_pulse_description"></span></span>
								</div>

								<!-- Strain Buffer -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_strain_buffer_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_strain_buffer" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_strain_buffer_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_strain_buffer_description"></span></span>
								</div>
							</div>

							<!-- === Tier 2 === -->
							<div class="sheet-career-talent-tier" data-tier="2">
								<h3 class="sheet-career-talent-tier-header">Tier 2 Talents</h3>

								<!-- Pulse Hijack -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_pulse_hijack_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_pulse_hijack_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_pulse_hijack" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_pulse_hijack_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_pulse_hijack_description"></span></span>
								</div>

								<!-- Code Injection -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_code_injection_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_code_injection_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_code_injection" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_code_injection_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_code_injection_description"></span></span>
								</div>

								<!-- Scramble Protocol -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_scramble_protocol_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_scramble_protocol_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_scramble_protocol" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_scramble_protocol_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_scramble_protocol_description"></span></span>
								</div>

								<!-- Arc-Sigil Link -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_arc_sigil_link_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_arc_sigil_link_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_arc_sigil_link" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_arc_sigil_link_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_arc_sigil_link_description"></span></span>
								</div>

								<!-- Clean Loop Feedback -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_clean_loop_feedback_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_clean_loop_feedback_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_clean_loop_feedback" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_clean_loop_feedback_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_clean_loop_feedback_description"></span></span>
								</div>
							</div>

							<!-- === Tier 3 === -->
							<div class="sheet-career-talent-tier" data-tier="3">
								<h3 class="sheet-career-talent-tier-header">Tier 3 Talents</h3>

								<!-- Magelock Cascade -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_magelock_cascade_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_magelock_cascade_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_magelock_cascade" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_magelock_cascade_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_magelock_cascade_description"></span></span>
								</div>

								<!-- Null Loop Echo -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_null_loop_echo_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_null_loop_echo_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_null_loop_echo" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_null_loop_echo_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_null_loop_echo_description"></span></span>
								</div>

								<!-- Arc-Thread Override -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_arc_thread_override_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_arc_thread_override_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_arc_thread_override" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_arc_thread_override_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_arc_thread_override_description"></span></span>
								</div>

								<!-- Subroutine Leash -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_subroutine_leash_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_subroutine_leash_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_subroutine_leash" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_subroutine_leash_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_subroutine_leash_description"></span></span>
								</div>

								<!-- Synthetic Harmony -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_synthetic_harmony_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_synthetic_harmony_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_synthetic_harmony" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_synthetic_harmony_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_synthetic_harmony_description"></span></span>
								</div>
							</div>

							<!-- === Tier 4 === -->
							<div class="sheet-career-talent-tier" data-tier="4">
								<h3 class="sheet-career-talent-tier-header">Tier 4 Talents</h3>

								<!-- Command Injection -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_command_injection_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_command_injection_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_command_injection" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_command_injection_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_command_injection_description"></span></span>
								</div>

								<!-- Crash Field -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_crash_field_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_crash_field_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_crash_field" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_crash_field_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_crash_field_description"></span></span>
								</div>

								<!-- Live Patch Redirect -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_live_patch_redirect_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_live_patch_redirect_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_live_patch_redirect" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_live_patch_redirect_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_live_patch_redirect_description"></span></span>
								</div>

								<!-- Backdoor Ritual -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_backdoor_ritual_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_backdoor_ritual_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_backdoor_ritual" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_backdoor_ritual_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_backdoor_ritual_description"></span></span>
								</div>

								<!-- Veil-Reactor Stabilizer -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_veil_reactor_stabilizer_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_veil_reactor_stabilizer_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_veil_reactor_stabilizer" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_veil_reactor_stabilizer_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_veil_reactor_stabilizer_description"></span></span>
								</div>
							</div>

							<!-- === Tier 5 (Capstones) === -->
							<div class="sheet-career-talent-tier" data-tier="5">
								<h3 class="sheet-career-talent-tier-header">Tier 5 Talents (Capstone)</h3>

								<!-- Overcode Detonation -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_overcode_detonation_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_overcode_detonation_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_overcode_detonation" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_overcode_detonation_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_overcode_detonation_description"></span></span>
								</div>

								<!-- Signal Possession -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_signal_possession_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_signal_possession_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_signal_possession" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_signal_possession_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_signal_possession_description"></span></span>
								</div>

								<!-- Reality Patch -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_reality_patch_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_reality_patch_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_reality_patch" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_reality_patch_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_reality_patch_description"></span></span>
								</div>

								<!-- Stat Boost -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_codeweaver_stat_boost_enabled" value="0" />
									<input type="hidden" name="attr_codeweaver_stat_boost_lockflag" value="0" />
									<input type="checkbox" name="attr_codeweaver_stat_boost" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_codeweaver_stat_boost_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_codeweaver_stat_boost_description"></span></span>
								</div>
							</div>

						</div>
						</div>
					</div>

					<div class="sheet-career-tab sheet-tab-combat_medic">

						<input type="hidden" name="attr_combat_medic_ready" class="sheet-career-ready-controller" value="0" />
						<div class="sheet-career-locked-overlay">Career not active</div>
						<div class="sheet-career-interactive-block">

						<div class="sheet-career-talent-tree">

							<input type="hidden" name="attr_show_career_skills" value="0" />

							<div class="sheet-toggle-career-skills sheet-career-tabs">
								<button type="action" name="act_toggle_career_skills">Career Skills</button>
							</div>

							<div class="sheet-career-skill-block">
								<div class="sheet-career-skill-columns">
									<!-- Left Column: Primary -->
									<div class="sheet-career-skill-col">
										<h3 class="sheet-career-skill-header">Primary Skills</h3>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_combat_medic_first_aid_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_combat_medic_first_aid_mdr_checkbox" value="1" />
											<label>First Aid</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_combat_medic_medicine_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_combat_medic_medicine_mdr_checkbox" value="1" />
											<label>Medicine</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_combat_medic_coordination_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_combat_medic_coordination_mdr_checkbox" value="1" />
											<label>Coordination</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_combat_medic_dodge_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_combat_medic_dodge_mdr_checkbox" value="1" />
											<label>Dodge</label>
										</div>
									</div>

									<!-- Right Column: Secondary -->
									<div class="sheet-career-skill-col">
										<h3 class="sheet-career-skill-header">Secondary Skills</h3>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_combat_medic_firearms_handgun_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_combat_medic_firearms_handgun_mdr_checkbox" value="1" />
											<label>Pistols</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_combat_medic_insight_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_combat_medic_insight_mdr_checkbox" value="1" />
											<label>Insight</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_combat_medic_electronics_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_combat_medic_electronics_mdr_checkbox" value="1" />
											<label>Electronics</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_combat_medic_athletics_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_combat_medic_athletics_mdr_checkbox" value="1" />
											<label>Athletics</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_combat_medic_perception_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_combat_medic_perception_mdr_checkbox" value="1" />
											<label>Perception</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_combat_medic_security_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_combat_medic_security_mdr_checkbox" value="1" />
											<label>Security Systems</label>
										</div>
									</div>
								</div>
							</div>


							<div class="sheet-career-talent-tier" data-tier="1">
                            <!-- Combat Medic career content goes here -->
								<h3 class="sheet-career-talent-tier-header">Tier 1 Talents</h3>

								<!-- Field Stabilizer -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_field_stabilizer_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_field_stabilizer" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_field_stabilizer_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_field_stabilizer_description"></span></span>
								</div>

								<!-- Pain Doesn’t Matter -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_pain_doesnt_matter_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_pain_doesnt_matter" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_pain_doesnt_matter_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_pain_doesnt_matter_description"></span></span>
								</div>

								<!-- Trauma Team Reflexes -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_trauma_team_reflexes_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_trauma_team_reflexes" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_trauma_team_reflexes_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_trauma_team_reflexes_description"></span></span>
								</div>

								<!-- Injector Harness -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_injector_harness_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_injector_harness" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_injector_harness_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_injector_harness_description"></span></span>
								</div>

								<!-- Vital Scan Overlay -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_vital_scan_overlay_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_vital_scan_overlay" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_vital_scan_overlay_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_vital_scan_overlay_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="2">
								<h3 class="sheet-career-talent-tier-header">Tier 2 Talents</h3>

								<!-- Pressure Seal -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_pressure_seal_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_pressure_seal_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_pressure_seal" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_pressure_seal_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_pressure_seal_description"></span></span>
								</div>

								<!-- Painkiller Protocol -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_painkiller_protocol_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_painkiller_protocol_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_painkiller_protocol" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_painkiller_protocol_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_painkiller_protocol_description"></span></span>
								</div>

								<!-- Stay With Me! -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_stay_with_me_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_stay_with_me_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_stay_with_me" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_stay_with_me_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_stay_with_me_description"></span></span>
								</div>

								<!-- Tactical Redeployment -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_tactical_redeployment_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_tactical_redeployment_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_tactical_redeployment" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_tactical_redeployment_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_tactical_redeployment_description"></span></span>
								</div>

								<!-- Medical Override -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_medical_override_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_medical_override_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_medical_override" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_medical_override_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_medical_override_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="3">
								<h3 class="sheet-career-talent-tier-header">Tier 3 Talents</h3>

								<!-- Surgical Clarity -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_surgical_clarity_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_surgical_clarity_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_surgical_clarity" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_surgical_clarity_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_surgical_clarity_description"></span></span>
								</div>

								<!-- Combat Revive -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_combat_revive_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_combat_revive_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_combat_revive" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_combat_revive_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_combat_revive_description"></span></span>
								</div>

								<!-- Quickdraw Injector -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_quickdraw_injector_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_quickdraw_injector_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_quickdraw_injector" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_quickdraw_injector_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_quickdraw_injector_description"></span></span>
								</div>

								<!-- Overwatch Healer -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_overwatch_healer_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_overwatch_healer_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_overwatch_healer" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_overwatch_healer_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_overwatch_healer_description"></span></span>
								</div>

								<!-- Veil Immunologist -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_veil_immunologist_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_veil_immunologist_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_veil_immunologist" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_veil_immunologist_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_veil_immunologist_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="4">
								<h3 class="sheet-career-talent-tier-header">Tier 4 Talents</h3>

								<!-- Endurance Conditioning -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_endurance_conditioning_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_endurance_conditioning_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_endurance_conditioning" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_endurance_conditioning_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_endurance_conditioning_description"></span></span>
								</div>

								<!-- Emergency Triage Net -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_emergency_triage_net_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_emergency_triage_net_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_emergency_triage_net" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_emergency_triage_net_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_emergency_triage_net_description"></span></span>
								</div>

								<!-- Ghost of the ER -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_ghost_of_the_er_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_ghost_of_the_er_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_ghost_of_the_er" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_ghost_of_the_er_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_ghost_of_the_er_description"></span></span>
								</div>

								<!-- Field Expeditor -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_field_expeditor_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_field_expeditor_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_field_expeditor" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_field_expeditor_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_field_expeditor_description"></span></span>
								</div>

								<!-- Reactive Trauma Surge -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_reactive_trauma_surge_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_reactive_trauma_surge_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_reactive_trauma_surge" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_reactive_trauma_surge_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_reactive_trauma_surge_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="5">
								<h3 class="sheet-career-talent-tier-header">Tier 5 Talents (Capstone)</h3>

								<!-- No One Dies Today -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_no_one_dies_today_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_no_one_dies_today_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_no_one_dies_today" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_no_one_dies_today_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_no_one_dies_today_description"></span></span>
								</div>

								<!-- Miracle Protocol -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_miracle_protocol_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_miracle_protocol_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_miracle_protocol" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_miracle_protocol_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_miracle_protocol_description"></span></span>
								</div>

								<!-- +5% Stat Boost -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_stat_boost_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_stat_boost_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_stat_boost" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_stat_boost_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_stat_boost_description"></span></span>
								</div>

								<!-- Adrenal Shield Matrix -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_combat_medic_adrenal_shield_matrix_enabled" value="0" />
									<input type="hidden" name="attr_combat_medic_adrenal_shield_matrix_lockflag" value="0" />
									<input type="checkbox" name="attr_combat_medic_adrenal_shield_matrix" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_combat_medic_adrenal_shield_matrix_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_combat_medic_adrenal_shield_matrix_description"></span></span>
								</div>
							</div>
						</div>
						</div>
					</div>

					<div class="sheet-career-tab sheet-tab-mindbender">

						<input type="hidden" name="attr_mindbender_ready" class="sheet-career-ready-controller" value="0" />
						<div class="sheet-career-locked-overlay">Career not active</div>
						<div class="sheet-career-interactive-block">

						<div class="sheet-career-talent-tree">

							<input type="hidden" name="attr_show_career_skills" value="0" />

							<div class="sheet-toggle-career-skills sheet-career-tabs">
								<button type="action" name="act_toggle_career_skills">Career Skills</button>
							</div>

							<div class="sheet-career-skill-block">
								<div class="sheet-career-skill-columns">
									<!-- Left Column: Primary -->
									<div class="sheet-career-skill-col">
										<h3 class="sheet-career-skill-header">Primary Skills</h3>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_mindbender_magic_enchantment_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_mindbender_magic_enchantment_mdr_checkbox" value="1" />
											<label>Magic (Enchantment)</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_mindbender_insight_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_mindbender_insight_mdr_checkbox" value="1" />
											<label>Insight</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_mindbender_arcana_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_mindbender_arcana_mdr_checkbox" value="1" />
											<label>Arcana</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_mindbender_persuade_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_mindbender_persuade_mdr_checkbox" value="1" />
											<label>Persuade</label>
										</div>
									</div>

									<!-- Right Column: Secondary -->
									<div class="sheet-career-skill-col">
										<h3 class="sheet-career-skill-header">Secondary Skills</h3>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_mindbender_deception_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_mindbender_deception_mdr_checkbox" value="1" />
											<label>Deception</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_mindbender_charm_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_mindbender_charm_mdr_checkbox" value="1" />
											<label>Charm</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_mindbender_intimidate_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_mindbender_intimidate_mdr_checkbox" value="1" />
											<label>Intimidate</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_mindbender_etiquette_high_society_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_mindbender_etiquette_high_society_mdr_checkbox" value="1" />
											<label>Etiquette (High Society)</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_mindbender_impersonation_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_mindbender_impersonation_mdr_checkbox" value="1" />
											<label>Performance (Impersonation)</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_mindbender_interrogation_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_mindbender_interrogation_mdr_checkbox" value="1" />
											<label>Interrogation</label>
										</div>
									</div>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="1">
								<h3 class="sheet-career-talent-tier-header">Tier 1 Talents</h3>

								<!-- Suggestive Echo -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_suggestive_echo_lockflag" value="0" />
									<input type="checkbox" name="attr_mindbender_suggestive_echo" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_suggestive_echo_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_suggestive_echo_description"></span></span>
								</div>

								<!-- Thread of Doubt -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_thread_of_doubt_lockflag" value="0" />
									<input type="checkbox" name="attr_mindbender_thread_of_doubt" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_thread_of_doubt_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_thread_of_doubt_description"></span></span>
								</div>

								<!-- Veil of Intent -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_veil_of_intent_lockflag" value="0" />
									<input type="checkbox" name="attr_mindbender_veil_of_intent" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_veil_of_intent_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_veil_of_intent_description"></span></span>
								</div>

								<!-- Mental Static -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_mental_static_lockflag" value="0" />
									<input type="checkbox" name="attr_mindbender_mental_static" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_mental_static_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_mental_static_description"></span></span>
								</div>

								<!-- Strain Buffer -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_strain_buffer_lockflag" value="0" />
									<input type="checkbox" name="attr_mindbender_strain_buffer" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_strain_buffer_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_strain_buffer_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="2">
								<h3 class="sheet-career-talent-tier-header">Tier 2 Talents</h3>

								<!-- Cognitive Rewire -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_cognitive_rewire_enabled" value="0" />
									<input type="hidden" name="attr_mindbender_cognitive_rewire_lockflag" value="0" />
									<input type="checkbox" name="attr_mindbender_cognitive_rewire" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_cognitive_rewire_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_cognitive_rewire_description"></span></span>
								</div>

								<!-- Prey on Instinct -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_prey_on_instinct_enabled" value="0" />
									<input type="hidden" name="attr_mindbender_prey_on_instinct_lockflag" value="0" />
									<input type="checkbox" name="attr_mindbender_prey_on_instinct" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_prey_on_instinct_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_prey_on_instinct_description"></span></span>
								</div>

								<!-- Emotional Override -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_emotional_override_enabled" value="0" />
									<input type="hidden" name="attr_mindbender_emotional_override_lockflag" value="0" />
									<input type="checkbox" name="attr_mindbender_emotional_override" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_emotional_override_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_emotional_override_description"></span></span>
								</div>

								<!-- Memory Spike -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_memory_spike_enabled" value="0" />
									<input type="hidden" name="attr_mindbender_memory_spike_lockflag" value="0" />
									<input type="checkbox" name="attr_mindbender_memory_spike" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_memory_spike_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_memory_spike_description"></span></span>
								</div>

								<!-- Neural Misdirection -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_neural_misdirection_enabled" value="0" />
									<input type="hidden" name="attr_mindbender_neural_misdirection_lockflag" value="0" />
									<input type="checkbox" name="attr_mindbender_neural_misdirection" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_neural_misdirection_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_neural_misdirection_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="3">
								<h3 class="sheet-career-talent-tier-header">Tier 3 Talents</h3>

								<!-- Echo Implantation -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_echo_implantation_lockflag" value="0" />
									<input type="hidden" name="attr_mindbender_echo_implantation_enabled" value="0" />
									<input type="checkbox" name="attr_mindbender_echo_implantation" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_echo_implantation_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_echo_implantation_description"></span></span>
								</div>

								<!-- False Memory -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_false_memory_lockflag" value="0" />
									<input type="hidden" name="attr_mindbender_false_memory_enabled" value="0" />
									<input type="checkbox" name="attr_mindbender_false_memory" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_false_memory_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_false_memory_description"></span></span>
								</div>

								<!-- Veil-Laced Words -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_veil_laced_words_lockflag" value="0" />
									<input type="hidden" name="attr_mindbender_veil_laced_words_enabled" value="0" />
									<input type="checkbox" name="attr_mindbender_veil_laced_words" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_veil_laced_words_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_veil_laced_words_description"></span></span>
								</div>

								<!-- Neural Whiplash -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_neural_whiplash_lockflag" value="0" />
									<input type="hidden" name="attr_mindbender_neural_whiplash_enabled" value="0" />
									<input type="checkbox" name="attr_mindbender_neural_whiplash" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_neural_whiplash_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_neural_whiplash_description"></span></span>
								</div>

								<!-- Hollow Gaze -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_hollow_gaze_lockflag" value="0" />
									<input type="hidden" name="attr_mindbender_hollow_gaze_enabled" value="0" />
									<input type="checkbox" name="attr_mindbender_hollow_gaze" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_hollow_gaze_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_hollow_gaze_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="4">
								<h3 class="sheet-career-talent-tier-header">Tier 4 Talents</h3>

								<!-- Resonant Persona -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_resonant_persona_lockflag" value="0" />
									<input type="hidden" name="attr_mindbender_resonant_persona_enabled" value="0" />
									<input type="checkbox" name="attr_mindbender_resonant_persona" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_resonant_persona_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_resonant_persona_description"></span></span>
								</div>

								<!-- Synaptic Lag -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_synaptic_lag_lockflag" value="0" />
									<input type="hidden" name="attr_mindbender_synaptic_lag_enabled" value="0" />
									<input type="checkbox" name="attr_mindbender_synaptic_lag" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_synaptic_lag_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_synaptic_lag_description"></span></span>
								</div>

								<!-- Emotion Override Field -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_emotion_override_field_lockflag" value="0" />
									<input type="hidden" name="attr_mindbender_emotion_override_field_enabled" value="0" />
									<input type="checkbox" name="attr_mindbender_emotion_override_field" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_emotion_override_field_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_emotion_override_field_description"></span></span>
								</div>

								<!-- Compromise Anchor -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_compromise_anchor_lockflag" value="0" />
									<input type="hidden" name="attr_mindbender_compromise_anchor_enabled" value="0" />
									<input type="checkbox" name="attr_mindbender_compromise_anchor" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_compromise_anchor_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_compromise_anchor_description"></span></span>
								</div>

								<!-- Cognitive Fortress -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_cognitive_fortress_lockflag" value="0" />
									<input type="hidden" name="attr_mindbender_cognitive_fortress_enabled" value="0" />
									<input type="checkbox" name="attr_mindbender_cognitive_fortress" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_cognitive_fortress_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_cognitive_fortress_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="5">
								<h3 class="sheet-career-talent-tier-header">Tier 5 Talents</h3>

								<!-- Puppetmaster Protocol -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_puppetmaster_protocol_lockflag" value="0" />
									<input type="hidden" name="attr_mindbender_puppetmaster_protocol_enabled" value="0" />
									<input type="checkbox" name="attr_mindbender_puppetmaster_protocol" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_puppetmaster_protocol_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_puppetmaster_protocol_description"></span></span>
								</div>

								<!-- Emotional Collapse -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_emotional_collapse_lockflag" value="0" />
									<input type="hidden" name="attr_mindbender_emotional_collapse_enabled" value="0" />
									<input type="checkbox" name="attr_mindbender_emotional_collapse" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_emotional_collapse_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_emotional_collapse_description"></span></span>
								</div>

								<!-- Scene Fracture -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_scene_fracture_lockflag" value="0" />
									<input type="hidden" name="attr_mindbender_scene_fracture_enabled" value="0" />
									<input type="checkbox" name="attr_mindbender_scene_fracture" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_scene_fracture_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_scene_fracture_description"></span></span>
								</div>

								<!-- Stat Boost -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_mindbender_stat_boost_lockflag" value="0" />
									<input type="hidden" name="attr_mindbender_stat_boost_enabled" value="0" />
									<input type="checkbox" name="attr_mindbender_stat_boost" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_mindbender_stat_boost_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_mindbender_stat_boost_description"></span></span>
								</div>
							</div>
						</div>
						</div>
					</div>

					<div class="sheet-career-tab sheet-tab-sigilbound">

						<input type="hidden" name="attr_sigilbound_ready" class="sheet-career-ready-controller" value="0" />
						<div class="sheet-career-locked-overlay">Career not active</div>
						<div class="sheet-career-interactive-block">

						<div class="sheet-career-talent-tree">

							<input type="hidden" name="attr_show_career_skills" value="0" />

							<div class="sheet-toggle-career-skills sheet-career-tabs">
								<button type="action" name="act_toggle_career_skills">Career Skills</button>
							</div>

							<div class="sheet-career-skill-block">
								<div class="sheet-career-skill-columns">
									<!-- Left Column: Primary -->
									<div class="sheet-career-skill-col">
										<h3 class="sheet-career-skill-header">Primary Skills</h3>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_sigilbound_magic_warding_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_sigilbound_magic_warding_mdr_checkbox" value="1" />
											<label>Magic (Warding)</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_sigilbound_arcana_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_sigilbound_arcana_mdr_checkbox" value="1" />
											<label>Arcana</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_sigilbound_perception_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_sigilbound_perception_mdr_checkbox" value="1" />
											<label>Perception</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_sigilbound_insight_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_sigilbound_insight_mdr_checkbox" value="1" />
											<label>Insight</label>
										</div>
									</div>

									<!-- Right Column: Secondary -->
									<div class="sheet-career-skill-col">
										<h3 class="sheet-career-skill-header">Secondary Skills</h3>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_sigilbound_first_aid_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_sigilbound_first_aid_mdr_checkbox" value="1" />
											<label>First Aid</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_sigilbound_security_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_sigilbound_security_mdr_checkbox" value="1" />
											<label>Security Systems</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_sigilbound_etiquette_magi_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_sigilbound_etiquette_magi_mdr_checkbox" value="1" />
											<label>Etiquette (Magi House)</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_sigilbound_etiquette_corporate_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_sigilbound_etiquette_corporate_mdr_checkbox" value="1" />
											<label>Etiquette (Corporate)</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_sigilbound_occult_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_sigilbound_occult_mdr_checkbox" value="1" />
											<label>Occult Lore</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_sigilbound_dodge_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_sigilbound_dodge_mdr_checkbox" value="1" />
											<label>Dodge</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_sigilbound_survival_urban_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_sigilbound_survival_urban_mdr_checkbox" value="1" />
											<label>Survival (Urban)</label>
										</div>
									</div>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="1">
								<h3 class="sheet-career-talent-tier-header">Tier 1 Talents</h3>

								<!-- Runesight -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_runesight_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_runesight" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_runesight_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_runesight_description"></span></span>
								</div>

								<!-- Glyphstep -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_glyphstep_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_glyphstep" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_glyphstep_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_glyphstep_description"></span></span>
								</div>

								<!-- Sigil Hardened -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_sigil_hardened_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_sigil_hardened" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_sigil_hardened_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_sigil_hardened_description"></span></span>
								</div>

								<!-- Arcane Lock -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_arcane_lock_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_arcane_lock" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_arcane_lock_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_arcane_lock_description"></span></span>
								</div>

								<!-- Strain Buffer -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_strain_buffer_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_strain_buffer" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_strain_buffer_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_strain_buffer_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="2">
								<h3 class="sheet-career-talent-tier-header">Tier 2 Talents</h3>

								<!-- Reflective Ward -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_reflective_ward_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_reflective_ward_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_reflective_ward" value="1" class="sheet-career-talent-checkbox" />
									<input type="hidden" name="attr_sigilbound_reflective_ward_enabled" value="0" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_reflective_ward_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_reflective_ward_description"></span></span>
								</div>

								<!-- Stabilization Glyph -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_stabilization_glyph_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_stabilization_glyph_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_stabilization_glyph" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_stabilization_glyph_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_stabilization_glyph_description"></span></span>
								</div>

								<!-- Barrier Projection -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_barrier_projection_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_barrier_projection_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_barrier_projection" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_barrier_projection_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_barrier_projection_description"></span></span>
								</div>

								<!-- Sigil of Anchoring -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_sigil_of_anchoring_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_sigil_of_anchoring_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_sigil_of_anchoring" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_sigil_of_anchoring_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_sigil_of_anchoring_description"></span></span>
								</div>

								<!-- Warded Advance -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_warded_advance_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_warded_advance_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_warded_advance" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_warded_advance_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_warded_advance_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="3">
								<h3 class="sheet-career-talent-tier-header">Tier 3 Talents</h3>

								<!-- Counterglyph -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_counterglyph_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_counterglyph_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_counterglyph" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_counterglyph_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_counterglyph_description"></span></span>
								</div>

								<!-- Arcane Reversal -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_arcane_reversal_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_arcane_reversal_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_arcane_reversal" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_arcane_reversal_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_arcane_reversal_description"></span></span>
								</div>

								<!-- Sanctum Sigil -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_sanctum_sigil_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_sanctum_sigil_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_sanctum_sigil" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_sanctum_sigil_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_sanctum_sigil_description"></span></span>
								</div>

								<!-- Null Field -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_null_field_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_null_field_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_null_field" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_null_field_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_null_field_description"></span></span>
								</div>

								<!-- Sigil Pulse -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_sigil_pulse_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_sigil_pulse_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_sigil_pulse" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_sigil_pulse_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_sigil_pulse_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="4">
								<h3 class="sheet-career-talent-tier-header">Tier 4 Talents</h3>

								<!-- Warding Matrix -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_warding_matrix_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_warding_matrix_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_warding_matrix" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_warding_matrix_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_warding_matrix_description"></span></span>
								</div>

								<!-- Mirror Sigil -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_mirror_sigil_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_mirror_sigil_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_mirror_sigil" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_mirror_sigil_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_mirror_sigil_description"></span></span>
								</div>

								<!-- Glyph Warder -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_glyph_warder_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_glyph_warder_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_glyph_warder" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_glyph_warder_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_glyph_warder_description"></span></span>
								</div>

								<!-- Veil Seal -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_veil_seal_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_veil_seal_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_veil_seal" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_veil_seal_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_veil_seal_description"></span></span>
								</div>

								<!-- Sigil Reservoir -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_sigil_reservoir_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_sigil_reservoir_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_sigil_reservoir" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_sigil_reservoir_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_sigil_reservoir_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="5">
								<h3 class="sheet-career-talent-tier-header">Tier 5 Talents</h3>

								<!-- Runesovereign -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_runesovereign_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_runesovereign_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_runesovereign" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_runesovereign_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_runesovereign_description"></span></span>
								</div>

								<!-- Wardmaster's Command -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_wardmasters_command_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_wardmasters_command_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_wardmasters_command" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_wardmasters_command_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_wardmasters_command_description"></span></span>
								</div>

								<!-- +5% Stat Boost -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_stat_boost_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_stat_boost_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_stat_boost" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_stat_boost_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_stat_boost_description"></span></span>
								</div>

								<!-- Sigilburst Protocol -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_sigilbound_sigilburst_protocol_enabled" value="0" />
									<input type="hidden" name="attr_sigilbound_sigilburst_protocol_lockflag" value="0" />
									<input type="checkbox" name="attr_sigilbound_sigilburst_protocol" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_sigilbound_sigilburst_protocol_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_sigilbound_sigilburst_protocol_description"></span></span>
								</div>
							</div>
						</div>
						</div>
					</div>

					<div class="sheet-career-tab sheet-tab-stormweaver">

						<input type="hidden" name="attr_stormweaver_ready" class="sheet-career-ready-controller" value="0" />
						<div class="sheet-career-locked-overlay">Career not active</div>
						<div class="sheet-career-interactive-block">

						<div class="sheet-career-talent-tree">

							<input type="hidden" name="attr_show_career_skills" value="0" />

							<div class="sheet-toggle-career-skills sheet-career-tabs">
								<button type="action" name="act_toggle_career_skills">Career Skills</button>
							</div>

							<div class="sheet-career-skill-block">
								<div class="sheet-career-skill-columns">
									<!-- Left Column: Primary -->
									<div class="sheet-career-skill-col">
										<h3 class="sheet-career-skill-header">Primary Skills</h3>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_stormweaver_magic_elemental_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_stormweaver_magic_elemental_mdr_checkbox" value="1" />
											<label>Magic (Elemental)</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_stormweaver_perception_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_stormweaver_perception_mdr_checkbox" value="1" />
											<label>Perception</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_stormweaver_arcana_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_stormweaver_arcana_mdr_checkbox" value="1" />
											<label>Arcana</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_stormweaver_dodge_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_stormweaver_dodge_mdr_checkbox" value="1" />
											<label>Dodge</label>
										</div>
									</div>

									<!-- Right Column: Secondary -->
									<div class="sheet-career-skill-col">
										<h3 class="sheet-career-skill-header">Secondary Skills</h3>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_stormweaver_intimidate_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_stormweaver_intimidate_mdr_checkbox" value="1" />
											<label>Intimidate</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_stormweaver_athletics_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_stormweaver_athletics_mdr_checkbox" value="1" />
											<label>Athletics</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_stormweaver_insight_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_stormweaver_insight_mdr_checkbox" value="1" />
											<label>Insight</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_stormweaver_stealth_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_stormweaver_stealth_mdr_checkbox" value="1" />
											<label>Stealth</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_stormweaver_coordination_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_stormweaver_coordination_mdr_checkbox" value="1" />
											<label>Coordination</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_stormweaver_survival_wilderness_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_stormweaver_survival_wilderness_mdr_checkbox" value="1" />
											<label>Survival (Wilderness)</label>
										</div>
									</div>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="1">
								<h3 class="sheet-career-talent-tier-header">Tier 1 Talents</h3>

								<!-- Elemental Channeling -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_elemental_channeling_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_elemental_channeling" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_elemental_channeling_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_elemental_channeling_description"></span></span>
								</div>

								<!-- Flashstep -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_flashstep_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_flashstep" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_flashstep_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_flashstep_description"></span></span>
								</div>

								<!-- Tinder Spark -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_tinder_spark_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_tinder_spark" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_tinder_spark_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_tinder_spark_description"></span></span>
								</div>

								<!-- Veil-Shocked -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_veil_shocked_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_veil_shocked" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_veil_shocked_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_veil_shocked_description"></span></span>
								</div>

								<!-- Strain Buffer -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_strain_buffer_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_strain_buffer" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_strain_buffer_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_strain_buffer_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="2">
									<h3 class="sheet-career-talent-tier-header">Tier 2 Talents</h3>

									<!-- Stormpulse Drive -->
									<div class="sheet-career-talent-row">
										<input type="hidden" name="attr_stormweaver_stormpulse_drive_enabled" value="0" />
										<input type="hidden" name="attr_stormweaver_stormpulse_drive_lockflag" value="0" />
										<input type="checkbox" name="attr_stormweaver_stormpulse_drive" value="1" class="sheet-career-talent-checkbox" />
										<label class="sheet-career-talent-label"><span name="attr_stormweaver_stormpulse_drive_label"></span></label>
										<span class="sheet-career-talent-description"><span name="attr_stormweaver_stormpulse_drive_description"></span></span>
									</div>

									<!-- Voltaic Reflex -->
									<div class="sheet-career-talent-row">
										<input type="hidden" name="attr_stormweaver_voltaic_reflex_enabled" value="0" />
										<input type="hidden" name="attr_stormweaver_voltaic_reflex_lockflag" value="0" />
										<input type="checkbox" name="attr_stormweaver_voltaic_reflex" value="1" class="sheet-career-talent-checkbox" />
										<label class="sheet-career-talent-label"><span name="attr_stormweaver_voltaic_reflex_label"></span></label>
										<span class="sheet-career-talent-description"><span name="attr_stormweaver_voltaic_reflex_description"></span></span>
									</div>

									<!-- Scorchmark -->
									<div class="sheet-career-talent-row">
										<input type="hidden" name="attr_stormweaver_scorchmark_enabled" value="0" />
										<input type="hidden" name="attr_stormweaver_scorchmark_lockflag" value="0" />
										<input type="checkbox" name="attr_stormweaver_scorchmark" value="1" class="sheet-career-talent-checkbox" />
										<label class="sheet-career-talent-label"><span name="attr_stormweaver_scorchmark_label"></span></label>
										<span class="sheet-career-talent-description"><span name="attr_stormweaver_scorchmark_description"></span></span>
									</div>

									<!-- Pulse Detonation -->
									<div class="sheet-career-talent-row">
										<input type="hidden" name="attr_stormweaver_pulse_detonation_enabled" value="0" />
										<input type="hidden" name="attr_stormweaver_pulse_detonation_lockflag" value="0" />
										<input type="checkbox" name="attr_stormweaver_pulse_detonation" value="1" class="sheet-career-talent-checkbox" />
										<label class="sheet-career-talent-label"><span name="attr_stormweaver_pulse_detonation_label"></span></label>
										<span class="sheet-career-talent-description"><span name="attr_stormweaver_pulse_detonation_description"></span></span>
									</div>

									<!-- Tempest Anchor -->
									<div class="sheet-career-talent-row">
										<input type="hidden" name="attr_stormweaver_tempest_anchor_enabled" value="0" />
										<input type="hidden" name="attr_stormweaver_tempest_anchor_lockflag" value="0" />
										<input type="checkbox" name="attr_stormweaver_tempest_anchor" value="1" class="sheet-career-talent-checkbox" />
										<label class="sheet-career-talent-label"><span name="attr_stormweaver_tempest_anchor_label"></span></label>
										<span class="sheet-career-talent-description"><span name="attr_stormweaver_tempest_anchor_description"></span></span>
 								   </div>
								</div>

							<div class="sheet-career-talent-tier" data-tier="3">
								<h3 class="sheet-career-talent-tier-header">Tier 3 Talents</h3>

								<!-- Volcanic Path -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_volcanic_path_enabled" value="0" />
									<input type="hidden" name="attr_stormweaver_volcanic_path_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_volcanic_path" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_volcanic_path_label"></span></label>
   									     <span class="sheet-career-talent-description"><span name="attr_stormweaver_volcanic_path_description"></span></span>
								</div>

								<!-- Stormcaller's Edge -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_stormcallers_edge_enabled" value="0" />
									<input type="hidden" name="attr_stormweaver_stormcallers_edge_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_stormcallers_edge" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_stormcallers_edge_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_stormcallers_edge_description"></span></span>
								</div>

								<!-- Crackling Focus -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_crackling_focus_enabled" value="0" />
									<input type="hidden" name="attr_stormweaver_crackling_focus_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_crackling_focus" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_crackling_focus_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_crackling_focus_description"></span></span>
								</div>

								<!-- Shockstep Conduit -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_shockstep_conduit_enabled" value="0" />
									<input type="hidden" name="attr_stormweaver_shockstep_conduit_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_shockstep_conduit" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_shockstep_conduit_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_shockstep_conduit_description"></span></span>
								</div>

								<!-- Reactive Veilwalk -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_reactive_veilwalk_enabled" value="0" />
									<input type="hidden" name="attr_stormweaver_reactive_veilwalk_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_reactive_veilwalk" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_reactive_veilwalk_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_reactive_veilwalk_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="4">
								<h3 class="sheet-career-talent-tier-header">Tier 4 Talents</h3>

								<!-- Veilstorm Mantle -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_veilstorm_mantle_enabled" value="0" />
									<input type="hidden" name="attr_stormweaver_veilstorm_mantle_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_veilstorm_mantle" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_veilstorm_mantle_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_veilstorm_mantle_description"></span></span>
								</div>

								<!-- Flashfire Assault -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_flashfire_assault_enabled" value="0" />
									<input type="hidden" name="attr_stormweaver_flashfire_assault_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_flashfire_assault" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_flashfire_assault_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_flashfire_assault_description"></span></span>
								</div>

								<!-- Arc Flare -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_arc_flare_enabled" value="0" />
									<input type="hidden" name="attr_stormweaver_arc_flare_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_arc_flare" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_arc_flare_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_arc_flare_description"></span></span>
								</div>

								<!-- Surge Engine -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_surge_engine_enabled" value="0" />
									<input type="hidden" name="attr_stormweaver_surge_engine_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_surge_engine" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_surge_engine_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_surge_engine_description"></span></span>
								</div>

								<!-- Burn Current -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_burn_current_enabled" value="0" />
									<input type="hidden" name="attr_stormweaver_burn_current_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_burn_current" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_burn_current_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_burn_current_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="5">
								<h3 class="sheet-career-talent-tier-header">Tier 5 Talents</h3>

								<!-- Eye of the Storm -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_eye_of_the_storm_enabled" value="0" />
									<input type="hidden" name="attr_stormweaver_eye_of_the_storm_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_eye_of_the_storm" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_eye_of_the_storm_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_eye_of_the_storm_description"></span></span>
								</div>

								<!-- Stormpiercer -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_stormpiercer_enabled" value="0" />
									<input type="hidden" name="attr_stormweaver_stormpiercer_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_stormpiercer" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_stormpiercer_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_stormpiercer_description"></span></span>
								</div>

								<!-- Stat Boost -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_stat_boost_enabled" value="0" />
									<input type="hidden" name="attr_stormweaver_stat_boost_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_stat_boost" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_stat_boost_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_stat_boost_description"></span></span>
								</div>

								<!-- Veilburn Protocol -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_stormweaver_veilburn_protocol_enabled" value="0" />
									<input type="hidden" name="attr_stormweaver_veilburn_protocol_lockflag" value="0" />
									<input type="checkbox" name="attr_stormweaver_veilburn_protocol" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_stormweaver_veilburn_protocol_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_stormweaver_veilburn_protocol_description"></span></span>
								</div>
							</div>
						</div>
						</div>
					</div>

					<div class="sheet-career-tab sheet-tab-street_ronin">

						<input type="hidden" name="attr_street_ronin_ready" class="sheet-career-ready-controller" value="0" />
						<div class="sheet-career-locked-overlay">Career not active</div>
						<div class="sheet-career-interactive-block">

						<div class="sheet-career-talent-tree">

							<input type="hidden" name="attr_show_career_skills" value="0" />

							<div class="sheet-toggle-career-skills sheet-career-tabs">
								<button type="action" name="act_toggle_career_skills">Career Skills</button>
							</div>

							<div class="sheet-career-skill-block">
								<div class="sheet-career-skill-columns">
									<!-- Left Column: Primary -->
									<div class="sheet-career-skill-col">
										<h3 class="sheet-career-skill-header">Primary Skills</h3>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_street_ronin_melee_weapons_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_street_ronin_melee_weapons_mdr_checkbox" value="1" />
											<label>Melee Weapons</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_street_ronin_athletics_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_street_ronin_athletics_mdr_checkbox" value="1" />
											<label>Athletics</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_street_ronin_dodge_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_street_ronin_dodge_mdr_checkbox" value="1" />
											<label>Dodge</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_street_ronin_coordination_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_street_ronin_coordination_mdr_checkbox" value="1" />
											<label>Coordination</label>
										</div>
									</div>

									<!-- Right Column: Secondary -->
									<div class="sheet-career-skill-col">
										<h3 class="sheet-career-skill-header">Secondary Skills</h3>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_street_ronin_stealth_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_street_ronin_stealth_mdr_checkbox" value="1" />
											<label>Stealth</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_street_ronin_insight_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_street_ronin_insight_mdr_checkbox" value="1" />
											<label>Insight</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_street_ronin_perception_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_street_ronin_perception_mdr_checkbox" value="1" />
											<label>Perception</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_street_ronin_unarmed_combat_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_street_ronin_unarmed_combat_mdr_checkbox" value="1" />
											<label>Unarmed Combat</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_street_ronin_intimidate_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_street_ronin_intimidate_mdr_checkbox" value="1" />
											<label>Intimidate</label>
										</div>
										<div class="sheet-career-skill-wrapper">
											<input type="hidden" name="attr_cs_street_ronin_survival_urban_mdr_checkbox_lock" value="0" />
											<input type="checkbox" name="attr_cs_street_ronin_survival_urban_mdr_checkbox" value="1" />
											<label>Survival (Urban)</label>
										</div>
									</div>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="1">
								<h3 class="sheet-career-talent-tier-header">Tier 1 Talents</h3>

								<!-- Combat Rhythm -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_combat_rhythm_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_combat_rhythm" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_combat_rhythm_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_combat_rhythm_description"></span></span>
								</div>

								<!-- Clean Entry -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_clean_entry_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_clean_entry" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_clean_entry_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_clean_entry_description"></span></span>
								</div>

								<!-- Disciplined Focus -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_disciplined_focus_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_disciplined_focus" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_disciplined_focus_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_disciplined_focus_description"></span></span>
								</div>

								<!-- Urban Footwork -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_urban_footwork_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_urban_footwork" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_urban_footwork_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_urban_footwork_description"></span></span>
								</div>

								<!-- Strain Buffer -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_strain_buffer_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_strain_buffer" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_strain_buffer_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_strain_buffer_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="2">
								<h3 class="sheet-career-talent-tier-header">Tier 2 Talents</h3>

								<!-- Interception Cut -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_interception_cut_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_interception_cut_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_interception_cut" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_interception_cut_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_interception_cut_description"></span></span>
								</div>

								<!-- Posture Breaker -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_posture_breaker_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_posture_breaker_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_posture_breaker" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_posture_breaker_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_posture_breaker_description"></span></span>
								</div>

								<!-- Blade Discipline -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_blade_discipline_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_blade_discipline_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_blade_discipline" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_blade_discipline_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_blade_discipline_description"></span></span>
								</div>

								<!-- Steel Reflex -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_steel_reflex_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_steel_reflex_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_steel_reflex" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_steel_reflex_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_steel_reflex_description"></span></span>
								</div>

								<!-- Reactive Flow -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_reactive_flow_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_reactive_flow_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_reactive_flow" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_reactive_flow_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_reactive_flow_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="3">
								<h3 class="sheet-career-talent-tier-header">Tier 3 Talents</h3>

								<!-- Breath Before the Cut -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_breath_before_the_cut_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_breath_before_the_cut_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_breath_before_the_cut" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_breath_before_the_cut_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_breath_before_the_cut_description"></span></span>
								</div>

								<!-- Draw Cut -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_draw_cut_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_draw_cut_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_draw_cut" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_draw_cut_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_draw_cut_description"></span></span>
								</div>

								<!-- Counterguard Precision -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_counterguard_precision_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_counterguard_precision_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_counterguard_precision" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_counterguard_precision_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_counterguard_precision_description"></span></span>
								</div>

								<!-- Stillness in Motion -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_stillness_in_motion_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_stillness_in_motion_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_stillness_in_motion" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_stillness_in_motion_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_stillness_in_motion_description"></span></span>
								</div>

								<!-- The Line You Do Not Cross -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_the_line_you_do_not_cross_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_the_line_you_do_not_cross_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_the_line_you_do_not_cross" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_the_line_you_do_not_cross_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_the_line_you_do_not_cross_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="4">
								<h3 class="sheet-career-talent-tier-header">Tier 4 Talents</h3>

								<!-- Moment Severed -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_moment_severed_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_moment_severed_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_moment_severed" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_moment_severed_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_moment_severed_description"></span></span>
								</div>

								<!-- No Second Strike -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_no_second_strike_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_no_second_strike_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_no_second_strike" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_no_second_strike_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_no_second_strike_description"></span></span>
								</div>

								<!-- Ghost Step -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_ghost_step_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_ghost_step_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_ghost_step" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_ghost_step_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_ghost_step_description"></span></span>
								</div>

								<!-- Steel Anchored Calm -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_steel_anchored_calm_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_steel_anchored_calm_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_steel_anchored_calm" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_steel_anchored_calm_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_steel_anchored_calm_description"></span></span>
								</div>

								<!-- Flow Reversal -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_flow_reversal_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_flow_reversal_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_flow_reversal" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_flow_reversal_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_flow_reversal_description"></span></span>
								</div>

								<!-- Deflective Form -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_deflective_form_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_deflective_form_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_deflective_form" value="1" class="sheet-career-talent-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_deflective_form_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_deflective_form_description"></span></span>
								</div>
							</div>

							<div class="sheet-career-talent-tier" data-tier="5">
								<h3 class="sheet-career-talent-tier-header">Tier 5 Talents</h3>

								<!-- Final Cut Doctrine -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_final_cut_doctrine_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_final_cut_doctrine_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_final_cut_doctrine" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_final_cut_doctrine_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_final_cut_doctrine_description"></span></span>
								</div>

								<!-- Ghost Walk Execution -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_ghost_walk_execution_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_ghost_walk_execution_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_ghost_walk_execution" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_ghost_walk_execution_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_ghost_walk_execution_description"></span></span>
								</div>

								<!-- Duelmaster's Claim -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_duelmasters_claim_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_duelmasters_claim_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_duelmasters_claim" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_duelmasters_claim_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_duelmasters_claim_description"></span></span>
								</div>

								<!-- Stat Boost -->
								<div class="sheet-career-talent-row">
									<input type="hidden" name="attr_street_ronin_stat_boost_enabled" value="0" />
									<input type="hidden" name="attr_street_ronin_stat_boost_lockflag" value="0" />
									<input type="checkbox" name="attr_street_ronin_stat_boost" value="1" class="sheet-career-talent-checkbox sheet-tier5-checkbox" />
									<label class="sheet-career-talent-label"><span name="attr_street_ronin_stat_boost_label"></span></label>
									<span class="sheet-career-talent-description"><span name="attr_street_ronin_stat_boost_description"></span></span>
								</div>
							</div>
						</div>
						</div>
					</div>

				</div>
			</div>
				
			<h4 class="section-head" data-i18n="careers-u">Careers</h4>
			<div class="sheet-section">
				<div class="sheet-career-label" name="attr_career1" data-i18n="careers1-u">Career 1</div>
				<textarea name="attr_career1" class="sheet-career-textarea"></textarea>
				<div class="sheet-career-label" name="attr_career2" data-i18n="careers2-u">Career 2</div>
				<textarea name="attr_career2" class="sheet-career-textarea"></textarea>
			</div>
			
			<div class="sheet-section">
				<h4 class="section-head">Tiers</h4>
				<div class="sheet-section sheet-careers-flex">
					<div class="sheet-career-label" name="attr_career_tier1" data-i18n="tier1_careers-u">Tier 1</div>
					<textarea name="attr_career_tier1" class="sheet-career-textarea"></textarea>
					<div class="sheet-career-label" name="attr_career_tier2" data-i18n="tier2_careers-u">Tier 2</div>
					<textarea name="attr_career_tier2" class="sheet-career-textarea"></textarea>
					<div class="sheet-career-label" name="attr_career_tier3" data-i18n="tier3_careers-u">Tier 3</div>
					<textarea name="attr_career_tier3" class="sheet-career-textarea"></textarea>
					<div class="sheet-career-label" name="attr_career_tier4" data-i18n="tier4_careers-u">Tier 4</div>
					<textarea name="attr_career_tier4" class="sheet-career-textarea"></textarea>
					<div class="sheet-career-label" name="attr_career_tier5" data-i18n="tier5_careers-u">Tier 5</div>
					<textarea name="attr_career_tier5" class="sheet-career-textarea"></textarea>
				</div>
			</div>
			
		</div>

		<!-- -------------------------- Modern Combat -------------------------- -->
		<div class="sheet-tab-content sheet-combat">
		<input type="checkbox" style="display:none" class="sheet-hide" name="attr_sheet-hide" />
			<div class="sheet-colrow">
				<h4 class="section-head" data-i18n="armor-u">Armor</h4>
				<div class="section">
					<div class="sheet-armor-header">
						<div class="flex-row">
							<div class="flex-cell armor-name"><span data-i18n="armor_name-u">Armor</span></div>
							<div class="flex-cell armor-equipped"><span data-i18n="armor_equipped-u">E</span></div>
							<div class="flex-cell armor-physical"><span data-i18n="armor_physical-u">Physical</span></div>
							<div class="flex-cell armor-arcane"><span data-i18n="armor_arcane-u">Arcane</span></div>
							<div class="flex-cell armor-layer"><span data-i18n="armor_layer-u">Layer</span></div>
							<div class="flex-cell armor-category"><span data-i18n="armor_category-u">Category</span></div>
							<div class="flex-cell armor-traits"><span data-i18n="armor_traits-u">Traits</span></div>
						</div>
					</div>
					<div class="sheet-armor-default">
						<div class="flex-row">
							<div class="flex-cell armor-name"><input type="text" name="attr_armor1_name_mdr" placeholder="Armor Name" /></div>
							<div class="flex-cell armor-equipped"><input type="checkbox" name="attr_armor1_equipped_checkbox" /></div>
							<div class="flex-cell armor-physical"><input type="text" name="attr_armor1_physical_mdr" placeholder="P" /></div>
							<div class="flex-cell armor-arcane"><input type="text" name="attr_armor1_arcane_mdr" placeholder="A" /></div>
							<div class="flex-cell armor-layer"><input type="text" name="attr_armor1_layer_mdr" placeholder="Layer" /></div>
							<div class="flex-cell armor-category"><input type="text" name="attr_armor1_category_mdr" placeholder="Category" /></div>
							<div class="flex-cell armor-traits"><input type="text" name="attr_armor1_traits_mdr" placeholder="Traits" /></div>
						</div>
						<div class="flex-row">
							<div class="flex-cell armor-name"><input type="text" name="attr_armor2_name_mdr" placeholder="Armor Name" /></div>
							<div class="flex-cell armor-equipped"><input type="checkbox" name="attr_armor2_equipped_checkbox" /></div>
							<div class="flex-cell armor-physical"><input type="text" name="attr_armor2_physical_mdr" placeholder="P" /></div>
							<div class="flex-cell armor-arcane"><input type="text" name="attr_armor2_arcane_mdr" placeholder="A" /></div>
							<div class="flex-cell armor-layer"><input type="text" name="attr_armor2_layer_mdr" placeholder="Layer" /></div>
							<div class="flex-cell armor-category"><input type="text" name="attr_armor2_category_mdr" placeholder="Category" /></div>
							<div class="flex-cell armor-traits"><input type="text" name="attr_armor2_traits_mdr" placeholder="Traits" /></div>
						</div>
					</div>
					<fieldset class="repeating_armorsmdr">
						<div class="flex-row">
							<div class="flex-cell armor-name"><input type="text" name="attr_armor_name_mdr" placeholder="Armor Name" /></div>
							<div class="flex-cell armor-equipped"><input type="checkbox" name="attr_armor_equipped_checkbox" /></div>
							<div class="flex-cell armor-physical"><input type="text" name="attr_armor_physical_mdr" placeholder="P" /></div>
							<div class="flex-cell armor-arcane"><input type="text" name="attr_armor_arcane_mdr" placeholder="A" /></div>
							<div class="flex-cell armor-layer"><input type="text" name="attr_armor_layer_mdr" placeholder="Layer" /></div>
							<div class="flex-cell armor-category"><input type="text" name="attr_armor_category_mdr" placeholder="Category" /></div>
							<div class="flex-cell armor-traits"><input type="text" name="attr_armor_traits_mdr" placeholder="Traits" /></div>
						</div>
					</fieldset>
				</div>
			</div>

			<div class="sheet-colrow">
				<h4 class="section-head" data-i18n="weapons-u">Weapons</h4>
				<div class="section">
					<!-- Header -->
					<div class="sheet-weapon-header">
						<div class="flex-row">
							<div class="flex-cell weapon-name"><span data-i18n="weaponname-u">Weapon</span></div>
							<div class="flex-cell weapon-impale">I</div>
							<div class="flex-cell weapon-skill"><span data-i18n="skill-u">Skill</span></div>
							<div class="flex-cell-wrapper">
								<div class="flex-cell weapon-skill-display"><span data-i18n="skill_display-u">Val</span></div>
								<div class="flex-cell weapon-roll"><!-- Empty for roll --></div>
							</div>
							<div class="flex-cell weapon-damage"><span data-i18n="damage-u">Damage</span></div>
							<div class="flex-cell weapon-damage-bonus"><span>DB</span></div>
							<div class="flex-cell weapon-range"><span data-i18n="range-u">Range</span></div>
							<div class="flex-cell weapon-attacks"><span data-i18n="attacks-u">Attacks</span></div>
							<div class="flex-cell weapon-ammo"><span data-i18n="ammo-u">Ammo</span></div>
							<div class="flex-cell weapon-malf"><span data-i18n="malf-u">Malf</span></div>
							<div class="flex-cell weapon-contested"><span data-i18n="constested-u">Contested</span></div>
							<div class="flex-cell weapon-strain"><span data-i18n="strain-u">Strain</span></div>
						</div>
					</div>
					<!-- Default Row (Unarmed) -->
					<div class="sheet-weapon-default">
						<div class="flex-row">
							<div class="flex-cell weapon-name sheet-readonly"><input type="text" placeholder="Unarmed" data-i18n-placeholder="unarmed-z" /></div>
							<div class="flex-cell weapon-impale"><input type="checkbox" name="attr_attack_impale_checkbox" value="1" /></div>
							<div class="flex-cell weapon-skill"><input type="text" placeholder="Unarmed" data-i18n-placeholder="unarmed-u" disabled="true" /></div>
							<div class="flex-cell-wrapper sheet-val-roll-static">
								<input class="sheet-readonly" type="text" name="attr_unarmed_mdr" />
								<button type="roll" class="new-roll" name="@{weapon-name}" value="&{template:coc-attack-1-noimpale} {{name=@{unarmed_txt}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{unarmed_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{unarmed_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{unarmed_mdr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{damage=[[1d3]]}} {{extremedamage=[[0 + (1*3)]]}} {{strain=[[ 0 + 0 ]]}}" ></button>
							</div>
							<div class="flex-cell weapon-damage sheet-readonly"><input type="text" value="1d3" /></div>
							<div class="flex-cell weapon-damage-bonus sheet-readonly"><input type="text" value="+db" /></div>
							<div class="flex-cell weapon-range sheet-readonly"><input type="text" value="" /></div>
							<div class="flex-cell weapon-attacks sheet-readonly"><input type="text" value="1" /></div>
							<div class="flex-cell weapon-ammo sheet-readonly"><input type="text" value="" /></div>
							<div class="flex-cell weapon-malf sheet-readonly"><input type="text" value="" /></div>
							<div class="flex-cell weapon-contested sheet-readonly"><input type="text" value="" /></div>
							<div class="flex-cell weapon-strain sheet-readonly"><input type="text" value="" /></div>
						</div>
					</div>
					<!-- Fixed Weapon 1 -->
					<div class="sheet-weapon-block">
						<div class="flex-row">
							<!-- Hidden parsing fields for Weapon1 -->
							<input type="hidden" name="attr_weapon1_mdr_damage_numdice" value="0" />
							<input type="hidden" name="attr_weapon1_mdr_damage_dicesize" value="0" />
							<input type="hidden" name="attr_weapon1_mdr_damage_bonus" value="0" />
							<input type="hidden" name="attr_weapon1_mdr_strain" value="0" />
							<div class="flex-cell weapon-name"><input type="text" name="attr_weapon1_mdr_name" placeholder="Weapon Name" /></div>
							<div class="flex-cell weapon-impale"><input type="checkbox" name="attr_roll_weapon1_mdr_attack_impale_checkbox" value="1" /></div>
							<div class="flex-cell weapon-skill">
								<select name="attr_weapon1_skill_mdr">
									<option value="@{unarmed_mdr}" data-i18n="unarmed-u">Unarmed</option>
									<option value="@{archery_mdr}" data-i18n="archery-u">Archery</option>
									<option value="@{gunnery_mdr}" data-i18n="gunnery-u">Gunnery</option>
									<option value="@{heavy_weapons_mdr}" data-i18n="heavy_weapons-u">Heavy Weapons</option>
									<option value="@{melee_weapons_mdr}" data-i18n="melee_weapons-u">Melee Weapons</option>
									<option value="@{firearms_handgun_mdr}" data-i18n="firearms(hg)-u">Pistol</option>
									<option value="@{firearms_rifle_mdr}" data-i18n="firearms_rifle-u">Rifle/Shotgun</option>
									<option value="@{firearms_smg_mdr}" data-i18n="firearms_s_m_g-u">Submachine Gun</option>
									<option value="@{throw_mdr}" data-i18n="throw-u">Throw</option>
									<option value="@{magic_universal_mdr}" data-i18n="magic_universal-u">Magic</option>
   							   </select>
							</div>
							<div class="flex-cell-wrapper sheet-val-roll-static">
								<input class="sheet-readonly" type="text" name="attr_weapon1_skill_mdr_display" />
								<div class="weapon-roll">
									<input type="hidden" name="attr_attack_mode_toggle" class="sheet-attack-toggle sheet-readonly" value="noimpale" />
									<button type="roll" class="new-roll sheet-roll-noimpale" name="roll_weapon1_mdr_attack_noimpale" value="&{template:coc-attack-1-noimpale} {{name=@{weapon1_mdr_name}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{weapon1_skill_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{weapon1_skill_mdr} + @{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{weapon1_skill_mdr} + @{dice_modifier_checkbox})/5)]]}} {{malf=@{weapon1_mdr_malf}}} {{roll1=[[1d100]]}} {{damage=[[@{weapon1_mdr_damage}@{weapon1_mdr_db}]]}} {{extremedamage=[[(@{weapon1_mdr_damage_numdice}*@{weapon1_mdr_damage_dicesize})+@{weapon1_mdr_damage_bonus}]]}} {{strain=[[ @{weapon1_mdr_strain} + 0 ]]}}"></button>
									<button type="roll" class="new-roll sheet-roll-impale" name="roll_weapon1_mdr_attack_impale" value="&{template:coc-attack-1-impale} {{name=@{weapon1_mdr_name}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{weapon1_skill_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{weapon1_skill_mdr} + @{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{weapon1_skill_mdr} + @{dice_modifier_checkbox})/5)]]}} {{malf=@{weapon1_mdr_malf}}} {{roll1=[[1d100]]}} {{damage=[[@{weapon1_mdr_damage}@{weapon1_mdr_db}]]}} {{extremedamage=[[(@{weapon1_mdr_damage_numdice}*@{weapon1_mdr_damage_dicesize})+@{weapon1_mdr_damage_bonus}]]}} {{strain=[[ @{weapon1_mdr_strain} + 0 ]]}}"></button>
								</div>
							</div>
							<div class="flex-cell weapon-damage"><input type="text" name="attr_weapon1_mdr_damage" placeholder="Damage" /></div>
								<div class="flex-cell weapon-damage-bonus">
									<select name="attr_weapon1_mdr_db">
										<option value="+0">+0</option>
										<option value="+round((@{damage_bonus})/2)">+½db</option>
										<option value="+@{damage_bonus}">+db</option>
									</select>
								</div>
							<div class="flex-cell weapon-range"><input type="text" name="attr_weapon1_mdr_range" placeholder="Range" /></div>
							<div class="flex-cell weapon-attacks"><input type="text" name="attr_weapon1_mdr_attacks" placeholder="Attacks" /></div>
							<div class="flex-cell weapon-ammo"><input type="text" name="attr_weapon1_mdr_ammo" placeholder="Ammo" /></div>
							<div class="flex-cell weapon-malf"><input type="text" name="attr_weapon1_mdr_malf" placeholder="Malf" /></div>
							<div class="flex-cell weapon-contested"><input type="text" name="attr_weapon1_mdr_contested" placeholder="-" /></div>
							<div class="flex-cell weapon-strain"><input type="text" name="attr_weapon1_mdr_strain" placeholder="Strain" /></div>
						</div>
					</div>
					<!-- Repeating Weapons -->
					<fieldset class="repeating_weaponsmdr">
						<div class="flex-row">
							<input type="hidden" name="attr_damage_numdice" value="0" />
							<input type="hidden" name="attr_damage_dicesize" value="0" />
							<input type="hidden" name="attr_damage_bonus" value="0" />
							<input type="hidden" name="attr_weaponstrain_mdr" value="0" />
							<div class="flex-cell weapon-name"><input type="text" name="attr_weaponname_mdr" /></div>
							<div class="flex-cell weapon-impale"><input type="checkbox" name="attr_attack_impale_checkbox" value="1" /></div>
							<div class="flex-cell weapon-skill">
								<select name="attr_weaponskill_mdr">
									<option value="@{unarmed_mdr}" data-i18n="unarmed-u">Unarmed</option>
									<option value="@{archery_mdr}" data-i18n="archery-u">Archery</option>
									<option value="@{gunnery_mdr}" data-i18n="gunnery-u">Gunnery</option>
									<option value="@{heavy_weapons_mdr}" data-i18n="heavy_weapons-u">Heavy Weapons</option>
									<option value="@{melee_weapons_mdr}" data-i18n="melee_weapons-u">Melee Weapons</option>
									<option value="@{firearms_handgun_mdr}" data-i18n="firearms(hg)-u">Pistol</option>
									<option value="@{firearms_rifle_mdr}" data-i18n="firearms_rifle-u">Rifle/Shotgun</option>
									<option value="@{firearms_smg_mdr}" data-i18n="firearms_s_m_g-u">Submachine Gun</option>
									<option value="@{throw_mdr}" data-i18n="throw-u">Throw</option>
									<option value="@{magic_universal_mdr}" data-i18n="magic_universal-u">Magic</option>
								</select>
							</div>
							<div class="flex-cell-wrapper sheet-val-roll-static">
								<input type="text" name="attr_weaponskill_mdr_display" class="sheet-readonly" />
								<div class="weapon-roll">
									<input type="hidden" name="attr_attack_mode_toggle" class="sheet-attack-toggle" value="noimpale" />
									<button type="roll" class="new-roll sheet-roll-noimpale" name="roll_weaponskill_mdr_check_noimpale" value="&{template:coc-attack-1-noimpale} {{name=@{weaponname_mdr}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{weaponskill_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{weaponskill_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{weaponskill_mdr}+@{dice_modifier_checkbox})/5)]]}} {{malf=@{weaponmalf_mdr}}} {{roll1=[[1d100]]}} {{damage=[[@{weapondamage_mdr}@{weapondb_mdr}]]}} {{extremedamage=[[(@{damage_numdice}*@{damage_dicesize})+@{damage_bonus}]]}} {{strain=[[ @{weaponstrain_mdr} + 0 ]]}}"></button>
									<button type="roll" class="new-roll sheet-roll-impale" name="roll_weaponskill_mdr_check_impale" value="&{template:coc-attack-1-impale} {{name=@{weaponname_mdr}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{weaponskill_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{weaponskill_mdr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{weaponskill_mdr}+@{dice_modifier_checkbox})/5)]]}} {{malf=@{weaponmalf_mdr}}} {{roll1=[[1d100]]}} {{damage=[[@{weapondamage_mdr}@{weapondb_mdr}]]}} {{extremedamage=[[(@{damage_numdice}*@{damage_dicesize})+@{damage_bonus}]]}} {{strain=[[ @{weaponstrain_mdr} + 0 ]]}}"></button>
								</div>
							</div>
							<div class="flex-cell weapon-damage"><input type="text" name="attr_weapondamage_mdr" /></div>
							<div class="flex-cell weapon-damage-bonus">
								<select name="attr_weapondb_mdr">
									<option value="+0">+0</option>
									<option value="+round((@{damage_bonus})/2)">+½db</option>
									<option value="+@{damage_bonus}">+db</option>
								</select>
							</div>
							<div class="flex-cell weapon-range"><input type="text" name="attr_weaponrange_mdr" /></div>
							<div class="flex-cell weapon-attacks"><input type="text" name="attr_weaponattacks_mdr" /></div>
							<div class="flex-cell weapon-ammo"><input type="text" name="attr_weaponammo_mdr" /></div>
							<div class="flex-cell weapon-malf"><input type="text" name="attr_weaponmalf_mdr" /></div>
							<div class="flex-cell weapon-contested"><input type="text" name="attr_weaponcontested" /></div>
							<div class="flex-cell weapon-strain"><input type="text" name="attr_weaponstrain_mdr" /></div>
						</div>
					</fieldset>
				</div>
			</div>

			<div class="sheet-colrow">
				<h4 class="section-head" data-i18n="omnidecks-u">Omnidecks</h4>
				<div class="section">
					<div class="sheet-omnideck-header">
						<div class="flex-row">
							<div class="flex-cell omnideck-name"><span data-i18n="omnideck_name-u">Omnideck Name</span></div>
							<div class="flex-cell omnideck-equipped"><span data-i18n="omnideck_equipped-u">E</span></div>
							<div class="flex-cell omnideck-skill"><span data-i18n="omnideck_skill-u">Skill</span></div>
							<div class="flex-cell omni-skill-display"><span data-i18n="skill_display-u">Val</span></div>
							<div class="flex-cell omnideck-ir"><span data-i18n="omnideck_ir-u">IR</span></div>
							<div class="flex-cell omnideck-mr"><span data-i18n="omnideck_mr-u">MR</span></div>
							<div class="flex-cell omnideck-fr"><span data-i18n="omnideck_fr-u">FR</span></div>
							<div class="flex-cell omnideck-dic"><span data-i18n="omnideck_dic-u">DIC</span></div>
							<div class="flex-cell omnideck-dit"><span data-i18n="omnideck_dit-u">DIT</span></div>
							<div class="flex-cell omnideck-ar"><span data-i18n="omnideck_ar-u">AR</span></div>
							<div class="flex-cell omnideck-prog_slots"><span data-i18n="omnideck_prog_slots-u">Program Slots</span></div>
							<div class="flex-cell omnideck-mod_slots"><span data-i18n="omnideck_mod_slots-u">Mod Slots</span></div>
						</div>
					</div>
					<fieldset class="repeating_omnidecksmdr">
						<div class="flex-row">
							<div class="flex-cell omnideck-name"><input type="text" name="attr_omnideck_name" placeholder="Omnideck Name" /></div>
							<div class="flex-cell omnideck-equipped"><input type="checkbox" name="attr_omnideck_equipped" value="1" /></div>
							<div class="flex-cell omnideck-skill">
								<select name="attr_omnideck_skill_mdr">
									<option value="@{slicing_mdr}" data-i18n="slicing-u">Slicing</option>
									<option value="@{computer_use_mdr}" data-i18n="computeruse-u">Computer Use</option>
								</select>
							</div>
							<div class="flex-cell omnideck-skill-display"><input type="text" name="attr_omnideck_skill_mdr_display" class="sheet-readonly" /></div>
							<div class="omnideck-roll-wrapper">
								<div class="flex-cell omnideck-roll">
									<button type="roll" class="new-roll" name="roll_omnideck_ir_mdr_attack" value="&{template:coc-1} {{name=@{omnideck_name} - IR Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[(floor(@{omnideck_skill_mdr}/5))+@{omnideck_ir}+@{dice_modifier_checkbox}]]}} {{hard=[[floor(((floor(@{omnideck_skill_mdr}/5))+@{omnideck_ir}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor(((floor(@{omnideck_skill_mdr}/5))+@{omnideck_ir}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
								</div>
								<div class="flex-cell omnideck-ir"><input name="attr_omnideck_ir" type="text" /></div>
							</div>
							<div class="omnideck-roll-wrapper">
								<div class="flex-cell omnideck-roll">
									<button type="roll" class="new-roll" name="roll_omnideck_mr_mdr_attack" value="&{template:coc-1} {{name=@{omnideck_name} - MR Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[(floor(@{omnideck_skill_mdr}/5))+@{omnideck_mr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor(((floor(@{omnideck_skill_mdr}/5))+@{omnideck_mr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor(((floor(@{omnideck_skill_mdr}/5))+@{omnideck_mr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
								</div>
								<div class="flex-cell omnideck-mr"><input name="attr_omnideck_mr" type="text" /></div>
							</div>
							<div class="omnideck-roll-wrapper">
								<div class="flex-cell omnideck-roll">
									<button type="roll" class="new-roll" name="roll_omnideck_fr_mdr_attack" value="&{template:coc-1} {{name=@{omnideck_name} - FR Roll}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[(floor(@{omnideck_skill_mdr}/5))+@{omnideck_fr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor(((floor(@{omnideck_skill_mdr}/5))+@{omnideck_fr}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor(((floor(@{omnideck_skill_mdr}/5))+@{omnideck_fr}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
								</div>
								<div class="flex-cell omnideck-fr"><input name="attr_omnideck_fr" type="text" /></div>
							</div>
							<div class="flex-cell omnideck-dic"><input type="text" name="attr_omnideck_dic" placeholder="DIC" /></div>
							<div class="flex-cell omnideck-dit"><input type="text" name="attr_omnideck_dit" placeholder="DIT" /></div>
							<div class="flex-cell omnideck-ar"><input type="text" name="attr_omnideck_ar" placeholder="AR" /></div>
							<div class="flex-cell omnideck-prog_slots"><input type="text" name="attr_omnideck_prog_slots" placeholder="0" /></div>
							<div class="flex-cell omnideck-mod_slots"><input type="text" name="attr_omnideck_mod_slots" placeholder="0" /></div>
						</div>
					</fieldset>
				</div>
			</div>

			<div class="sheet-colrow">
				<h4 class="section-head" data-i18n="programs-u">Programs</h4>
				<div class="section">
					<div class="sheet-program-header">
						<div class="flex-row">
							<div class="flex-cell program-name"><span data-i18n="program_name-u">Program Name</span></div>
							<div class="flex-cell program-active"><span data-i18n="program_active-u">A</span></div>
							<div class="flex-cell program-roll"><span data-i18n="program_roll-u"><!-- Blank --></span></div>
							<div class="flex-cell program-damage"><span data-i18n="program_damage-u">Damage</span></div>
							<div class="flex-cell program-effect"><span data-i18n="program_effect-u">Effect</span></div>
						</div>
					</div>
					<fieldset class="repeating_programsmdr">
						<div class="flex-row">
							<input type="hidden" name="attr_damage_numdice" value="0" />
							<input type="hidden" name="attr_damage_dicesize" value="0" />
							<input type="hidden" name="attr_damage_bonus" value="0" />

							<div class="flex-cell program-name"><input type="text" name="attr_program_name_mdr" placeholder="Program Name" /></div>
							<div class="flex-cell program-active"><input type="checkbox" name="attr_program_active_mdr" value="1" /></div>
							<div class="flex-cell program-roll">
								<button type="roll" class="new-roll" name="roll_program_mdr_attack" value="&{template:coc-dice-roll} {{name=Program - @{program_name_mdr}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[@{program_damage_mdr}]]}} "></button>
							</div>
							<div class="flex-cell program-damage"><input type="text" name="attr_program_damage_mdr" /></div>
							<div class="flex-cell program-effect"><input type="text" name="attr_program_affect_mdr" placeholder="-" /></div>
						</div>
					</fieldset>
				</div>
			</div>
		</div>

		<!-- -------------------------- Spells -------------------------- -->
		<div class="sheet-tab-content sheet-spells">
			<h4 class="section-head" data-i18n="spells-u">Spells</h4>
			<!-- Prep Spell Cost / Arcane Capacity Tracker -->
			<div class="sheet-section">
				<div class="sheet-spell-tracker-wrapper">
					<div class="sheet-spell-tracker-grid-row">
						<div class="sheet-spell-row">
							<label>Strain Current</label>
							<input class="sheet-attr-input-small sheet-spell-cost" type="text" name="attr_strain" placeholder="current" data-i18n-placeholder="current" />
						</div>
						<div class="sheet-spell-row">
							<label>Strain Max</label>
							<input class="sheet-attr-input-small sheet-strain-max sheet-readonly" type="text" name="attr_strain_max" placeholder="max" />
						</div>
						<div class="sheet-spell-separator"></div>
						
						<div class="sheet-spell-row">
							<input type="hidden" class="sheet-overflow-mirror" name="attr_spellcost_overflow" />
							<label>Prep Spell Cost</label>
							<input class="sheet-attr-input-small sheet-spell-cost sheet-overflow-sensitive sheet-readonly" type="text" name="attr_total_spellcost" placeholder="0" />
						</div>
						<div class="sheet-spell-row">
							<label>Arcane Capacity</label>
							<input class="sheet-attr-input-small sheet-spell-capacity sheet-readonly" type="text" name="attr_ac" placeholder="30" />
						</div>
						<div class="sheet-spell-separator"></div>
						
						<div class="sheet-spell-row">
							<label>Primary Career XP</label>
							<input class="sheet-attr-input-small sheet-readonly" type="text" name="attr_primary_career_spell_xp_total" placeholder="30" />
						</div>
						<div class="sheet-spell-row">
							<label>Secondary Career XP</label>
							<input class="sheet-attr-input-small sheet-readonly" type="text" name="attr_secondary_career_spell_xp_total" placeholder="0" />
						</div>
						<div class="sheet-spell-row">
							<label>XP -> Spells</label>
							<input class="sheet-attr-input-small sheet-xp-gain sheet-readonly" type="text" name="attr_xpledger_spells_cost" placeholder="60" />
						</div>
						<div class="sheet-spell-row">
							<label>Spell XP Spent</label>
							<input class="sheet-attr-input-small sheet-xp-cost" type="text" name="attr_spell_xp_spent" placeholder="0" />
						</div>
						<div class="sheet-spell-row">
							<label>Spell XP Remaining</label>
							<input class="sheet-attr-input-small sheet-spell-capacity sheet-readonly" type="text" name="attr_spell_xp_remaining" placeholder="0" />
						</div>						
					</div>
					

					
					<div class="sheet-strain-buttons-row">
						<div class="sheet-roll-wrapper">
							<span class="sheet-roll-label">Short Rest</span>
							<button type="action" name="act_strain_short_rest" class="sheet-roll-hidden"></button>
						</div>
						<div class="sheet-rest-button-wrapper">
							<span class="sheet-roll-label">Full Rest</span>
							<button type="action" class="sheet-roll-hidden sheet-rest-button" name="act_strain_full_rest"></button>
						</div>
					</div>
				</div>
			</div>
			
			<div class="sheet-colrow">
				<h4 class="section-head" data-i18n="spells-u">Spells</h4>
				<div class="sheet-spells-section">
					<fieldset class="repeating_spellsmdr">

						<div class="sheet-spellblock-grid-row">
							<input type="hidden" name="attr_damage_numdice" value="0" />
							<input type="hidden" name="attr_damage_dicesize" value="0" />
							<input type="hidden" name="attr_damage_bonus" value="0" />
							<input type="hidden" name="attr_spell_damage_mdr" value="0" />
							
							<input type="hidden" name="attr_show_spell_advanced" value="0" />
							<!-- Spell Name -->
							<div class="sheet-spellblock-row spell-name">
								<label data-i18n="spell_name-u">Spell Name</label>
								<input type="text" name="attr_spell_name_mdr" placeholder="Spell Name" />
							</div>

							<!-- Prepared Checkbox -->
							<div class="sheet-spellblock-row prepared">
								<label data-i18n="spell_prepared-u">P</label>
								<input type="checkbox" name="attr_spell_prepared_mdr" value="1" />
							</div>

							<!-- Skill + Display -->
							<div class="sheet-spellblock-row spell-skill">
								<label data-i18n="spell_skill-u">Skill</label>
								<select name="attr_spell_skill_mdr">
									<option value="@{magic_universal_mdr}" data-i18n="magic_universal-u">Universal</option>
									<option value="@{magic_alteration_mdr}" data-i18n="magic_alteration-u">Alteration</option>
									<option value="@{magic_elemental_mdr}" data-i18n="magic_elemental-u">Elemental</option>
									<option value="@{magic_enchantment_mdr}" data-i18n="magic_enchantment-u">Enchantment</option>
									<option value="@{magic_illusion_mdr}" data-i18n="magic_illusion-u">Illusion</option>
									<option value="@{magic_necromancy_mdr}" data-i18n="magic_necromancy-u">Necromancy</option>
									<option value="@{magic_restoration_mdr}" data-i18n="magic_restoration-u">Restoration</option>
									<option value="@{magic_summoning_mdr}" data-i18n="magic_summoning-u">Summoning</option>
									<option value="@{magic_technomancy_mdr}" data-i18n="magic_technomancy-u">Technomancy</option>
									<option value="@{magic_warding_mdr}" data-i18n="magic_warding-u">Warding</option>
								</select>
							</div>
							<input type="hidden" name="attr_spell_type_mdr" class="sheet-spelltype-mirror" />
							<div class="sheet-spellblock-row sheet-val-roll-wrapper">
								<label data-i18n="skill_display-u">Val</label>
								<input type="text" name="attr_spell_skill_mdr_display" class="sheet-readonly" />
								<!-- Uncontested / Area (Uncontested) -->
								<button type="roll" name="roll_strain" class="sheet-roll-uncontested" value="&{template:coc-dice-roll} {{name=@{spell_name_mdr} - Strain}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[@{spell_strain_mdr}]]}}" />

								<!-- Targeted -->
								<button type="roll" name="roll_spell_mdr_attack_targeted" class="sheet-roll-targeted" value="&{template:coc-attack-1-noimpale} {{name=@{spell_name_mdr}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{spell_skill_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{spell_skill_mdr} + @{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{spell_skill_mdr} + @{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{damage=[[@{spell_damage_mdr} +0]]}} {{extremedamage=[[(@{damage_numdice}*@{damage_dicesize})+@{damage_bonus}]]}} {{strain=[[ @{spell_strain_mdr} + 0 ]]}}"></button>

								<!-- Contested / Area (Contested) -->
								<button type="roll" name="roll_spell_mdr_attack_contested" class="sheet-roll-contested" value="&{template:coc-attack-1-noimpale} {{name=@{spell_name_mdr} vs. @{spell_contested_mdr}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{spell_skill_mdr}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{spell_skill_mdr} + @{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{spell_skill_mdr} + @{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}} {{damage=[[@{spell_damage_mdr} +0]]}} {{extremedamage=[[(@{damage_numdice}*@{damage_dicesize})+@{damage_bonus}]]}} {{strain=[[ @{spell_strain_mdr} + 0 ]]}}"></button>

							</div>

							<!-- Type / Contested / Damage / Strain -->
							<div class="sheet-spellblock-row spell-type">
								<label data-i18n="spell_type-u">Type</label>
								<select name="attr_spell_type_mdr">
									<option value="" data-i18n="spell_pick-u">-- Pick Type --</option> 													<!--Default -->
									<option value="spell_type_uncontested" data-i18n="spell_type_uncontested-u">Uncontested</option> 					<!-- No roll needed -->
									<option value="spell_type_targeted" data-i18n="spell_type_targeted-u">Targeted</option>								<!-- Spellcasting roll to hit -->
									<option value="spell_type_contested" data-i18n="spell_type_contested-u">Contested</option>							<!-- Spellcasting roll vs. Stat -->
									<option value="spell_type_area_uncontested" data-i18n="spell_type_area_uncontested-u">Area (Uncontested)</option>	<!-- No roll needed -->
									<option value="spell_type_area_contested" data-i18n="spell_type_area_contested-u">Area (Contested)</option>			<!-- Spellcasting roll vs. Stat -->
								</select>
							</div>

							<!-- Reflexive Checkbox -->
							<div class="sheet-spellblock-row reflexive">
								<label data-i18n="spell_reflexive-u">R</label>
								<input type="checkbox" name="attr_spell_reflexive_mdr" value="1" />
							</div>

							<div class="sheet-spellblock-row">
								<label data-i18n="spell_contested-u">Contested</label>
								<input type="text" name="attr_spell_contested_mdr" placeholder="-" />
							</div>
							<div class="sheet-spellblock-row">
								<label data-i18n="spell_damage-u">Damage</label>
								<input type="text" name="attr_spell_damage_mdr" />
							</div>
							<div class="sheet-spellblock-row">
								<label data-i18n="spell_strain-u">Strain</label>
								<input type="text" name="attr_spell_strain_mdr" placeholder="0" />
							</div>
							<div class="sheet-spellblock-row">
								<label data-i18n="spell_range-u">Range</label>
								<input type="text" name="attr_spell_range_mdr" placeholder="Short" />
							</div>
			
							<div class="sheet-spellblock-row sheet-toggle-wrapper">
								<button type="action" name="act_spelladvanced" class="sheet-toggle-button">▼</button>
							</div>

							<div class="sheet-spellblock-advanced">
								<!-- XP / AC / Cost / Etc -->
								<div class="sheet-spellblock-row">
									<label data-i18n="spell_ac_cost-u">AC Cost</label>
									<input type="text" name="attr_spellcost" placeholder="0" />
								</div>

								<div class="sheet-spellblock-row">
									<label data-i18n="spell_cast_time-u">Cast Time</label>
									<input type="text" name="attr_spell_cast_time_mdr" placeholder="1" />
								</div>
								<div class="sheet-spellblock-row">
									<label data-i18n="spell_duration-u">Duration</label>
									<input type="text" name="attr_spell_duration_mdr" placeholder="1" />
								</div>
								<div class="sheet-spellblock-row spell-element">
									<label data-i18n="spell_element-u">Element</label>
									<input type="text" name="attr_spell_element_mdr" placeholder="Arcane" />
								</div>
								<div class="sheet-spellblock-row">
									<label data-i18n="spell_xp_cost-u">XP Cost</label>
									<input type="text" name="attr_xp_cost_mdr" placeholder="0" />
								</div>
								<div class="sheet-spellblock-row">
									<label data-i18n="spell_rarity-u">Rarity</label>
									<input type="text" name="attr_spell_rarity_mdr" placeholder="C" />
								</div>

								<!-- Description -->
								<div class="sheet-spellblock-row full-width">
									<label data-i18n="spell_description-u">Description</label>
									<textarea name="attr_spell_description_mdr" class="sheet-spell-textarea" placeholder="Spell description..."></textarea>
								</div>
							</div>
						</div>
					</fieldset>
				</div>
			</div>
		</div>

		<!-- ------------------------- Gear and Possessions ------------------------- -->
		<div class="sheet-tab-content sheet-inventory">
		<input type="checkbox" style="display:none" class="sheet-hide" name="attr_sheet-hide" />
			<div class="sheet-2colrow">
				<!-- Gear & Possessions Column -->
				<div class="sheet-col">
					<h4 class="section-head" data-i18n="gearandpossessions-u">Gear and Possessions</h4>
					<div class="sheet-section sheet-gear-flex">
						<textarea name="attr_gear_and_posessions" class="sheet-gear-textarea"></textarea>
						<textarea name="attr_gear_and_posessions1" class="sheet-gear-textarea"></textarea>
					</div>
				</div>
				<!-- Cash & Assets Column -->
				<div class="sheet-col">
					<h4 class="section-head" data-i18n="cashandassets-u">Cash and Assets</h4>
					<div class="sheet-section sheet-cash-grid">
						<div class="sheet-cash-row">
							<div class="sheet-cash-label" data-i18n="spendinglevel-u">Spending Level</div>
							<input type="text" name="attr_spending_level" class="sheet-wide-input" />
						</div>
						<div class="sheet-cash-row">
							<div class="sheet-cash-label" data-i18n="cash-u">Cash</div>
							<input type="text" name="attr_cash" class="sheet-wide-input" />
						</div>
						<div class="sheet-cash-row">
							<div class="sheet-cash-label" data-i18n="assets-u">Assets</div>
							<textarea name="attr_assets" class="sheet-gear-textarea"></textarea>
						</div>
					</div>
				</div>
			</div>
			<div class="sheet-colrow">
				<h4 class="section-head" data-i18n="items-appl-u">Items w/Applications</h4>
				<div class="section">
					<div class="sheet-inventory-item-appl-header">
						<div class="flex-row">
							<div class="flex-cell item-appl-name"><span data-i18n="item_name-u">Item Name</span></div>
							<div class="flex-cell item-appl-qty"><span data-i18n="quantity-u">Qty</span></div>
							<div class="flex-cell item-appl-uses"><span data-i18n="uses-u">Uses</span></div>
							<div class="flex-cell item-appl-used"><span data-i18n="used-u"># Used</span></div>
							<div class="flex-cell item-appl-uses-scene"><span data-i18n="uses_scene-u">Uses/Scene</span></div>
							<div class="flex-cell item-appl-used-scene"><span data-i18n="used_scene-u"># Used Scene</span></div>
							<div class="flex-cell item-appl-uses-session"><span data-i18n="uses_session-u">Uses/Session</span></div>
							<div class="flex-cell item-appl-used-session"><span data-i18n="used_session-u"># Used Session</span></div>
							<div class="flex-cell item-appl-description"><span data-i18n="short_description-u">Short Description</span></div>
						</div>
					</div>
					<fieldset class="repeating_inventory-item-appl">
						<div class="sheet-inventory-item-appl">
							<div class="flex-row">
								<input class="flex-cell item-appl-name" type="text" name="attr_item_name" placeholder="Item Name" />
								<input class="flex-cell item-appl-qty" type="number" name="attr_item_quantity" placeholder="0" />
								<input class="flex-cell item-appl-uses" type="number" name="attr_item_uses" placeholder="0" />
								<input class="flex-cell item-appl-used" type="number" name="attr_item_used" placeholder="0" />
								<input class="flex-cell item-appl-uses-scene" type="number" name="attr_item_uses_scene" placeholder="0" />
								<input class="flex-cell item-appl-used-scene" type="number" name="attr_item_used_scene" placeholder="0" />
								<input class="flex-cell item-appl-uses-session" type="number" name="attr_item_uses_session" placeholder="0" />
								<input class="flex-cell item-appl-used-session" type="number" name="attr_item_used_session" placeholder="0" />
								<input class="flex-cell item-appl-description" type="text" name="attr_item_description" placeholder="Short Description" />
							</div>
						</div>
					</fieldset>
				</div>
			</div>
			<div class="sheet-colrow">
				<h4 class="section-head" data-i18n="items-u">Items</h4>
				<div class="section">
					<div class="sheet-inventory-item-header">
						<div class="flex-row">
							<div class="flex-cell item-name"><span data-i18n="item_name-u">Item Name</span></div>
							<div class="flex-cell item-qty"><span data-i18n="item_quantity-u">Qty</span></div>
							<div class="flex-cell item-description"><span data-i18n="item_short_description-u">Short Description</span></div>
							<div class="flex-cell item-properties"><span data-i18n="item_properties-u">Properties</span></div>
						</div>
					</div>
					<fieldset class="repeating_inventory-item">
						<div class="sheet-inventory-item">
							<div class="flex-row">
								<input class="flex-cell item-name" type="text" name="attr_item_name" placeholder="Item Name" />
								<input class="flex-cell item-qty" type="number" name="attr_item_quantity" placeholder="0" />
								<input class="flex-cell item-description" type="text" name="attr_item_description" placeholder="Short Description" />
								<input class="flex-cell item-properties" type="text" name="attr_item_properties" placeholder="Properties" />
							</div>
						</div>
					</fieldset>
				</div>
			</div>
			<div class="sheet-colrow sheet-tech">
				<h4 class="section-head" data-i18n="techcyber-u">Tech/Cyber</h4>
				<div class="section">

					<fieldset class="repeating_ct">
						<!-- Sibling checkbox that drives CSS but is visually hidden -->
						<input type="hidden" name="attr_show_ct_mod1_proxy" value="0" />
						<input type="hidden" name="attr_show_ct_mod2_proxy" value="0" />
						<input type="hidden" name="attr_show_ct_mod3_proxy" value="0" />
						<input type="hidden" name="attr_show_ct_mod4_proxy" value="0" />
						<input type="hidden" name="attr_show_ct_mod5_proxy" value="0" />
						<input type="hidden" name="attr_show_ct_mod6_proxy" value="0" />
						<input type="hidden" name="attr_show_ct_mod7_proxy" value="0" />
						<input type="hidden" name="attr_show_ct_mod8_proxy" value="0" />

						<!-- CT Core Info -->
						<div class="ct-header-row">
							<div class="flex-row">
								<div class="flex-cell ct-name"><span data-i18n="ct_name-u">CT Name</span></div>
								<div class="flex-cell ct-vitality"><span data-i18n="ct_vitality-u">Vitality</span></div>
								<div class="flex-cell ct-level"><span data-i18n="ct_level-u">Level</span></div>
								<div class="flex-cell ct-capacity"><span data-i18n="ct_capacity-u">Capacity</span></div>
								<div class="flex-cell ct-description"><span data-i18n="ct_description-u">Description</span></div>
							</div>
						</div>

						<div class="ct-row">
							<div class="flex-row" >
								<input class="flex-cell ct-name" type="text" name="attr_ct_name" placeholder="CT Name" />
								<input class="flex-cell ct-vitality" type="number" name="attr_ct_vitality" placeholder="Vitality" />
								<input class="flex-cell ct-level" type="number" name="attr_ct_level" placeholder="Level" />
								<input class="flex-cell ct-capacity" type="number" name="attr_ct_capacity" placeholder="Capacity" />
								<input class="flex-cell ct-description" type="text" name="attr_ct_description" placeholder="Description" />
							</div>
						</div>

						<div class="ct-effect-row">
							<textarea class="flex-cell ct-effect" name="attr_ct_effect" placeholder="CT Effect"></textarea>
						</div>

						<div class="ct-mod-checkbox-row">
							<div class="flex-row">
								<input class="flex-cell ct-mod-checkbox" type="checkbox" name="attr_show_ct_mod1" value="1" />
								<label class="flex-cell ct-mod-checkbox-label">Show Mod 1</label>
							</div>
						</div>

						<div class="ct-mod-header-row">
							<div class="flex-row">
								<div class="flex-cell ct-mod-name"><span data-i18n="ct_mod_name-u">Mod Name</span></div>
								<div class="flex-cell ct-mod-capreq"><span data-i18n="ct_mod_capreq-u">Cap. Req.</span></div>
								<div class="flex-cell ct-mod-requirements"><span data-i18n="ct_mod_requirements-u">Requirements</span></div>
							</div>
						</div>

						<!-- CT Mod 1 -->
						<div class="ct-mod-wrapper1" >
							<div class="ct-mod">
									<div class="flex-row">
										<input class="flex-cell ct-mod-name" type="text" name="attr_ct_mod1_name" placeholder="Mod Name" />
										<input class="flex-cell ct-mod-capreq" type="number" name="attr_ct_mod1_capacity" placeholder="Capacity Req." />
										<input class="flex-cell ct-mod-requirements" type="text" name="attr_ct_mod1_requirements" placeholder="Requirements" />
								</div>
							</div>

							<div class="ct-mod-row">
									<textarea class="flex-cell ct-mod-effect" name="attr_ct_mod1_effect" placeholder="Mod Effect"></textarea>
							</div>

							<div class="ct-mod-checkbox-row">
								<div class="flex-row">
									<input class="flex-cell ct-mod-checkbox" type="checkbox" name="attr_show_ct_mod2" value="1" />
									<label class="flex-cell ct-mod-checkbox-label">Show Mod 2</label>
								</div>
							</div>
						</div>

						<!-- CT Mod 2 -->
						<div class="ct-mod-wrapper2">
							<div class="ct-mod">
								<div class="ct-mod-2">
									<div class="flex-row">
										<input class="flex-cell ct-mod-name" type="text" name="attr_ct_mod2_name" placeholder="Mod Name" />
										<input class="flex-cell ct-mod-capreq" type="number" name="attr_ct_mod2_capacity" placeholder="Capacity Req." />
										<input class="flex-cell ct-mod-requirements" type="text" name="attr_ct_mod2_requirements" placeholder="Requirements" />
									</div>
								</div>
							</div>

							<div class="ct-mod-row">
								<textarea class="flex-cell ct-mod-effect" name="attr_ct_mod2_effect" placeholder="Mod Effect"></textarea>
							</div>

							<div class="ct-mod-checkbox-row">
								<div class="flex-row">
									<input class="flex-cell ct-mod-checkbox" type="checkbox" name="attr_show_ct_mod3" value="1" />
									<label class="flex-cell ct-mod-checkbox-label">Show Mod 3</label>
								</div>
							</div>
						</div>

						<!-- CT Mod 3 -->
						<div class="ct-mod-wrapper3">
							<div class="ct-mod">
								<div class="ct-mod-3">
									<div class="flex-row">
										<input class="flex-cell ct-mod-name" type="text" name="attr_ct_mod3_name" placeholder="Mod Name" />
										<input class="flex-cell ct-mod-capreq" type="number" name="attr_ct_mod3_capacity" placeholder="Capacity Req." />
										<input class="flex-cell ct-mod-requirements" type="text" name="attr_ct_mod3_requirements" placeholder="Requirements" />
									</div>
								</div>
							</div>

							<div class="ct-mod-row">
								<textarea class="flex-cell ct-mod-effect" name="attr_ct_mod3_effect" placeholder="Mod Effect"></textarea>
							</div>

							<div class="ct-mod-checkbox-row">
								<div class="flex-row">
									<input class="flex-cell ct-mod-checkbox" type="checkbox" name="attr_show_ct_mod4" value="1" />
									<label class="flex-cell ct-mod-checkbox-label">Show Mod 4</label>
								</div>
							</div>
						</div>

						<!-- CT Mod 4 -->
						<div class="ct-mod-wrapper4">
							<div class="ct-mod">
								<div class="ct-mod-4">
									<div class="flex-row">
										<input class="flex-cell ct-mod-name" type="text" name="attr_ct_mod4_name" placeholder="Mod Name" />
										<input class="flex-cell ct-mod-capreq" type="number" name="attr_ct_mod4_capacity" placeholder="Capacity Req." />
										<input class="flex-cell ct-mod-requirements" type="text" name="attr_ct_mod4_requirements" placeholder="Requirements" />
									</div>
								</div>
							</div>

							<div class="ct-mod-row">
								<textarea class="flex-cell ct-mod-effect" name="attr_ct_mod4_effect" placeholder="Mod Effect"></textarea>
							</div>

							<div class="ct-mod-checkbox-row">
								<div class="flex-row">
									<input class="flex-cell ct-mod-checkbox" type="checkbox" name="attr_show_ct_mod5" value="1" />
									<label class="flex-cell ct-mod-checkbox-label">Show Mod 5</label>
								</div>
							</div>
						</div>

						<!-- CT Mod 5 -->
						<div class="ct-mod-wrapper5">
							<div class="ct-mod">
								<div class="ct-mod-5">
									<div class="flex-row">
										<input class="flex-cell ct-mod-name" type="text" name="attr_ct_mod5_name" placeholder="Mod Name" />
										<input class="flex-cell ct-mod-capreq" type="number" name="attr_ct_mod5_capacity" placeholder="Capacity Req." />
										<input class="flex-cell ct-mod-requirements" type="text" name="attr_ct_mod5_requirements" placeholder="Requirements" />
									</div>
								</div>
							</div>

							<div class="ct-mod-row">
								<textarea class="flex-cell ct-mod-effect" name="attr_ct_mod5_effect" placeholder="Mod Effect"></textarea>
							</div>

							<div class="ct-mod-checkbox-row">
								<div class="flex-row">
									<input class="flex-cell ct-mod-checkbox" type="checkbox" name="attr_show_ct_mod6" value="1" />
									<label class="flex-cell ct-mod-checkbox-label">Show Mod 6</label>
								</div>
							</div>
						</div>

						<!-- CT Mod 6 -->
						<div class="ct-mod-wrapper6">
							<div class="ct-mod">
								<div class="ct-mod-6">
									<div class="flex-row">
										<input class="flex-cell ct-mod-name" type="text" name="attr_ct_mod6_name" placeholder="Mod Name" />
										<input class="flex-cell ct-mod-capreq" type="number" name="attr_ct_mod6_capacity" placeholder="Capacity Req." />
										<input class="flex-cell ct-mod-requirements" type="text" name="attr_ct_mod6_requirements" placeholder="Requirements" />
									</div>
								</div>
							</div>

							<div class="ct-mod-row">
								<textarea class="flex-cell ct-mod-effect" name="attr_ct_mod6_effect" placeholder="Mod Effect"></textarea>
							</div>

							<div class="ct-mod-checkbox-row">
								<div class="flex-row">
									<input class="flex-cell ct-mod-checkbox" type="checkbox" name="attr_show_ct_mod7" value="1" />
									<label class="flex-cell ct-mod-checkbox-label">Show Mod 7</label>
								</div>
							</div>
						</div>

						<!-- CT Mod 7 -->
						<div class="ct-mod-wrapper7">
							<div class="ct-mod">
								<div class="ct-mod-7">
									<div class="flex-row">
										<input class="flex-cell ct-mod-name" type="text" name="attr_ct_mod7_name" placeholder="Mod Name" />
										<input class="flex-cell ct-mod-capreq" type="number" name="attr_ct_mod7_capacity" placeholder="Capacity Req." />
										<input class="flex-cell ct-mod-requirements" type="text" name="attr_ct_mod7_requirements" placeholder="Requirements" />
									</div>
								</div>
							</div>

							<div class="ct-mod-row">
								<textarea class="flex-cell ct-mod-effect" name="attr_ct_mod7_effect" placeholder="Mod Effect"></textarea>
							</div>

							<div class="ct-mod-checkbox-row">
								<div class="flex-row">
									<input class="flex-cell ct-mod-checkbox" type="checkbox" name="attr_show_ct_mod8" value="1" />
									<label class="flex-cell ct-mod-checkbox-label">Show Mod 8</label>
								</div>
							</div>
						</div>

						<!-- CT Mod 8 -->
						<div class="ct-mod-wrapper8">
							<div class="ct-mod">
								<div class="ct-mod-8">
									<div class="flex-row">
										<input class="flex-cell ct-mod-name" type="text" name="attr_ct_mod8_name" placeholder="Mod Name" />
										<input class="flex-cell ct-mod-capreq" type="number" name="attr_ct_mod8_capacity" placeholder="Capacity Req." />
										<input class="flex-cell ct-mod-requirements" type="text" name="attr_ct_mod8_requirements" placeholder="Requirements" />
									</div>
								</div>
							</div>

							<div class="ct-mod-row">
								<textarea class="flex-cell ct-mod-effect" name="attr_ct_mod8_effect" placeholder="Mod Effect"></textarea>
							</div>

							<div class="ct-mod-checkbox-row">
								<div class="flex-row">
								</div>
							</div>
						</div>
					</fieldset>
				</div>
			</div>
		</div>

		<!-- ------------------------- Backstory ------------------------- -->
		<div class="sheet-tab-content sheet-backstory">
			<h4 class="section-head" data-i18n="backstory-u">Backstory</h4>
				<div class="sheet-section sheet-backstory-grid">
					<!-- Column 1 -->
					<div class="sheet-backstory-col">
					<div class="sheet-backstory-label" data-i18n="Personal Description">Personal Description</div>
					<textarea name="attr_personal_description" class="sheet-backstory-textarea"></textarea>
					<div class="sheet-backstory-label" data-i18n="Ideology/Beliefs">Ideology/Beliefs</div>
					<textarea name="attr_ideaology_beliefs" class="sheet-backstory-textarea"></textarea>
					<div class="sheet-backstory-label" data-i18n="Significant People">Significant People</div>
					<textarea name="attr_significant_people" class="sheet-backstory-textarea"></textarea>
					<div class="sheet-backstory-label" data-i18n="Meaningful Locations">Meaningful Locations</div>
					<textarea name="attr_meaningful_locations" class="sheet-backstory-textarea"></textarea>
					<div class="sheet-backstory-label" data-i18n="Treasured Possessions">Treasured Possessions</div>
					<textarea name="attr_treasured_posessions" class="sheet-backstory-textarea"></textarea>
				</div>
				<!-- Column 2 -->
				<div class="sheet-backstory-col">
					<div class="sheet-backstory-label" data-i18n="Traits">Traits</div>
					<textarea name="attr_traits" class="sheet-backstory-textarea"></textarea>
					<div class="sheet-backstory-label" data-i18n="Injuries & Scars">Injuries & Scars</div>
					<textarea name="attr_injuries_scars" class="sheet-backstory-textarea"></textarea>
					<div class="sheet-backstory-label" data-i18n="Phobias/Manias">Phobias/Manias</div>
					<textarea name="attr_phobias_manias" class="sheet-backstory-textarea"></textarea>
					<div class="sheet-backstory-label" data-i18n="Tomes, Spells and Artifacts">Tomes, Spells and Artifacts</div>
					<textarea name="attr_tomes_spells_artifacts" class="sheet-backstory-textarea"></textarea>
					<div class="sheet-backstory-label" data-i18n="Encounters with Strange Entities-z">Encounters with Strange Entities</div>
					<textarea name="attr_encounters_with_strange_entities" class="sheet-backstory-textarea"></textarea>
				</div>
			</div>
		</div>

		<!-- ------------------------- Ledger ------------------------- -->
		<div class="sheet-tab-content sheet-ledger">
			<h4 class="section-head" data-i18n="character_ledger-u">Character Ledger</h4>
			<div class="sheet-section">
				<div class="sheet-character-lock">
					<label>Character Creation Done - Lock</label>
					<input class="sheet-attr-input-small sheet-skill-base" type="checkbox" name="attr_char_creation_lock" value="1" />
				</div>
			</div>
			
			<div class="sheet-section">
				<h4 class="section-head" data-i18n="skill_point_tracker-u">Skill Point Tracker</h4>
				<div class="sheet-ledger-skill-points">
					<div class="sheet-ledger-row">
						<label>Career Skill Points</label>
						<input class="sheet-attr-input-small sheet-skill-base" type="text" name="attr_primary_career_skill_points" />
					</div>
					<div class="sheet-ledger-row">
						<label>Sec. Career Skill -> XP</label>
						<input class="sheet-attr-input-small sheet-skill-cost sheet-readonly" type="text" name="attr_xpledger_skill_point_lost" />
					</div>
					<div class="sheet-ledger-row">
						<label>Personal Skill Points</label>
						<input class="sheet-attr-input-small sheet-readonly" type="text" name="attr_personal_skill_points" />
					</div>
					<div class="sheet-ledger-row">
						<label>Skill Points Spent</label>
						<input class="sheet-attr-input-small sheet-skill-cost sheet-readonly" type="text" name="attr_total_skill_points_spent" />
					</div>
					<div class="sheet-ledger-row">
						<label>XP->Skill Points Total</label>
						<input class="sheet-attr-input-small sheet-skill-gain sheet-readonly" type="text" name="attr_xpledger_skill_point_gain" />
					</div>
					<div class="sheet-ledger-row">
						<label>XP->Skill Points (Roll) Total</label>
						<input class="sheet-attr-input-small sheet-skill-gain sheet-readonly" type="text" name="attr_xpledger_skill_point_roll_gain_skill" />
					</div>
					<div class="sheet-ledger-row">
						<label>Perk -> Linguist</label>
						<input class="sheet-attr-input-small sheet-skill-gain sheet-readonly" type="text" name="attr_perk_linguist" />
					</div>						
					<div class="sheet-ledger-row">
						<label>Skill Points Remaining</label>
						<input class="sheet-attr-input-small sheet-skill-remain sheet-readonly" type="text" name="attr_total_skill_points_remain" />
					</div>
				</div>
			</div>

			<!-- XP Tracker -->
			<div class="sheet-section">
				<h4 class="section-head" data-i18n="xp_point_tracker-u">XP Point Tracker</h4>
				<div class="sheet-ledger-xp">
					<div class="sheet-ledger-row">
						<label>Background XP Start</label>
						<input class="sheet-attr-input-small sheet-xp-base sheet-readonly" type="text" name="attr_background_xp" value=0 />
					</div>
					<div class="sheet-ledger-row">
						<label>XP Gained Total</label>
						<input class="sheet-attr-input-small sheet-xp-gain sheet-readonly" type="text" name="attr_xpledger_gained_xp" />
					</div>
					<div class="sheet-ledger-row">
						<label>Racial Talent XP Spent</label>
						<input class="sheet-attr-input-small sheet-xp-cost sheet-readonly" type="text" name="attr_xp_spent_talent" />
					</div>
					<div class="sheet-ledger-row">
						<label>Career Talent XP Spent</label>
						<input class="sheet-attr-input-small sheet-xp-cost sheet-readonly" type="text" name="attr_xp_spent_career_talent" />
					</div>
					<div class="sheet-ledger-row">
						<label>XP -> Spells Total</label>
						<input class="sheet-attr-input-small sheet-xp-cost sheet-readonly" type="text" name="attr_xpledger_spells_cost" />
					</div>
					<div class="sheet-ledger-row">
						<label>XP -> Skill Points Total</label>
						<input class="sheet-attr-input-small sheet-xp-cost sheet-readonly" type="text" name="attr_xpledger_skill_point_gain" />
					</div>
					<div class="sheet-ledger-row">
						<label>XP -> Skill Points (Roll) Total</label>
						<input class="sheet-attr-input-small sheet-xp-cost sheet-readonly" type="text" name="attr_xpledger_skill_point_roll_gain" />
					</div>		
				</div>
				<div class="sheet-ledger-xp">
					<div class="sheet-ledger-row">
						<label>XP -> Credits Total</label>
						<input class="sheet-attr-input-small sheet-xp-cost sheet-readonly" type="text" name="attr_xpledger_credits_cost" />
					</div>				
					<div class="sheet-ledger-row">
						<label>XP -> Allies Total</label>
						<input class="sheet-attr-input-small sheet-xp-cost sheet-readonly" type="text" name="attr_xpledger_allies_cost" />
					</div>
					<div class="sheet-ledger-row">
						<label>XP -> Contacts Total</label>
						<input class="sheet-attr-input-small sheet-xp-cost sheet-readonly" type="text" name="attr_xpledger_contacts_cost" />
					</div>	
					<div class="sheet-ledger-row">
						<label>XP -> Rep. Total</label>
						<input class="sheet-attr-input-small sheet-xp-cost sheet-readonly" type="text" name="attr_xpledger_reuptation_cost" />
					</div>
					<div class="sheet-ledger-row">
						<label>XP -> Factions Total</label>
						<input class="sheet-attr-input-small sheet-xp-cost sheet-readonly" type="text" name="attr_xpledger_faction_cost" />
					</div>
					<div class="sheet-ledger-row">
						<label>XP -> Flaws Total</label>
						<input class="sheet-attr-input-small sheet-xp-gain sheet-readonly" type="text" name="attr_xpledger_flaws_gain" />
					</div>
					<div class="sheet-ledger-row">
						<label>XP -> Perks Total</label>
						<input class="sheet-attr-input-small sheet-xp-cost sheet-readonly" type="text" name="attr_xpledger_perks_cost" />
					</div>
					<div class="sheet-ledger-row">
						<label>XP Pool Remaining</label>
						<input class="sheet-attr-input-small sheet-xp-remain sheet-readonly" type="text" name="attr_xp_remaining" />
					</div>
				</div>
			</div>

			<!-- Ledger Repeating -->
			<div class="sheet-section">
				<h4 class="section-head" data-i18n="ledger-u">Ledger</h4>
				<div class="sheet-ledger-header">
					<div class="sheet-repeating-ledger-row">
						<div class="flex-cell ledger-choice"><span>Ledger Choice</span></div>
						<div class="flex-cell ledger-value-header">Value</div>
						<div class="flex-cell ledger-value-header">SP</div>
						<div class="flex-cell ledger-description"><span>Ledger Description</span></div>
					</div>
				</div>
				<fieldset class="repeating_ledger">
					<div class="sheet-repeating-ledger-row">
						<div class="flex-cell ledger-choice">
							<select class="sheet-selection-full" name="attr_ledger_choice">
								<option value="0" selected>-- Choose XP Option --</option>
								<option value="xp_gained">XP Gained</option>
								<option value="skill_xp">Car. Sec. Skill -> XP</option>
								<option value="xp_skill">XP -> Skill</option>
								<option value="xp_skill_roll">XP -> Skill (Roll)</option>
								<option value="xp_spells">XP -> Spells</option>
								<option value="xp_credits">XP -> Credits</option>
								<option value="xp_allies">XP -> Allies</option>
								<option value="xp_contacts">XP -> Contacts</option>
								<option value="xp_reputation">XP -> Reputation</option>
								<option value="xp_faction">XP -> Faction</option>
								<option value="xp_flaws">XP -> Flaws</option>
								<option value="xp_perks">XP -> Perks</option>
								<option value="perk_linguist">Perk -> Linguist</option>
							</select>
						</div>
						<div class="flex-cell ledger-value">
							<input class="sheet-attr-input-small" type="text" name="attr_ledger_choice_value" />
						</div>
						<div class="flex-cell ledger-value">
							<input class="sheet-attr-input-small" type="text" name="attr_ledger_choice_value_skill" />
						</div>
						<div class="flex-cell ledger-description">
							<input class="sheet-attr-input-wide" type="text" name="attr_ledger_choice_description" />
						</div>
					</div>
				</fieldset>
			</div>
		</div>

		<!-- ------------------------- Tracker ------------------------- -->
		<div class="sheet-tab-content sheet-tracker">
		
			<div class="sheet-tracker-section">
			
				<h4>Scene-Limited</h4>
				<div class="sheet-tracker-column">
					<button type="action" name="act_clear_scene_uses" class="sheet-tab-buttons">Clear Scene</button>

					<!-- Racial Talent Scene Start -->
					
                    <!-- Racial Talent: Identity Cascade (scene) -->
                    <input type="hidden" name="attr_show_alteri_identity_cascade" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-alteri-identity-cascade">
                        <input type="checkbox" name="attr_used_scene_alteri_identity_cascade" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_identity_cascade_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Reflexive Shift (scene) -->
                    <input type="hidden" name="attr_show_alteri_reflexive_shift" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-alteri-reflexive-shift">
                        <input type="checkbox" name="attr_used_scene_alteri_reflexive_shift" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_reflexive_shift_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Shift Reflex (scene) -->
                    <input type="hidden" name="attr_show_alteri_shift_reflex" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-alteri-shift-reflex">
                        <input type="checkbox" name="attr_used_scene_alteri_shift_reflex" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_shift_reflex_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Instinctive Counter (scene) -->
                    <input type="hidden" name="attr_show_draevi_instinctive_counter" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-draevi-instinctive-counter">
                        <input type="checkbox" name="attr_used_scene_draevi_instinctive_counter" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_instinctive_counter_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Silent Step, Sharp Ear (scene) -->
                    <input type="hidden" name="attr_show_draevi_silent_step_sharp_ear" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-draevi-silent-step-sharp-ear">
                        <input type="checkbox" name="attr_used_scene_draevi_silent_step_sharp_ear" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_silent_step_sharp_ear_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Trailborn Reflexes (scene) -->
                    <input type="hidden" name="attr_show_draevi_trailborn_reflexes" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-draevi-trailborn-reflexes">
                        <input type="checkbox" name="attr_used_scene_draevi_trailborn_reflexes" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_trailborn_reflexes_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Spontaneous Strategist (scene) -->
                    <input type="hidden" name="attr_show_human_spontaneous_strategist" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-human-spontaneous-strategist">
                        <input type="checkbox" name="attr_used_scene_human_spontaneous_strategist" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_spontaneous_strategist_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Glimmerstep (scene) -->
                    <input type="hidden" name="attr_show_lyranni_glimmerstep" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-lyranni-glimmerstep">
                        <input type="checkbox" name="attr_used_scene_lyranni_glimmerstep" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_glimmerstep_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Illuminated Touch (scene) -->
                    <input type="hidden" name="attr_show_lyranni_illuminated_touch" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-lyranni-illuminated-touch">
                        <input type="checkbox" name="attr_used_scene_lyranni_illuminated_touch" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_illuminated_touch_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Resonant Poise (scene) -->
                    <input type="hidden" name="attr_show_lyranni_resonant_poise" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-lyranni-resonant-poise">
                        <input type="checkbox" name="attr_used_scene_lyranni_resonant_poise" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_resonant_poise_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Shadow Echo Step (scene) -->
                    <input type="hidden" name="attr_show_lyranni_shadow_echo_step" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-lyranni-shadow-echo-step">
                        <input type="checkbox" name="attr_used_scene_lyranni_shadow_echo_step" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_shadow_echo_step_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: True Veilsight (scene) -->
                    <input type="hidden" name="attr_show_lyranni_true_veilsight" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-lyranni-true-veilsight">
                        <input type="checkbox" name="attr_used_scene_lyranni_true_veilsight" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_true_veilsight_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Veil-Laced Command (scene) -->
                    <input type="hidden" name="attr_show_lyranni_veil_laced_command" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-lyranni-veil-laced-command">
                        <input type="checkbox" name="attr_used_scene_lyranni_veil_laced_command" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_veil_laced_command_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Veilsight (scene) -->
                    <input type="hidden" name="attr_show_lyranni_veilsight" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-lyranni-veilsight">
                        <input type="checkbox" name="attr_used_scene_lyranni_veilsight" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_veilsight_label"></span>
                        </span>
                    </div>
					<!-- Racial Talent Scene End -->
					
					<!-- Career Talent Scene Start -->
					
                    <!-- Career Talent: Signal Sync (scene) -->
                    <input type="hidden" name="attr_show_codeweaver_signal_sync" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-codeweaver-signal-sync">
                        <input type="checkbox" name="attr_used_scene_codeweaver_signal_sync" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_signal_sync_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Veil Thread Tap (scene) -->
                    <input type="hidden" name="attr_show_codeweaver_veil_thread_tap" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-codeweaver-veil-thread-tap">
                        <input type="checkbox" name="attr_used_scene_codeweaver_veil_thread_tap" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_veil_thread_tap_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Hardlight Override (scene) -->
                    <input type="hidden" name="attr_show_codeweaver_hardlight_override" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-codeweaver-hardlight-override">
                        <input type="checkbox" name="attr_used_scene_codeweaver_hardlight_override" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_hardlight_override_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Recursive Pulse (scene) -->
                    <input type="hidden" name="attr_show_codeweaver_recursive_pulse" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-codeweaver-recursive-pulse">
                        <input type="checkbox" name="attr_used_scene_codeweaver_recursive_pulse" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_recursive_pulse_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Code Injection (scene) -->
                    <input type="hidden" name="attr_show_codeweaver_code_injection" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-codeweaver-code-injection">
                        <input type="checkbox" name="attr_used_scene_codeweaver_code_injection" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_code_injection_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Arc-Thread Override (scene) -->
                    <input type="hidden" name="attr_show_codeweaver_arc_thread_override" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-codeweaver-arc-thread-override">
                        <input type="checkbox" name="attr_used_scene_codeweaver_arc_thread_override" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_arc_thread_override_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Synthetic Harmony (scene) -->
                    <input type="hidden" name="attr_show_codeweaver_synthetic_harmony" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-codeweaver-synthetic-harmony">
                        <input type="checkbox" name="attr_used_scene_codeweaver_synthetic_harmony" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_synthetic_harmony_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Command Injection (scene) -->
                    <input type="hidden" name="attr_show_codeweaver_command_injection" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-codeweaver-command-injection">
                        <input type="checkbox" name="attr_used_scene_codeweaver_command_injection" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_command_injection_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Backdoor Ritual (scene) -->
                    <input type="hidden" name="attr_show_codeweaver_backdoor_ritual" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-codeweaver-backdoor-ritual">
                        <input type="checkbox" name="attr_used_scene_codeweaver_backdoor_ritual" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_backdoor_ritual_label"></span>
                        </span>
                    </div>
					
                    <!-- Career Talent: Field Stabilizer (scene) -->
                    <input type="hidden" name="attr_show_combat_medic_field_stabilizer" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-combat_medic-field-stabilizer">
                        <input type="checkbox" name="attr_used_scene_combat_medic_field_stabilizer" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_field_stabilizer_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Pain Doesn’t Matter (scene) -->
                    <input type="hidden" name="attr_show_combat_medic_pain_doesnt_matter" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-combat_medic-pain-doesnt-matter">
                        <input type="checkbox" name="attr_used_scene_combat_medic_pain_doesnt_matter" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_pain_doesnt_matter_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Trauma Team Reflexes (scene) -->
                    <input type="hidden" name="attr_show_combat_medic_trauma_team_reflexes" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-combat_medic-trauma-team-reflexes">
                        <input type="checkbox" name="attr_used_scene_combat_medic_trauma_team_reflexes" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_trauma_team_reflexes_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Injector Harness (scene) -->
                    <input type="hidden" name="attr_show_combat_medic_injector_harness" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-combat_medic-injector-harness">
                        <input type="checkbox" name="attr_used_scene_combat_medic_injector_harness" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_injector_harness_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Vital Scan Overlay (scene) -->
                    <input type="hidden" name="attr_show_combat_medic_vital_scan_overlay" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-combat_medic-vital-scan-overlay">
                        <input type="checkbox" name="attr_used_scene_combat_medic_vital_scan_overlay" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_vital_scan_overlay_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Stay With Me! (scene) -->
                    <input type="hidden" name="attr_show_combat_medic_stay_with_me" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-combat_medic-stay-with-me">
                        <input type="checkbox" name="attr_used_scene_combat_medic_stay_with_me" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_stay_with_me_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Medical Override (scene) -->
                    <input type="hidden" name="attr_show_combat_medic_medical_override" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-combat_medic-medical-override">
                        <input type="checkbox" name="attr_used_scene_combat_medic_medical_override" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_medical_override_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Quickdraw Injector (scene) -->
                    <input type="hidden" name="attr_show_combat_medic_quickdraw_injector" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-combat_medic-quickdraw-injector">
                        <input type="checkbox" name="attr_used_scene_combat_medic_quickdraw_injector" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_quickdraw_injector_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Reactive Trauma Surge (scene) -->
                    <input type="hidden" name="attr_show_combat_medic_reactive_trauma_surge" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-combat_medic-reactive-trauma-surge">
                        <input type="checkbox" name="attr_used_scene_combat_medic_reactive_trauma_surge" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_reactive_trauma_surge_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Suggestive Echo (scene) -->
                    <input type="hidden" name="attr_show_mindbender_suggestive_echo" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-mindbender-suggestive-echo">
                        <input type="checkbox" name="attr_used_scene_mindbender_suggestive_echo" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_suggestive_echo_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Thread of Doubt (scene) -->
                    <input type="hidden" name="attr_show_mindbender_thread_of_doubt" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-mindbender-thread-of-doubt">
                        <input type="checkbox" name="attr_used_scene_mindbender_thread_of_doubt" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_thread_of_doubt_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Veil of Intent (scene) -->
                    <input type="hidden" name="attr_show_mindbender_veil_of_intent" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-mindbender-veil-of-intent">
                        <input type="checkbox" name="attr_used_scene_mindbender_veil_of_intent" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_veil_of_intent_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Mental Static (scene) -->
                    <input type="hidden" name="attr_show_mindbender_mental_static" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-mindbender-mental-static">
                        <input type="checkbox" name="attr_used_scene_mindbender_mental_static" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_mental_static_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Cognitive Rewire (scene) -->
                    <input type="hidden" name="attr_show_mindbender_cognitive_rewire" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-mindbender-cognitive-rewire">
                        <input type="checkbox" name="attr_used_scene_mindbender_cognitive_rewire" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_cognitive_rewire_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Prey on Instinct (scene) -->
                    <input type="hidden" name="attr_show_mindbender_prey_on_instinct" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-mindbender-prey-on-instinct">
                        <input type="checkbox" name="attr_used_scene_mindbender_prey_on_instinct" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_prey_on_instinct_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Synaptic Lag (scene) -->
                    <input type="hidden" name="attr_show_mindbender_synaptic_lag" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-mindbender-synaptic-lag">
                        <input type="checkbox" name="attr_used_scene_mindbender_synaptic_lag" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_synaptic_lag_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Cognitive Fortress (scene) -->
                    <input type="hidden" name="attr_show_mindbender_cognitive_fortress" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-mindbender-cognitive-fortress">
                        <input type="checkbox" name="attr_used_scene_mindbender_cognitive_fortress" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_cognitive_fortress_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Runesight (scene) -->
                    <input type="hidden" name="attr_show_sigilbound_runesight" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-sigilbound-runesight">
                        <input type="checkbox" name="attr_used_scene_sigilbound_runesight" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_sigilbound_runesight_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Arcane Lock (scene) -->
                    <input type="hidden" name="attr_show_sigilbound_arcane_lock" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-sigilbound-arcane-lock">
                        <input type="checkbox" name="attr_used_scene_sigilbound_arcane_lock" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_sigilbound_arcane_lock_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Reflective Ward (scene) -->
                    <input type="hidden" name="attr_show_sigilbound_reflective_ward" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-sigilbound-reflective-ward">
                        <input type="checkbox" name="attr_used_scene_sigilbound_reflective_ward" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_sigilbound_reflective_ward_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Sigil of Anchoring (scene) -->
                    <input type="hidden" name="attr_show_sigilbound_sigil_of_anchoring" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-sigilbound-sigil-of-anchoring">
                        <input type="checkbox" name="attr_used_scene_sigilbound_sigil_of_anchoring" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_sigilbound_sigil_of_anchoring_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Warded Advance (scene) -->
                    <input type="hidden" name="attr_show_sigilbound_warded_advance" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-sigilbound-warded-advance">
                        <input type="checkbox" name="attr_used_scene_sigilbound_warded_advance" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_sigilbound_warded_advance_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Null Field (scene) -->
                    <input type="hidden" name="attr_show_sigilbound_null_field" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-sigilbound-null-field">
                        <input type="checkbox" name="attr_used_scene_sigilbound_null_field" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_sigilbound_null_field_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Sigil Pulse (scene) -->
                    <input type="hidden" name="attr_show_sigilbound_sigil_pulse" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-sigilbound-sigil-pulse">
                        <input type="checkbox" name="attr_used_scene_sigilbound_sigil_pulse" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_sigilbound_sigil_pulse_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Sigil Reservoir (scene) -->
                    <input type="hidden" name="attr_show_sigilbound_sigil_reservoir" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-sigilbound-sigil-reservoir">
                        <input type="checkbox" name="attr_used_scene_sigilbound_sigil_reservoir" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_sigilbound_sigil_reservoir_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Elemental Channeling (scene) -->
                    <input type="hidden" name="attr_show_stormweaver_elemental_channeling" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-stormweaver-elemental-channeling">
                        <input type="checkbox" name="attr_used_scene_stormweaver_elemental_channeling" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_stormweaver_elemental_channeling_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Veil-Shocked (scene) -->
                    <input type="hidden" name="attr_show_stormweaver_veil_shocked" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-stormweaver-veil-shocked">
                        <input type="checkbox" name="attr_used_scene_stormweaver_veil_shocked" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_stormweaver_veil_shocked_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Stormpulse Drive (scene) -->
                    <input type="hidden" name="attr_show_stormweaver_stormpulse_drive" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-stormweaver-stormpulse-drive">
                        <input type="checkbox" name="attr_used_scene_stormweaver_stormpulse_drive" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_stormweaver_stormpulse_drive_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Pulse Detonation (scene) -->
                    <input type="hidden" name="attr_show_stormweaver_pulse_detonation" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-stormweaver-pulse-detonation">
                        <input type="checkbox" name="attr_used_scene_stormweaver_pulse_detonation" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_stormweaver_pulse_detonation_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Reactive Veilwalk (scene) -->
                    <input type="hidden" name="attr_show_stormweaver_reactive_veilwalk" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-stormweaver-reactive-veilwalk">
                        <input type="checkbox" name="attr_used_scene_stormweaver_reactive_veilwalk" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_stormweaver_reactive_veilwalk_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Combat Rhythm (scene) -->
                    <input type="hidden" name="attr_show_street_ronin_combat_rhythm" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-street-ronin-combat-rhythm">
                        <input type="checkbox" name="attr_used_scene_street_ronin_combat_rhythm" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_combat_rhythm_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Disciplined Focus (scene) -->
                    <input type="hidden" name="attr_show_street_ronin_disciplined_focus" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-street-ronin-disciplined-focus">
                        <input type="checkbox" name="attr_used_scene_street_ronin_disciplined_focus" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_disciplined_focus_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Urban Footwork (scene) -->
                    <input type="hidden" name="attr_show_street_ronin_urban_footwork" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-street-ronin-urban-footwork">
                        <input type="checkbox" name="attr_used_scene_street_ronin_urban_footwork" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_urban_footwork_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Interception Cut (scene) -->
                    <input type="hidden" name="attr_show_street_ronin_interception_cut" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-street-ronin-interception-cut">
                        <input type="checkbox" name="attr_used_scene_street_ronin_interception_cut" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_interception_cut_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Posture Breaker (scene) -->
                    <input type="hidden" name="attr_show_street_ronin_posture_breaker" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-street-ronin-posture-breaker">
                        <input type="checkbox" name="attr_used_scene_street_ronin_posture_breaker" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_posture_breaker_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Counterguard Precision (scene) -->
                    <input type="hidden" name="attr_show_street_ronin_counterguard_precision" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-street-ronin-counterguard-precision">
                        <input type="checkbox" name="attr_used_scene_street_ronin_counterguard_precision" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_counterguard_precision_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Ghost Step (scene) -->
                    <input type="hidden" name="attr_show_street_ronin_ghost_step" />
                    <div class="sheet-tracker-item sheet-tracker-scene sheet-street-ronin-ghost-step">
                        <input type="checkbox" name="attr_used_scene_street_ronin_ghost_step" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_ghost_step_label"></span>
                        </span>
                    </div>
					
					<!-- Career Talent Scene End -->
					<fieldset class="repeating_scene">
						<div class="sheet-tracker-row">
							<!-- Used Checkbox -->
							<div class="sheet-tracker-scene scene-item-name-wrapper">
								<input type="checkbox" name="attr_used_scene_item_name_mdr" class="sheet-tracker-checkbox" />
								<input type="text" name="attr_scene_item_name_mdr" placeholder="Scene Item Name" />
							</div>
						</div>
					</fieldset>
				</div>

				<h4>Session-Limited</h4>
				<div class="sheet-tracker-column">
					<button type="action" name="act_clear_session_uses" class="sheet-tab-buttons">Clear Session</button>
					
					<!-- Racial Talent Session Start -->
                    <!-- Racial Talent: Echoed Voice (session) -->
                    <input type="hidden" name="attr_show_alteri_echoed_voice" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-echoed-voice">
                        <input type="checkbox" name="attr_used_session_alteri_echoed_voice" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_echoed_voice_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Ghost Protocol (session) -->
                    <input type="hidden" name="attr_show_alteri_ghost_protocol" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-ghost-protocol">
                        <input type="checkbox" name="attr_used_session_alteri_ghost_protocol" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_ghost_protocol_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Whisper-Touched (session) -->
                    <input type="hidden" name="attr_show_alteri_whisper_touched" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-whisper-touched">
                        <input type="checkbox" name="attr_used_session_alteri_whisper_touched" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_whisper_touched_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Grace of the Many (session) -->
                    <input type="hidden" name="attr_show_alteri_grace_of_the_many" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-grace-of-the-many">
                        <input type="checkbox" name="attr_used_session_alteri_grace_of_the_many" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_grace_of_the_many_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Facial Recalibration (session) -->
                    <input type="hidden" name="attr_show_alteri_facial_recalibration" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-facial-recalibration">
                        <input type="checkbox" name="attr_used_session_alteri_facial_recalibration" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_facial_recalibration_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Adaptive Memory (session) -->
                    <input type="hidden" name="attr_show_alteri_adaptive_memory" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-adaptive-memory">
                        <input type="checkbox" name="attr_used_session_alteri_adaptive_memory" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_adaptive_memory_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Ghost Signature (session) -->
                    <input type="hidden" name="attr_show_alteri_ghost_signature" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-ghost-signature">
                        <input type="checkbox" name="attr_used_session_alteri_ghost_signature" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_ghost_signature_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Mirror Weave (session) -->
                    <input type="hidden" name="attr_show_alteri_mirror_weave" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-mirror-weave">
                        <input type="checkbox" name="attr_used_session_alteri_mirror_weave" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_mirror_weave_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Veil Echo Memory (session) -->
                    <input type="hidden" name="attr_show_alteri_veil_echo_memory" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-veil-echo-memory">
                        <input type="checkbox" name="attr_used_session_alteri_veil_echo_memory" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_veil_echo_memory_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Silent Archive (session) -->
                    <input type="hidden" name="attr_show_alteri_silent_archive" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-silent-archive">
                        <input type="checkbox" name="attr_used_session_alteri_silent_archive" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_silent_archive_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Perfect Mimicry (session) -->
                    <input type="hidden" name="attr_show_alteri_perfect_mimicry" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-perfect-mimicry">
                        <input type="checkbox" name="attr_used_session_alteri_perfect_mimicry" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_perfect_mimicry_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Biometric Phantom (session) -->
                    <input type="hidden" name="attr_show_alteri_biometric_phantom" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-biometric-phantom">
                        <input type="checkbox" name="attr_used_session_alteri_biometric_phantom" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_biometric_phantom_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Memory Graft (session) -->
                    <input type="hidden" name="attr_show_alteri_memory_graft" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-memory-graft">
                        <input type="checkbox" name="attr_used_session_alteri_memory_graft" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_memory_graft_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Veil-Shaped Will (session) -->
                    <input type="hidden" name="attr_show_alteri_veil_shaped_will" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-veil-shaped-will">
                        <input type="checkbox" name="attr_used_session_alteri_veil_shaped_will" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_veil_shaped_will_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Social Echo (session) -->
                    <input type="hidden" name="attr_show_alteri_social_echo" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-social-echo">
                        <input type="checkbox" name="attr_used_session_alteri_social_echo" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_social_echo_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Immaculate Impersonation (session) -->
                    <input type="hidden" name="attr_show_alteri_immaculate_impersonation" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-immaculate-impersonation">
                        <input type="checkbox" name="attr_used_session_alteri_immaculate_impersonation" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_immaculate_impersonation_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Living Mask Archive (session) -->
                    <input type="hidden" name="attr_show_alteri_living_mask_archive" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-living-mask-archive">
                        <input type="checkbox" name="attr_used_session_alteri_living_mask_archive" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_living_mask_archive_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Veil-Mirroring Ritual (session) -->
                    <input type="hidden" name="attr_show_alteri_veil_mirroring_ritual" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-veil-mirroring-ritual">
                        <input type="checkbox" name="attr_used_session_alteri_veil_mirroring_ritual" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_veil_mirroring_ritual_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Author of the Lie (session) -->
                    <input type="hidden" name="attr_show_alteri_author_of_the_lie" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-alteri-author-of-the-lie">
                        <input type="checkbox" name="attr_used_session_alteri_author_of_the_lie" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_alteri_author_of_the_lie_label"></span>
                        </span>
                    </div>
                    <!-- Racial Talent: Urban Climber (session) -->
                    <input type="hidden" name="attr_show_draevi_urban_climber" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-urban-climber">
                        <input type="checkbox" name="attr_used_session_draevi_urban_climber" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_urban_climber_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Spirits-in-Stone (session) -->
                    <input type="hidden" name="attr_show_draevi_spirits_in_stone" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-spirits-in-stone">
                        <input type="checkbox" name="attr_used_session_draevi_spirits_in_stone" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_spirits_in_stone_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Gutter-Stalker (session) -->
                    <input type="hidden" name="attr_show_draevi_gutter_stalker" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-gutter-stalker">
                        <input type="checkbox" name="attr_used_session_draevi_gutter_stalker" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_gutter_stalker_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Bone-Sung Memory (session) -->
                    <input type="hidden" name="attr_show_draevi_bone_sung_memory" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-bone-sung-memory">
                        <input type="checkbox" name="attr_used_session_draevi_bone_sung_memory" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_bone_sung_memory_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Hardened Trailwalker (session) -->
                    <input type="hidden" name="attr_show_draevi_hardened_trailwalker" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-hardened-trailwalker">
                        <input type="checkbox" name="attr_used_session_draevi_hardened_trailwalker" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_hardened_trailwalker_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Veins of Stone (session) -->
                    <input type="hidden" name="attr_show_draevi_veins_of_stone" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-veins-of-stone">
                        <input type="checkbox" name="attr_used_session_draevi_veins_of_stone" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_veins_of_stone_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Echo-Binder’s Rite (session) -->
                    <input type="hidden" name="attr_show_draevi_echo_binders_rite" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-echo-binders-rite">
                        <input type="checkbox" name="attr_used_session_draevi_echo_binders_rite" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_echo_binders_rite_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Scent the Shift (session) -->
                    <input type="hidden" name="attr_show_draevi_scent_the_shift" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-scent-the-shift">
                        <input type="checkbox" name="attr_used_session_draevi_scent_the_shift" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_scent_the_shift_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Tales Etched in Horn (session) -->
                    <input type="hidden" name="attr_show_draevi_tales_etched_in_horn" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-tales-etched-in-horn">
                        <input type="checkbox" name="attr_used_session_draevi_tales_etched_in_horn" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_tales_etched_in_horn_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Root-Stance Tenacity (session) -->
                    <input type="hidden" name="attr_show_draevi_root_stance_tenacity" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-root-stance-tenacity">
                        <input type="checkbox" name="attr_used_session_draevi_root_stance_tenacity" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_root_stance_tenacity_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Spirit-Touched Mastery (session) -->
                    <input type="hidden" name="attr_show_draevi_spirit_touched_mastery" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-spirit-touched-mastery">
                        <input type="checkbox" name="attr_used_session_draevi_spirit_touched_mastery" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_spirit_touched_mastery_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Spiritual Vanguard (session) -->
                    <input type="hidden" name="attr_show_draevi_spiritual_vanguard" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-spiritual-vanguard">
                        <input type="checkbox" name="attr_used_session_draevi_spiritual_vanguard" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_spiritual_vanguard_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Emberlash Retaliation (session) -->
                    <input type="hidden" name="attr_show_draevi_emberlash_retaliation" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-emberlash-retaliation">
                        <input type="checkbox" name="attr_used_session_draevi_emberlash_retaliation" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_emberlash_retaliation_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Ancestor’s Pulse (session) -->
                    <input type="hidden" name="attr_show_draevi_ancestors_pulse" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-ancestors-pulse">
                        <input type="checkbox" name="attr_used_session_draevi_ancestors_pulse" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_ancestors_pulse_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Pathfinder’s Edge (session) -->
                    <input type="hidden" name="attr_show_draevi_pathfinders_edge" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-pathfinders-edge">
                        <input type="checkbox" name="attr_used_session_draevi_pathfinders_edge" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_pathfinders_edge_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Wild Tamer’s Gaze (session) -->
                    <input type="hidden" name="attr_show_draevi_wild_tamers_gaze" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-wild-tamers-gaze">
                        <input type="checkbox" name="attr_used_session_draevi_wild_tamers_gaze" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_wild_tamers_gaze_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Legacy Reforged (session) -->
                    <input type="hidden" name="attr_show_draevi_legacy_reforged" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-legacy-reforged">
                        <input type="checkbox" name="attr_used_session_draevi_legacy_reforged" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_legacy_reforged_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Soul of the Wild Hunt (session) -->
                    <input type="hidden" name="attr_show_draevi_soul_of_the_wild_hunt" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-soul-of-the-wild-hunt">
                        <input type="checkbox" name="attr_used_session_draevi_soul_of_the_wild_hunt" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_soul_of_the_wild_hunt_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Echo-Flame Warden (session) -->
                    <input type="hidden" name="attr_show_draevi_echo_flame_warden" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-echo-flame-warden">
                        <input type="checkbox" name="attr_used_session_draevi_echo_flame_warden" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_echo_flame_warden_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Ancestral Mirror (session) -->
                    <input type="hidden" name="attr_show_draevi_ancestral_mirror" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-ancestral-mirror">
                        <input type="checkbox" name="attr_used_session_draevi_ancestral_mirror" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_ancestral_mirror_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Path of the Remembered (session) -->
                    <input type="hidden" name="attr_show_draevi_path_of_the_remembered" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-draevi-path-of-the-remembered">
                        <input type="checkbox" name="attr_used_session_draevi_path_of_the_remembered" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_draevi_path_of_the_remembered_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Hard Lesson (session) -->
                    <input type="hidden" name="attr_show_human_hard_lesson" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-hard-lesson">
                        <input type="checkbox" name="attr_used_session_human_hard_lesson" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_hard_lesson_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Instinct Over Training (session) -->
                    <input type="hidden" name="attr_show_human_instinct_over_training" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-instinct-over-training">
                        <input type="checkbox" name="attr_used_session_human_instinct_over_training" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_instinct_over_training_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Makeshift Medic (session) -->
                    <input type="hidden" name="attr_show_human_makeshift_medic" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-makeshift-medic">
                        <input type="checkbox" name="attr_used_session_human_makeshift_medic" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_makeshift_medic_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: No Stranger to Pain (session) -->
                    <input type="hidden" name="attr_show_human_no_stranger_to_pain" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-no-stranger-to-pain">
                        <input type="checkbox" name="attr_used_session_human_no_stranger_to_pain" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_no_stranger_to_pain_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Social Versatility (session) -->
                    <input type="hidden" name="attr_show_human_social_versatility" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-social-versatility">
                        <input type="checkbox" name="attr_used_session_human_social_versatility" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_social_versatility_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Battle-Tested Gut (session) -->
                    <input type="hidden" name="attr_show_human_battle_tested_gut" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-battle-tested-gut">
                        <input type="checkbox" name="attr_used_session_human_battle_tested_gut" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_battle_tested_gut_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Quick Learner (session) -->
                    <input type="hidden" name="attr_show_human_quick_learner" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-quick-learner">
                        <input type="checkbox" name="attr_used_session_human_quick_learner" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_quick_learner_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Situational Awareness (session) -->
                    <input type="hidden" name="attr_show_human_situational_awareness" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-situational-awareness">
                        <input type="checkbox" name="attr_used_session_human_situational_awareness" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_situational_awareness_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Lucky Timing (session) -->
                    <input type="hidden" name="attr_show_human_lucky_timing" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-lucky-timing">
                        <input type="checkbox" name="attr_used_session_human_lucky_timing" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_lucky_timing_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Improvised Tools (session) -->
                    <input type="hidden" name="attr_show_human_improvised_tools" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-improvised-tools">
                        <input type="checkbox" name="attr_used_session_human_improvised_tools" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_improvised_tools_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Defiant Resilience (session) -->
                    <input type="hidden" name="attr_show_human_defiant_resilience" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-defiant-resilience">
                        <input type="checkbox" name="attr_used_session_human_defiant_resilience" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_defiant_resilience_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Cross-Trained (session) -->
                    <input type="hidden" name="attr_show_human_cross_trained" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-cross-trained">
                        <input type="checkbox" name="attr_used_session_human_cross_trained" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_cross_trained_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Momentum Shift (session) -->
                    <input type="hidden" name="attr_show_human_momentum_shift" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-momentum-shift">
                        <input type="checkbox" name="attr_used_session_human_momentum_shift" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_momentum_shift_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Pull From Memory (session) -->
                    <input type="hidden" name="attr_show_human_pull_from_memory" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-pull-from-memory">
                        <input type="checkbox" name="attr_used_session_human_pull_from_memory" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_pull_from_memory_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Chain of Luck (session) -->
                    <input type="hidden" name="attr_show_human_chain_of_luck" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-chain-of-luck">
                        <input type="checkbox" name="attr_used_session_human_chain_of_luck" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_chain_of_luck_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Dig Deep (session) -->
                    <input type="hidden" name="attr_show_human_dig_deep" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-dig-deep">
                        <input type="checkbox" name="attr_used_session_human_dig_deep" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_dig_deep_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Just Enough Prep (session) -->
                    <input type="hidden" name="attr_show_human_just_enough_prep" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-just-enough-prep">
                        <input type="checkbox" name="attr_used_session_human_just_enough_prep" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_just_enough_prep_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Break the Pattern (session) -->
                    <input type="hidden" name="attr_show_human_break_the_pattern" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-break-the-pattern">
                        <input type="checkbox" name="attr_used_session_human_break_the_pattern" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_break_the_pattern_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Tactical Improviser (session) -->
                    <input type="hidden" name="attr_show_human_tactical_improviser" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-tactical-improviser">
                        <input type="checkbox" name="attr_used_session_human_tactical_improviser" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_tactical_improviser_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Luck Bends for Me (session) -->
                    <input type="hidden" name="attr_show_human_luck_bends_for_me" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-luck-bends-for-me">
                        <input type="checkbox" name="attr_used_session_human_luck_bends_for_me" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_luck_bends_for_me_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Unshakable Focus (session) -->
                    <input type="hidden" name="attr_show_human_unshakable_focus" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-human-unshakable-focus">
                        <input type="checkbox" name="attr_used_session_human_unshakable_focus" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_human_unshakable_focus_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Legacy Spark (session) -->
                    <input type="hidden" name="attr_show_lyranni_legacy_spark" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-lyranni-legacy-spark">
                        <input type="checkbox" name="attr_used_session_lyranni_legacy_spark" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_legacy_spark_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Veil-Blooded Sense (session) -->
                    <input type="hidden" name="attr_show_lyranni_veil_blooded_sense" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-lyranni-veil-blooded-sense">
                        <input type="checkbox" name="attr_used_session_lyranni_veil_blooded_sense" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_veil_blooded_sense_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Whispers Beyond (session) -->
                    <input type="hidden" name="attr_show_lyranni_whispers_beyond" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-lyranni-whispers-beyond">
                        <input type="checkbox" name="attr_used_session_lyranni_whispers_beyond" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_whispers_beyond_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Veil Dancer (session) -->
                    <input type="hidden" name="attr_show_lyranni_veil_dancer" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-lyranni-veil-dancer">
                        <input type="checkbox" name="attr_used_session_lyranni_veil_dancer" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_veil_dancer_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Rite-Bound (session) -->
                    <input type="hidden" name="attr_show_lyranni_rite_bound" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-lyranni-rite-bound">
                        <input type="checkbox" name="attr_used_session_lyranni_rite_bound" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_rite_bound_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Words Like Silk (session) -->
                    <input type="hidden" name="attr_show_lyranni_words_like_silk" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-lyranni-words-like-silk">
                        <input type="checkbox" name="attr_used_session_lyranni_words_like_silk" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_words_like_silk_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Memory-Bound Echo (session) -->
                    <input type="hidden" name="attr_show_lyranni_memory_bound_echo" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-lyranni-memory-bound-echo">
                        <input type="checkbox" name="attr_used_session_lyranni_memory_bound_echo" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_memory_bound_echo_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Subtle Authority (session) -->
                    <input type="hidden" name="attr_show_lyranni_subtle_authority" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-lyranni-subtle-authority">
                        <input type="checkbox" name="attr_used_session_lyranni_subtle_authority" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_subtle_authority_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Echo Binding (session) -->
                    <input type="hidden" name="attr_show_lyranni_echo_binding" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-lyranni-echo-binding">
                        <input type="checkbox" name="attr_used_session_lyranni_echo_binding" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_echo_binding_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Voice of the Ancestors (session) -->
                    <input type="hidden" name="attr_show_lyranni_voice_of_the_ancestors" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-lyranni-voice-of-the-ancestors">
                        <input type="checkbox" name="attr_used_session_lyranni_voice_of_the_ancestors" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_voice_of_the_ancestors_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Veil-Linked Will (session) -->
                    <input type="hidden" name="attr_show_lyranni_veil_linked_will" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-lyranni-veil-linked-will">
                        <input type="checkbox" name="attr_used_session_lyranni_veil_linked_will" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_veil_linked_will_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Echo of Elegance (session) -->
                    <input type="hidden" name="attr_show_lyranni_echo_of_elegance" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-lyranni-echo-of-elegance">
                        <input type="checkbox" name="attr_used_session_lyranni_echo_of_elegance" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_echo_of_elegance_label"></span>
                        </span>
                    </div>

                    <!-- Racial Talent: Breath of the Veil (session) -->
                    <input type="hidden" name="attr_show_lyranni_breath_of_the_veil" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-lyranni-breath-of-the-veil">
                        <input type="checkbox" name="attr_used_session_lyranni_breath_of_the_veil" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_lyranni_breath_of_the_veil_label"></span>
                        </span>
                    </div>

					<!-- Racial Talent Session End -->
					
					<!-- Career Talent Session Start -->
					
                    <!-- Career Talent: Clean Loop Feedback (session) -->
                    <input type="hidden" name="attr_show_codeweaver_clean_loop_feedback" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-codeweaver-clean-loop-feedback">
                        <input type="checkbox" name="attr_used_session_codeweaver_clean_loop_feedback" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_clean_loop_feedback_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Crash Field (session) -->
                    <input type="hidden" name="attr_show_codeweaver_crash_field" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-codeweaver-crash-field">
                        <input type="checkbox" name="attr_used_session_codeweaver_crash_field" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_crash_field_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Live Patch Redirect (session) -->
                    <input type="hidden" name="attr_show_codeweaver_live_patch_redirect" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-codeweaver-live-patch-redirect">
                        <input type="checkbox" name="attr_used_session_codeweaver_live_patch_redirect" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_live_patch_redirect_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Magelock Cascade (session) -->
                    <input type="hidden" name="attr_show_codeweaver_magelock_cascade" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-codeweaver-magelock-cascade">
                        <input type="checkbox" name="attr_used_session_codeweaver_magelock_cascade" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_magelock_cascade_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Veil-Reactor Stabilizer (session) -->
                    <input type="hidden" name="attr_show_codeweaver_veil_reactor_stabilizer" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-codeweaver-veil-reactor-stabilizer">
                        <input type="checkbox" name="attr_used_session_codeweaver_veil_reactor_stabilizer" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_veil_reactor_stabilizer_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Overcode Detonation (session) -->
                    <input type="hidden" name="attr_show_codeweaver_overcode_detonation" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-codeweaver-overcode-detonation">
                        <input type="checkbox" name="attr_used_session_codeweaver_overcode_detonation" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_overcode_detonation_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Signal Possession (session) -->
                    <input type="hidden" name="attr_show_codeweaver_signal_possession" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-codeweaver-signal-possession">
                        <input type="checkbox" name="attr_used_session_codeweaver_signal_possession" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_signal_possession_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Reality Patch (session) -->
                    <input type="hidden" name="attr_show_codeweaver_reality_patch" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-codeweaver-reality-patch">
                        <input type="checkbox" name="attr_used_session_codeweaver_reality_patch" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_codeweaver_reality_patch_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Pressure Seal (session) -->
                    <input type="hidden" name="attr_show_combat_medic_pressure_seal" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-combat_medic-pressure-seal">
                        <input type="checkbox" name="attr_used_session_combat_medic_pressure_seal" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_pressure_seal_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Surgical Clarity (session) -->
                    <input type="hidden" name="attr_show_combat_medic_surgical_clarity" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-combat_medic-surgical-clarity">
                        <input type="checkbox" name="attr_used_session_combat_medic_surgical_clarity" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_surgical_clarity_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Combat Revive (session) -->
                    <input type="hidden" name="attr_show_combat_medic_combat_revive" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-combat_medic-combat-revive">
                        <input type="checkbox" name="attr_used_session_combat_medic_combat_revive" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_combat_revive_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Veil Immunologist (session) -->
                    <input type="hidden" name="attr_show_combat_medic_veil_immunologist" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-combat_medic-veil-immunologist">
                        <input type="checkbox" name="attr_used_session_combat_medic_veil_immunologist" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_veil_immunologist_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Emergency Triage Net (session) -->
                    <input type="hidden" name="attr_show_combat_medic_emergency_triage_net" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-combat_medic-emergency-triage-net">
                        <input type="checkbox" name="attr_used_session_combat_medic_emergency_triage_net" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_emergency_triage_net_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Ghost of the ER (session) -->
                    <input type="hidden" name="attr_show_combat_medic_ghost_of_the_er" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-combat_medic-ghost-of-the-er">
                        <input type="checkbox" name="attr_used_session_combat_medic_ghost_of_the_er" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_ghost_of_the_er_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Field Expeditor (session) -->
                    <input type="hidden" name="attr_show_combat_medic_field_expeditor" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-combat_medic-field-expeditor">
                        <input type="checkbox" name="attr_used_session_combat_medic_field_expeditor" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_field_expeditor_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: No One Dies Today (session) -->
                    <input type="hidden" name="attr_show_combat_medic_no_one_dies_today" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-combat_medic-no-one-dies-today">
                        <input type="checkbox" name="attr_used_session_combat_medic_no_one_dies_today" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_no_one_dies_today_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Miracle Protocol (session) -->
                    <input type="hidden" name="attr_show_combat_medic_miracle_protocol" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-combat_medic-miracle-protocol">
                        <input type="checkbox" name="attr_used_session_combat_medic_miracle_protocol" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_miracle_protocol_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Adrenal Shield Matrix (session) -->
                    <input type="hidden" name="attr_show_combat_medic_adrenal_shield_matrix" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-combat_medic-adrenal-shield-matrix">
                        <input type="checkbox" name="attr_used_session_combat_medic_adrenal_shield_matrix" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_combat_medic_adrenal_shield_matrix_label"></span>
                        </span>
                    </div>
					
                    <!-- Career Talent: Memory Spike (session) -->
                    <input type="hidden" name="attr_show_mindbender_memory_spike" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-mindbender-memory-spike">
                        <input type="checkbox" name="attr_used_session_mindbender_memory_spike" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_memory_spike_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Echo Implantation (session) -->
                    <input type="hidden" name="attr_show_mindbender_echo_implantation" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-mindbender-echo-implantation">
                        <input type="checkbox" name="attr_used_session_mindbender_echo_implantation" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_echo_implantation_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: False Memory (session) -->
                    <input type="hidden" name="attr_show_mindbender_false_memory" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-mindbender-false-memory">
                        <input type="checkbox" name="attr_used_session_mindbender_false_memory" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_false_memory_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Neural Whiplash (session) -->
                    <input type="hidden" name="attr_show_mindbender_neural_whiplash" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-mindbender-neural-whiplash">
                        <input type="checkbox" name="attr_used_session_mindbender_neural_whiplash" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_neural_whiplash_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Hollow Gaze (session) -->
                    <input type="hidden" name="attr_show_mindbender_hollow_gaze" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-mindbender-hollow-gaze">
                        <input type="checkbox" name="attr_used_session_mindbender_hollow_gaze" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_hollow_gaze_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Resonant Persona (session) -->
                    <input type="hidden" name="attr_show_mindbender_resonant_persona" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-mindbender-resonant-persona">
                        <input type="checkbox" name="attr_used_session_mindbender_resonant_persona" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_resonant_persona_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Emotion Override Field (session) -->
                    <input type="hidden" name="attr_show_mindbender_emotion_override_field" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-mindbender-emotion-override-field">
                        <input type="checkbox" name="attr_used_session_mindbender_emotion_override_field" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_emotion_override_field_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Compromise Anchor (session) -->
                    <input type="hidden" name="attr_show_mindbender_compromise_anchor" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-mindbender-compromise-anchor">
                        <input type="checkbox" name="attr_used_session_mindbender_compromise_anchor" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_compromise_anchor_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Puppetmaster Protocol (session) -->
                    <input type="hidden" name="attr_show_mindbender_puppetmaster_protocol" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-mindbender-puppetmaster-protocol">
                        <input type="checkbox" name="attr_used_session_mindbender_puppetmaster_protocol" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_puppetmaster_protocol_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Emotional Collapse (session) -->
                    <input type="hidden" name="attr_show_mindbender_emotional_collapse" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-mindbender-emotional-collapse">
                        <input type="checkbox" name="attr_used_session_mindbender_emotional_collapse" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_emotional_collapse_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Scene Fracture (session) -->
                    <input type="hidden" name="attr_show_mindbender_scene_fracture" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-mindbender-scene-fracture">
                        <input type="checkbox" name="attr_used_session_mindbender_scene_fracture" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_mindbender_scene_fracture_label"></span>
                        </span>
                    </div>				

                    <!-- Career Talent: Counterglyph (session) -->
                    <input type="hidden" name="attr_show_sigilbound_counterglyph" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-sigilbound-counterglyph">
                        <input type="checkbox" name="attr_used_session_sigilbound_counterglyph" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_sigilbound_counterglyph_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Arcane Reversal (session) -->
                    <input type="hidden" name="attr_show_sigilbound_arcane_reversal" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-sigilbound-arcane-reversal">
                        <input type="checkbox" name="attr_used_session_sigilbound_arcane_reversal" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_sigilbound_arcane_reversal_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Mirror Sigil (session) -->
                    <input type="hidden" name="attr_show_sigilbound_mirror_sigil" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-sigilbound-mirror-sigil">
                        <input type="checkbox" name="attr_used_session_sigilbound_mirror_sigil" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_sigilbound_mirror_sigil_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Veil Seal (session) -->
                    <input type="hidden" name="attr_show_sigilbound_veil_seal" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-sigilbound-veil-seal">
                        <input type="checkbox" name="attr_used_session_sigilbound_veil_seal" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_sigilbound_veil_seal_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Runesovereign (session) -->
                    <input type="hidden" name="attr_show_sigilbound_runesovereign" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-sigilbound-runesovereign">
                        <input type="checkbox" name="attr_used_session_sigilbound_runesovereign" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_sigilbound_runesovereign_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Wardmaster’s Command (session) -->
                    <input type="hidden" name="attr_show_sigilbound_wardmasters_command" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-sigilbound-wardmasters-command">
                        <input type="checkbox" name="attr_used_session_sigilbound_wardmasters_command" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_sigilbound_wardmasters_command_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Sigilburst Protocol (session) -->
                    <input type="hidden" name="attr_show_sigilbound_sigilburst_protocol" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-sigilbound-sigilburst-protocol">
                        <input type="checkbox" name="attr_used_session_sigilbound_sigilburst_protocol" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_sigilbound_sigilburst_protocol_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Tinder Spark (session) -->
                    <input type="hidden" name="attr_show_stormweaver_tinder_spark" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-stormweaver-tinder-spark">
                        <input type="checkbox" name="attr_used_session_stormweaver_tinder_spark" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_stormweaver_tinder_spark_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Voltaic Reflex (session) -->
                    <input type="hidden" name="attr_show_stormweaver_voltaic_reflex" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-stormweaver-voltaic-reflex">
                        <input type="checkbox" name="attr_used_session_stormweaver_voltaic_reflex" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_stormweaver_voltaic_reflex_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Volcanic Path (session) -->
                    <input type="hidden" name="attr_show_stormweaver_volcanic_path" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-stormweaver-volcanic-path">
                        <input type="checkbox" name="attr_used_session_stormweaver_volcanic_path" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_stormweaver_volcanic_path_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Shockstep Conduit (session) -->
                    <input type="hidden" name="attr_show_stormweaver_shockstep_conduit" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-stormweaver-shockstep-conduit">
                        <input type="checkbox" name="attr_used_session_stormweaver_shockstep_conduit" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_stormweaver_shockstep_conduit_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Flashfire Assault (session) -->
                    <input type="hidden" name="attr_show_stormweaver_flashfire_assault" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-stormweaver-flashfire-assault">
                        <input type="checkbox" name="attr_used_session_stormweaver_flashfire_assault" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_stormweaver_flashfire_assault_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Surge Engine (session) -->
                    <input type="hidden" name="attr_show_stormweaver_surge_engine" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-stormweaver-surge-engine">
                        <input type="checkbox" name="attr_used_session_stormweaver_surge_engine" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_stormweaver_surge_engine_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Eye of the Storm (session) -->
                    <input type="hidden" name="attr_show_stormweaver_eye_of_the_storm" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-stormweaver-eye-of-the-storm">
                        <input type="checkbox" name="attr_used_session_stormweaver_eye_of_the_storm" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_stormweaver_eye_of_the_storm_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Stormpiercer (session) -->
                    <input type="hidden" name="attr_show_stormweaver_stormpiercer" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-stormweaver-stormpiercer">
                        <input type="checkbox" name="attr_used_session_stormweaver_stormpiercer" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_stormweaver_stormpiercer_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Veilburn Protocol (session) -->
                    <input type="hidden" name="attr_show_stormweaver_veilburn_protocol" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-stormweaver-veilburn-protocol">
                        <input type="checkbox" name="attr_used_session_stormweaver_veilburn_protocol" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_stormweaver_veilburn_protocol_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Steel Reflex (session) -->
                    <input type="hidden" name="attr_show_street_ronin_steel_reflex" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-street-ronin-steel-reflex">
                        <input type="checkbox" name="attr_used_session_street_ronin_steel_reflex" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_steel_reflex_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Reactive Flow (session) -->
                    <input type="hidden" name="attr_show_street_ronin_reactive_flow" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-street-ronin-reactive-flow">
                        <input type="checkbox" name="attr_used_session_street_ronin_reactive_flow" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_reactive_flow_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Breath Before the Cut (session) -->
                    <input type="hidden" name="attr_show_street_ronin_breath_before_the_cut" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-street-ronin-breath-before-the-cut">
                        <input type="checkbox" name="attr_used_session_street_ronin_breath_before_the_cut" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_breath_before_the_cut_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Draw Cut (session) -->
                    <input type="hidden" name="attr_show_street_ronin_draw_cut" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-street-ronin-draw-cut">
                        <input type="checkbox" name="attr_used_session_street_ronin_draw_cut" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_draw_cut_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: The Line You Do Not Cross (session) -->
                    <input type="hidden" name="attr_show_street_ronin_the_line_you_do_not_cross" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-street-ronin-the-line-you-do-not-cross">
                        <input type="checkbox" name="attr_used_session_street_ronin_the_line_you_do_not_cross" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_the_line_you_do_not_cross_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Moment Severed (session) -->
                    <input type="hidden" name="attr_show_street_ronin_moment_severed" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-street-ronin-moment-severed">
                        <input type="checkbox" name="attr_used_session_street_ronin_moment_severed" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_moment_severed_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: No Second Strike (session) -->
                    <input type="hidden" name="attr_show_street_ronin_no_second_strike" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-street-ronin-no-second-strike">
                        <input type="checkbox" name="attr_used_session_street_ronin_no_second_strike" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_no_second_strike_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Steel Anchored Calm (session) -->
                    <input type="hidden" name="attr_show_street_ronin_steel_anchored_calm" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-street-ronin-steel-anchored-calm">
                        <input type="checkbox" name="attr_used_session_street_ronin_steel_anchored_calm" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_steel_anchored_calm_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Flow Reversal (session) -->
                    <input type="hidden" name="attr_show_street_ronin_flow_reversal" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-street-ronin-flow-reversal">
                        <input type="checkbox" name="attr_used_session_street_ronin_flow_reversal" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_flow_reversal_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Deflective Form (session) -->
                    <input type="hidden" name="attr_show_street_ronin_deflective_form" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-street-ronin-deflective-form">
                        <input type="checkbox" name="attr_used_session_street_ronin_deflective_form" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_deflective_form_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Final Cut Doctrine (session) -->
                    <input type="hidden" name="attr_show_street_ronin_final_cut_doctrine" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-street-ronin-final-cut-doctrine">
                        <input type="checkbox" name="attr_used_session_street_ronin_final_cut_doctrine" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_final_cut_doctrine_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Ghost Walk Execution (session) -->
                    <input type="hidden" name="attr_show_street_ronin_ghost_walk_execution" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-street-ronin-ghost-walk-execution">
                        <input type="checkbox" name="attr_used_session_street_ronin_ghost_walk_execution" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_ghost_walk_execution_label"></span>
                        </span>
                    </div>

                    <!-- Career Talent: Duelmaster's Claim (session) -->
                    <input type="hidden" name="attr_show_street_ronin_duelmasters_claim" />
                    <div class="sheet-tracker-item sheet-tracker-session sheet-street-ronin-duelmasters-claim">
                        <input type="checkbox" name="attr_used_session_street_ronin_duelmasters_claim" class="sheet-tracker-checkbox" />
                        <span class="sheet-tracker-label">
                            <span name="attr_street_ronin_duelmasters_claim_label"></span>
                        </span>
                    </div>
					
					<!-- Career Talent Session End -->
					<fieldset class="repeating_session">
						<div class="sheet-tracker-row">
							<!-- Used Checkbox -->
							<div class="sheet-tracker-session session-item-name-wrapper">
								<input type="checkbox" name="attr_used_session_item_name_mdr" class="sheet-tracker-checkbox" />
								<input type="text" name="attr_session_item_name_mdr" placeholder="Session Item Name" />
							</div>
						</div>
					</fieldset>				
				</div>	
	
			</div>	
		</div>

		<!-- ------------------------- NPC Companions (Converted to Grid/Flex Layout) -->
		<div class="sheet-tab-content sheet-npcs">
			<div class="sheet-companions">
				<h4 class="section-head" data-i18n="companions_and_mounts-u">NPCs</h4>
				<div class="sheet-section">
					<fieldset class="repeating_minion">
						<div class="sheet-npcblock-flex">
							<!-- Left Column -->
							<div class="sheet-npc-content-left">
								<div class="sheet-npc-info-section">
									<div class="sheet-companion-info-header">Information</div>
									<div class="sheet-npc-grid">
										<div class="sheet-npc-row">
											<div class="sheet-npc-label" data-i18n="name-u">Name</div>
											<div class="sheet-npc-val">
												<input type="text" name="attr_minion_name" class="sheet-wide-input" placeholder="Name" />
											</div>
										</div>
										<div class="sheet-npc-mini-flex">
											<div class="sheet-npc-row">
												<div class="sheet-npc-label">HP / Strain</div>
												<div class="sheet-npc-val">
													<input type="text" name="attr_minionhp" class="sheet-narrow-input" placeholder="HP" /> /
													<input type="text" name="attr_minionmp" class="sheet-narrow-input" placeholder="Strain" />
												</div>
											</div>
											<div class="sheet-npc-row">
												<div class="sheet-npc-label">MOV</div>
												<div class="sheet-npc-val">
													<input type="text" name="attr_minionmove" class="sheet-wide-input" placeholder="Movement" />
												</div>
											</div>
											<div class="sheet-npc-row">
												<div class="sheet-npc-label">B / DB</div>
												<div class="sheet-npc-val">
													<input type="text" name="attr_minionbuild" class="sheet-narrow-input" placeholder="Build" /> /
													<input type="text" name="attr_miniondb" class="sheet-narrow-input" placeholder="DB" />
												</div>
											</div>
										</div>
										<div class="sheet-npc-row">
											<div class="sheet-npc-label" data-i18n="armor-z">Armor</div>
											<div class="sheet-npc-val">
												<input type="text" name="attr_minionarmorname" class="sheet-wide-input" placeholder="Armor Name" />
												<input type="text" name="attr_minionarmor" class="sheet-narrow-input" placeholder="Def" />
												<button type="roll" class="smallnonskillbutton-roll" name="roll_minionarmor" value="&{template:coc-miniondef} {{name=@{minion_name} @{minionarmorname}}} {{defence=[[@{minionarmor}]]}}"></button>
											</div>
										</div>
										<div class="sheet-npc-row">
											<div class="sheet-npc-label" data-i18n="generalinfo-u">General Info</div>
											<div class="sheet-npc-val">
												<textarea name="attr_minion_stats_info" class="sheet-npc-textarea" placeholder="General Info"></textarea>
											</div>
										</div>
									</div>
								</div>
								<div class="sheet-npc-attribute-section">
									<!-- Attributes Section -->
									<div class="sheet-companion-attr-header">Attributes</div>
									<div class="sheet-npc-attribute-grid">
										<!-- Column 1 -->
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">STR</div>
											<input type="text" name="attr_minionattr1" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr1_check" value="&{template:coc-1} {{name=@{minion_name} rolling STR}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionattr1}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionattr1}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionattr1}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">CON</div>
											<input type="text" name="attr_minionattr2" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr2_check" value="&{template:coc-1} {{name=@{minion_name} rolling CON}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionattr2}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionattr2}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionattr2}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">SIZ</div>
											<input type="text" name="attr_minionattr3" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr3_check" value="&{template:coc-1} {{name=@{minion_name} rolling SIZ}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionattr3}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionattr3}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionattr3}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">APP</div>
											<input type="text" name="attr_minionattr4" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr4_check" value="&{template:coc-1} {{name=@{minion_name} rolling APP}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionattr4}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionattr4}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionattr4}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">DEX</div>
											<input type="text" name="attr_minionattr5" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr5_check" value="&{template:coc-1} {{name=@{minion_name} rolling DEX}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionattr5}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionattr5}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionattr5}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<!-- Column 2 -->
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">INT</div>
											<input type="text" name="attr_minionattr6" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr6_check" value="&{template:coc-1} {{name=@{minion_name} rolling INT}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionattr6}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionattr6}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionattr6}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">POW</div>
											<input type="text" name="attr_minionattr7" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr7_check" value="&{template:coc-1} {{name=@{minion_name} rolling POW}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionattr7}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionattr7}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionattr7}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">EDU</div>
											<input type="text" name="attr_minionattr8" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr8_check" value="&{template:coc-1} {{name=@{minion_name} rolling EDU}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionattr8}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionattr8}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionattr8}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div class="sheet-npc-attribute-cell">
											<div class="sheet-npc-attr-label">MAG</div>
											<input type="text" name="attr_minionattr9" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionattr9_check" value="&{template:coc-1} {{name=@{minion_name} rolling MAG}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionattr9}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionattr9}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionattr9}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>							
									</div>
								</div>
								<div class="sheet-npc-skills-section">
									<div class="sheet-companion-skill-header">Skills</div>
									<div class="sheet-npc-attribute-grid">
										<!-- Skill 1 -->
										<div class="sheet-npc-attribute-cell">
											<input type="text" name="attr_minionskill1" class="sheet-wide-input" placeholder="Skill 1" />
											<input type="text" name="attr_minionskillval1" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionskill1_check" value="&{template:coc-1} {{name=@{minion_name} rolling @{minionskill1}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionskillval1}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionskillval1}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionskillval1}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<!-- Skill 2 -->
										<div class="sheet-npc-attribute-cell">
											<input type="text" name="attr_minionskill2" class="sheet-wide-input" placeholder="Skill 2" />
											<input type="text" name="attr_minionskillval2" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionskill2_check" value="&{template:coc-1} {{name=@{minion_name} rolling @{minionskill2}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionskillval2}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionskillval2}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionskillval2}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<!-- Skill 3 -->
										<div class="sheet-npc-attribute-cell">
											<input type="text" name="attr_minionskill3" class="sheet-wide-input" placeholder="Skill 3" />
											<input type="text" name="attr_minionskillval3" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionskill3_check" value="&{template:coc-1} {{name=@{minion_name} rolling @{minionskill3}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionskillval3}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionskillval3}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionskillval3}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<!-- Skill 4 -->
										<div class="sheet-npc-attribute-cell">
											<input type="text" name="attr_minionskill4" class="sheet-wide-input" placeholder="Skill 4" />
											<input type="text" name="attr_minionskillval4" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionskill4_check" value="&{template:coc-1} {{name=@{minion_name} rolling @{minionskill4}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionskillval4}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionskillval4}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionskillval4}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<!-- Skill 5 -->
										<div class="sheet-npc-attribute-cell">
											<input type="text" name="attr_minionskill5" class="sheet-wide-input" placeholder="Skill 5" />
											<input type="text" name="attr_minionskillval5" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionskill5_check" value="&{template:coc-1} {{name=@{minion_name} rolling @{minionskill5}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionskillval5}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionskillval5}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionskillval5}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<!-- Skill 6 -->
										<div class="sheet-npc-attribute-cell">
											<input type="text" name="attr_minionskill6" class="sheet-wide-input" placeholder="Skill 6" />
											<input type="text" name="attr_minionskillval6" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionskill6_check" value="&{template:coc-1} {{name=@{minion_name} rolling @{minionskill6}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionskillval6}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionskillval6}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionskillval6}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<!-- Skill 7 -->
										<div class="sheet-npc-attribute-cell">
											<input type="text" name="attr_minionskill7" class="sheet-wide-input" placeholder="Skill 7" />
											<input type="text" name="attr_minionskillval7" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionskill7_check" value="&{template:coc-1} {{name=@{minion_name} rolling @{minionskill7}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionskillval7}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionskillval7}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionskillval7}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<!-- Skill 8 -->
										<div class="sheet-npc-attribute-cell">
											<input type="text" name="attr_minionskill8" class="sheet-wide-input" placeholder="Skill 8" />
											<input type="text" name="attr_minionskillval8" class="sheet-npc-attr-input" />
											<button type="roll" class="sheet-npc-attr-roll" name="roll_minionskill8_check" value="&{template:coc-1} {{name=@{minion_name} rolling @{minionskill8}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionskillval8}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionskillval8}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionskillval8}+@{dice_modifier_checkbox})/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div class="sheet-npc-attribute-cell">
											<span class="sheet-npc-attr-label">Init</span>
											<button type="roll" name="roll_initdexnpc" value="!initdexnpc @{minion_name} @{minionattr5}"></button>
										</div>	
										<div class="sheet-npc-attribute-cell">
											<span class="sheet-npc-attr-label">Move</span>
											<button type="roll" name="roll_movenpc" value="!movenpc @{minion_name} @{minionmove}"></button>
										</div>										
									 </div>
								</div>
							</div>
							<!-- Right Column: Weapons -->
							<div class="sheet-npc-content-right">
								<div class="sheet-npc-grid">
									<div class="sheet-companion-weapon-header">Weapons</div>
									<div class="sheet-npc-header-row">
										<div class="sheet-col"><span class="sheet-wide-input-header-name">Name</span></div>
										<div class="sheet-col"><span class="sheet-wide-input-header-dmg">Dmg</span></div>
										<div class="sheet-col"><span class="sheet-wide-input-header-maxdmg">Max Dmg</span></div>
										<div class="sheet-col"><span class="sheet-wide-input-header-malf">Malf</span></div>
										<div class="sheet-col"><span class="sheet-wide-input-header-strain">Strain</span></div>
										<div class="sheet-col"><span class="sheet-wide-input-header-noimproll">No Imp Roll</span></div>
										<div class="sheet-col"><span class="sheet-wide-input-header-improll">Imp Roll</span></div>
									</div>									
									<div class="sheet-npc-row">
										<div class="sheet-col"><input type="text" name="attr_minionweapon1" class="sheet-wide-input" placeholder="Weapon 1 (Skill 6)" /></div>
										<div class="sheet-col"><input type="text" name="attr_miniondamage1" class="sheet-narrow-input" placeholder="Dam+DB" /></div>
										<div class="sheet-col"><input type="text" name="attr_minionmaxdamage1" class="sheet-narrow-input" placeholder="Max Dam" /></div>
										<div class="sheet-col"><input type="text" name="attr_minionweaponmalf1" class="sheet-narrow-input" placeholder="Malf" /></div>
										<div class="sheet-col"><input type="text" name="attr_minionstrain1" class="sheet-narrow-input" placeholder="Strain" /></div>
										<div class="sheet-col"><button type="roll" class="smallbutton-roll" name="roll_miniondamage1-no-impale" value="&{template:coc-attack-1-noimpale} {{name=@{minion_name} attacking with @{minionweapon1}}}  {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionskillval6}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionskillval6}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionskillval6}+@{dice_modifier_checkbox})/5)]]}} {{malf=@{minionweaponmalf1}}} {{roll1=[[1d100]]}}  {{damage=[[@{miniondamage1}]]}} {{extremedamage=[[@{minionmaxdamage1}]]}} {{strain=[[@{minionstrain1} + 0]]}}"></button></div>
										<div class="sheet-col"><button type="roll" class="smallbutton-roll" name="roll_miniondamage1-impale" value="&{template:coc-attack-1-impale} {{name=@{minion_name} attacking with @{minionweapon1}}}  {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionskillval6}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionskillval6}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionskillval6}+@{dice_modifier_checkbox})/5)]]}} {{malf=@{minionweaponmalf1}}} {{roll1=[[1d100]]}}  {{damage=[[@{miniondamage1}]]}} {{extremedamage=[[@{minionmaxdamage1}]]}} {{strain=[[@{minionstrain1} + 0]]}}"></button></div>
									</div>
									<div class="sheet-npc-row">
										<div class="sheet-col"><input type="text" name="attr_minionweapon2" class="sheet-wide-input" placeholder="Weapon 2 (Skill 7)" /></div>
										<div class="sheet-col"><input type="text" name="attr_miniondamage2" class="sheet-narrow-input" placeholder="Dam+DB" /></div>
										<div class="sheet-col"><input type="text" name="attr_minionmaxdamage2" class="sheet-narrow-input" placeholder="Max Dam" /></div>
										<div class="sheet-col"><input type="text" name="attr_minionweaponmalf2" class="sheet-narrow-input" placeholder="Malf" /></div>
										<div class="sheet-col"><input type="text" name="attr_minionstrain2" class="sheet-narrow-input" placeholder="Strain" /></div>
										<div class="sheet-col"><button type="roll" class="smallbutton-roll" name="roll_miniondamage2-no-impale" value="&{template:coc-attack-1-noimpale} {{name=@{minion_name} attacking with @{minionweapon2}}}  {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionskillval7}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionskillval7}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionskillval7}+@{dice_modifier_checkbox})/5)]]}} {{malf=@{minionweaponmalf2}}} {{roll1=[[1d100]]}}  {{damage=[[@{miniondamage2}]]}} {{extremedamage=[[@{minionmaxdamage2}]]}} {{strain=[[@{minionstrain2} + 0]]}}"></button></div>
										<div class="sheet-col"><button type="roll" class="smallbutton-roll" name="roll_miniondamage2-impale" value="&{template:coc-attack-1-impale} {{name=@{minion_name} attacking with @{minionweapon2}}}  {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionskillval7}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionskillval7}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionskillval7}+@{dice_modifier_checkbox})/5)]]}} {{malf=@{minionweaponmalf2}}} {{roll1=[[1d100]]}}  {{damage=[[@{miniondamage2}]]}} {{extremedamage=[[@{minionmaxdamage2}]]}} {{strain=[[@{minionstrain2} + 0]]}}"></button></div>
									</div>
									<div class="sheet-npc-row">
										<input type="text" name="attr_minionweapon3" class="sheet-wide-input" placeholder="Weapon 3 (Skill 8)" />
										<input type="text" name="attr_miniondamage3" class="sheet-narrow-input" placeholder="Dam+DB" />
										<div class="sheet-col"><input type="text" name="attr_minionmaxdamage3" class="sheet-narrow-input" placeholder="Max Dam" /></div>
										<div class="sheet-col"><input type="text" name="attr_minionweaponmalf3" class="sheet-narrow-input" placeholder="Malf" /></div>
										<div class="sheet-col"><input type="text" name="attr_minionstrain3" class="sheet-narrow-input" placeholder="Strain" /></div>
										<div class="sheet-col"><button type="roll" class="smallbutton-roll" name="roll_miniondamage3-no-impale" value="&{template:coc-attack-1-noimpale} {{name=@{minion_name} attacking with @{minionweapon3}}}  {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionskillval8}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionskillval8}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionskillval8}+@{dice_modifier_checkbox})/5)]]}} {{malf=@{minionweaponmalf3}}} {{roll1=[[1d100]]}}  {{damage=[[@{miniondamage3}]]}} {{extremedamage=[[@{minionmaxdamage3}]]}} {{strain=[[@{minionstrain3} + 0]]}}"></button></div>
										<div class="sheet-col"><button type="roll" class="smallbutton-roll" name="roll_miniondamage3-impale" value="&{template:coc-attack-1-impale} {{name=@{minion_name} attacking with @{minionweapon3}}}  {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{success=[[@{minionskillval8}+@{dice_modifier_checkbox}]]}} {{hard=[[floor((@{minionskillval8}+@{dice_modifier_checkbox})/2)]]}} {{extreme=[[floor((@{minionskillval8}+@{dice_modifier_checkbox})/5)]]}} {{malf=@{minionweaponmalf3}}} {{roll1=[[1d100]]}}  {{damage=[[@{miniondamage3}]]}} {{extremedamage=[[@{minionmaxdamage3}]]}} {{strain=[[@{minionstrain3} + 0]]}}"></button></div>
									</div>
								</div>
							</div>
						</div>
						<hr />
					</fieldset>
				</div>
			</div>
		</div>

		<!-- ------------------------- Vehicles ------------------------- -->
		<div class="sheet-tab-content sheet-vehicles">
			<div class="sheet-vehicles-wrapper">
				<h4 class="section-head" data-i18n="vehicles-u">Vehicles</h4>
				<div class="sheet-vehicles-section">
					<fieldset class="repeating_vehicle">
						<div class="sheet-vehicle-grid">
							<!-- Left Block -->
							<div class="sheet-vehicle-column-left">
								<div class="sheet-vehicle-grid-header">
									<div class="sheet-vehicle-info">
										<div class="sheet-name-row">
											<div class="sheet-vehicle-col-label" data-i18n="name-u">Name</div>
											<div class="sheet-vehicle-col-value">
												<input type="text" class="sheet-wide-input" name="attr_vehicle_name" placeholder="Name" data-i18n-placeholder="name-u" />
											</div>
										</div>
										<div class="sheet-vehicle-row">
											<div class="sheet-vehicle-col-label" data-i18n="build-u">Build</div>
											<div class="sheet-vehicle-col-value">
												<input type="text" class="sheet-wide-input" name="attr_vehiclebuild" placeholder="Current" data-i18n-placeholder="current-u" />
												<span>/</span>
												<input type="text" class="sheet-wide-input" name="attr_vehiclebuildmax" placeholder="Max" data-i18n-placeholder="max-u" />
											</div>
										</div>
										<div class="sheet-vehicle-row">
											<div class="sheet-vehicle-col-label" data-i18n="MOV-u">MOV</div>
											<div class="sheet-vehicle-col-value">
												<input type="text" class="sheet-wide-input" name="attr_vehiclemove" />
											</div>
										</div>
										<div class="sheet-vehicle-row">
											<div class="sheet-vehicle-col-label" data-i18n="armor-z">Armor</div>
											<div class="sheet-vehicle-col-value">
												<input type="text" class="sheet-wide-input" name="attr_vehiclearmor" />
												<button class="smallnonskillbutton-roll" type="roll" name="roll_vehiclearmor" value="&{template:coc-miniondef} {{name=@{vehicle_name} Armor}} {{defence=[[@{vehiclearmor}]]}}"></button>
											</div>
										</div>
										<div class="sheet-vehicle-row">
											<div class="sheet-vehicle-col-label" data-i18n="cap-u">Capacity</div>
											<div class="sheet-vehicle-col-value">
												<input type="text" class="sheet-wide-input" name="attr_vehiclecap" />
											</div>
										</div>
									</div>
									<div class="sheet-vehicle-weaponblock">
										<div class="sheet-vehicle-impact-row">
											<div>
												<div class="sheet-vehicle-col-label" data-i18n="vehicleattack-u">Vehicular Impact Attack</div>
												<div class="sheet-vehicle-col-label" data-i18n="vehicleattack_req-u">Vehicular Impact Attack Requirement</div>
											</div>
											<button class="smallbutton-roll" type="roll" name="roll_vehicleattack_check" value="&{template:coc-vehicleattack} {{name=@{vehicle_name} attacking with @{operatorskillname}}}{{success=[[@{operatorskill}]]}} {{hard=[[floor(@{operatorskill}/2)]]}} {{extreme=[[floor(@{operatorskill}/5)]]}} {{roll1=[[1d100]]}} {{builddam=[[@{vehiclebuild}d10/10]]}}"></button>
										</div>
										<div>
											<input type="text" class="sheet-wide-input" name="attr_operatorskillname" placeholder="Operator's Skill" data-i18n-placeholder="operatorskill" />
											<input type="text" class="sheet-wide-input" name="attr_operatorskill" />
											<button class="smallbutton-roll" type="roll" name="roll_operatorskill_check" value="&{template:coc-1} {{name=@{vehicle_name} rolling @{operatorskillname}}} {{success=[[@{operatorskill}]]}} {{hard=[[floor(@{operatorskill}/2)]]}} {{extreme=[[floor(@{operatorskill}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div>
											<input type="text" class="sheet-wide-input" name="attr_vehicleweaponskillname" placeholder="Mounted Weapon Skill" data-i18n-placeholder="MountedWeaponSkill" />
											<input type="text" class="sheet-wide-input" name="attr_vehicleweaponskill" />
											<button class="smallbutton-roll" type="roll" name="roll_vehicleweaponskill_check" value="&{template:coc-1} {{name=@{vehicle_name} rolling @{vehicleweaponskillname}}} {{success=[[@{vehicleweaponskill}]]}} {{hard=[[floor(@{vehicleweaponskill}/2)]]}} {{extreme=[[floor(@{vehicleweaponskill}/5)]]}} {{roll1=[[1d100]]}}"></button>
										</div>
										<div>
											<input type="text" class="sheet-wide-input" name="attr_vehicleweaponname" placeholder="Mounted Weapon" />
											<input type="text" class="sheet-wide-input" name="attr_vehicleweapondamage" placeholder="Dam" data-i18n-placeholder="dam-z" />
											<button class="smallbutton-roll" type="roll" name="roll_vehicleweaponattack" value="&{template:coc-minionattack} {{name=@{vehicle_name} attacking with @{vehicleweaponname}}} {{success=[[@{vehicleweaponskill}]]}} {{hard=[[floor(@{vehicleweaponskill}/2)]]}} {{extreme=[[floor(@{vehicleweaponskill}/5)]]}} {{roll1=[[1d100]]}} {{damage=[[@{vehicleweapondamage}]]}}"></button>
										</div>
									</div>
								</div>
							</div>
							<!-- Right Block -->
							<div class="sheet-vehicle-column-right">
								<div class="sheet-vehicle-col-label" data-i18n="generalinfo-u">General Info</div>
								<textarea name="attr_vehicle_stats_info" class="sheet-vehicle-textarea" placeholder="General Info" data-i18n-placeholder="generalinfo-u"></textarea>
								<div class="sheet-vehicle-col-label" data-i18n="cargo-u">Cargo</div>
								<textarea name="attr_vehicle_stats_info_2" class="sheet-vehicle-textarea" placeholder="Cargo" data-i18n-placeholder="cargo-u"></textarea>
								<div class="sheet-vehicle-col-label" data-i18n="passengers-u">Passengers</div>
								<textarea name="attr_vehicle_stats_info_3" class="sheet-vehicle-textarea" placeholder="Passengers" data-i18n-placeholder="passengers-u"></textarea>
							</div>
						</div>
					<hr />
					</fieldset>
				</div>
			</div>
		</div>

	</div>
</div>

<!------------------------- Translations? ------------------------->
<input type="hidden" name="attr_str_txt" value="STR ROLL"/>
<input type="hidden" name="attr_dex_txt" value="DEX ROLL"/>
<input type="hidden" name="attr_pow_txt" value="POW ROLL"/>
<input type="hidden" name="attr_con_txt" value="CON Roll"/>
<input type="hidden" name="attr_app_txt" value="APP Roll"/>
<input type="hidden" name="attr_edu_txt" value="EDU Roll"/>
<input type="hidden" name="attr_siz_txt" value="SIZ Roll"/>
<input type="hidden" name="attr_int_txt" value="INT Roll"/>
<input type="hidden" name="attr_mag_txt" value="MAG Roll"/>
<input type="hidden" name="attr_luck_txt" value="Luck ROLL"/>
<input type="hidden" name="attr_archanotech_txt" value="Archanotech Roll"/>
<input type="hidden" name="attr_archery_txt" value="Archery Roll"/>
<input type="hidden" name="attr_accounting_txt" value="Accounting Roll"/>
<input type="hidden" name="attr_alchemy_txt" value="Alchemy Roll"/>
<input type="hidden" name="attr_anthropology_txt" value="Anthropology Roll"/>
<input type="hidden" name="attr_animalhandling_txt" value="Animal Handling Roll"/>
<input type="hidden" name="attr_appraise_txt" value="Appraise Roll"/>
<input type="hidden" name="attr_arcana_txt" value="Arcana Roll"/>
<input type="hidden" name="attr_archaeology_txt" value="Archaeology Roll"/>
<input type="hidden" name="attr_architecture_txt" value="Architecture Roll"/>
<input type="hidden" name="attr_biology_txt" value="Biology Roll"/>
<input type="hidden" name="attr_chant_txt" value="Chant Roll"/>
<input type="hidden" name="attr_charm_txt" value="Charm Roll"/>
<input type="hidden" name="attr_chemistry_txt" value="Chemistry Roll"/>
<input type="hidden" name="attr_climb_txt" value="Climb Roll"/>
<input type="hidden" name="attr_computeruse_txt" value="Computer Use Roll"/>
<input type="hidden" name="attr_computermaint_txt" value="Computer Maint. Roll"/>
<input type="hidden" name="attr_creditrating_txt" value="Credit Rating Roll"/>
<input type="hidden" name="attr_cthulhumythos_txt" value="Cthulhu Mythos Roll"/>
<input type="hidden" name="attr_cybernetics_txt" value="Cybernetics Roll"/>
<input type="hidden" name="attr_cybertech_txt" value="Cybertech Roll"/>
<input type="hidden" name="attr_dance_txt" value="Dance Roll"/>
<input type="hidden" name="attr_deception_txt" value="Deception Roll"/>
<input type="hidden" name="attr_demolitions_txt" value="Demolitions Roll"/>
<input type="hidden" name="attr_disguise_txt" value="Disguise Roll"/>
<input type="hidden" name="attr_dodge_txt" value="Dodge Roll"/>
<input type="hidden" name="attr_driveauto_txt" value="Drive Auto"/>
<input type="hidden" name="attr_drone_operation_txt" value="Drone Operation Roll"/>
<input type="hidden" name="attr_elecrepair_txt" value="Elec. Repair Roll"/>
<input type="hidden" name="attr_electronics_txt" value="Electronics Roll"/>
<input type="hidden" name="attr_engineering_txt" value="Engineering Roll"/>
<input type="hidden" name="attr_etiquette_alteri_txt" value="Etiquette (Alteri) Roll"/>
<input type="hidden" name="attr_etiquette_high_society_txt" value="Etiquette (High Society) Roll"/>
<input type="hidden" name="attr_etiquette_lyranni_txt" value="Etiquette (Lyranni) Roll"/>
<input type="hidden" name="attr_etiquette_other_txt" value="Etiquette (Other) Roll"/>
<input type="hidden" name="attr_fasttalk_txt" value="Fast Talk Roll"/>
<input type="hidden" name="attr_fighting_brawl_txt" value="Brawl Roll"/>
<input type="hidden" name="attr_firearms_hg_txt" value="Pistol Roll"/>
<input type="hidden" name="attr_firearms_rifle_txt" value="Rifle/Shotgun Roll"/>
<input type="hidden" name="attr_first_aid_txt" value="First Aid Roll"/>
<input type="hidden" name="attr_forbidden_lore_txt" value="Forbidden Lore Roll"/>
<input type="hidden" name="attr_gunnery_txt" value="Gunnery Roll"/>
<input type="hidden" name="attr_heavy_weapons_txt" value="Heavy Weapons Roll"/>
<input type="hidden" name="attr_history_txt" value="History Roll"/>
<input type="hidden" name="attr_impersonation_txt" value="Impersonation Roll"/>
<input type="hidden" name="attr_instrument_txt" value="Instrument Roll"/>
<input type="hidden" name="attr_intimidate_txt" value="Intimidate Roll"/>
<input type="hidden" name="attr_insight_txt" value="Insight Roll"/>
<input type="hidden" name="attr_investigation_txt" value="Investigation Roll"/>
<input type="hidden" name="attr_jump_txt" value="Jump Roll"/>
<input type="hidden" name="attr_law_txt" value="Law Roll"/>
<input type="hidden" name="attr_libraryuse_txt" value="Library Use Roll"/>
<input type="hidden" name="attr_listen_txt" value="Listen Roll"/>
<input type="hidden" name="attr_locksmith_txt" value="Locksmith Roll"/>
<input type="hidden" name="attr_mechrepair_txt" value="Mech. Repair Roll"/>
<input type="hidden" name="attr_mechanics_txt" value="Mech. Repair Roll"/>
<input type="hidden" name="attr_medicine_txt" value="Medicine Roll"/>
<input type="hidden" name="attr_melee_weapons_txt" value="Melee Weapons Roll"/>
<input type="hidden" name="attr_naturalworld_txt" value="Natural World Roll"/>
<input type="hidden" name="attr_navigate_txt" value="Navigate Roll"/>
<input type="hidden" name="attr_occult_txt" value="Occult Roll"/>
<input type="hidden" name="attr_ophvmachine_txt" value="Op. Hv. Machine Roll"/>
<input type="hidden" name="attr_perception_txt" value="Perception Roll"/>
<input type="hidden" name="attr_persuade_txt" value="Persuade Roll"/>
<input type="hidden" name="attr_physics_txt" value="Physics Roll"/>
<input type="hidden" name="attr_pilotaircraft_txt" value="Pilot Aircraft"/>
<input type="hidden" name="attr_pilotboat_txt" value="Pilot Boat"/>
<input type="hidden" name="attr_psychology_txt" value="Psychology Roll"/>
<input type="hidden" name="attr_psychoanalysis_txt" value="Psychoanalysis Roll"/>
<input type="hidden" name="attr_ride_txt" value="Ride Roll"/>
<input type="hidden" name="attr_security_txt" value="Security System Roll"/>
<input type="hidden" name="attr_recitation_txt" value="Recitation Roll"/>
<input type="hidden" name="attr_singing_txt" value="Singing Roll"/>
<input type="hidden" name="attr_voice_txt" value="Voice Roll"/>
<input type="hidden" name="attr_sleightofhand_txt" value="Sleight of Hand Roll"/>
<input type="hidden" name="attr_slicing_txt" value="Slicing Roll"/>
<input type="hidden" name="attr_spirit_lore_txt" value="Spirit Lore Roll"/>
<input type="hidden" name="attr_spothidden_txt" value="Spot Hidden Roll"/>
<input type="hidden" name="attr_stealth_txt" value="Stealth Roll"/>
<input type="hidden" name="attr_streetwise_txt" value="Streetwise Roll"/>
<input type="hidden" name="attr_survival_urban_txt" value="Survival (Urban) Roll"/>
<input type="hidden" name="attr_survival_wilderness_txt" value="Survival (Wilderness) Roll"/>
<input type="hidden" name="attr_swim_txt" value="Swim Roll"/>
<input type="hidden" name="attr_throw_txt" value="Throw Roll"/>
<input type="hidden" name="attr_track_txt" value="Track Roll"/>
<input type="hidden" name="attr_veil_lore_txt" value="Veil Lore Roll"/>
<input type="hidden" name="attr_unarmed_txt" value="Unarmed Attack"/>
<input type="hidden" name="attr_ac" value="Arcane Capacity"/>

<!----------------------------------------------------------------ROLL TEMPLATES -------------------------------------------------------------------------->

<!--
&{template:coc-dice-roll} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-dice-roll">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr>
			<td class="template_label" data-i18n="rolled">Rolled:</td>
			<td class="template_value">{{diceroll}}</td>
		</tr>
    </table>
</rolltemplate>

<!--
Body Hit Location---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-body-hit-loc">
    <table>
        <caption data-i18n="body-hit-location">Body Hit Location</caption>
	        <tr>
            	<!--   -->
                {{#rollTotal() roll1 1}}
                  <td class="template_label" data-i18n="right-leg" style="font-weight:bold"><b>Right Leg</b></td>
                {{/rollTotal() roll1 1}}
                <!--   -->
                {{#rollTotal() roll1 2}}
                  <td class="template_label" data-i18n="right-leg" style="font-weight:bold"><b>Right Leg</b></td>
                {{/rollTotal() roll1 2}}
                <!--   -->
                {{#rollTotal() roll1 3}}
                  <td class="template_label" data-i18n="right-leg" style="font-weight:bold"><b>Right Leg</b></td>
                {{/rollTotal() roll1 3}}
                <!--   -->
                {{#rollTotal() roll1 4}}
                  <td class="template_label" data-i18n="left-leg" style="font-weight:bold"><b>Left Leg</b></td>
                {{/rollTotal() roll1 4}}
                <!--   -->
                {{#rollTotal() roll1 5}}
                  <td class="template_label" data-i18n="left-leg" style="font-weight:bold"><b>Left Leg</b></td>
                {{/rollTotal() roll1 5}}
                <!--   -->
                {{#rollTotal() roll1 6}}
                  <td class="template_label" data-i18n="left-leg" style="font-weight:bold"><b>Left Leg</b></td>
                {{/rollTotal() roll1 6}}
                <!--   -->
                {{#rollTotal() roll1 7}}
                  <td class="template_label" data-i18n="abdomen" style="font-weight:bold"><b>Abdomen</b></td>
                {{/rollTotal() roll1 7}}
                <!--   -->
                {{#rollTotal() roll1 8}}
                  <td class="template_label" data-i18n="abdomen" style="font-weight:bold"><b>Abdomen</b></td>
                {{/rollTotal() roll1 8}}
                <!--   -->
                {{#rollTotal() roll1 9}}
                  <td class="template_label" data-i18n="abdomen" style="font-weight:bold"><b>Abdomen</b></td>
                {{/rollTotal() roll1 9}}
                <!--   -->
                {{#rollTotal() roll1 10}}
                  <td class="template_label" data-i18n="abdomen" style="font-weight:bold"><b>Abdomen</b></td>
                {{/rollTotal() roll1 10}}
                <!--   -->
                {{#rollTotal() roll1 11}}
                  <td class="template_label" data-i18n="chest" style="font-weight:bold"><b>Chest</b></td>
                {{/rollTotal() roll1 11}}
                <!--   -->
                {{#rollTotal() roll1 12}}
                  <td class="template_label" data-i18n="chest" style="font-weight:bold"><b>Chest</b></td>
                {{/rollTotal() roll1 12}}
                <!--   -->
                {{#rollTotal() roll1 13}}
                  <td class="template_label" data-i18n="chest" style="font-weight:bold"><b>Chest</b></td>
                {{/rollTotal() roll1 13}}
                <!--   -->
                {{#rollTotal() roll1 14}}
                  <td class="template_label" data-i18n="chest" style="font-weight:bold"><b>Chest</b></td>
                {{/rollTotal() roll1 14}}
                <!--   -->
                {{#rollTotal() roll1 15}}
                  <td class="template_label" data-i18n="chest" style="font-weight:bold"><b>Chest</b></td>
                {{/rollTotal() roll1 15}}
                <!--   -->
                {{#rollTotal() roll1 16}}
                  <td class="template_label" data-i18n="right-arm" style="font-weight:bold"><b>Right Arm</b></td>
                {{/rollTotal() roll1 16}}
                <!--   -->
                {{#rollTotal() roll1 17}}
                  <td class="template_label" data-i18n="right-arm" style="font-weight:bold"><b>Right Arm</b></td>
                {{/rollTotal() roll1 17}}
                <!--   -->
                {{#rollTotal() roll1 18}}
                  <td class="template_label" data-i18n="left-arm" style="font-weight:bold"><b>Left Arm</b></td>
                {{/rollTotal() roll1 18}}
                <!--   -->
                {{#rollTotal() roll1 19}}
                  <td class="template_label" data-i18n="left-arm" style="font-weight:bold"><b>Left Arm</b></td>
                {{/rollTotal() roll1 19}}
                <!--   -->
                {{#rollTotal() roll1 20}}
                  <td class="template_label" data-i18n="head" style="font-weight:bold"><b>Head</b></td>
                {{/rollTotal() roll1 20}}
            </tr>
    </table>
</rolltemplate>

<!--
&{template:coc-defence} {{name=Test}} {{success=[[50]]}} {{hard=[[floor(50/2)]]}} {{extreme=[[floor(50/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}}
-->
<rolltemplate class="sheet-rolltemplate-coc-defence">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr><td class="template_label">Value:</td><td class="template_value">{{success}}/{{hard}}/{{extreme}}</td></tr>
        <tr><td class="template_label">Rolled:</td><td class="template_value">{{roll1}}, {{roll2}}, {{roll3}}</td></tr>
        <tr style="background:#DFF0D8;">
            <td class="template_label">+2:</td>
            <!-- Is roll2 less than roll1 -->
            {{#rollLess() roll2 roll1}}
              <!-- Is roll3 less than roll2-->
              {{#rollLess() roll3 roll2}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll2}}
              <!-- Is roll2 less than roll3 -->
              {{#rollLess() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollLess() roll2 roll3}}
              <!-- Are roll2 and roll3 equal-->
              {{#rollTotal() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollTotal() roll2 roll3}}
            {{/rollLess() roll2 roll1}}
            <!-- Is roll1 less than roll2 -->
            {{#rollLess() roll1 roll2}}
              <!-- Is roll3 less than roll1-->
              {{#rollLess() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll1}}
              <!-- Is roll1 less than roll3 -->
              {{#rollLess() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollLess() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollLess() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- Is roll3 less than roll1-->
              {{#rollLess() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll1}}
              <!-- Is roll1 less than roll3 -->
              {{#rollLess() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollLess() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#D9EDF7;">
            <td class="template_label">+1:</td>
            <!-- Is roll2 lower than roll1 -->
            {{#rollLess() roll2 roll1}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll2 1}}
                <td class="template_value"><b>Critical</b></td>
              {{/rollTotal() roll2 1}}
              <!-- Is Success -->
              {{#rollBetween() roll2 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll2 hard}}
                  <td class="template_value">Success</td>
                {{/rollGreater() roll2 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll2 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll2 extreme}}
                    <td class="template_value">Hard</td>
                  {{/rollGreater() roll2 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll2 2 extreme}}
                    <td class="template_value"><b>Extreme</b></td>
                  {{/rollBetween() roll2 2 extreme}}
                {{/rollBetween() roll2 2 hard}}
              {{/rollBetween() roll2 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll2 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll2 100}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollTotal() roll2 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 100}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll2 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll2 95}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollGreater() roll2 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 96}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll2 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll2 success}}
            {{/rollLess() roll2 roll1}}
            <!-- Is roll1 lower than roll2 -->
            {{#rollLess() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b>Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b>Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollLess() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b>Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b>Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#D3D3D3;">
            <td class="template_label">&nbsp;&nbsp;0:</td>
            <!-- 01 is always Critical -->
            {{#rollTotal() roll1 1}}
              <td class="template_value"><b>Critical</b></td>
            {{/rollTotal() roll1 1}}
            <!-- Is Success -->
            {{#rollBetween() roll1 2 success}}
              <!-- Is Standard -->
              {{#rollGreater() roll1 hard}}
                <td class="template_value">Success</td>
              {{/rollGreater() roll1 hard}}
              <!-- Is Hard or Extreme -->
              {{#rollBetween() roll1 2 hard}}
                <!-- Is Hard -->
                {{#rollGreater() roll1 extreme}}
                  <td class="template_value">Hard</td>
                {{/rollGreater() roll1 extreme}}
                <!-- Is Extreme -->
                {{#rollBetween() roll1 2 extreme}}
                  <td class="template_value"><b>Extreme</b></td>
                {{/rollBetween() roll1 2 extreme}}
              {{/rollBetween() roll1 2 hard}}
            {{/rollBetween() roll1 2 success}}
            <!-- Is Not Success -->
            {{#rollGreater() roll1 success}}
              <!-- Is skill >= 50 -->
              {{#rollGreater() success 49}}
                <!-- Is Fumble -->
                {{#rollTotal() roll1 100}}
                  <td class="template_value"><b>Fumble</b></td>
                {{/rollTotal() roll1 100}}
                <!-- Is Fail -->
                {{#rollLess() roll1 100}}
                  <td class="template_value">Fail</td>
                {{/rollLess() roll1 100}}
              {{/rollGreater() success 49}}
              <!-- Is skill < 50 -->
              {{#rollLess() success 50}}
                <!-- Is Fumble -->
                {{#rollGreater() roll1 95}}
                  <td class="template_value"><b>Fumble</b></td>
                {{/rollGreater() roll1 95}}
                <!-- Is Fail -->
                {{#rollLess() roll1 96}}
                  <td class="template_value">Fail</td>
                {{/rollLess() roll1 96}}
              {{/rollLess() success 50}}
            {{/rollGreater() roll1 success}}
        </tr>
        <tr style="background:#FCF8E3;">
            <td class="template_label">-1:</td>
            <!-- Is roll2 greater than roll1 -->
            {{#rollGreater() roll2 roll1}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll2 1}}
                <td class="template_value"><b>Critical</b></td>
              {{/rollTotal() roll2 1}}
              <!-- Is Success -->
              {{#rollBetween() roll2 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll2 hard}}
                  <td class="template_value">Success</td>
                {{/rollGreater() roll2 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll2 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll2 extreme}}
                    <td class="template_value">Hard</td>
                  {{/rollGreater() roll2 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll2 2 extreme}}
                    <td class="template_value"><b>Extreme</b></td>
                  {{/rollBetween() roll2 2 extreme}}
                {{/rollBetween() roll2 2 hard}}
              {{/rollBetween() roll2 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll2 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll2 100}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollTotal() roll2 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 100}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll2 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll2 95}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollGreater() roll2 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 96}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll2 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll2 success}}
            {{/rollGreater() roll2 roll1}}
            <!-- Is roll1 greater than roll2 -->
            {{#rollGreater() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b>Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b>Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollGreater() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b>Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b>Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b>Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#F2DEDE;">
            <td class="template_label">-2:</td>
            <!-- Is roll2 greater than roll1 -->
            {{#rollGreater() roll2 roll1}}
              <!-- Is roll3 greater than roll2-->
              {{#rollGreater() roll3 roll2}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll2}}
              <!-- Is roll2 greater than roll3 -->
              {{#rollGreater() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollGreater() roll2 roll3}}
              <!-- Are roll2 and roll3 equal-->
              {{#rollTotal() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollTotal() roll2 roll3}}
            {{/rollGreater() roll2 roll1}}
            <!-- Is roll1 greater than roll2 -->
            {{#rollGreater() roll1 roll2}}
              <!-- Is roll3 greater than roll1-->
              {{#rollGreater() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll1}}
              <!-- Is roll1 greater than roll3 -->
              {{#rollGreater() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollGreater() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollGreater() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- Is roll3 greater than roll1-->
              {{#rollGreater() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll1}}
              <!-- Is roll1 greater than roll3 -->
              {{#rollGreater() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollGreater() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr><td class="template_label">Def:</td><td class="template_value">{{defence}}</td></tr>
    </table>
</rolltemplate>

<!--
&{template:coc-defence-1} {{name=Test}} {{success=[[50]]}} {{hard=[[floor(50/2)]]}} {{extreme=[[floor(50/5)]]}} {{roll1=[[1d100]]}}
-->
<rolltemplate class="sheet-rolltemplate-coc-defence-1">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr><td class="template_label">Value:</td><td class="template_value">{{success}}/{{hard}}/{{extreme}}</td></tr>
        <tr><td class="template_label">Rolled:</td><td class="template_value">{{roll1}}</td></tr>
        <tr style="background:#BEBEBE;">
            <td class="template_label">Result:</td>
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td style="background:Lime;" class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td style="background:DarkGreen;" class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td style="background:Green;" class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td style="background:LightGreen;" class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td style="background:Red;" class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td style="background:Crimson;" class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td style="background:Red;" class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td style="background:Crimson;" class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
        </tr>
        <tr>
		<td class="template_label">Def:</td><td class="template_value">{{defence}}</td>
	</tr>
    </table>
</rolltemplate>

<!--
&{template:coc-vehicleattack} ---------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-vehicleattack">
    <table>
 		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr><td class="template_label">Value:</td><td class="template_value">{{success}}/{{hard}}/{{extreme}}</td></tr>
        <tr><td class="template_label">Rolled:</td><td class="template_value">{{roll1}}</td></tr>
        <tr style="background:#BEBEBE;">
            <td class="template_label">Result:</td>
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td style="background:Lime;" class="template_value"><b>Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td style="background:DarkGreen;" class="template_value">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td style="background:Green;" class="template_value">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td style="background:LightGreen;" class="template_value"><b>Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td style="background:Red;" class="template_value"><b>Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td style="background:Crimson;" class="template_value">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td style="background:Red;" class="template_value"><b>Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td style="background:Crimson;" class="template_value">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
        </tr>
        <tr>
		<td class="template_label">Build Dam:</td><td class="template_value">{{builddam}}</td>
	</tr>
    </table>
</rolltemplate>

<!--
&{template:coc-defence-2} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-defence-2">
    <table>
 		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr>
		<td class="template_label">Def:</td><td class="template_value">{{defence}}</td>
	</tr>
    </table>
</rolltemplate>

<!--
&{template:coc-minionattack-} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-minionattack">

    <table>
        <caption>{{name}}</caption>
        <tr><td class="template_label" data-i18n="value">Value:</td><td class="template_value">{{success}}/{{hard}}/{{extreme}}</td></tr>
        <tr><td class="template_label" data-i18n="rolled">Rolled:</td><td class="template_value">{{roll1}}</td></tr>
        <tr style="background:#BEBEBE;">
            <td class="template_label" data-i18n="result">Result:</td>
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td style="background:Lime;" class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td style="background:DarkGreen;" class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td style="background:Green;" class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td style="background:LightGreen;" class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td style="background:Red;" class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td style="background:Crimson;" class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td style="background:Red;" class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td style="background:Crimson;" class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
        </tr>
        <tr>
			<td class="template_label" data-i18n="dam">Dam:</td><td class="template_value">{{damage}}</td>
		</tr>
    </table>
</rolltemplate>

<!--
&{template:coc-miniondef} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-miniondef">
    <table>
 		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr>
		<td class="template_label">Def:</td><td class="template_value">{{defence}}</td>
	</tr>
    </table>
</rolltemplate>

<!--
&{template:coc} {{name=Test}} {{success=[[50]]}} {{hard=[[floor(50/2)]]}} {{extreme=[[floor(50/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} {{roll3=[[1d100]]}} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr>
            <td class="template_label" data-i18n="value">Value:</td>
            <td class="template_value">{{success}}/{{hard}}/{{extreme}}</td>
        </tr>
        <tr>
            <td class="template_label" data-i18n="rolled">Rolled:</td>
            <td class="template_value">{{roll1}}, {{roll2}}, {{roll3}}</td>
        </tr>
        <tr style="background:#DFF0D8;">
            <td class="template_label">+2:</td>
            <!-- Is roll2 less than roll1 -->
            {{#rollLess() roll2 roll1}}
              <!-- Is roll3 less than roll2-->
              {{#rollLess() roll3 roll2}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll2}}
              <!-- Is roll2 less than roll3 -->
              {{#rollLess() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollLess() roll2 roll3}}
              <!-- Are roll2 and roll3 equal-->
              {{#rollTotal() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollTotal() roll2 roll3}}
            {{/rollLess() roll2 roll1}}
            <!-- Is roll1 less than roll2 -->
            {{#rollLess() roll1 roll2}}
              <!-- Is roll3 less than roll1-->
              {{#rollLess() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll1}}
              <!-- Is roll1 less than roll3 -->
              {{#rollLess() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollLess() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollLess() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- Is roll3 less than roll1-->
              {{#rollLess() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll1}}
              <!-- Is roll1 less than roll3 -->
              {{#rollLess() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollLess() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#D9EDF7;">
            <td class="template_label">+1:</td>
            <!-- Is roll2 lower than roll1 -->
            {{#rollLess() roll2 roll1}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll2 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll2 1}}
              <!-- Is Success -->
              {{#rollBetween() roll2 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll2 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll2 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll2 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll2 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll2 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll2 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll2 2 extreme}}
                {{/rollBetween() roll2 2 hard}}
              {{/rollBetween() roll2 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll2 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll2 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll2 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll2 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll2 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll2 success}}
            {{/rollLess() roll2 roll1}}
            <!-- Is roll1 lower than roll2 -->
            {{#rollLess() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollLess() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#D3D3D3;">
            <td class="template_label">&nbsp;&nbsp;0:</td>
            <!-- 01 is always Critical -->
            {{#rollTotal() roll1 1}}
              <td class="template_value"><b data-i18n="critical">Critical</b></td>
            {{/rollTotal() roll1 1}}
            <!-- Is Success -->
            {{#rollBetween() roll1 2 success}}
              <!-- Is Standard -->
              {{#rollGreater() roll1 hard}}
                <td class="template_value" data-i18n="success">Success</td>
              {{/rollGreater() roll1 hard}}
              <!-- Is Hard or Extreme -->
              {{#rollBetween() roll1 2 hard}}
                <!-- Is Hard -->
                {{#rollGreater() roll1 extreme}}
                  <td class="template_value" data-i18n="hard">Hard</td>
                {{/rollGreater() roll1 extreme}}
                <!-- Is Extreme -->
                {{#rollBetween() roll1 2 extreme}}
                  <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                {{/rollBetween() roll1 2 extreme}}
              {{/rollBetween() roll1 2 hard}}
            {{/rollBetween() roll1 2 success}}
            <!-- Is Not Success -->
            {{#rollGreater() roll1 success}}
              <!-- Is skill >= 50 -->
              {{#rollGreater() success 49}}
                <!-- Is Fumble -->
                {{#rollTotal() roll1 100}}
                  <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                {{/rollTotal() roll1 100}}
                <!-- Is Fail -->
                {{#rollLess() roll1 100}}
                  <td class="template_value" data-i18n="fail">Fail</td>
                {{/rollLess() roll1 100}}
              {{/rollGreater() success 49}}
              <!-- Is skill < 50 -->
              {{#rollLess() success 50}}
                <!-- Is Fumble -->
                {{#rollGreater() roll1 95}}
                  <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                {{/rollGreater() roll1 95}}
                <!-- Is Fail -->
                {{#rollLess() roll1 96}}
                  <td class="template_value" data-i18n="fail">Fail</td>
                {{/rollLess() roll1 96}}
              {{/rollLess() success 50}}
            {{/rollGreater() roll1 success}}
        </tr>
        <tr style="background:#FCF8E3;">
            <td class="template_label">-1:</td>
            <!-- Is roll2 greater than roll1 -->
            {{#rollGreater() roll2 roll1}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll2 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll2 1}}
              <!-- Is Success -->
              {{#rollBetween() roll2 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll2 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll2 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll2 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll2 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll2 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll2 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll2 2 extreme}}
                {{/rollBetween() roll2 2 hard}}
              {{/rollBetween() roll2 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll2 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll2 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll2 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll2 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll2 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll2 success}}
            {{/rollGreater() roll2 roll1}}
            <!-- Is roll1 greater than roll2 -->
            {{#rollGreater() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollGreater() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#F2DEDE;">
            <td class="template_label">-2:</td>
            <!-- Is roll2 greater than roll1 -->
            {{#rollGreater() roll2 roll1}}
              <!-- Is roll3 greater than roll2-->
              {{#rollGreater() roll3 roll2}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll2}}
              <!-- Is roll2 greater than roll3 -->
              {{#rollGreater() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollGreater() roll2 roll3}}
              <!-- Are roll2 and roll3 equal-->
              {{#rollTotal() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollTotal() roll2 roll3}}
            {{/rollGreater() roll2 roll1}}
            <!-- Is roll1 greater than roll2 -->
            {{#rollGreater() roll1 roll2}}
              <!-- Is roll3 greater than roll1-->
              {{#rollGreater() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll1}}
              <!-- Is roll1 greater than roll3 -->
              {{#rollGreater() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollGreater() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollGreater() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- Is roll3 greater than roll1-->
              {{#rollGreater() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll1}}
              <!-- Is roll1 greater than roll3 -->
              {{#rollGreater() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollGreater() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollTotal() roll1 roll2}}
        </tr>
    </table>
</rolltemplate>

<!--
&{template:coc-bonus} {{name=Test}} {{success=[[50]]}} {{hard=[[floor(50/2)]]}} {{extreme=[[floor(50/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-bonus">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr>
            <td class="template_label" data-i18n="value">Value:</td>
            <td class="template_value">{{success}}/{{hard}}/{{extreme}}</td>
        </tr>
        <tr>
            <td class="template_label" data-i18n="rolled">Rolled:</td>
            <td class="template_value">{{roll1}}, {{roll2}}</td>
        </tr>
         <tr style="background:#D9EDF7;">
            <td class="template_label">+1:</td>
            <!-- Is roll2 lower than roll1 -->
            {{#rollLess() roll2 roll1}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll2 1}}
                <td class="template_value_critical"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll2 1}}
              <!-- Is Success -->
              {{#rollBetween() roll2 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll2 hard}}
                  <td class="template_value_success" data-i18n="success">Success</td>
                {{/rollGreater() roll2 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll2 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll2 extreme}}
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll2 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll2 2 extreme}}
                    <td class="template_value_extreme"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll2 2 extreme}}
                {{/rollBetween() roll2 2 hard}}
              {{/rollBetween() roll2 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll2 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll2 100}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll2 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 100}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll2 95}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll2 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 96}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll2 success}}
            {{/rollLess() roll2 roll1}}
            <!-- Is roll1 lower than roll2 -->
            {{#rollLess() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value_critical"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value_success" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value_extreme"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollLess() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value_critical"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value_success" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value_extreme"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#D3D3D3;">
            <td class="template_label">&nbsp;&nbsp;0:</td>
            <!-- 01 is always Critical -->
            {{#rollTotal() roll1 1}}
              <td class="template_value_critical"><b data-i18n="critical">Critical</b></td>
            {{/rollTotal() roll1 1}}
            <!-- Is Success -->
            {{#rollBetween() roll1 2 success}}
              <!-- Is Standard -->
              {{#rollGreater() roll1 hard}}
                <td class="template_value_success" data-i18n="success">Success</td>
              {{/rollGreater() roll1 hard}}
              <!-- Is Hard or Extreme -->
              {{#rollBetween() roll1 2 hard}}
                <!-- Is Hard -->
                {{#rollGreater() roll1 extreme}}
                  <td class="template_value_hard" data-i18n="hard">Hard</td>
                {{/rollGreater() roll1 extreme}}
                <!-- Is Extreme -->
                {{#rollBetween() roll1 2 extreme}}
                  <td class="template_value_extreme"><b data-i18n="extreme">Extreme</b></td>
                {{/rollBetween() roll1 2 extreme}}
              {{/rollBetween() roll1 2 hard}}
            {{/rollBetween() roll1 2 success}}
            <!-- Is Not Success -->
            {{#rollGreater() roll1 success}}
              <!-- Is skill >= 50 -->
              {{#rollGreater() success 49}}
                <!-- Is Fumble -->
                {{#rollTotal() roll1 100}}
                  <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                {{/rollTotal() roll1 100}}
                <!-- Is Fail -->
                {{#rollLess() roll1 100}}
                  <td class="template_value_fail" data-i18n="fail">Fail</td>
                {{/rollLess() roll1 100}}
              {{/rollGreater() success 49}}
              <!-- Is skill < 50 -->
              {{#rollLess() success 50}}
                <!-- Is Fumble -->
                {{#rollGreater() roll1 95}}
                  <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                {{/rollGreater() roll1 95}}
                <!-- Is Fail -->
                {{#rollLess() roll1 96}}
                  <td class="template_value_fail" data-i18n="fail">Fail</td>
                {{/rollLess() roll1 96}}
              {{/rollLess() success 50}}
            {{/rollGreater() roll1 success}}
        </tr>
    </table>
</rolltemplate>

<!--
&{template:coc-penalty} {{name=Test}} {{success=[[50]]}} {{hard=[[floor(50/2)]]}} {{extreme=[[floor(50/5)]]}} {{roll1=[[1d100]]}} {{roll2=[[1d100]]}} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-penalty">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr>
            <td class="template_label" data-i18n="value">Value:</td>
            <td class="template_value">{{success}}/{{hard}}/{{extreme}}</td>
        </tr>
        <tr>
            <td class="template_label" data-i18n="rolled">Rolled:</td>
            <td class="template_value">{{roll1}}, {{roll2}}</td>
        </tr>
        <tr style="background:#D3D3D3;">
            <td class="template_label">&nbsp;&nbsp;0:</td>
            <!-- 01 is always Critical -->
            {{#rollTotal() roll1 1}}
              <td class="template_value_critical"><b data-i18n="critical">Critical</b></td>
            {{/rollTotal() roll1 1}}
            <!-- Is Success -->
            {{#rollBetween() roll1 2 success}}
              <!-- Is Standard -->
              {{#rollGreater() roll1 hard}}
                <td class="template_value_success" data-i18n="success">Success</td>
              {{/rollGreater() roll1 hard}}
              <!-- Is Hard or Extreme -->
              {{#rollBetween() roll1 2 hard}}
                <!-- Is Hard -->
                {{#rollGreater() roll1 extreme}}
                  <td class="template_value_hard" data-i18n="hard">Hard</td>
                {{/rollGreater() roll1 extreme}}
                <!-- Is Extreme -->
                {{#rollBetween() roll1 2 extreme}}
                  <td class="template_value_extreme"><b data-i18n="extreme">Extreme</b></td>
                {{/rollBetween() roll1 2 extreme}}
              {{/rollBetween() roll1 2 hard}}
            {{/rollBetween() roll1 2 success}}
            <!-- Is Not Success -->
            {{#rollGreater() roll1 success}}
              <!-- Is skill >= 50 -->
              {{#rollGreater() success 49}}
                <!-- Is Fumble -->
                {{#rollTotal() roll1 100}}
                  <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                {{/rollTotal() roll1 100}}
                <!-- Is Fail -->
                {{#rollLess() roll1 100}}
                  <td class="template_value_fail" data-i18n="fail">Fail</td>
                {{/rollLess() roll1 100}}
              {{/rollGreater() success 49}}
              <!-- Is skill < 50 -->
              {{#rollLess() success 50}}
                <!-- Is Fumble -->
                {{#rollGreater() roll1 95}}
                  <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                {{/rollGreater() roll1 95}}
                <!-- Is Fail -->
                {{#rollLess() roll1 96}}
                  <td class="template_value_fail" data-i18n="fail">Fail</td>
                {{/rollLess() roll1 96}}
              {{/rollLess() success 50}}
            {{/rollGreater() roll1 success}}
        </tr>
        <tr style="background:#FCF8E3;">
            <td class="template_label">-1:</td>
            <!-- Is roll2 greater than roll1 -->
            {{#rollGreater() roll2 roll1}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll2 1}}
                <td class="template_value_critical"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll2 1}}
              <!-- Is Success -->
              {{#rollBetween() roll2 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll2 hard}}
                  <td class="template_value_success" data-i18n="success">Success</td>
                {{/rollGreater() roll2 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll2 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll2 extreme}}
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll2 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll2 2 extreme}}
                    <td class="template_value_extreme"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll2 2 extreme}}
                {{/rollBetween() roll2 2 hard}}
              {{/rollBetween() roll2 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll2 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll2 100}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll2 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 100}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll2 95}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll2 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 96}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll2 success}}
            {{/rollGreater() roll2 roll1}}
            <!-- Is roll1 greater than roll2 -->
            {{#rollGreater() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value_critical"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value_success" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value_extreme"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollGreater() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value_critical"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value_success" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value_extreme"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollTotal() roll1 roll2}}
        </tr>

    </table>
</rolltemplate>

<!--
&{template:coc-attack} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-attack">
    <table>
        {{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}
        <tr><td class="template_label" data-i18n="value">Value:</td><td class="template_value">{{success}}/{{hard}}/{{extreme}}</td></tr>
        {{#malf}}
            <tr><td class="template_label" data-i18n="malf">Malf:</td><td class="template_value">{{malf}}</td></tr>
        {{/malf}}
        <tr><td class="template_label" data-i18n="rolled">Rolled:</td><td class="template_value">{{roll1}}, {{roll2}}, {{roll3}}</td></tr>
        <tr style="background:#DFF0D8;">
            <td class="template_label">+2:</td>
            <!-- Is roll2 less than roll1 -->
            {{#rollLess() roll2 roll1}}
              <!-- Is roll3 less than roll2-->
              {{#rollLess() roll3 roll2}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll2}}
              <!-- Is roll2 less than roll3 -->
              {{#rollLess() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollLess() roll2 roll3}}
              <!-- Are roll2 and roll3 equal-->
              {{#rollTotal() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollTotal() roll2 roll3}}
            {{/rollLess() roll2 roll1}}
            <!-- Is roll1 less than roll2 -->
            {{#rollLess() roll1 roll2}}
              <!-- Is roll3 less than roll1-->
              {{#rollLess() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll1}}
              <!-- Is roll1 less than roll3 -->
              {{#rollLess() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollLess() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollLess() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- Is roll3 less than roll1-->
              {{#rollLess() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollLess() roll3 roll1}}
              <!-- Is roll1 less than roll3 -->
              {{#rollLess() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollLess() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#D9EDF7;">
            <td class="template_label">+1:</td>
            <!-- Is roll2 lower than roll1 -->
            {{#rollLess() roll2 roll1}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll2 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll2 1}}
              <!-- Is Success -->
              {{#rollBetween() roll2 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll2 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll2 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll2 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll2 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll2 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll2 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll2 2 extreme}}
                {{/rollBetween() roll2 2 hard}}
              {{/rollBetween() roll2 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll2 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll2 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll2 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll2 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll2 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll2 success}}
            {{/rollLess() roll2 roll1}}
            <!-- Is roll1 lower than roll2 -->
            {{#rollLess() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollLess() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#D3D3D3;">
            <td class="template_label">&nbsp;&nbsp;0:</td>
            <!-- 01 is always Critical -->
            {{#rollTotal() roll1 1}}
              <td class="template_value"><b data-i18n="critical">Critical</b></td>
            {{/rollTotal() roll1 1}}
            <!-- Is Success -->
            {{#rollBetween() roll1 2 success}}
              <!-- Is Standard -->
              {{#rollGreater() roll1 hard}}
                <td class="template_value" data-i18n="success">Success</td>
              {{/rollGreater() roll1 hard}}
              <!-- Is Hard or Extreme -->
              {{#rollBetween() roll1 2 hard}}
                <!-- Is Hard -->
                {{#rollGreater() roll1 extreme}}
                  <td class="template_value" data-i18n="hard">Hard</td>
                {{/rollGreater() roll1 extreme}}
                <!-- Is Extreme -->
                {{#rollBetween() roll1 2 extreme}}
                  <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                {{/rollBetween() roll1 2 extreme}}
              {{/rollBetween() roll1 2 hard}}
            {{/rollBetween() roll1 2 success}}
            <!-- Is Not Success -->
            {{#rollGreater() roll1 success}}
              <!-- Is skill >= 50 -->
              {{#rollGreater() success 49}}
                <!-- Is Fumble -->
                {{#rollTotal() roll1 100}}
                  <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                {{/rollTotal() roll1 100}}
                <!-- Is Fail -->
                {{#rollLess() roll1 100}}
                  <td class="template_value" data-i18n="fail">Fail</td>
                {{/rollLess() roll1 100}}
              {{/rollGreater() success 49}}
              <!-- Is skill < 50 -->
              {{#rollLess() success 50}}
                <!-- Is Fumble -->
                {{#rollGreater() roll1 95}}
                  <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                {{/rollGreater() roll1 95}}
                <!-- Is Fail -->
                {{#rollLess() roll1 96}}
                  <td class="template_value" data-i18n="fail">Fail</td>
                {{/rollLess() roll1 96}}
              {{/rollLess() success 50}}
            {{/rollGreater() roll1 success}}
        </tr>
        <tr style="background:#FCF8E3;">
            <td class="template_label">-1:</td>
            <!-- Is roll2 greater than roll1 -->
            {{#rollGreater() roll2 roll1}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll2 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll2 1}}
              <!-- Is Success -->
              {{#rollBetween() roll2 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll2 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll2 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll2 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll2 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll2 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll2 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll2 2 extreme}}
                {{/rollBetween() roll2 2 hard}}
              {{/rollBetween() roll2 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll2 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll2 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll2 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll2 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll2 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll2 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll2 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll2 success}}
            {{/rollGreater() roll2 roll1}}
            <!-- Is roll1 greater than roll2 -->
            {{#rollGreater() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollGreater() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- 01 is always Critical -->
              {{#rollTotal() roll1 1}}
                <td class="template_value"><b data-i18n="critical">Critical</b></td>
              {{/rollTotal() roll1 1}}
              <!-- Is Success -->
              {{#rollBetween() roll1 2 success}}
                <!-- Is Standard -->
                {{#rollGreater() roll1 hard}}
                  <td class="template_value" data-i18n="success">Success</td>
                {{/rollGreater() roll1 hard}}
                <!-- Is Hard or Extreme -->
                {{#rollBetween() roll1 2 hard}}
                  <!-- Is Hard -->
                  {{#rollGreater() roll1 extreme}}
                    <td class="template_value" data-i18n="hard">Hard</td>
                  {{/rollGreater() roll1 extreme}}
                  <!-- Is Extreme -->
                  {{#rollBetween() roll1 2 extreme}}
                    <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                  {{/rollBetween() roll1 2 extreme}}
                {{/rollBetween() roll1 2 hard}}
              {{/rollBetween() roll1 2 success}}
              <!-- Is Not Success -->
              {{#rollGreater() roll1 success}}
                <!-- Is skill >= 50 -->
                {{#rollGreater() success 49}}
                  <!-- Is Fumble -->
                  {{#rollTotal() roll1 100}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollTotal() roll1 100}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 100}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 100}}
                {{/rollGreater() success 49}}
                <!-- Is skill < 50 -->
                {{#rollLess() success 50}}
                  <!-- Is Fumble -->
                  {{#rollGreater() roll1 95}}
                    <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                  {{/rollGreater() roll1 95}}
                  <!-- Is Fail -->
                  {{#rollLess() roll1 96}}
                    <td class="template_value" data-i18n="fail">Fail</td>
                  {{/rollLess() roll1 96}}
                {{/rollLess() success 50}}
              {{/rollGreater() roll1 success}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr style="background:#F2DEDE;">
            <td class="template_label">-2:</td>
            <!-- Is roll2 greater than roll1 -->
            {{#rollGreater() roll2 roll1}}
              <!-- Is roll3 greater than roll2-->
              {{#rollGreater() roll3 roll2}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll2}}
              <!-- Is roll2 greater than roll3 -->
              {{#rollGreater() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollGreater() roll2 roll3}}
              <!-- Are roll2 and roll3 equal-->
              {{#rollTotal() roll2 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll2 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll2 1}}
                <!-- Is Success -->
                {{#rollBetween() roll2 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll2 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll2 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll2 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll2 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll2 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll2 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll2 2 extreme}}
                  {{/rollBetween() roll2 2 hard}}
                {{/rollBetween() roll2 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll2 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll2 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll2 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll2 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll2 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll2 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll2 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll2 success}}
              {{/rollTotal() roll2 roll3}}
            {{/rollGreater() roll2 roll1}}
            <!-- Is roll1 greater than roll2 -->
            {{#rollGreater() roll1 roll2}}
              <!-- Is roll3 greater than roll1-->
              {{#rollGreater() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll1}}
              <!-- Is roll1 greater than roll3 -->
              {{#rollGreater() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollGreater() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollGreater() roll1 roll2}}
            <!-- Are roll1 and roll2 equal-->
            {{#rollTotal() roll1 roll2}}
              <!-- Is roll3 greater than roll1-->
              {{#rollGreater() roll3 roll1}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll3 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll3 1}}
                <!-- Is Success -->
                {{#rollBetween() roll3 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll3 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll3 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll3 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll3 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll3 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll3 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll3 2 extreme}}
                  {{/rollBetween() roll3 2 hard}}
                {{/rollBetween() roll3 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll3 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll3 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll3 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll3 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll3 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll3 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll3 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll3 success}}
              {{/rollGreater() roll3 roll1}}
              <!-- Is roll1 greater than roll3 -->
              {{#rollGreater() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollGreater() roll1 roll3}}
              <!-- Are roll1 and roll3 equal-->
              {{#rollTotal() roll1 roll3}}
                <!-- 01 is always Critical -->
                {{#rollTotal() roll1 1}}
                  <td class="template_value"><b data-i18n="critical">Critical</b></td>
                {{/rollTotal() roll1 1}}
                <!-- Is Success -->
                {{#rollBetween() roll1 2 success}}
                  <!-- Is Standard -->
                  {{#rollGreater() roll1 hard}}
                    <td class="template_value" data-i18n="success">Success</td>
                  {{/rollGreater() roll1 hard}}
                  <!-- Is Hard or Extreme -->
                  {{#rollBetween() roll1 2 hard}}
                    <!-- Is Hard -->
                    {{#rollGreater() roll1 extreme}}
                      <td class="template_value" data-i18n="hard">Hard</td>
                    {{/rollGreater() roll1 extreme}}
                    <!-- Is Extreme -->
                    {{#rollBetween() roll1 2 extreme}}
                      <td class="template_value"><b data-i18n="extreme">Extreme</b></td>
                    {{/rollBetween() roll1 2 extreme}}
                  {{/rollBetween() roll1 2 hard}}
                {{/rollBetween() roll1 2 success}}
                <!-- Is Not Success -->
                {{#rollGreater() roll1 success}}
                  <!-- Is skill >= 50 -->
                  {{#rollGreater() success 49}}
                    <!-- Is Fumble -->
                    {{#rollTotal() roll1 100}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollTotal() roll1 100}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 100}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 100}}
                  {{/rollGreater() success 49}}
                  <!-- Is skill < 50 -->
                  {{#rollLess() success 50}}
                    <!-- Is Fumble -->
                    {{#rollGreater() roll1 95}}
                      <td class="template_value"><b data-i18n="fumble">Fumble</b></td>
                    {{/rollGreater() roll1 95}}
                    <!-- Is Fail -->
                    {{#rollLess() roll1 96}}
                      <td class="template_value" data-i18n="fail">Fail</td>
                    {{/rollLess() roll1 96}}
                  {{/rollLess() success 50}}
                {{/rollGreater() roll1 success}}
              {{/rollTotal() roll1 roll3}}
            {{/rollTotal() roll1 roll2}}
        </tr>
        <tr><td class="template_label" data-i18n="dam">Dam:</td><td class="template_value">{{damage}}</td></tr>
    </table>
</rolltemplate>

<!--  Smaller Template
&{template:coc-1} {{name=Test}} {{modifier=[[10]]}} {{success=[[50]]}} {{hard=[[floor(50/2)]]}} {{extreme=[[floor(50/5)]]}} {{roll1=[[1d100]]}}---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-1">
    <table>
        {{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}

        <tr>
            <td class="template_label" data-i18n="value">Value:</td>
            <td class="template_value">{{success}}/{{hard}}/{{extreme}}</td>
        </tr>

        <tr>
            <td class="template_label" data-i18n="rolled">Rolled:</td>
            <td class="template_value">{{roll1}}</td>
        </tr>

        <!-- Results Section -->

        {{#rollTotal() roll1 1}}
        <tr class="template_row_background">
            <td class="template_label" data-i18n="result">Result:</td>
            <td class="template_value_critical" data-i18n="critical">Critical</td>
        </tr>
        {{/rollTotal() roll1 1}}

        {{#rollBetween() roll1 2 success}}
            {{#rollGreater() roll1 hard}}
            <tr class="template_row_background">
                <td class="template_label" data-i18n="result">Result:</td>
                <td class="template_value_success" data-i18n="success">Success</td>
            </tr>
            {{/rollGreater() roll1 hard}}

            {{#rollBetween() roll1 2 hard}}
                {{#rollGreater() roll1 extreme}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                </tr>
                {{/rollGreater() roll1 extreme}}

                {{#rollBetween() roll1 2 extreme}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_extreme" data-i18n="extreme">Extreme</td>
                </tr>
                {{/rollBetween() roll1 2 extreme}}
            {{/rollBetween() roll1 2 hard}}
        {{/rollBetween() roll1 2 success}}

        {{#rollGreater() roll1 success}}
            {{#rollGreater() success 49}}
                {{#rollTotal() roll1 100}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fumble" data-i18n="fumble">Fumble</td>
                </tr>
                {{/rollTotal() roll1 100}}

                {{#rollLess() roll1 100}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                </tr>
                {{/rollLess() roll1 100}}
            {{/rollGreater() success 49}}

            {{#rollLess() success 50}}
                {{#rollGreater() roll1 95}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fumble"><b data-i18n="fumble">Fumble</b></td>
                </tr>
                {{/rollGreater() roll1 95}}

                {{#rollLess() roll1 96}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                </tr>
                {{/rollLess() roll1 96}}
            {{/rollLess() success 50}}
        {{/rollGreater() roll1 success}}

    </table>
</rolltemplate>

<!--
&{template:coc-attack-1} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-attack-1">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}

		<tr>
            <td class="template_label" data-i18n="value">Value:</td>
            <td class="template_value">{{success}}/{{hard}}/{{extreme}}</td>
        </tr>

        {{#malf}}
        <tr>
            <td class="template_label" data-i18n="malf">Malf:</td>
            <td class="template_value">{{malf}}</td>
        </tr>
        {{/malf}}

        <tr>
            <td class="template_label" data-i18n="rolled">Rolled:</td>
            <td class="template_value">{{roll1}}</td>
        </tr>

        <!-- Results Row(s) - Each condition outputs a full <tr> -->

        {{#rollTotal() roll1 1}}
        <tr class="template_row_background">
            <td class="template_label" data-i18n="result">Result:</td>
            <td class="template_value_critical" data-i18n="critical">Critical</td>
        </tr>
        {{/rollTotal() roll1 1}}

        {{#rollBetween() roll1 2 success}}
            {{#rollGreater() roll1 hard}}
            <tr class="template_row_background">
                <td class="template_label" data-i18n="result">Result:</td>
                <td class="template_value_success" data-i18n="success">Success</td>
            </tr>
            {{/rollGreater() roll1 hard}}

            {{#rollBetween() roll1 2 hard}}
                {{#rollGreater() roll1 extreme}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                </tr>
                {{/rollGreater() roll1 extreme}}

                {{#rollBetween() roll1 2 extreme}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_extreme" data-i18n="extreme">Extreme</td>
                </tr>
                {{/rollBetween() roll1 2 extreme}}
            {{/rollBetween() roll1 2 hard}}
        {{/rollBetween() roll1 2 success}}

        {{#rollGreater() roll1 success}}
            {{#rollGreater() success 49}}
                {{#rollTotal() roll1 100}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fumble" data-i18n="fumble">Fumble</td>
                </tr>
                {{/rollTotal() roll1 100}}

                {{#rollLess() roll1 100}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                </tr>
                {{/rollLess() roll1 100}}
            {{/rollGreater() success 49}}

            {{#rollLess() success 50}}
                {{#rollGreater() roll1 95}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fumble" data-i18n="fumble">Fumble</td>
                </tr>
                {{/rollGreater() roll1 95}}

                {{#rollLess() roll1 96}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                </tr>
                {{/rollLess() roll1 96}}
            {{/rollLess() success 50}}
        {{/rollGreater() roll1 success}}

        <!-- Damage and Other Info -->

        <tr>
            <td class="template_label" data-i18n="dam">Dam:</td>
            <td class="template_value">{{damage}}</td>
        </tr>

        {{#rollTotal() roll1 1}}
        <tr>
            <td class="template_label" data-i18n="extreme-damage">Extreme Dam:</td>
            <td class="template_value">{{extremedamage}}</td>
        </tr>
        {{/rollTotal() roll1 1}}

        {{#rollBetween() roll1 2 extreme}}
        <tr>
            <td class="template_label" data-i18n="extreme-damage">Extreme Dam:</td>
            <td class="template_value">{{extremedamage}}</td>
        </tr>
        {{/rollBetween() roll1 2 extreme}}

        {{#^rollTotal() strain 0}}
        <tr>
            <td class="template_label" data-i18n="strain">Strain:</td>
            <td class="template_value">{{strain}}</td>
        </tr>
        {{/^rollTotal() strain 0}}

    </table>
</rolltemplate>

<!--
&{template:coc-attack-1-impale} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-attack-1-impale">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}

		<tr>
            <td class="template_label" data-i18n="value">Value:</td>
            <td class="template_value">{{success}}/{{hard}}/{{extreme}}</td>
        </tr>

        {{#malf}}
        <tr>
            <td class="template_label" data-i18n="malf">Malf:</td>
            <td class="template_value">{{malf}}</td>
        </tr>
        {{/malf}}

        <tr>
            <td class="template_label" data-i18n="rolled">Rolled:</td>
            <td class="template_value">{{roll1}}</td>
        </tr>

        <!-- Results Row(s) - Each condition outputs a full <tr> -->

        {{#rollTotal() roll1 1}}
        <tr class="template_row_background">
            <td class="template_label" data-i18n="result">Result:</td>
            <td class="template_value_critical" data-i18n="critical">Critical</td>
        </tr>
        {{/rollTotal() roll1 1}}

        {{#rollBetween() roll1 2 success}}
            {{#rollGreater() roll1 hard}}
            <tr class="template_row_background">
                <td class="template_label" data-i18n="result">Result:</td>
                <td class="template_value_success" data-i18n="success">Success</td>
            </tr>
            {{/rollGreater() roll1 hard}}

            {{#rollBetween() roll1 2 hard}}
                {{#rollGreater() roll1 extreme}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                </tr>
                {{/rollGreater() roll1 extreme}}

                {{#rollBetween() roll1 2 extreme}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_extreme" data-i18n="extreme">Extreme</td>
                </tr>
                {{/rollBetween() roll1 2 extreme}}
            {{/rollBetween() roll1 2 hard}}
        {{/rollBetween() roll1 2 success}}

        {{#rollGreater() roll1 success}}
            {{#rollGreater() success 49}}
                {{#rollTotal() roll1 100}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fumble" data-i18n="fumble">Fumble</td>
                </tr>
                {{/rollTotal() roll1 100}}

                {{#rollLess() roll1 100}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                </tr>
                {{/rollLess() roll1 100}}
            {{/rollGreater() success 49}}

            {{#rollLess() success 50}}
                {{#rollGreater() roll1 95}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fumble" data-i18n="fumble">Fumble</td>
                </tr>
                {{/rollGreater() roll1 95}}

                {{#rollLess() roll1 96}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                </tr>
                {{/rollLess() roll1 96}}
            {{/rollLess() success 50}}
        {{/rollGreater() roll1 success}}

        <!-- Damage and Other Info -->

        <tr>
            <td class="template_label" data-i18n="dam">Dam:</td>
            <td class="template_value">{{damage}}</td>
        </tr>

        {{#rollTotal() roll1 1}}
        <tr>
            <td class="template_label" data-i18n="extreme-damage">Extreme Dam:</td>
            <td class="template_value">{{extremedamage}}</td>
        </tr>
        {{/rollTotal() roll1 1}}

        {{#rollBetween() roll1 2 extreme}}
        <tr>
            <td class="template_label" data-i18n="extreme-damage">Extreme Dam:</td>
            <td class="template_value">{{extremedamage}}</td>
        </tr>
        {{/rollBetween() roll1 2 extreme}}

        {{#^rollTotal() strain 0}}
        <tr>
            <td class="template_label" data-i18n="strain">Strain:</td>
            <td class="template_value">{{strain}}</td>
        </tr>
        {{/^rollTotal() strain 0}}

    </table>
</rolltemplate>

<!--
&{template:coc-attack-1-noimpale} ---------------------------------------------------------------------------------------------------------
-->
<rolltemplate class="sheet-rolltemplate-coc-attack-1-noimpale">
    <table>
		{{#rollTotal() modifier 0}}
        <caption>{{name}}</caption>
		{{/rollTotal() modifier 0}}

		{{#^rollTotal() modifier 0}}
        <caption>{{name}} | {{modifier}}</caption>
		{{/^rollTotal() modifier 0}}

		<tr>
            <td class="template_label" data-i18n="value">Value:</td>
            <td class="template_value">{{success}}/{{hard}}/{{extreme}}</td>
        </tr>

        {{#malf}}
        <tr>
            <td class="template_label" data-i18n="malf">Malf:</td>
            <td class="template_value">{{malf}}</td>
        </tr>
        {{/malf}}

        <tr>
            <td class="template_label" data-i18n="rolled">Rolled:</td>
            <td class="template_value">{{roll1}}</td>
        </tr>

        <!-- Results Row(s) - Each condition outputs a full <tr> -->

        {{#rollTotal() roll1 1}}
        <tr class="template_row_background">
            <td class="template_label" data-i18n="result">Result:</td>
            <td class="template_value_critical" data-i18n="critical">Critical</td>
        </tr>
        {{/rollTotal() roll1 1}}

        {{#rollBetween() roll1 2 success}}
            {{#rollGreater() roll1 hard}}
            <tr class="template_row_background">
                <td class="template_label" data-i18n="result">Result:</td>
                <td class="template_value_success" data-i18n="success">Success</td>
            </tr>
            {{/rollGreater() roll1 hard}}

            {{#rollBetween() roll1 2 hard}}
                {{#rollGreater() roll1 extreme}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_hard" data-i18n="hard">Hard</td>
                </tr>
                {{/rollGreater() roll1 extreme}}

                {{#rollBetween() roll1 2 extreme}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_extreme" data-i18n="extreme">Extreme</td>
                </tr>
                {{/rollBetween() roll1 2 extreme}}
            {{/rollBetween() roll1 2 hard}}
        {{/rollBetween() roll1 2 success}}

        {{#rollGreater() roll1 success}}
            {{#rollGreater() success 49}}
                {{#rollTotal() roll1 100}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fumble" data-i18n="fumble">Fumble</td>
                </tr>
                {{/rollTotal() roll1 100}}

                {{#rollLess() roll1 100}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                </tr>
                {{/rollLess() roll1 100}}
            {{/rollGreater() success 49}}

            {{#rollLess() success 50}}
                {{#rollGreater() roll1 95}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fumble" data-i18n="fumble">Fumble</td>
                </tr>
                {{/rollGreater() roll1 95}}

                {{#rollLess() roll1 96}}
                <tr class="template_row_background">
                    <td class="template_label" data-i18n="result">Result:</td>
                    <td class="template_value_fail" data-i18n="fail">Fail</td>
                </tr>
                {{/rollLess() roll1 96}}
            {{/rollLess() success 50}}
        {{/rollGreater() roll1 success}}

        <!-- Damage and Other Info -->

        <!-- Show only damage on normal hit -->
        {{#rollGreater() roll1 extreme}}
        <tr>
			<td class="template_label" data-i18n="dam">Dam:</td>
			<td class="template_value">{{damage}}</td>
		</tr>
		{{/rollGreater() roll1 extreme}}

		<!-- Show only extreme damage if crit/extreme -->
		{{#rollTotal() roll1 1}}
		<tr>
			<td class="template_label" data-i18n="extreme-damage">Extreme Dam:</td>
			<td class="template_value">{{extremedamage}}</td>
		</tr>
		{{/rollTotal() roll1 1}}

		{{#rollBetween() roll1 2 extreme}}
		<tr>
			<td class="template_label" data-i18n="extreme-damage">Extreme Dam:</td>
			<td class="template_value">{{extremedamage}}</td>
		</tr>
		{{/rollBetween() roll1 2 extreme}}

        {{#^rollTotal() strain 0}}
        <tr>
            <td class="template_label" data-i18n="strain">Strain:</td>
            <td class="template_value">{{strain}}</td>
        </tr>
        {{/^rollTotal() strain 0}}

    </table>
</rolltemplate>

<!-- WORKERS -->
<script type="text/worker">
const debug_on = false;
const debug_on_trace = false;
const debug_on_watcher = false;

const registeredRaces = new Set();
let talentWatchersRegistered = false;
let backgroundTalentWatchersRegistered = false;

on("sheet:opened", function () {
	  if (debug_on_trace) console.log ("[sheet:opened] Translation");
  const translationFields = [
    "str_txt", "dex_txt", "pow_txt", "con_txt", "app_txt", "edu_txt", "siz_txt", "int_txt", "mag_txt", "luck_txt",
    "accounting_txt", "alchemy_txt", "animalhandling_txt", "anthropology_txt", "appraise_txt", "arcana_txt",
    "archaeology_txt", "archanotech_txt", "archery_txt", "architecture_txt", "biology_txt", "bureaucracy_txt",
    "chant_txt", "charm_txt", "chemistry_txt", "climb_txt", "computeruse_txt", "creditrating_txt", "cthulhumythos_txt",
    "cybernetics_txt", "dance_txt", "demolitions_txt", "disguise_txt", "deception_txt", "dodge_txt", "driveauto_txt",
    "drone_operation_txt", "elecrepair_txt", "engineering_txt", "etiquette_high_society_txt", "etiquette_lyranni_txt", "fasttalk_txt",
    "fighting_brawl_txt", "firearms_hg_txt", "firearms_rifle_txt", "firearms_smg_txt", "first_aid_txt", "forbidden_lore_txt",
    "forgery_txt", "gunnery_txt", "heavy_weapons_txt", "history_txt", "impersonation_txt", "instrument_txt",
    "intimidate_txt", "interrogation_txt", "insight_txt", "investigation_txt", "jump_txt", "law_txt", "libraryuse_txt",
    "listen_txt", "locksmith_txt", "magic_alteration_txt", "magic_elemental_txt", "magic_enchantment_txt",
    "magic_illusion_txt", "magic_necromancy_txt", "magic_restoration_txt", "magic_summoning_txt", "magic_technomancy_txt",
    "magic_warding_txt", "magic_universal_txt", "mechrepair_txt", "mechanics_txt", "medicine_txt", "melee_weapons_txt",
    "naturalworld_txt", "navigate_txt", "occult_txt", "ophvmachine_txt", "perception_txt", "persuade_txt", "physics_txt",
    "pilotaircraft_txt", "pilotarc_txt", "pilotboat_txt", "psychology_txt", "psychoanalysis_txt", "ride_txt", "security_txt",
    "singing_txt", "sleightofhand_txt", "slicing_txt", "spirit_lore_txt", "spothidden_txt", "stealth_txt", "streetwise_txt",
    "survival_wilderness_txt", "athletics_txt", "coordination_txt", "swim_txt", "throw_txt", "track_txt", "unarmed_txt", "veil_lore_txt"
  ];

  getAttrs(translationFields, values => {
    const updates = {};

    translationFields.forEach(field => {
      const translationKey = field.replace("_txt", "-r-txt")
        .replace("luck_txt", "luck-u")
		.replace("unarmed_txt", "unarmed-z")
		.replace("str-r-txt", "STR-r-txt")
		.replace("dex-r-txt", "DEX-r-txt")
		.replace("pow-r-txt", "POW-r-txt")
		.replace("con-r-txt", "CON-r-txt")
		.replace("app-r-txt", "APP-r-txt")
		.replace("edu-r-txt", "EDU-r-txt")
		.replace("siz-r-txt", "SIZ-r-txt")
		.replace("int-r-txt", "INT-r-txt")
		.replace("mag-r-txt", "MAG-r-txt");

      const correctText = getTranslationByKey(translationKey);
      if (values[field] !== correctText) {
        updates[field] = correctText;
      }
    });

    if (Object.keys(updates).length > 0) {
      setAttrs(updates);
    }
  });
});

// Maps //
const raceDataMap = {
  "alteri": {
    label: "Alteri",
    language: "Nualeth",
    stats: {
      str: { base: 15, max: 75 }, dex: { base: 15, max: 80 }, con: { base: 15, max: 75 },
      siz: { base: 40, max: 80 }, int: { base: 40, max: 80 }, edu: { base: 15, max: 80 },
      pow: { base: 15, max: 85 }, app: { base: 15, max: 85 }, mag: { base: 0, max: 80 }
    }
  },
  "draevi": {
    label: "Draevi",
    language: "Khevala",
    stats: {
      str: { base: 15, max: 70 }, dex: { base: 15, max: 80 }, con: { base: 15, max: 90 },
      siz: { base: 40, max: 80 }, int: { base: 40, max: 80 }, edu: { base: 15, max: 80 },
      pow: { base: 15, max: 80 }, app: { base: 15, max: 80 }, mag: { base: 0, max: 80 }
    }
  },
  "feran": {
    label: "Feran",
    language: "A",
    stats: {
      str: { base: 15, max: 80 }, dex: { base: 15, max: 90 }, con: { base: 15, max: 80 },
      siz: { base: 35, max: 70 }, int: { base: 40, max: 80 }, edu: { base: 15, max: 80 },
      pow: { base: 15, max: 80 }, app: { base: 15, max: 80 }, mag: { base: 0, max: 80 }
    }
  },
  "human": {
    label: "Human",
    language: "Caltheran",
    stats: {
      str: { base: 15, max: 80 }, dex: { base: 15, max: 80 }, con: { base: 15, max: 80 },
      siz: { base: 40, max: 80 }, int: { base: 40, max: 80 }, edu: { base: 15, max: 80 },
      pow: { base: 15, max: 80 }, app: { base: 15, max: 80 }, mag: { base: 0, max: 80 }
    }
  },
  "khadra": {
    label: "Khadra",
    language: "Nari",
    stats: {
      str: { base: 15, max: 90 }, dex: { base: 15, max: 70 }, con: { base: 15, max: 80 },
      siz: { base: 50, max: 90 }, int: { base: 40, max: 80 }, edu: { base: 15, max: 80 },
      pow: { base: 15, max: 80 }, app: { base: 15, max: 70 }, mag: { base: 0, max: 80 }
    }
  },
  "kitsu": {
    label: "Kitsu",
    language: "B",
    stats: {
      str: { base: 15, max: 75 }, dex: { base: 15, max: 80 }, con: { base: 15, max: 80 },
      siz: { base: 35, max: 75 }, int: { base: 40, max: 85 }, edu: { base: 15, max: 80 },
      pow: { base: 15, max: 80 }, app: { base: 15, max: 80 }, mag: { base: 0, max: 85 }
    }
  },
  "lyranni": {
    label: "Lyranni",
    language: "Thal’Resh",
    stats: {
      str: { base: 15, max: 70 }, dex: { base: 15, max: 80 }, con: { base: 15, max: 80 },
      siz: { base: 30, max: 70 }, int: { base: 40, max: 80 }, edu: { base: 15, max: 80 },
      pow: { base: 15, max: 90 }, app: { base: 15, max: 80 }, mag: { base: 0, max: 90 }
    }
  },
  "veyra": {
    label: "Veyra",
    language: "C",
    stats: {
      str: { base: 15, max: 80 }, dex: { base: 15, max: 80 }, con: { base: 15, max: 80 },
      siz: { base: 30, max: 60 }, int: { base: 40, max: 90 }, edu: { base: 40, max: 90 },
      pow: { base: 15, max: 80 }, app: { base: 15, max: 80 }, mag: { base: 0, max: 80 }
    }
  }
};

const skillMapTable = {
 "Archery": { label: "archery", base: "10", skill: "archery_skill_mdr", bonus: "archery_mdr", group: "Combat", notes: "Archery" },
 "Dodge (DEX/2)": { label: "dodge", base: "0", skill: "dodge_skill_mdr", bonus: "dodge_mdr", group: "Combat", notes: "Half of your DEX score" },
 "Gunnery": { label: "gunnery", base: "10", skill: "gunnery_skill_mdr", bonus: "gunnery_mdr", group: "Combat", notes: "Vehicle-mounted or automated weapons" },
 "Heavy Weapons": { label: "heavy_weapons", base: "10", skill: "heavy_weapons_skill_mdr", bonus: "heavy_weapons_mdr", group: "Combat", notes: "Heavy Weapons" },
 "Melee Weapons": { label: "melee_weapons", base: "20", skill: "melee_weapons_skill_mdr", bonus: "melee_weapons_mdr", group: "Combat", notes: "Melee Weapons" },
 "Pistols": { label: "firearms_handgun", base: "20", skill: "firearms_handgun_skill_mdr", bonus: "firearms_handgun_mdr", group: "Combat", notes: "Pistols" },
 "Rifles/Shotguns": { label: "firearms_rifle", base: "25", skill: "firearms_rifle_skill_mdr", bonus: "firearms_rifle_mdr", group: "Combat", notes: "Rifles/Shotguns" },
 "Submachine Guns (SMGs)": { label: "firearms_smg", base: "15", skill: "firearms_smg_skill_mdr", bonus: "firearms_smg_mdr", group: "Combat", notes: "Submachine Guns (SMGs)" },
 "Thrown Weapons": { label: "throw", base: "20", skill: "throw_skill_mdr", bonus: "throw_mdr", group: "Combat", notes: "Thrown Weapons" },
 "Unarmed": { label: "unarmed", base: "25", skill: "unarmed_skill_mdr", bonus: "unarmed_mdr", group: "Combat", notes: "Unarmed combat" },
 "Athletics": { label: "athletics", base: "20", skill: "athletics_skill_mdr", bonus: "athletics_mdr", group: "Physical", notes: "Running, jumping, climbing, endurance" },
 "Coordination": { label: "coordination", base: "20", skill: "coordination_skill_mdr", bonus: "coordination_mdr", group: "Physical", notes: "Balance, agility, acrobatics" },
 "Swim": { label: "swim", base: "20", skill: "swim_skill_mdr", bonus: "swim_mdr", group: "Physical", notes: "Swim" },
 "Alteration": { label: "magic_alteration", base: "0", skill: "magic_alteration_skill_mdr", bonus: "magic_alteration_mdr", group: "Magic", notes: "Enhances physical attributes or alters the physical world. Includes speed, strength, resilience, and spatial shifts." },
 "Elemental": { label: "magic_elemental", base: "0", skill: "magic_elemental_skill_mdr", bonus: "magic_elemental_mdr", group: "Magic", notes: "The art of shaping and controlling natural elements such as fire, water, air, and earth through arcane force. Focuses on raw power and environmental manipulation." },
 "Enchantment": { label: "magic_enchantment", base: "0", skill: "magic_enchantment_skill_mdr", bonus: "magic_enchantment_mdr", group: "Magic", notes: "Mental influencing magic that alters thoughts, emotions, or behavior. Includes charms, compulsions, and emotional sway." },
 "Illusion": { label: "magic_illusion", base: "0", skill: "magic_illusion_skill_mdr", bonus: "magic_illusion_mdr", group: "Magic", notes: "Magic of trickery and perception. Creates false images, alters appearances, or hides things through manipulation of the senses." },
 "Necromancy": { label: "magic_necromancy", base: "0", skill: "magic_necromancy_skill_mdr", bonus: "magic_necromancy_mdr", group: "Magic", notes: "Manipulates the forces of death and the soul. Involves raising the dead, draining life, or communicating with spirits of the deceased." },
 "Restoration": { label: "magic_restoration", base: "0", skill: "magic_restoration_skill_mdr", bonus: "magic_restoration_mdr", group: "Magic", notes: "Healing, cleansing, and regeneration magic that mends wounds, purifies corruption, or restores vitality." },
 "Summoning": { label: "magic_summoning", base: "0", skill: "magic_summoning_skill_mdr", bonus: "magic_summoning_mdr", group: "Magic", notes: "Calls forth spirits, creatures, or arcane constructs from beyond to aid, defend, or serve the caster." },
 "Technomancy": { label: "magic_technomancy", base: "0", skill: "magic_technomancy_skill_mdr", bonus: "magic_technomancy_mdr", group: "Magic", notes: "The fusion of magic with technology. Enables interaction with archanotech, digital constructs, and spell-driven machines." },
 "Warding": { label: "magic_warding", base: "0", skill: "magic_warding_skill_mdr", bonus: "magic_warding_mdr", group: "Magic", notes: "Protective magic used to shield, block, or dispel incoming threats both physical and magical." },
 "Universal": { label: "magic_universal", base: "0", skill: "magic_universal_skill_mdr", bonus: "magic_universal_mdr", group: "Magic", notes: "Covers basic arcane techniques used across traditions detecting, sensing, or disrupting magical phenomena." },
 "Archanotech": { label: "archanotech", base: "1", skill: "archanotech_skill_mdr", bonus: "archanotech_mdr", group: "Tech/Cyber", notes: "Construction, repair, and interfacing with arcane-tech hybrids" },
 "Computer Use": { label: "computer_use", base: "10", skill: "computer_use_skill_mdr", bonus: "computer_use_mdr", group: "Tech/Cyber", notes: "General software and system operation" },
 "Cybernetics": { label: "cybernetics", base: "1", skill: "cybernetics_skill_mdr", bonus: "cybernetics_mdr", group: "Tech/Cyber", notes: "Installing and maintaining cyberware" },
 "Demolitions": { label: "demolitions", base: "1", skill: "demolitions_skill_mdr", bonus: "demolitions_mdr", group: "Tech/Cyber", notes: "Demolitions" },
 "Electronics": { label: "electronics", base: "10", skill: "electronics_skill_mdr", bonus: "electronics_mdr", group: "Tech/Cyber", notes: "circuitry, electronic repair" },
 "Mechanics": { label: "mechanics", base: "10", skill: "mechanics_skill_mdr", bonus: "mechanics_mdr", group: "Tech/Cyber", notes: "Mechanics" },
 "Security Systems": { label: "security", base: "1", skill: "security_skill_mdr", bonus: "security_mdr", group: "Tech/Cyber", notes: "Understanding and bypassing surveillance, sensors, magitech security, and physical/digital alarm systems." },
 "Slicing": { label: "slicing", base: "5", skill: "slicing_skill_mdr", bonus: "slicing_mdr", group: "Tech/Cyber", notes: "Digital infiltration, cybersecurity" },
 "Drive (Ground Vehicles)": { label: "drive_auto", base: "20", skill: "drive_auto_skill_mdr", bonus: "drive_auto_mdr", group: "Pilot", notes: "Drive (Ground Vehicles)" },
 "Drone Operation": { label: "drone_operation", base: "10", skill: "drone_operation_skill_mdr", bonus: "drone_operation_mdr", group: "Pilot", notes: "Drone Operation" },
 "Pilot (Aircraft)": { label: "pilotaircraft", base: "1", skill: "pilotaircraft_skill_mdr", bonus: "pilotaircraft_mdr", group: "Pilot", notes: "Pilot (Aircraft)" },
 "Pilot (ARC)": { label: "pilotarc", base: "5", skill: "pilotarc_skill_mdr", bonus: "pilotarc_mdr", group: "Pilot", notes: "Pilot (ARC)" },
 "Pilot (Boat)": { label: "pilotboat", base: "1", skill: "pilotboat_skill_mdr", bonus: "pilotboat_mdr", group: "Pilot", notes: "Pilot (Boat)" },
 "Alchemy": { label: "alchemy", base: "1", skill: "alchemy_skill_mdr", bonus: "alchemy_mdr", group: "Science/Knowledge", notes: "Science (Alchemy)" },
 "Anthropology": { label: "anthropology", base: "1", skill: "anthropology_skill_mdr", bonus: "anthropology_mdr", group: "Science/Knowledge", notes: "Science(Anthropology)" },
 "Arcana": { label: "arcana", base: "5", skill: "arcana_skill_mdr", bonus: "arcana_mdr", group: "Science/Knowledge", notes: "Understanding of magical theory and principles" },
 "Archaeology": { label: "archaeology", base: "1", skill: "archaeology_skill_mdr", bonus: "archaeology_mdr", group: "Science/Knowledge", notes: "Science(Archaeology)" },
 "Architecture": { label: "architecture", base: "1", skill: "architecture_skill_mdr", bonus: "architecture_mdr", group: "Science/Knowledge", notes: "Architecture" },
 "Biology": { label: "biology", base: "1", skill: "biology_skill_mdr", bonus: "biology_mdr", group: "Science/Knowledge", notes: "Science (Biology)" },
 "Chemistry": { label: "chemistry", base: "1", skill: "chemistry_skill_mdr", bonus: "chemistry_mdr", group: "Science/Knowledge", notes: "Science (Chemistry)" },
 "Engineering": { label: "engineering", base: "1", skill: "engineering_skill_mdr", bonus: "engineering_mdr", group: "Science/Knowledge", notes: "Science (Engineering)" },
 "Forbidden Lore": { label: "forbidden_lore", base: "0", skill: "forbidden_lore_skill_mdr", bonus: "forbidden_lore_mdr", group: "Science/Knowledge", notes: "Cosmic horrors, veiled truths" },
 "History": { label: "history", base: "5", skill: "history_skill_mdr", bonus: "history_mdr", group: "Science/Knowledge", notes: "History" },
 "Investigation": { label: "investigation", base: "10", skill: "investigation_skill_mdr", bonus: "investigation_mdr", group: "Science/Knowledge", notes: "Used to reconstruct events, analyze clues, interpret evidence, and solve mysteries." },
 "Law": { label: "law", base: "5", skill: "law_skill_mdr", bonus: "law_mdr", group: "Science/Knowledge", notes: "Law" },
 "Medicine": { label: "medicine", base: "1", skill: "medicine_skill_mdr", bonus: "medicine_mdr", group: "Science/Knowledge", notes: "Medicine" },
 "Natural World": { label: "natural_world", base: "10", skill: "natural_world_skill_mdr", bonus: "natural_world_mdr", group: "Science/Knowledge", notes: "Natural World" },
 "Occult Lore": { label: "occult", base: "5", skill: "occult_skill_mdr", bonus: "occult_mdr", group: "Science/Knowledge", notes: "Non-practitioner knowledge of magic and the supernatural" },
 "Physics": { label: "physics", base: "1", skill: "physics_skill_mdr", bonus: "physics_mdr", group: "Science/Knowledge", notes: "Science (Physics)" },
 "Spirit Lore": { label: "spirit_lore", base: "5", skill: "spirit_lore_skill_mdr", bonus: "spirit_lore_mdr", group: "Science/Knowledge", notes: "Spirit Lore" },
 "Veil Lore": { label: "veil_lore", base: "5", skill: "veil_lore_skill_mdr", bonus: "veil_lore_mdr", group: "Science/Knowledge", notes: "Veil Lore" },
 "Bureaucracy": { label: "bureaucracy", base: "5", skill: "bureaucracy_skill_mdr", bonus: "bureaucracy_mdr", group: "Social", notes: "Understanding and navigating administrative, legal, and governmental systems." },
 "Chant": { label: "chant", base: "5", skill: "chant_skill_mdr", bonus: "chant_mdr", group: "Social", notes: "Chant" },
 "Charm": { label: "charm", base: "15", skill: "charm_skill_mdr", bonus: "charm_mdr", group: "Social", notes: "Charm" },
 "Dance": { label: "dance", base: "5", skill: "dance_skill_mdr", bonus: "dance_mdr", group: "Social", notes: "Performance (Dance)" },
 "Deception": { label: "deception", base: "5", skill: "deception_skill_mdr", bonus: "deception_mdr", group: "Social", notes: "Deception" },
 "Disguise": { label: "disguise", base: "5", skill: "disguise_skill_mdr", bonus: "disguise_mdr", group: "Social", notes: "Disguise" },
 "Etiquette (Alteri)": { label: "etiquette_alteri", base: "10", skill: "etiquette_alteri_skill_mdr", bonus: "etiquette_alteri_mdr", group: "Social", notes: "Etiquette (Alteri)" },
 "Etiquette (High Society)": { label: "etiquette_high_society", base: "10", skill: "etiquette_high_society_skill_mdr", bonus: "etiquette_high_society_mdr", group: "Social", notes: "Etiquette (High Society)" },
 "Etiquette (Lyranni)": { label: "etiquette_lyranni", base: "10", skill: "etiquette_lyranni_skill_mdr", bonus: "etiquette_lyranni_mdr", group: "Social", notes: "Etiquette (Lyranni)" },
 "Etiquette (Other)": { label: "etiquette_other", base: "10", skill: "etiquette_other_skill_mdr", bonus: "etiquette_other_mdr", group: "Social", notes: "Etiquette may be specialized: (Corporate), (Military), (Underworld), (Racial), etc." },
 "Forgery": { label: "forgery", base: "1", skill: "forgery_skill_mdr", bonus: "forgery_mdr", group: "Social", notes: "Creating falsified documents, IDs, credentials physical or digital." },
 "Impersonation": { label: "impersonation", base: "5", skill: "impersonation_skill_mdr", bonus: "impersonation_mdr", group: "Social", notes: "Performance (Impersonation)" },
 "Insight": { label: "insight", base: "10", skill: "insight_skill_mdr", bonus: "insight_mdr", group: "Social", notes: "Insight" },
 "Instrument": { label: "instrument", base: "5", skill: "instrument_skill_mdr", bonus: "instrument_mdr", group: "Social", notes: "Performance (Instrument)" },
 "Intimidate": { label: "intimidate", base: "15", skill: "intimidate_skill_mdr", bonus: "intimidate_mdr", group: "Social", notes: "Lying, bluffing, maintaining covers, and creating false narratives across a wide range of scenarios." },
 "Interrogation": { label: "interrogation", base: "5", skill: "interrogation_skill_mdr", bonus: "interrogation_mdr", group: "Social", notes: "Extracting information through questioning, pressure, or manipulation." },
 "Persuade": { label: "persuade", base: "10", skill: "persuade_skill_mdr", bonus: "persuade_mdr", group: "Social", notes: "Persuade" },
 "Recitation": { label: "recitation", base: "5", skill: "recitation_skill_mdr", bonus: "recitation_mdr", group: "Social", notes: "Performance (Recitation)" },
 "Singing": { label: "singing", base: "5", skill: "singing_skill_mdr", bonus: "singing_mdr", group: "Social", notes: "Performance (Singing)" },
 "Streetwise": { label: "streetwise", base: "10", skill: "streetwise_skill_mdr", bonus: "streetwise_mdr", group: "Social", notes: "Streetwise" },
 "Voice": { label: "voice", base: "5", skill: "voice_skill_mdr", bonus: "voice_mdr", group: "Social", notes: "Performance (Voice)" },
 "Animal Handling": { label: "animalhandling", base: "5", skill: "animalhandling_skill_mdr", bonus: "animalhandling_mdr", group: "Survival", notes: "Animal Handling" },
 "First Aid": { label: "first_aid", base: "30", skill: "first_aid_skill_mdr", bonus: "first_aid_mdr", group: "Survival", notes: "First Aid" },
 "Listen": { label: "listen", base: "20", skill: "listen_skill_mdr", bonus: "listen_mdr", group: "Survival", notes: "Listen" },
 "Navigate": { label: "navigate", base: "10", skill: "navigate_skill_mdr", bonus: "navigate_mdr", group: "Survival", notes: "Navigate" },
 "Perception": { label: "perception", base: "25", skill: "perception_skill_mdr", bonus: "perception_mdr", group: "Survival", notes: "Perception" },
 "Sleight of Hand": { label: "sleight_of_hand", base: "10", skill: "sleight_of_hand_skill_mdr", bonus: "sleight_of_hand_mdr", group: "Survival", notes: "Sleight of Hand" },
 "Stealth": { label: "stealth", base: "20", skill: "stealth_skill_mdr", bonus: "stealth_mdr", group: "Survival", notes: "Stealth" },
 "Survival (Urban)": { label: "survival_urban", base: "10", skill: "survival_urban_skill_mdr", bonus: "survival_urhan_mdr", group: "Survival", notes: "Survival (Urban)" },
 "Survival (Wilderness)": { label: "survival_wilderness", base: "10", skill: "survival_wilderness_skill_mdr", bonus: "survival_wilderness_mdr", group: "Survival", notes: "Survival (Wilderness)" },
 "Track": { label: "track", base: "10", skill: "track_skill_mdr", bonus: "track_mdr", group: "Survival", notes: "Track" },
 "Language(Racial)": { label: "language_own", base: "75", skill: "language_own_skill_mdr", bonus: "language_own_mdr", group: "Language", notes: "Racial Language" },
 "Language(Caltheran)": { label: "language_caltheran", base: "0", skill: "language_caltheran_skill_mdr", bonus: "language_caltheran_mdr", group: "Language", notes: "Calthern language" }
};

// Talent name, description, and prerequisites
const talentDataMap = {
  alteri: {
    second_skin: {
      name: "Second Skin",
      description: "You gain an additional Mask—a fully realized persona with a name, appearance, and backstory. Switching to this Mask takes 1 Action and no longer imposes Strain unless done under stress (GM discretion).",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: ""
    },
    reflexive_shift: {
      name: "Reflexive Shift",
      description: "Once per scene, as a Reaction, rapidly alter your appearance (hair, skin tone, voice, etc.) to avoid identification. Grants a bonus die to Disguise or deception-based Deception. Costs 1d4 Strain.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: "scene"
    },
    echoed_voice: {
      name: "Echoed Voice",
      description: "Once per session, mimic the voice and speech of someone known to you or studied for at least one full scene. Grants a bonus die to Performance (Impersonation) or any roll to pass as the individual.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: "session"
    },
    maskwrights_grace: {
      name: "Maskwright’s Grace",
      description: "Choose one: gain +10% to Disguise, Insight, or Performance (Impersonation). This choice is permanent and may only be taken once.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: ""
    },
    social_chameleon: {
      name: "Social Chameleon",
      description: "Use Charm in place of Deception or Persuade when navigating unfamiliar cultures or coded social environments.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: ""
    },
    ghost_protocol: {
      name: "Ghost Protocol",
      description: "Once per session, erase your trail. Gain a bonus die to Stealth or Slicing when spoofing ID, bypassing basic surveillance, or escaping recognition. If followed by a successful Disguise, it leaves no trace.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: "session"
    },
    shaped_for_subtlety: {
      name: "Shaped for Subtlety",
      description: "Choose one: gain +10% to Stealth, Slicing, or Insight. This choice is permanent and may only be taken once.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: ""
    },
    whisper_touched: {
      name: "Whisper-Touched",
      description: "Once per session, gain a bonus die when casting Illusion or Enchantment spells.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: "session"
    },
    grace_of_the_many: {
      name: "Grace of the Many",
      description: "Once per session, reroll a failed Disguise, Insight, or Stealth check. Take the better result.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: "session"
    },
	facial_recalibration: {
      name: "Facial Recalibration",
      description: "Once per session, mimic a person’s face, posture, and speech after observing them for at least one turn. Grants a bonus die to Disguise or Performance (Impersonation). Costs 1 Strain.",
      prerequisite: ["echoed_voice", "second_skin"],
      tier: 2,
      cost: "20",
      capstone: false,
	  usage_limit: "session"
    },
    adaptive_memory: {
      name: "Adaptive Memory",
      description: "Once per session, recall useful details from a person you've interacted with in person. Gain a bonus die to a social roll involving deception or impersonation with them or their associates.",
      prerequisite: ["social_chameleon", "maskwrights_grace"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    shift_reflex: {
      name: "Shift Reflex",
      description: "Once per scene, use a Reaction to confuse a target mid-scan or strike. Gain a bonus die to Dodge or Stealth.",
      prerequisite: ["reflexive_shift"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "scene"
    },
    deep_mask_integration: {
      name: "Deep Mask Integration",
      description: "Gain +10% to Disguise or Insight (your choice). You may maintain two active Masks and switch between them without prep or Strain outside combat.",
      prerequisite: ["second_skin"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: ""
    },
    ghost_signature: {
      name: "Ghost Signature",
      description: "Once per session, spoof or bypass a low-grade biometric scan (e.g., facial recognition, voiceprint, retinal) with a bonus die to Slicing or Electronics.",
      prerequisite: ["ghost_protocol"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    mirror_weave: {
      name: "Mirror Weave",
      description: "Once per session, illusions or enchantments you cast can deceive digital or mechanical observers. Costs 1 Strain per additional ally affected. Cannot deceive hostile systems.",
      prerequisite: ["whisper_touched"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    persona_anchor: {
      name: "Persona Anchor",
      description: "Choose one: gain +10% to Performance (Impersonation), Arcana, or Slicing. Reflects how your persona enhances certain skills.",
      prerequisite: ["grace_of_the_many"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: ""
    },
    veil_echo_memory: {
      name: "Veil Echo Memory",
      description: "Once per session, gain a sensory impression or memory from a place or person you've touched. Grants a bonus die to the next Arcana, Insight, or Occult Lore roll. Costs 1 Strain.",
      prerequisite: ["whisper_touched", "ghost_protocol"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    silent_archive: {
      name: "Silent Archive",
      description: "Store a secondary identity with full recall: appearance, history, contacts, accent, and routine. Once per session, switch instantly. Costs 1d4 Strain if used during a scene. Free outside scenes.",
      prerequisite: ["deep_mask_integration"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
	perfect_mimicry: {
      name: "Perfect Mimicry",
      description: "Once per session, flawlessly replicate a person’s full persona (appearance, mannerisms, tone). Grants a bonus die to Disguise, Performance, or Deception.",
      prerequisite: ["facial_recalibration", "echoed_voice"],
      tier: 3,
      cost: "30",
      capstone: false,
	  usage_limit: "session"
    },
    biometric_phantom: {
      name: "Biometric Phantom",
      description: "Once per session, spoof or override corporate-grade biometric or magitech ID systems if you've had contact with the target. Bonus die to Slicing or Electronics.",
      prerequisite: ["ghost_signature"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    memory_graft: {
      name: "Memory Graft",
      description: "Once per session, tap into a stored Mask’s memory for insight. Gain a bonus die to one Arcana, Insight, or Performance (Impersonation) roll tied to that persona’s experience.",
      prerequisite: ["deep_mask_integration"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    veil_shaped_will: {
      name: "Veil-Shaped Will",
      description: "Once per session, reroll a failed Illusion, Alteration, or Enchantment spellcasting. If successful, reduce the Strain die by one step (e.g., 1d6 → 1d4).",
      prerequisite: ["mirror_weave", "whisper_touched"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    social_echo: {
      name: "Social Echo",
      description: "Once per session, adapt your behavior to match a target’s subconscious expectations. Gain a bonus die to Charm, Deception, or Persuade. Costs 1 Strain if targeting two or more people.",
      prerequisite: ["social_chameleon", "adaptive_memory"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    identity_cascade: {
      name: "Identity Cascade",
      description: "Once per scene, switch Masks mid-encounter (even mid-dialogue or mid-combat). Grants a bonus die to Disguise or Insight. Costs 1d4 Strain if under pressure or direct observation.",
      prerequisite: ["deep_mask_integration"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "scene"
    },
	immaculate_impersonation: {
      name: "Immaculate Impersonation",
      description: "Once per session, flawlessly impersonate a known target—down to retinal scan, bio-sig, and vocal cadence. Bonus die to all Disguise, Slicing, or Performance (Impersonation) checks for the entire scene.",
      prerequisite: ["perfect_mimicry", "biometric_phantom"],
      tier: 4,
      cost: "40",
      capstone: true,
	  usage_limit: "session"
    },
    living_mask_archive: {
      name: "Living Mask Archive",
      description: "Maintain up to four active Masks. Once per session, instantly switch between any of them. Grants a bonus die to your next social or Stealth roll. Costs 1 Strain if used during a scene.",
      prerequisite: ["memory_graft", "identity_cascade"],
      tier: 4,
      cost: "40",
      capstone: true,
      usage_limit: "session"
    },
    veil_mirroring_ritual: {
      name: "Veil-Mirroring Ritual",
      description: "Once per session, reflect a single Illusion or Enchantment spell cast on you, or redirect it to another visible target. Spell must be reflectable by nature.",
      prerequisite: ["veil_shaped_will"],
      tier: 4,
      cost: "40",
      capstone: true,
      usage_limit: "session"
    },
    author_of_the_lie: {
      name: "Author of the Lie",
      description: "Once per session, automatically succeed on a Disguise, Performance, or Deception roll involving deception. You may declare one falsehood about your Mask as true for the rest of the scene. Costs 2 Strain if used under direct scrutiny or in a digital surveillance zone.",
      prerequisite: ["social_echo", "deep_mask_integration"],
      tier: 4,
      cost: "40",
      capstone: true,
	  usage_limit: "session"
    }
  },
  draevi: {
    iron_stomach: {
      name: "Iron Stomach",
      description: "Gain a bonus die on Constitution rolls to resist poison, spoiled food, or ingested toxins. You can consume nearly anything without penalty.",
	  prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false,
      usage_limit: ""
    },
    clan_blooded: {
      name: "Clan-Blooded",
      description: "Choose one: gain +10% to Intimidate, Survival, or Track. This reflects your upbringing within a strong clan tradition. This choice is permanent and may only be taken once.",
      prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false,
      usage_limit: ""
    },
    urban_climber: {
      name: "Urban Climber",
      description: "Once per session, gain a bonus die to any Athletics or Coordination roll made while navigating vertical, unstable, or cramped environments.",
	  prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false,
      usage_limit: "session"
    },
    scavengers_edge: {
      name: "Scavenger’s Edge",
      description: "Choose one: gain +10% to Mechanics, Electronics, or Streetwise. This reflects your clan’s practical knowledge of scavenging and repair. This choice is permanent and may only be taken once.",
	  prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false,
      usage_limit: ""
    },
    spirits_in_stone: {
      name: "Spirits-in-Stone",
      description: "Once per session, gain a bonus die on a Spirit Lore roll related to ancestor rites, ruins, or natural spirit dwellings.",
	  prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false,
      usage_limit: "session"
    },
    trailborn_reflexes: {
      name: "Trailborn Reflexes",
      description: "Once per scene, gain a bonus die to any Dodge roll.",
	  prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false,
      usage_limit: "scene"
    },
    gutter_stalker: {
      name: "Gutter-Stalker",
      description: "Once per session, gain a bonus die on a Stealth roll made in an urban or tight, vertical space (vents, scaffolding, alleys).",
	  prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false,
      usage_limit: "session"
    },
    bone_sung_memory: {
      name: "Bone-Sung Memory",
      description: "Once per session, gain a bonus die when attempting to recall a location, creature, or spiritual phenomenon you’ve personally witnessed before.",
	  prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false,
      usage_limit: "session"
    },
    silent_step_sharp_ear: {
      name: "Silent Step, Sharp Ear",
      description: "Gain a bonus die on Stealth checks when moving through natural terrain. Optional: spend 1 Strain to also gain a bonus die on the next Listen or Perception check in the same scene.",
	  prerequisite: "",
      tier: 1,
      cost: 10,
      capstone: false,
      usage_limit: "scene"
    },
    hardened_trailwalker: {
      name: "Hardened Trailwalker",
      description: "Once per session, gain a bonus die to a Survival check. If that check fails, suffer only half the usual Strain from failure.",
      prerequisite: ["iron_stomach", "trailborn_reflexes"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    urban_tracker: {
      name: "Urban Tracker",
      description: "You may reroll one failed Streetwise, Stealth, or Track check made while tracking in an urban environment.",
      prerequisite: ["gutter_stalker"],
      tier: 2,
      cost: "20",
	  capstone: false,
      usage_limit: ""
    },
    instinctive_counter: {
      name: "Instinctive Counter",
      description: "Once per scene, gain a bonus die to either a Dodge, Unarmed Combat, or Melee roll when reacting to an attack.",
      prerequisite: ["trailborn_reflexes"],
      tier: 2,
      cost: "20",
	  capstone: false,
      usage_limit: "scene"
    },
    veins_of_stone: {
      name: "Veins of Stone",
      description: "Once per session, automatically succeed on a failed Constitution roll against fatigue, poison, or environmental strain.",
      prerequisite: ["iron_stomach", "clan_blooded"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    echo_binders_rite: {
      name: "Echo-Binder’s Rite",
      description: "Once per session, gain a bonus die to a Magic (Summoning) or Spirit Lore roll to commune with a spirit or bind an ancestral echo.",
      prerequisite: ["spirits_in_stone"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    scent_the_shift: {
      name: "Scent the Shift",
      description: "Once per session, detect a hidden threat, spirit, or Veil anomaly in your immediate area. Grants a bonus die to the next Perception or Spirit Lore check made to investigate it.",
      prerequisite: ["trailborn_reflexes", "spirits_in_stone"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    tales_etched_in_horn: {
      name: "Tales Etched in Horn",
      description: "Once per session, when recalling a story, rite, or ancestral lesson, gain a bonus die on any Occult Lore, Spirit Lore, or Etiquette (Clan) check related to Draevi culture or spirits.",
      prerequisite: ["clan_blooded"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    root_stance_tenacity: {
      name: "Root-Stance Tenacity",
      description: "Once per session, when you fail a Strength or Constitution roll to resist knockback, fatigue, or being overpowered, you may reroll with a bonus die. Optional: spend 2 Strain to remain standing even if the second roll fails.",
      prerequisite: ["iron_stomach", "clan_blooded"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
	spirit_touched_mastery: {
      name: "Spirit-Touched Mastery",
      description: "Once per session, reroll a failed Spirit Lore or Magic (Summoning) roll. If successful, reduce the spell’s Strain cost by one die step.",
      prerequisite: ["echo_binders_rite"],
      tier: 3,
      cost: "30",
      capstone: false,
	  usage_limit: "session"
    },
    spiritual_vanguard: {
      name: "Spiritual Vanguard",
      description: "Once per session, gain a bonus die when casting a Counterspell on behalf of an ally. Also gain a bonus die when banishing a hostile spirit.",
      prerequisite: ["scent_the_shift", "tales_etched_in_horn"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    emberlash_retaliation: {
      name: "Emberlash Retaliation",
      description: "Once per session, when struck by a melee or ranged attack, make a counterattack with a bonus die. If your counterattack hits, the target suffers a penalty die on their next action.",
      prerequisite: ["instinctive_counter"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    ancestors_pulse: {
      name: "Ancestor’s Pulse",
      description: "Once per session, gain two bonus dice on a Magic (Divination), Spirit Lore, or Magic (Summoning) roll when invoking ancestral insight. On success, the insight reveals a hidden danger or opportunity relevant to the scene.",
      prerequisite: ["tales_etched_in_horn"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    pathfinders_edge: {
      name: "Pathfinder’s Edge",
      description: "Once per session, ignore natural terrain penalties for movement or Survival for a full scene. Gain a bonus die to Track or Navigate during this time.",
      prerequisite: ["hardened_trailwalker", "veins_of_stone"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    wild_tamers_gaze: {
      name: "Wild Tamer’s Gaze",
      description: "Once per session, choose a non-hostile creature or spirit (animal, summoned being, or elemental-type). You may calm, redirect, or guide it with a Spirit Lore or Animal Handling check rolled with a bonus die. Optional: spend 2 Strain to influence it even if it's Veil-corrupted or hostile.",
      prerequisite: ["echo_binders_rite", "ancestors_pulse"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    legacy_reforged: {
      name: "Legacy Reforged",
      description: "Once per session, choose one Tier 1 Draevi Talent you possess. For the rest of the scene, it may be used twice without expending Strain. Optional: spend 1 Strain to immediately activate that Tier 1 talent now.",
	  prerequisite: "",
      prerequisiteAny: { tier: 2, count: 2 },
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    soul_of_the_wild_hunt: {
      name: "Soul of the Wild Hunt",
      description: "Once per session, enter Hunt State for the remainder of a scene: gain a bonus die on Stealth and Tracking checks, ignore terrain penalties, and reroll one failed Unarmed Combat or Melee attack.",
      prerequisite: ["pathfinders_edge", "emberlash_retaliation"],
      tier: 4,
      cost: "40",
      capstone: true,
      usage_limit: "session"
    },
    echo_flame_warden: {
      name: "Echo-Flame Warden",
      description: "Once per session, invoke a Ward of Legacy: you and up to two allies gain a bonus die on Constitution and Power rolls during a combat or ritual scene. You may also reduce incoming damage to one target by 1d6 (once per session).",
      prerequisite: ["veins_of_stone", "spiritual_vanguard"],
      tier: 4,
      cost: "40",
      capstone: true,
      usage_limit: "session"
    },
    ancestral_mirror: {
      name: "Ancestral Mirror",
      description: "Once per session, call on an ancestral vision to gain two bonus dice on a Spirit Lore, Magic (Summoning), or Magic (Divination) roll. On success, gain a hidden insight or location tied to the current conflict.",
      prerequisite: ["spirit_touched_mastery", "echo_binders_rite"],
      tier: 4,
      cost: "40",
      capstone: true,
      usage_limit: "session"
    },
    path_of_the_remembered: {
      name: "Path of the Remembered",
      description: "Once per session, declare a location as “bound by memory.” For the scene, you and allies who can hear you gain a bonus die on Perception, Survival, or Willpower-related rolls within that area. You may also spend 3 Strain once during the scene to invoke a flash of ancestral memory, revealing a secret path, hidden threat, or forgotten rite.",
      prerequisite: ["ancestors_pulse", "tales_etched_in_horn"],
      tier: 4,
      cost: "40",
      capstone: true,
	  usage_limit: "session"
    }
  },
  human : {
    hard_lesson: {
      name: "Hard Lesson",
      description: "Once per session, reroll a failed skill check. You must take the second result. This reflects the human knack for learning through pain and persistence. Optional: Spend 2 Strain to attempt a second reroll immediately after the first.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: "session"
    },
    instinct_over_training: {
      name: "Instinct Over Training",
      description: "Use Education in place of any untrained knowledge skill (Arcana, Occult Lore, Forbidden Lore, History, Law, etc.) once per session, at one difficulty higher.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: "session"
    },
    makeshift_medic: {
      name: "Makeshift Medic",
      description: "Once per session, when attempting a First Aid check without proper medical tools, gain a bonus die. Humans improvise with what they have.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: "session"
    },
    no_stranger_to_pain: {
      name: "No Stranger to Pain",
      description: "Once per session, roll with a bonus die when making a CON roll to stay conscious after suffering a major wound.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: "session"
    },
    quick_fixer: {
      name: "Quick Fixer",
      description: "Choose one: gain +10% to Electronics, Mechanics, or Slicing. This reflects cross-training in common survival tech. This choice is permanent and may only be taken once.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: ""
    },
    social_versatility: {
      name: "Social Versatility",
      description: "Once per session, reroll any failed Charm, Deception, or Persuade check. This reflects the human gift for adapting socially on the fly.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: "session"
    },
    battle_tested_gut: {
      name: "Battle-Tested Gut",
      description: "Once per session, when entering a potentially dangerous situation, ask the GM: Do I feel something is off? The GM must answer truthfully (vaguely if appropriate).",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: "session"
    },
    skilled_focus: {
      name: "Skilled Focus",
      description: "Choose one: gain +10% to any non-combat, non-magic skill. This reflects training or life experience in a particular area. May only be taken once.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: ""
    },
    quick_learner: {
      name: "Quick Learner",
      description: "When you succeed at a roll for an untrained skill (one not granted by your Race or Profession), gain a bonus die the next time you use that skill during this session.",
      prerequisite: ["hard_lesson", "instinct_over_training", "makeshift_medic", "no_stranger_to_pain", "quick_fixer", "social_versatility", "battle_tested_gut", "skilled_focus"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    situational_awareness: {
      name: "Situational Awareness",
      description: "Once per session, gain a bonus die to a Perception, Insight, or Listen check during a high-stress scene (combat, infiltration, or tense social standoff).",
      prerequisite: ["battle_tested_gut", "instinct_over_training"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    spontaneous_strategist: {
      name: "Spontaneous Strategist",
      description: "Once per scene, gain a bonus die on a Dodge, Persuade, or Tactical (if used) roll made in response to an unexpected turn of events. Optional: Spend 1 Strain to activate this outside your normal action, as a reactive call.",
      prerequisite: ["hard_lesson"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "scene"
    },
    lucky_timing: {
      name: "Lucky Timing",
      description: "Once per session, choose one other player. After they fail a skill check, you may declare, ‘Wait—I’ve got this.’ You immediately attempt the same roll yourself with a bonus die.",
      prerequisite: ["social_versatility", "skilled_focus"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    improvised_tools: {
      name: "Improvised Tools",
      description: "Once per session, ignore the penalty for lacking tools when making a Mechanics, Electronics, or Slicing check. You’ve duct-taped worse.",
      prerequisite: ["quick_fixer"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    defiant_resilience: {
      name: "Defiant Resilience",
      description: "Once per session, ignore the effects of one failed Fear or Mental Trauma check (GM discretion). Optional: Spend 2 Strain to also gain a bonus die to your next Willpower or Insight check during the same scene.",
      prerequisite: ["no_stranger_to_pain"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    cross_trained: {
      name: "Cross-Trained",
      description: "Choose one additional Class Skill from any profession and gain +10% in it. This may only be taken once. Optional: Spend 1 Strain to treat a skill as trained for advancement purposes until the end of session.",
      prerequisite: ["skilled_focus", "quick_learner"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    momentum_shift: {
      name: "Momentum Shift",
      description: "Once per session, after a successful roll, you may immediately attempt another action (of a different skill) with a bonus die. Can be used for daring combos or sudden shifts in tempo.",
      prerequisite: ["spontaneous_strategist", "quick_learner"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    pull_from_memory: {
      name: "Pull From Memory",
      description: "Once per session, ask the GM: Have I read, seen, or heard of this before? If yes, gain a bonus die to a related Lore, History, or Magic (any) roll.",
      prerequisite: ["instinct_over_training"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    chain_of_luck: {
      name: "Chain of Luck",
      description: "Once per session, when you roll a natural 01–05 on any skill check, immediately gain a bonus die to your next roll.",
      prerequisite: ["lucky_timing", "hard_lesson"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    dig_deep: {
      name: "Dig Deep",
      description: "Once per session, push through a wound or mental strain: ignore a penalty die from fatigue, injury, or Veil exposure for one roll. Optional: Spend 2 Strain to ignore two penalty dice or apply the effect to two rolls this scene.",
      prerequisite: ["defiant_resilience"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    just_enough_prep: {
      name: "Just Enough Prep",
      description: "Once per session, declare you prepped for this. Reveal a basic tool, piece of info, or contact that reasonably helps the scene. Gain a bonus die to one roll using it. Optional: Spend 2 Strain to declare an additional prep aid during the same scene.",
      prerequisite: ["situational_awareness", "improvised_tools"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    break_the_pattern: {
      name: "Break the Pattern",
      description: "Once per session, negate one enemy’s bonus die (declared after they roll, before results are finalized).",
      prerequisite: ["social_versatility", "lucky_timing"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    tactical_improviser: {
      name: "Tactical Improviser",
      description: "Once per session, declare a flexible plan mid-scene. One ally you designate gains a bonus die once per round for the remainder of the scene, as long as their actions align with your stated approach. Optional: Spend 2 Strain per round to allow a second ally to benefit as well.",
      prerequisite: ["momentum_shift", "just_enough_prep"],
      tier: 4,
      cost: "40",
      capstone: true,
      usage_limit: "session"
    },
    luck_bends_for_me: {
      name: "Luck Bends for Me",
      description: "At the start of each session, make two Luck advancement rolls instead of one. If you fail a roll, gain +1d10 Luck. Additionally, once per session, spend 5 Luck to reroll a failed skill roll.",
      prerequisite: ["chain_of_luck", "hard_lesson"],
      tier: 4,
      cost: "40",
      capstone: true,
      usage_limit: "session"
    },
    unshakable_focus: {
      name: "Unshakable Focus",
      description: "Once per session, become immune to Fear, Pain, or Mental Trauma for the duration of a scene. While active, gain a bonus die to any Willpower-related roll. Optional: Instead of using it once per session, you may activate this once per scene by spending 4 Strain.",
      prerequisite: ["dig_deep", "defiant_resilience"],
      tier: 4,
      cost: "40",
      capstone: true,
      usage_limit: "session"
    },
    master_of_none: {
      name: "Master of None",
      description: "Choose three skills in which you have at least 50%. Gain +10% in each. These do not have to be from the same category or Class list.",
      prerequisite: ["cross_trained", "skilled_focus"],
      tier: 4,
      cost: "40",
      capstone: true,
      usage_limit: ""
    }
  },
  lyranni :{
    veilsight: {
      name: "Veilsight",
      description: "Activate as an action to perceive spirits, magical echoes, and arcane disturbances layered in the Veil. While active, gain a bonus die to Arcana or Spirit Lore to analyze anomalies. Spend 1 strain for 1 round or spend 4 strain to maintain for the entire scene.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: "scene"
    },
    threadwalker: {
      name: "Threadwalker",
      description: "Gain a bonus die to Arcana, Spirit Lore, or Occult Lore (choose one) when interacting with Veil phenomena. May be taken multiple times, once per skill.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: ""
    },
    legacy_spark: {
      name: "Legacy Spark",
      description: "Once per session, reroll a failed Arcana, Occult Lore, or Etiquette (Lyranni) check.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: "session"
    },
    social_ghost: {
      name: "Social Ghost",
      description: "Use Charm in place of Persuade or Intimidate when relying on elegance, mystique, or cultural presence.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: ""
    },
    aether_override: {
      name: "Aether Override",
      description: "Choose one: gain +10% to Slicing, Electronics, or Mechanics. Permanent; may only be taken once.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: ""
    },
    echo_in_the_veins: {
      name: "Echo in the Veins",
      description: "Choose one: gain +10% to Performance (any), Insight, or Streetwise. Reflects the lyrical awareness and social perception of the Lyranni.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: ""
    },
    veil_blooded_sense: {
      name: "Veil-Blooded Sense",
      description: "Once per session, detect the nearest major source of Veil activity (spirit, ward, corruption, or echo). Gain a bonus die on your next Arcana or Spirit Lore roll to investigate.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: "session"
    },
    glimmerstep: {
      name: "Glimmerstep",
      description: "Once per scene, spend 1 Strain to blur your magical footprint. Gain a bonus die on your next Stealth or Arcana roll to avoid detection by magical, spiritual, or surveillance effects.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: "scene"
    },
    resonant_poise: {
      name: "Resonant Poise",
      description: "Once per scene, gain a bonus die to Etiquette (High Society) or Charm when dealing with those who recognize your Veilmark or ancestral lineage.",
      prerequisite: "",
      tier: 1,
      cost: "10",
      capstone: false,
      usage_limit: "scene"
    },
    spirit_favored: {
      name: "Spirit-Favored",
      description: "Roll with a bonus die on Charm, Persuade, or Insight checks when interacting with spirits or Veil-bound entities.",
      prerequisite: ["veilsight"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: ""
    },
    whispers_beyond: {
      name: "Whispers Beyond",
      description: "Once per session, commune with a minor spirit or residual echo to receive a cryptic insight or spiritual impression.",
      prerequisite: ["veilsight"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    ancestral_resonance: {
      name: "Ancestral Resonance",
      description: "Gain a bonus die on Arcana, Occult Lore, or Spirit Lore checks involving ancestral spirits, relics, or Lyranni rites.",
      prerequisite: ["legacy_spark"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: ""
    },
    veil_dancer: {
      name: "Veil Dancer",
      description: "Once per session, gain a bonus die to Deception, Stealth, or Performance (any).",
      prerequisite: ["echo_in_the_veins"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    rite_bound: {
      name: "Rite-Bound",
      description: "Once per session, attempt to banish a spirit using any trained Magic skill. You must flavor the action through a Lyranni rite or ancestral tradition.",
      prerequisite: ["veil_blooded_sense"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    veilsplice: {
      name: "Veilsplice",
      description: "Choose one: gain +10% to Slicing or Electronics. Permanent; may only be taken once.",
      prerequisite: ["aether_override"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: ""
    },
    illuminated_touch: {
      name: "Illuminated Touch",
      description: "Once per scene, spend 1 Strain to interact with spiritual residue or arcane emotion in a location or item. Gain a bonus die to Insight or Spirit Lore when analyzing the impression.",
      prerequisite: ["veilsight", "threadwalker"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "scene"
    },
    words_like_silk: {
      name: "Words Like Silk",
      description: "Once per session, declare one social statement to be treated as credible by neutral NPCs unless given a strong reason to doubt. Gain a bonus die to Charm or Persuade during that interaction.",
      prerequisite: ["social_ghost"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    memory_bound_echo: {
      name: "Memory-Bound Echo",
      description: "Once per session, choose Arcana, Occult Lore, or Spirit Lore and gain a bonus die on all checks with that skill for the remainder of the scene.",
      prerequisite: ["legacy_spark"],
      tier: 2,
      cost: "20",
      capstone: false,
      usage_limit: "session"
    },
    true_veilsight: {
      name: "True Veilsight",
      description: "Veilsight may now be activated reflexively as a free action. While active, gain a bonus die to Arcana or Spirit Lore when studying arcane/spiritual effects. Spend 1 strain for 1 round or spend 4 strain to maintain for the entire scene.",
      prerequisite: ["veilsight"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "scene"
    },
    blood_rite_channeling: {
      name: "Blood Rite Channeling",
      description: "When below half Strain, you may cast a spell with a bonus die, but the Strain die is increased by one step (e.g., 1d6 → 1d8).",
      prerequisite: ["spirit_favored", "whispers_beyond", "ancestral_resonance", "veil_dancer", "rite_bound", "veilsplice", "illuminated_touch", "words_like_silk", "memory_bound_echo"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: ""
    },
    lyranni_discipline: {
      name: "Lyranni Discipline",
      description: "When above half Strain, you may reduce your Strain die by one step for one spell cast. May not be used with Blood Rite Channeling.",
      prerequisite: ["spirit_favored", "whispers_beyond", "ancestral_resonance", "veil_dancer", "rite_bound", "veilsplice", "illuminated_touch", "words_like_silk", "memory_bound_echo"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: ""
    },
    subtle_authority: {
      name: "Subtle Authority",
      description: "Once per session, gain a bonus die to Charm, Performance, or Etiquette (High Society) during a formal or elite social exchange.",
      prerequisite: ["social_ghost"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    veil_laced_command: {
      name: "Veil-Laced Command",
      description: "Once per scene, spend 1 Strain when issuing a direct command in a formal or ritual setting. Gain a bonus die to Persuade or Intimidate, as long as you invoke Veilborn status or tradition.",
      prerequisite: ["spirit_favored", "words_like_silk"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "scene"
    },
    shadow_echo_step: {
      name: "Shadow Echo Step",
      description: "Once per scene, after evading a spell or attack, move up to one range band up to long range as if phasing through shadow. Gain a bonus die to Dodge or Stealth.",
      prerequisite: ["glimmerstep", "veil_dancer"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "scene"
    },
    echo_binding: {
      name: "Echo Binding",
      description: "Once per session, bind a minor cooperative spirit. It aids for the scene, granting a bonus die to Perception, Arcana, or one Magic skill (chosen on binding).",
      prerequisite: ["memory_bound_echo", "rite_bound"],
      tier: 3,
      cost: "30",
      capstone: false,
      usage_limit: "session"
    },
    voice_of_the_ancestors: {
      name: "Voice of the Ancestors",
      description: "Once per session, gain a bonus die on any social skill roll or spell targeting spirits or Veil entities. You also roll with a bonus die when banishing a hostile spirit.",
      prerequisite: ["spirit_favored", "ancestral_resonance"],
      tier: 4,
      cost: "40",
      capstone: true,
      usage_limit: "session"
    },
    veil_linked_will: {
      name: "Veil-Linked Will",
      description: "Once per session, cast a spell with a bonus die, and reduce its Strain die by one step, regardless of your current Strain level.",
      prerequisite: ["lyranni_discipline"],
      tier: 4,
      cost: "40",
      capstone: true,
      usage_limit: "session"
    },
    echo_of_elegance: {
      name: "Echo of Elegance",
      description: "Once per session, ignore one penalty die on a social roll and gain a bonus die instead. You may also automatically succeed on one opposed Charm or Performance contest against a neutral or friendly target.",
      prerequisite: ["subtle_authority"],
      tier: 4,
      cost: "40",
      capstone: true,
      usage_limit: "session"
    },
	breath_of_the_veil: {
	  name: "Breath of the Veil",
	  description: "Once per session, spend 3 Strain to enter a state of deep arcane attunement. For the rest of the scene, gain a bonus die to Arcana, Spirit Lore, and Magic (Illusion or Enchantment) . If used in a formal ritual, the result is considered exceptional (GM discretion).",
	  prerequisite: ["true_veilsight"],
	  prerequisiteAny: { tier: 3, count: 1},
	  tier: 4,
	  cost: "40",
	  capstone: true,
      usage_limit: "session"
	}
  }
};

// Skills that Talents make available to add skill points.
// This should be merged with talentDataMap to unify
const talentSkillMap = {
  alteri: {
    maskwrights_grace: {
      disguise: "Disguise", impersonation: "Impersonation", insight: "Insight"
    },
    shaped_for_subtlety: {
      insight: "Insight", slicing: "Slicing", stealth: "Stealth"
    },
	deep_mask_integration: {
	  disguise: "Disguise", insight: "Insight"
	},
	persona_anchor: {
	  arcana: "Arcana", impersonation: "Impersonation", slicing: "Slicing"
	}
  },
  draevi: {
    clan_blooded: {
      intimidate: "Intimidate", survival_wilderness: "Survival (Wilderness)", track: "Track"
    },
    scavengers_edge: {
      electronics: "Electronics", mechanics: "Mechanics", streetwise: "Streetwise"
    }
  },
  human: {
    quick_fixer: {
      electronics: "Electronics", mechanics: "Mechanics", slicing: "Slicing"
    },
    skilled_focus: {
      // Checkbox will add -10 to Skill Point Total to indicate the choice.
    },
	cross_trained: {
	  // Checkbox will add -10 to Skill Point Total to indicate the choice.
	},
	master_of_none: {
	  // Checkbox will add -30 to Skill Point Total to indicate the choice.
	}
  },
  lyranni: {
	threadwalker : {
	  arcana: "Arcana", occult: "Occult Lore", spirit_lore: "Spirit Lore"
	},
    aether_override: {
      electronics: "Electronics", mechanics: "Mechanics", slicing: "Slicing"
    },
    echo_in_the_veins: {
      chant: "Chant", dance: "Dance", impersonation: "Impersonation", instrument: "Instrument", singing: "Singing", insight: "Insight", streetwise: "Streetwise"
    },
	veilsplice : {
	  electronics: "Electronics", slicing: "Slicing"
	}
  }
};

const backgroundDataMap = {
  alteri: {
    soft_year_drifter: {
      trained_skills: ["coordination", "deception", "disguise", "impersonation", "insight", "stealth", "streetwise"],
      starting_item: "mask_journal-u",
      starting_talents: ["second_skin", "reflexive_shift", "grace_of_the_many"]
    },
	veilhaven_attendant: {
	  trained_skills: ["arcana", "insight", "disguise", "history", "etiquette_alteri", "impersonation", "occult"],
	  starting_item: "kin_token-u",
	  starting_talents: ["maskwrights_grace", "whisper_touched", "social_chameleon"]
	},
	ghostline_runner: {
	  trained_skills: ["slicing", "streetwise", "stealth", "electronics", "deception", "insight", "impersonation"],
	  starting_item: "burner_id_package-u",
	  starting_talents: ["ghost_protocol", "shaped_for_subtlety", "echoed_voice"]
	},
    legacy_bearer: {
      trained_skills: ["impersonation", "history", "insight", "arcana", "etiquette_alteri", "disguise", "occult"],
      starting_item: "legacy_ritual_item-u",
      starting_talents: ["echoed_voice", "maskwrights_grace", "second_skin"]
    },
    break_faced_radical: {
      trained_skills: ["persuade", "deception", "impersonation", "insight", "streetwise", "disguise", "charm"],
      starting_item: "digital_mask_manifest-u",
      starting_talents: ["social_chameleon", "reflexive_shift", "shaped_for_subtlety"]
    }
  },
  draevi: {
    horn_carved_wanderer: {
      trained_skills: ["veil_lore", "occult", "survival_wilderness", "first_aid", "insight", "track", "arcana"],
      starting_item: "clan_ritual_token-u",
      starting_talents: ["spirits_in_stone", "clan_blooded", "iron_stomach"]
    },
    spiritbound_techshaper: {
      trained_skills: ["slicing", "spirit_lore", "electronics", "arcana", "insight", "mechanics", "streetwise"],
      starting_item: "ram_shell_unfinished-u",
      starting_talents: ["spirits_in_stone", "scavengers_edge", "clan_blooded"]
    },
    tradition_keeper: {
      trained_skills: ["survival_wilderness", "navigate", "perception", "athletics", "occult", "track", "first_aid"],
      starting_item: "rite_of_passage_horn-u",
      starting_talents: ["trailborn_reflexes", "iron_stomach", "spirits_in_stone"]
    },
    urban_tread: {
      trained_skills: ["athletics", "streetwise", "stealth", "coordination", "perception", "mechanics", "climb"],
      starting_item: "repurposed_clan_token-u",
      starting_talents: ["gutter_stalker", "urban_climber", "trailborn_reflexes"]
    },
    forgeblood_scavenger: {
      trained_skills: ["mechanics", "electronics", "insight", "streetwise", "coordination", "perception", "survival_wilderness"],
      starting_item: "salvaged_veil_artifact-u",
      starting_talents: ["scavengers_edge", "iron_stomach", "urban_climber"]
    }
  },
  human: {
    scavsteel_whelp: {
      trained_skills: ["mechanics", "electronics", "streetwise", "insight", "slicing", "survival_urban", "perception"],
      starting_item: [ "trusted_toolset-u", "modded_wearable-u"],
      starting_talents: ["quick_fixer", "hard_lesson", "skilled_focus"]
    },
    enclave_born: {
      trained_skills: ["etiquette_high_society", "persuade", "insight", "voice", "charm", "bureaucracy", "history"],
      starting_item: "pristine_id_code_uptier_zone-u",
      starting_talents: ["social_versatility", "instinct_over_training", "battle_tested_gut"]
    },
    gutterfire_youth: {
      trained_skills: ["stealth", "streetwise", "sleight_of_hand", "deception", "perception", "dodge", "slicing"],
      starting_item: "personal_survival_kit-u",
      starting_talents: ["social_versatility", "hard_lesson", "skilled_focus"]
    },
    outpost_raised: {
      trained_skills: ["survival_wilderness", "firearms_rifle", "mechanics", "navigate", "first_aid", "insight", "drive"],
      starting_item: "outpost_keepsake-u",
      starting_talents: ["battle_tested_gut", "no_stranger_to_pain", "hard_lesson"]
    },
    data_hatched: {
      trained_skills: ["slicing", "science", "electronics", "insight", "occult", "bureaucracy", "recitation"],
      starting_item: ["memory_shard-u", "ai_record-u"],
      starting_talents: ["instinct_over_training", "quick_fixer", "skilled_focus"]
    },
    ash_war_refugee: {
      trained_skills: ["first_aid", "insight", "athletics", "dodge", "survival_urban", "perception", "stealth"],
      starting_item: "faded_token_of_past-u",
      starting_talents: ["makeshift_medic", "no_stranger_to_pain", "hard_lesson"]
    }
  },
  lyranni: {
	whisper_walker: {
		trained_skills: ["perception", "occult", "spirit_lore", "insight", "survival_wilderness", "stealth", "magic_warding"],
		starting_item: "veilmark_living-sigil-u",
		starting_talents: ["threadwalker", "veilsight", "veil_blooded_sense"]
	},
	zurethkai_flameborn: {
		trained_skills: ["slicing", "magic_technomancy", "electronics", "arcana", "deception", "magic_illusion", "insight"],
		starting_item: "symbolic_magitech_mod-u",
		starting_talents: ["aether_override", "veil_blooded_sense", "echo_in_the_veins"]
	},
	aelvareth_devotee: {
		trained_skills: ["occult", "etiquette_lyranni", "arcana", "chant", "magic_warding", "bureaucracy", "veil_lore"],
		starting_item: "aelvareth_veilmark-u",
		starting_talents: ["threadwalker", "legacy_spark", "veilsight"]
	},
    echoborne: {
      trained_skills: ["arcana", "etiquette_lyranni", "occult", "history", "insight", "voice", "bureaucracy"],
      starting_item: "ancestral_veilmark-u",
      starting_talents: ["legacy_spark", "veilsight", "threadwalker"]
    },
	glide_spire_scion: {
		trained_skills: ["persuade", "streetwise", "charm", "insight", "etiquette_high_society", "dance", "deception"],
		starting_item: "veil_threaded_accessory-u",
		starting_talents: ["social_ghost", "echo_in_the_veins", "legacy_spark"]
	}
  }
};

const careerDataMap = {
	codeweaver: {
        name: "Codeweaver",
        career_type: "arcane",
        career_type_name: "Arcane",
        skill_points_primary_formula: {
            attributes: ["EDU", "INT"],
            multipliers: [2, 2]
        },
        skill_points_primary_display: "EDU × 2 + INT × 2",
        skill_points_secondary: 20,
        spell_xp_primary: 30,
        spell_xp_secondary: 10,
        primary_skills: {
            magic_technomancy: "Magic (Technomancy)",
            slicing: "Slicing",
            electronics: "Electronics",
            computer_use: "Computer Use"
        },
        secondary_skills: {
            security: "Security Systems",
            drone_operation: "Drone Operation",
            insight: "Insight",
            perception: "Perception",
            arcana: "Arcana",
            spirit_lore: "Spirit Lore"
        },
        talents: {
            signal_sync: {
                name: "Signal Sync",
                description: "Once per scene, gain a bonus die on a Magic (Technomancy) or Slicing check when interfacing with a digital system, drone, or magitech device. If successful, reduce the spell’s Strain cost by one die step.",
                prerequisite: "",
                tier: 1,
                cost: "5",
                capstone: false,
                usage_limit: "scene"
            },
            veil_thread_tap: {
                name: "Veil Thread Tap",
                description: "Once per scene, detect nearby digital activity or magitech signatures within short range — even if encrypted or cloaked. Gain a bonus die to your next Perception or Slicing check related to that system.",
                prerequisite: "",
                tier: 1,
                cost: "5",
                capstone: false,
                usage_limit: "scene"
            },
            hardlight_override: {
                name: "Hardlight Override",
                description: "Once per scene, spend 2 Strain to project a hardlight sigil into a nearby device (e.g., door, turret, drone). You may trigger a basic function (open, shut down, disengage) without a skill check.",
                prerequisite: "",
                tier: 1,
                cost: "5",
                capstone: false,
                usage_limit: "scene"
            },
            recursive_pulse: {
                name: "Recursive Pulse",
                description: "Once per scene, after a failed attempt to access or affect a device, you may reroll with a penalty die. If successful, regain 1 Strain.",
                prerequisite: "",
                tier: 1,
                cost: "5",
                capstone: false,
                usage_limit: "scene"
            },
            strain_buffer: {
                name: "Strain Buffer",
                description: "Increase your maximum Strain by +1. This talent may appear in multiple Career Trees.",
                prerequisite: "",
                tier: 1,
                cost: "5",
                capstone: false,
                usage_limit: ""
            },
            pulse_hijack: {
                name: "Pulse Hijack",
                description: "Spend 2 Strain to take control of a simple device or automated system (e.g., surveillance cam, basic drone, access node) for one round.",
                prerequisite: "hardlight_override",
                tier: 2,
                cost: "10",
                capstone: false,
                usage_limit: ""
            },
            code_injection: {
                name: "Code Injection",
                description: "Once per scene, after a successful Technomancy spell or Slicing check, implant a command packet that allows you to issue one additional command later in the same scene without a new check.",
                prerequisite: "signal_sync",
                tier: 2,
                cost: "10",
                capstone: false,
                usage_limit: "scene"
            },
            scramble_protocol: {
                name: "Scramble Protocol",
                description: "Spend 2 Strain to disrupt a single active drone or magitech system for one round. It suffers a penalty die on all tech-based or automated actions.",
                prerequisite: "recursive_pulse",
                tier: 2,
                cost: "10",
                capstone: false,
                usage_limit: ""
            },
            arc_sigil_link: {
                name: "Arc-Sigil Link",
                description: "You may roll Magic (Technomancy) in place of Electronics or Computer Use when interacting with magitech systems. This does not apply to physical repairs or mechanical breakdowns.",
                prerequisite: "veil_thread_tap",
                tier: 2,
                cost: "10",
                capstone: false,
                usage_limit: ""
            },
            clean_loop_feedback: {
                name: "Clean Loop Feedback",
                description: "Once per session, after successfully casting a Technomancy spell on a device, regain 1d4 Strain.",
                prerequisite: "",
                prerequisiteAny: { tier: 1, count: 1 },
                tier: 2,
                cost: "10",
                capstone: false,
                usage_limit: "session"
            },
            magelock_cascade: {
                name: "Magelock Cascade",
                description: "Once per session, when you successfully disable or control a device, you may immediately target a second device within short range. The second target rolls resistance with a penalty die.",
                prerequisite: "pulse_hijack",
                tier: 3,
                cost: "15",
                capstone: false,
                usage_limit: "session"
            },
            null_loop_echo: {
                name: "Null Loop Echo",
                description: "Spend 2 Strain to create a disruption field around you (short range) for one round. All drones, magitech, and automated systems inside suffer a penalty die on targeting, reactions, or interfacing.",
                prerequisite: "scramble_protocol",
                tier: 3,
                cost: "15",
                capstone: false,
                usage_limit: ""
            },
            arc_thread_override: {
                name: "Arc-Thread Override",
                description: "Once per scene, when a hostile device activates, you may cast a Technomancy spell as a reaction. The spell must affect technology (jam, crash, reroute, etc.).",
                prerequisite: "code_injection",
                tier: 3,
                cost: "15",
                capstone: false,
                usage_limit: "scene"
            },
            subroutine_leash: {
                name: "Subroutine Leash",
                description: "You may take control of a single drone you have accessed. It acts as an allied NPC on your turn for the duration of the spell or control effect.",
                prerequisite: "arc_sigil_link",
                tier: 3,
                cost: "15",
                capstone: false,
                usage_limit: ""
            },
            synthetic_harmony: {
                name: "Synthetic Harmony",
                description: "Once per scene, after casting a Technomancy spell or succeeding a Slicing check, gain a bonus die on your next spellcasting or social skill check.",
                prerequisite: "",
                prerequisiteAny: { tier: 2, count: 1 },
                tier: 3,
                cost: "15",
                capstone: false,
                usage_limit: "scene"
            },
            command_injection: {
                name: "Command Injection",
                description: "Once per scene, after casting a Technomancy spell or issuing a drone command, you may issue two distinct commands instead of one.",
                prerequisite: "subroutine_leash",
                tier: 4,
                cost: "20",
                capstone: false,
                usage_limit: "scene"
            },
            crash_field: {
                name: "Crash Field",
                description: "Once per session, create a crash zone (medium range) for one round. All affected drones or magitech systems must succeed a POW or INT roll or become readonly until the start of your next turn.",
                prerequisite: "null_loop_echo",
                tier: 4,
                cost: "20",
                capstone: false,
                usage_limit: "session"
            },
            live_patch_redirect: {
                name: "Live Patch Redirect",
                description: "Once per session, when an ally is targeted by a spell, ability, or tech effect, you may spend 2 Strain to redirect the effect to yourself or a controlled construct.",
                prerequisite: "arc_thread_override",
                tier: 4,
                cost: "20",
                capstone: false,
                usage_limit: "session"
            },
            backdoor_ritual: {
                name: "Backdoor Ritual",
                description: "Once per scene, you may embed a persistent arcane anchor in a system you access. If the system is triggered again this scene, you may act on it immediately without a new roll. Only one Backdoor may be active at a time.",
                prerequisite: "arc_thread_override",
                tier: 4,
                cost: "20",
                capstone: false,
                usage_limit: "scene"
            },
            veil_reactor_stabilizer: {
                name: "Veil-Reactor Stabilizer",
                description: "Once per session, spend 2 Strain to negate a Veil corruption effect, a magitech malfunction, or to reduce incoming damage by 1d6 from a tech-based or Veil-powered source.",
                prerequisite: "",
				prerequisiteAny: { tier: 3, count: 1 },
                tier: 4,
                cost: "20",
                capstone: false,
                usage_limit: "session"
            },
            overcode_detonation: {
                name: "Overcode Detonation",
                description: "Once per session, trigger a system cascade affecting any magitech network or drone field within medium range. All affected systems must roll POW or INT or suffer shutdown, 1d6 damage, or go berserk (your choice per target). Cybernetic limbs and smart weapons tied to living users are unaffected.",
                prerequisite: ["magelock_cascade", "crash_field"],
                tier: 5,
                cost: "30",
                capstone: true,
                usage_limit: "session"
            },
            signal_possession: {
                name: "Signal Possession",
                description: "Once per session, take full control of a drone, turret, or magitech construct within medium range for the rest of the scene. If the target is destroyed or disconnected, you may transfer control to another valid device once.",
                prerequisite: ["subroutine_leash", "command_injection"],
                tier: 5,
                cost: "30",
                capstone: true,
                usage_limit: "session"
            },
            reality_patch: {
                name: "Reality Patch",
                description: "Once per session, cast a Technomancy spell with a casting time of 1 action or less as a reaction to a failed defense, corrupted system, or Veil event. The spell automatically succeeds but costs double Strain.",
                prerequisite: ["live_patch_redirect", "veil_reactor_stabilizer"],
                tier: 5,
                cost: "30",
                capstone: true,
                usage_limit: "session"
            },
            stat_boost: {
                name: "+5% Stat Boost",
                description: "Increase any one core stat — including Magic — by +5%, up to your racial maximum. May only be taken once.",
                prerequisite: "",
                prerequisiteAny: { tier: 4, count: 1 },
                tier: 5,
                cost: "30",
                capstone: true,
                usage_limit: ""				
            }
        }
    },
	combat_medic: {
		name: "Combat Medic",
		career_type: "support",
		career_type_name: "Support",
		skill_points_primary_formula: {
			attributes: ["EDU"],
			multipliers: [4]
		},
		skill_points_primary_display: "EDU × 4",
		skill_points_secondary: 20,
		spell_xp_primary: 0,
		spell_xp_secondary: 0,
		primary_skills: {
			first_aid: "First Aid",
			medicine: "Medicine",
			coordination: "Coordination",
			dodge: "Dodge"
		},
		secondary_skills: {
			firearms_handgun: "Pistols",
			insight: "Insight",
			electronics: "Electronics",
			athletics: "Athletics",
			perception: "Perception",
			security: "Security Systems"
		},
		talents: {
			field_stabilizer: {
				name: "Field Stabilizer",
				description: "Once per scene, gain a bonus die when using Medicine or First Aid on an unconscious or dying ally.",
				prerequisite: "",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "scene"
			},
			pain_doesnt_matter: {
				name: "Pain Doesn’t Matter",
				description: "Once per scene, make a Medicine check to restore consciousness to an ally who is unconscious or who failed a CON check after suffering a major wound.",
				prerequisite: "",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "scene"
			},
			trauma_team_reflexes: {
				name: "Trauma Team Reflexes",
				description: "Once per scene, you may trade Initiative order with an ally. Both characters must not have acted yet.",
				prerequisite: "",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "scene"
			},
			injector_harness: {
				name: "Injector Harness",
				description: "Once per scene, you may perform a First Aid, stim, or injector-based action as a maneuver instead of an action.",
				prerequisite: "",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "scene"
			},
			vital_scan_overlay: {
				name: "Vital Scan Overlay",
				description: "Once per scene, gain a bonus die on a First Aid or Medicine roll if the target is below half HP. You may also detect hidden conditions (e.g., internal bleeding, toxin exposure) with a successful check.",
				prerequisite: "",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "scene"
			},
			pressure_seal: {
				name: "Pressure Seal",
				description: "Once per session, you may automatically stabilize a bleeding-out ally below 0 HP. No roll required.",
				prerequisite: "field_stabilizer",
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: "session"
			},
			painkiller_protocol: {
				name: "Painkiller Protocol",
				description: "After healing an ally, they gain a bonus die on their next action during the same scene.",
				prerequisite: "injector_harness",
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: ""
			},
			stay_with_me: {
				name: "Stay With Me!",
				description: "Once per scene, when an ally within engaged or short-range drops to 0 HP, you may immediately make a First Aid check as a reaction to stabilize them.",
				prerequisite: "field_stabilizer",
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: "scene"
			},
			tactical_redeployment: {
				name: "Tactical Redeployment",
				description: "As a reaction, when an ally within medium range takes damage, you may move one range band closer toward them.",
				prerequisite: "trauma_team_reflexes",
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: ""
			},
			medical_override: {
				name: "Medical Override",
				description: "Once per scene, spend 2 Strain to double the HP healed by your next First Aid or Medicine check.",
				prerequisite: [ "pain_doesnt_matter" ,"injector_harness"],
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: "scene"
			},
			surgical_clarity: {
				name: "Surgical Clarity",
				description: "Once per session, reroll a failed Medicine or First Aid check with a bonus die. If successful, the action takes half the usual time.",
				prerequisite: [ "stay_with_me" ,"pressure_seal"],
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "session"
			},
			combat_revive: {
				name: "Combat Revive",
				description: "Once per session, you may revive a stabilized ally within engaged range, restoring up to half their HP. Requires a full action and physical contact.",
				prerequisite: "medical_override",
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "session"
			},
			quickdraw_injector: {
				name: "Quickdraw Injector",
				description: "Once per scene, you may use a stim or injector as a reaction on yourself or an ally in engaged range.",
				prerequisite: [ "injector_harness", "painkiller_protocol"],
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "scene"
			},
			overwatch_healer: {
				name: "Overwatch Healer",
				description: "While providing overwatch for an injured ally, gain a bonus die on your next attack against an enemy who attacks that ally.",
				prerequisite: "tactical_redeployment",
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: ""
			},
			veil_immunologist: {
				name: "Veil Immunologist",
				description: "Once per session, make a Medicine check to reduce Veil Corruption in an ally who suffered corruption this scene. You also gain a bonus die on Medicine checks against arcane or Veil-based afflictions.",
				prerequisite: ["pressure_seal", "vital_scan_overlay"],
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "session"
			},
			endurance_conditioning: {
				name: "Endurance Conditioning",
				description: "Gain +2 maximum HP. This bonus is permanent.",
				prerequisite: [ "surgical_clarity" ,"combat_revive" ],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: ""
			},
			emergency_triage_net: {
				name: "Emergency Triage Net",
				description: "Once per session, select up to two allies within short range. You may divide the result of one successful Medicine check between them (each must receive at least 1 HP).",
				prerequisite: "overwatch_healer",
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "session"
			},
			ghost_of_the_er: {
				name: "Ghost of the ER",
				description: "Once per session, you may move through a danger zone to reach an injured ally. You do not provoke Overwatch attacks or reactions, and enemies suffer a penalty die when targeting you until your next turn.",
				prerequisite: "overwatch_healer",
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "session"
			},
			field_expeditor: {
				name: "Field Expeditor",
				description: "Once per session, you may perform a First Aid or Medicine check as a free action instead of a full action.",
				prerequisite: "combat_revive",
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "session"
			},
			reactive_trauma_surge: {
				name: "Reactive Trauma Surge",
				description: "Once per scene, when an ally within short range drops below half HP, you may move to them and perform a First Aid check as a free action. If successful, they gain a bonus die on their next action.",
				prerequisite: "surgical_clarity",
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "scene"
			},
			no_one_dies_today: {
				name: "No One Dies Today",
				description: "Once per session, when an ally you can see would die from an attack or effect, they instead remain alive at 1 HP and may act normally for the remainder of the scene.",
				prerequisite: "emergency_triage_net",
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: "session"
			},
			miracle_protocol: {
				name: "Miracle Protocol",
				description: "Once per session, make a Medicine check that automatically succeeds. On success, you may also remove one condition or one level of Veil Corruption from the target.",
				prerequisite: ["field_expeditor" ,"ghost_of_the_er"],
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: "session"
			},
			stat_boost: {
				name: "+5% Stat Boost",
				description: "Increase any one core stat — including Magic — by +5%, up to your racial maximum. May only be taken once.",
				prerequisite: "",
				prerequisiteAny: { tier: 4, count: 1 },
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: ""
			},
			adrenal_shield_matrix: {
				name: "Adrenal Shield Matrix",
				description: "Once per session, when healing an ally, they also gain 1d6 temporary HP that lasts for the remainder of the scene.",
				prerequisite: "endurance_conditioning",
				tier: 5,
				cost: "30",
				capstone: true,
				usage_limit: "session"
			}
		}
	},
	mindbender: {
		name: "Mindbender",
		career_type: "arcane",
		career_type_name: "Arcane",
		skill_points_primary_formula: {
			attributes: ["EDU", "POW"],
			multipliers: [2, 2]
		},
		skill_points_primary_display: "EDU × 2 + POW × 2",
		skill_points_secondary: 20,
		spell_xp_primary: 30,
		spell_xp_secondary: 10,
		primary_skills: {
			magic_enchantment: "Magic (Enchantment)",
			insight: "Insight",
			arcana: "Arcana",
			persuade: "Persuade"
		},
		secondary_skills: {
			deception: "Deception",
			charm: "Charm",
			intimidate: "Intimidate",
			etiquette_high_society: "Etiquette (High Society)",
			impersonation: "Performance (Impersonation)",
			interrogation: "Interrogation"
		},
		talents: {
			suggestive_echo: {
				name: "Suggestive Echo",
				description: "Once per scene, when casting an Enchantment spell that influences thoughts or emotions, gain a bonus die on the casting roll. If the target resists or is unaffected, they suffer a penalty die on their next Insight or social-based roll.",
				prerequisite: "",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "scene"
			},
			thread_of_doubt: {
				name: "Thread of Doubt",
				description: "Once per scene, when interacting with an NPC, you may subtly seed hesitation. Apply a penalty die to their next opposed roll against you (social, combat, or magical).",
				prerequisite: "",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "scene"
			},
			veil_of_intent: {
				name: "Veil of Intent",
				description: "Once per scene, you may substitute your Insight skill for Charm or Persuade when influencing a target. You’re not convincing them — you’re reading them and pressing the right internal button.",
				prerequisite: "",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "scene"
			},
			mental_static: {
				name: "Mental Static",
				description: "Once per scene, spend 2 Strain to scramble a target’s concentration. For the rest of the round, they suffer a penalty die to any attempt to cast or maintain a spell. May be used as an action or reaction.",
				prerequisite: "",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "scene"
			},
			strain_buffer: {
				name: "Strain Buffer",
				description: "Increase your maximum Strain by +1. This talent may appear in multiple Career Trees.",
				prerequisite: "",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: ""
			},
			cognitive_rewire: {
				name: "Cognitive Rewire",
				description: "Once per scene, reroll a failed Enchantment spell that targets a single humanoid. If the reroll succeeds, reduce the spell’s Strain cost by one die step.",
				prerequisite: "suggestive_echo",
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: "scene"
			},
			prey_on_instinct: {
				name: "Prey on Instinct",
				description: "Once per scene, when engaging a target in a social contest or interrogation, you may force them to defend using unmodified POW instead of their usual social skill.",
				prerequisite: "thread_of_doubt",
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: "scene"
			},
			emotional_override: {
				name: "Emotional Override",
				description: "Spend 2 Strain to impose a temporary emotional state (fear, calm, guilt, anger, etc.) on a target within short range. Lasts for one round. If the state is disrupted, the target suffers a penalty die on their next action.",
				prerequisite: "veil_of_intent",
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: ""
			},
			memory_spike: {
				name: "Memory Spike",
				description: "Once per session, force a target to recall a vivid traumatic or confusing memory. They must succeed a POW roll or lose their next Maneuver.",
				prerequisite: "",
				prerequisiteAny: { tier: 1, count: 1 },
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: "session"
			},
			neural_misdirection: {
				name: "Neural Misdirection",
				description: "When casting an Enchantment spell in combat, you may spend 1 additional Strain to render the spell unnoticeable to all observers except the target.",
				prerequisite: "mental_static",
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: ""
			},
			echo_implantation: {
				name: "Echo Implantation",
				description: "Once per session, after casting a successful Enchantment spell, you may embed a mental echo. Spend 1 Strain later in the same scene to re-trigger the emotional effect for one round.",
				prerequisite: "cognitive_rewire",
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "session"
			},
			false_memory: {
				name: "False Memory",
				description: "Once per session, implant a short false memory in a target during conversation. The target must fail an Insight or POW roll to notice. Cannot override major truths.",
				prerequisite: "memory_spike",
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "session"
			},
			veil_laced_words: {
				name: "Veil-Laced Words",
				description: "For the duration of a social encounter, spend 1 Strain once per turn to gain a bonus die on a Charm, Deception, or Persuade roll while maintaining emotional pressure.",
				prerequisite: "prey_on_instinct",
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: ""
			},
			neural_whiplash: {
				name: "Neural Whiplash",
				description: "Once per session, when a target resists or breaks free of your spell, they suffer 1d4 Strain and lose their next Reaction or Maneuver.",
				prerequisite: "neural_misdirection",
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "session"
			},
			hollow_gaze: {
				name: "Hollow Gaze",
				description: "Once per session, lock eyes with a single target. For one round, they suffer a penalty die on any action that opposes or harms you, unless they succeed a POW roll.",
				prerequisiteAny: { tier: 2, count: 1 },
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "session"
			},
			resonant_persona: {
				name: "Resonant Persona",
				description: "Once per session, choose a target who previously failed a roll against you. For the rest of the scene, gain a bonus die on all attempts to influence or mislead them.",
				prerequisite: ["veil_laced_words", "echo_implantation"],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "session"
			},
			synaptic_lag: {
				name: "Synaptic Lag",
				description: "Once per scene, spend 2 Strain to disrupt a target’s rhythm. Until the start of your next turn, they lose their next action (they may still take a Maneuver and Reaction). May be used as an action or reaction.",
				prerequisite: "neural_whiplash",
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "scene"
			},
			emotion_override_field: {
				name: "Emotion Override Field",
				description: "Once per session, create a short-range field. All hostile creatures within it must succeed a POW roll or suffer a penalty die on aggressive actions for one round.",
				prerequisite: "neural_whiplash",
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "session"
			},
			compromise_anchor: {
				name: "Compromise Anchor",
				description: "Once per session, if you fail a social or spellcasting roll, you may immediately follow up with a different social skill. The second attempt gains a bonus die.",
				prerequisite: "false_memory",
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "session"
			},
			cognitive_fortress: {
				name: "Cognitive Fortress",
				description: "Once per scene, when targeted by a spell or social effect that affects your mind or emotions, roll POW. On a success, the effect is negated. You may spend 1 Strain to gain a bonus die on your next social or spellcasting roll.",
				prerequisite: "hollow_gaze",
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "scene"
			},
			puppetmaster_protocol: {
				name: "Puppetmaster Protocol",
				description: "Once per session, control a single humanoid target for one round. If they fail a POW resistance roll, you dictate their actions as if they were an ally — including movement, spells, or attacks.",
				prerequisiteAll: ["echo_implantation", "resonant_persona"],
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: "session"
			},
			emotional_collapse: {
				name: "Emotional Collapse",
				description: "Once per session, when a target fails a POW or social resistance roll against you, they suffer a penalty die on all aggressive or willpower-based actions for the rest of the scene, and must succeed a POW roll to initiate hostile actions.",
				prerequisite: ["emotion_override_field", "synaptic_lag"],
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: "session"
			},
			scene_fracture: {
				name: "Scene Fracture",
				description: "Once per session, trigger a psychic rupture. All creatures within medium range must roll POW. Those who fail suffer hallucinations or confusion, take a penalty die on all actions for one round, and suffer a penalty die on resistance rolls against your Enchantment spells for the rest of the scene.",
				prerequisiteAll: ["false_memory", "cognitive_fortress"],
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: "session"
			},
			stat_boost: {
				name: "+5% Stat Boost",
				description: "Increase any one core stat — including Magic — by +5%, up to your racial maximum. May only be taken once.",
				prerequisiteAny: { tier: 4,	count: 1 },
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: ""
			}
		}
	},
	sigilbound: {
		name: "Sigilbound",
		career_type: "arcane",
		career_type_name: "Arcane",
		skill_points_primary_formula: {
			attributes: ["EDU", "POW"],
			multipliers: [2, 2]
		},
		skill_points_primary_display: "EDU × 2 + POW × 2",
		skill_points_secondary: 20,
		spell_xp_primary: 30,
		spell_xp_secondary: 10,
		primary_skills: {
			magic_warding: "Magic (Warding)",
			arcana: "Arcana",
			perception: "Perception",
			insight: "Insight"
		},
		secondary_skills: {
			first_aid: "First Aid",
			security: "Security Systems",
			etiquette_magi: "Etiquette (Magi House)",
			etiquette_corporate: "Etiquette (Corporate)",
			occult: "Occult Lore",
			dodge: "Dodge",
			survival_urban: "Survival (Urban)"
		},
		exclusive_skill_sets: [
			["etiquette_magi", "etiquette_corporate"]
		],
		talents: {
			runesight: {
				name: "Runesight",
				description: "Once per scene, gain a bonus die on a Magic (Warding) check. If used defensively (e.g., block, suppress, counter), reduce the spell’s Strain cost by one die step .",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "scene"
			},
			glyphstep: {
				name: "Glyphstep",
				description: "Spend 2 Strain to move 1 range band as a reaction when an enemy targets you with a spell or attack.",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: ""
			},
			sigil_hardened: {
				name: "Sigil Hardened",
				description: "Gain a bonus die on CON rolls to resist knockdown, suppression, or forced movement .",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: ""
			},
			arcane_lock: {
				name: "Arcane Lock",
				description: "Once per scene, designate a point (e.g., doorway, corridor) within short range as warded. Enemies suffer a penalty die on ranged attacks made through the ward until the start of your next turn.",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "scene"
			},
			strain_buffer: {
				name: "Strain Buffer",
				description: "Increase your maximum Strain by +1. This talent may appear in multiple Career Trees.",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: ""
			},
			reflective_ward: {
				name: "Reflective Ward",
				description: "Once per scene, when targeted by a spell, the caster suffers a penalty die . If the spell fails, it reflects back on them.",
				prerequisite: ["runesight"],
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: "scene"
			},
			stabilization_glyph: {
				name: "Stabilization Glyph",
				description: "Spend 2 Strain to ward an ally within short range. The next time they would fall below 1 HP this scene, they remain at 1 HP instead.",
				prerequisite: ["arcane_lock"],
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: ""
			},
			barrier_projection: {
				name: "Barrier Projection",
				description: "Spend 3 Strain to conjure a short-range barrier. Any ally using it for cover causes enemies to suffer a penalty die on ranged attacks. Lasts for one scene or until destroyed (GM discretion).",
				prerequisite: ["arcane_lock"],
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: ""
			},
			sigil_of_anchoring: {
				name: "Sigil of Anchoring",
				description: "Once per scene, place a glyph on yourself or an ally. The target cannot be forcibly moved or teleported for one round.",
				prerequisite: ["glyphstep"],
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: "scene"
			},
			warded_advance: {
				name: "Warded Advance",
				description: "Once per scene, when you and an ally move toward danger, conjure a temporary glyph shield. The next time either of you is hit this round, reduce the damage taken by 2 (after armor).",
				prerequisite: ["barrier_projection", "glyphstep"],
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: "scene"
			},
			counterglyph: {
				name: "Counterglyph",
				description: "Once per session, as a reaction, force a nearby enemy caster to suffer a penalty die on their spell. If they fail, they suffer 1d4 Strain.",
				prerequisite: ["reflective_ward"],
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "session"
			},
			arcane_reversal: {
				name: "Arcane Reversal",
				description: "Once per session, when you succeed on a Warding spell to block, suppress, or shield, you may restore 1d4 Strain to yourself or a nearby ally.",
				prerequisite: ["sigil_of_anchoring"],
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "session"
			},
			sanctum_sigil: {
				name: "Sanctum Sigil",
				description: "Spend 3 Strain to create a warded zone around you. Allies inside gain a bonus die to CON or POW rolls vs. magical or Veil effects. Lasts one scene.",
				prerequisiteAny: { tier: 2, count: 1 },
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: ""
			},
			null_field: {
				name: "Null Field",
				description: "Once per scene, create a suppression zone in short range. All spells cast inside or through it suffer a penalty die for 1 round.",
				prerequisite: ["reflective_ward", "barrier_projection"],
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "scene"
			},
			sigil_pulse: {
				name: "Sigil Pulse",
				description: "Once per scene, when a ward (e.g., Arcane Lock, Barrier, Null Field) ends or is dispelled, nearby enemies take 1d4 force damage and suffer a penalty die on their next action.",
				prerequisite: ["counterglyph", "arcane_reversal", "sanctum_sigil", "null_field"],
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "scene"
			},
			warding_matrix: {
				name: "Warding Matrix",
				description: "Spend 3 Strain to shield up to two allies within short range. They gain +2 armor vs. magical or elemental damage for the rest of the scene.",
				prerequisite: ["sanctum_sigil"],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: ""
			},
			mirror_sigil: {
				name: "Mirror Sigil",
				description: "Once per session, when targeted by a harmful spell or ranged attack, the attacker suffers a penalty die. If it misses, you may redirect it to another enemy in short range.",
				prerequisite: ["counterglyph", "arcane_reversal"],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "session"
			},
			glyph_warder: {
				name: "Glyph Warder",
				description: "You may maintain two active wards (e.g., Arcane Lock, Null Field) at once. Strain and duration remain unchanged.",
				prerequisite: ["null_field", "warding_matrix"],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: ""
			},
			veil_seal: {
				name: "Veil Seal",
				description: "Spend 3 Strain to suppress a Veil anomaly or magical corruption effect within short range. You may also reduce an ally’s Veil Corruption by 1 level. Usable once per session.",
				prerequisite: ["sanctum_sigil", "arcane_reversal"],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "session"
			},
			sigil_reservoir: {
				name: "Sigil Reservoir",
				description: "Once per scene, you may place an additional Arcane Lock or Null Field without paying extra Strain. Must be placed in a new location.",
				prerequisite: ["glyph_warder"],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "scene"
			},
			runesovereign: {
				name: "Runesovereign",
				description: "Once per session, you may cast two Warding spells in the same round, as long as both have a casting time of 1 action or 1 maneuver .",
				prerequisite: ["glyph_warder", "mirror_sigil"],
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: "session"
			},
			wardmasters_command: {
				name: "Wardmaster’s Command",
				description: "Once per session, designate up to three allies within medium range. They each gain +2 armor and ignore magical terrain effects for the rest of the scene .",
				prerequisiteAll: ["warding_matrix", "sanctum_sigil"],
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: "session"
			},
			stat_boost: {
				name: "+5% Stat Boost",
				description: "Increase any one core stat — including Magic — by +5%, up to your racial maximum. May only be taken once.",
				prerequisiteAny: { tier: 4, count: 1 },
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: ""
			},
			sigilburst_protocol: {
				name: "Sigilburst Protocol",
				description: "Once per session, you may detonate one active ward you control. Enemies in its area take 2d6 force damage and suffer a penalty die on their next action. The ward ends immediately.",
				prerequisiteAll: ["glyph_warder", "sigil_pulse"],
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: "session"
			}
		}
	},
	stormweaver: {
		name: "Stormweaver",
		career_type: "arcane",
		career_type_name: "Arcane",
		skill_points_primary_formula: {
			attributes: ["EDU", "POW"],
			multipliers: [2, 2]
		},
		skill_points_primary_display: "EDU × 2 + POW × 2",
		skill_points_secondary: 20,
		spell_xp_primary: 30,
		spell_xp_secondary: 10,
		primary_skills: {
			magic_elemental: "Magic (Elemental)",
			perception: "Perception",
			arcana: "Arcana",
			dodge: "Dodge"
		},
		secondary_skills: {
			intimidate: "Intimidate",
			athletics: "Athletics",
			insight: "Insight",
			stealth: "Stealth",
			coordination: "Coordination",
			survival_wilderness: "Survival (Wilderness)"
		},
		talents: {
			elemental_channeling: {
				name: "Elemental Channeling",
				description: "Once per scene, gain a bonus die on a Magic (Elemental) roll. If successful, reduce the spell’s Strain cost by one die step.",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "scene"
			},
			flashstep: {
				name: "Flashstep",
				description: "Spend 2 Strain to move one range band (Engaged to Short or Short to Medium) as a free action. Ignores terrain penalties. Cannot exceed medium range.",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: ""
			},
			tinder_spark: {
				name: "Tinder Spark",
				description: "Once per session, as an action, ignite a flammable object or surface within short range. You may also deal 1d4 fire damage to an adjacent target.",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "session"
			},
			veil_shocked: {
				name: "Veil-Shocked",
				description: "Once per scene, when you take damage, deal 1d4 lightning damage to a target in engaged range as a reaction.",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "scene"
			},
			strain_buffer: {
				name: "Strain Buffer",
				description: "Increase your maximum Strain by +1. This talent may appear in multiple Career Trees.",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: ""
			},
			stormpulse_drive: {
				name: "Stormpulse Drive",
				description: "Once per scene, after casting an Elemental spell, you may immediately move 1 range band (this movement will provoke Opportunity Attacks) or gain a bonus die on your next Dodge or Melee attack roll.",
				prerequisite: ["elemental_channeling"],
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: "scene"
			},
			voltaic_reflex: {
				name: "Voltaic Reflex",
				description: "Once per session, gain a bonus die to Dodge when targeted by a ranged attack. You may also spend 2 Strain to move 1 range band as part of the reaction.",
				prerequisite: ["flashstep"],
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: "session"
			},
			scorchmark: {
				name: "Scorchmark",
				description: "Spend 3 Strain to brand a living enemy with arcane fire. Gain a bonus die on Elemental spells targeting them for the rest of the scene.",
				prerequisite: ["tinder_spark"],
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: ""
			},
			pulse_detonation: {
				name: "Pulse Detonation",
				description: "Once per scene, when struck in melee, cast a 1-action Elemental spell as a reaction. You may spend 2 Strain to deal half damage even if the spell fails.",
				prerequisite: ["veil_shocked"],
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: "scene"
			},
			tempest_anchor: {
				name: "Tempest Anchor",
				description: "Spend 2 Strain to root yourself for one scene. While active, you ignore forced movement and gain a bonus die to CON rolls that resist knockdown or shoves.",
				prerequisiteAny: { tier: 1, count: 1 },
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: ""
			},
			volcanic_path: {
				name: "Volcanic Path",
				description: "Once per session, create a line of burning terrain (fire or molten stone) in short range. Crossing it deals 1d6 damage and may impose a penalty die on movement for that round.",
				prerequisite: ["stormpulse_drive"],
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "session"
			},
			stormcallers_edge: {
				name: "Stormcaller's Edge",
				description: "Spend 4 Strain to gain two bonus dice on an Elemental spell. If successful, the spell also affects one additional target within short range.",
				prerequisite: ["scorchmark"],
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: ""
			},
			crackling_focus: {
				name: "Crackling Focus",
				description: "If you remain stationary for two full rounds, gain a bonus die to all lightning-tagged Elemental spells for the rest of the scene.",
				prerequisiteAny: { tier: 2, count: 1 },
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: ""
			},
			shockstep_conduit: {
				name: "Shockstep Conduit",
				description: "Once per session, teleport to any visible point within medium range. Enemies in engaged range at your starting and ending locations each take 1d4 lightning damage.",
				prerequisite: ["voltaic_reflex", "pulse_detonation"],
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "session"
			},
			reactive_veilwalk: {
				name: "Reactive Veilwalk",
				description: "Once per scene, as a reaction, spend 2 Strain to teleport 1 range band away. All enemies in engaged range before or after the movement take 1d6 lightning damage.",
				prerequisite: ["pulse_detonation"],
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "scene"
			},
			veilstorm_mantle: {
				name: "Veilstorm Mantle",
				description: "Spend 3 Strain to activate a storm cloak for one scene. Melee attackers take 1d4 lightning damage, and if they fail a CON roll, they suffer a penalty die on their next action.",
				prerequisiteAll: ["tempest_anchor", "stormcallers_edge"],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: ""
			},
			flashfire_assault: {
				name: "Flashfire Assault",
				description: "Once per session, after casting a spell, make a melee or thrown attack against a target in engaged or short range with a bonus die as an incidental action.",
				prerequisite: ["stormcallers_edge"],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "session"
			},
			arc_flare: {
				name: "Arc Flare",
				description: "As a reaction, when you get an extreme or critical success on an Elemental spell, you may blind a nearby enemy. They suffer two penalty dice until their next action.",
				prerequisite: ["crackling_focus"],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: ""
			},
			surge_engine: {
				name: "Surge Engine",
				description: "Cast your next Elemental spell for 0 Strain. Usable once per session. Cannot be combined with other talents that alter spell cost or effect.",
				prerequisiteAny: { tier: 3, count: 1 },
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "session"
			},
			burn_current: {
				name: "Burn Current",
				description: "Spend 2 Strain to unleash lightning in engaged range. Enemies take 1d6 damage and suffer a penalty die. Mechanical targets (drones, robots, vehicles) take 2d6 damage and may short out.",
				prerequisite: ["shockstep_conduit", "reactive_veilwalk"],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: ""
			},
			eye_of_the_storm: {
				name: "Eye of the Storm",
				description: "Once per session, enter a Veil trance as an action for one scene. While active, reduce all Elemental spell Strain costs for the scene by one die step, and reroll any one failed Elemental spell.",
				prerequisite: ["veilstorm_mantle", "arc_flare"],
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: "session"
			},
			stormpiercer: {
				name: "Stormpiercer",
				description: "Once per session, choose one Elemental spell. That spell ignores magical barriers, bypasses armor soak, and hits one extra target within medium range.",
				prerequisiteAll: ["stormcallers_edge", "arc_flare"],
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: "session"
			},
			stat_boost: {
				name: "+5% Stat Boost",
				description: "Increase any one core stat — including Magic — by +5%, up to your racial maximum. May only be taken once.",
				prerequisiteAny: { tier: 4, count: 1 },
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: ""
			},
			veilburn_protocol: {
				name: "Veilburn Protocol",
				description: "Once per session, as an action, spend 4 Strain to unleash a medium-radius arcane blast (choose fire, lightning, or force). All enemies in range take 2d6 damage. Terrain may be scorched or destabilized. Allies are unaffected.",
				prerequisite: ["surge_engine", "burn_current"],
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: "session"				
			}
		}
	},
	street_ronin: {
		name: "Street Ronin",
		career_type: "martial",
		career_type_name: "Martial",
		skill_points_primary_formula: {
			attributes: ["EDU", "DEX"],
			multipliers: [2, 2]
		},
		skill_points_primary_display: "EDU × 2 + DEX × 2",
		skill_points_secondary: 20,
		spell_xp_primary: 0,
		spell_xp_secondary: 0,
		primary_skills: {
			melee_weapons: "Melee Weapons",
			athletics: "Athletics",
			dodge: "Dodge",
			coordination: "Coordination"
		},
		secondary_skills: {
			stealth: "Stealth",
			insight: "Insight",
			perception: "Perception",
			unarmed_combat: "Unarmed Combat",
			intimidate: "Intimidate",
			survival_urban: "Survival (Urban)"
		},
		talents: {
			combat_rhythm: {
				name: "Combat Rhythm",
				description: "Once per scene, after successfully Dodging an attack, gain a bonus die on your next Melee Weapons or Coordination roll before the end of your next turn.",
				prerequisite: "",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "scene"
			},
			clean_entry: {
				name: "Clean Entry",
				description: "You may draw and strike with a melee weapon as a single action. If you begin the scene undetected or in a neutral stance, gain a bonus die on that opening attack.",
				prerequisite: "",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: ""
			},
			disciplined_focus: {
				name: "Disciplined Focus",
				description: "Once per scene, spend 1 Strain to ignore a penalty die on a single attack, defense, or Initiative roll.",
				prerequisite: "",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "scene"
			},
			urban_footwork: {
				name: "Urban Footwork",
				description: "Once per scene, gain a bonus die on Dodge or Athletics rolls while moving through tight spaces, vertical terrain, or cluttered urban environments.",
				prerequisite: "",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: "scene"
			},
			strain_buffer: {
				name: "Strain Buffer",
				description: "Increase your maximum Strain by +1. This talent may appear in multiple Career Trees.",
				prerequisite: "",
				tier: 1,
				cost: "5",
				capstone: false,
			    usage_limit: ""
			},
			interception_cut: {
				name: "Interception Cut",
				description: "Once per scene, when an enemy moves into engaged range, spend 2 Strain to make a free melee attack as a reaction. If it hits, their movement is interrupted.",
				prerequisite: ["combat_rhythm"],
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: "scene"
			},
			posture_breaker: {
				name: "Posture Breaker",
				description: "Once per scene, after a successful melee attack, apply a penalty die to the target’s next attack or defense.",
				prerequisite: ["clean_entry"],
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: "scene"
			},
			blade_discipline: {
				name: "Blade Discipline",
				description: "When taking the Dodge action, you may roll your Melee Weapons skill instead of Dodge, as long as you’re wielding a melee weapon.",
				prerequisite: ["disciplined_focus"],
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: ""
			},
			steel_reflex: {
				name: "Steel Reflex",
				description: "Once per session, when targeted by a ranged attack and you're either in cover or engaged range, spend 2 Strain to reduce the damage by 1d6. This is a free action, used after the roll but before damage is applied.",
				prerequisiteAny: { tier: 1, count: 1 },
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: "session"
			},
			reactive_flow: {
				name: "Reactive Flow",
				description: "Once per session, when missed by a melee attack, you may move 1 range band in any direction as a free maneuver.",
				prerequisiteAny: { tier: 1, count: 1 },
				tier: 2,
				cost: "10",
				capstone: false,
			    usage_limit: "session"
			},
			breath_before_the_cut: {
				name: "Breath Before the Cut",
				description: "Once per session, if you win Initiative in a combat scene, you may enter Duel Focus: gain a bonus die on melee attacks against one target and reduce the Strain cost of one reaction-based talent by one die step for the first round.",
				prerequisite: ["blade_discipline"],
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "session"
			},
			draw_cut: {
				name: "Draw Cut",
				description: "Once per session, when striking a target that hasn’t acted yet this scene, deal +1d6 damage and apply a penalty die to their next action.",
				prerequisite: ["posture_breaker"],
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "session"
			},
			counterguard_precision: {
				name: "Counterguard Precision",
				description: "Once per scene, after successfully Dodging a melee attack, make a free melee counterattack with a bonus die.",
				prerequisite: ["interception_cut"],
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "scene"
			},
			stillness_in_motion: {
				name: "Stillness in Motion",
				description: "Spend 2 Strain to ignore movement penalties for the rest of the round. During this time, gain a bonus die to Athletics or Melee Weapons rolls involving movement.",
				prerequisite: ["posture_breaker"],
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: ""
			},
			the_line_you_do_not_cross: {
				name: "The Line You Do Not Cross",
				description: "Once per session, designate a small area within engaged range (doorway, alley, rooftop edge). Enemies who cross this line suffer a penalty die on movement or attacks that turn.",
				prerequisite: ["posture_breaker"],
				tier: 3,
				cost: "15",
				capstone: false,
			    usage_limit: "session"
			},
			moment_severed: {
				name: "Moment Severed",
				description: "Once per session, after landing a melee hit, spend 2 Strain to prevent the target from taking any actions until the end of their next turn. They may still take reactions.",
				prerequisite: ["breath_before_the_cut"],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "session"
			},
			no_second_strike: {
				name: "No Second Strike",
				description: "Once per session, if you reduce a target to 0 HP with a melee attack, immediately make a free melee attack against another target in engaged range. That attack gains a bonus die.",
				prerequisite: ["draw_cut"],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "session"
			},
			ghost_step: {
				name: "Ghost Step",
				description: "Once per scene, move 1 range band as a free maneuver, even if you've already moved this round. If you aren’t targeted before your next turn, your next melee attack gains a bonus die.",
				prerequisite: ["stillness_in_motion"],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "scene"
			},
			steel_anchored_calm: {
				name: "Steel Anchored Calm",
				description: "Once per session, ignore the effects of fear, pain, or Veil-induced conditions for one round. You also gain a bonus die on Dodge rolls during this time.",
				prerequisite: ["the_line_you_do_not_cross"],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "session"
			},
			flow_reversal: {
				name: "Flow Reversal",
				description: "Once per session, if you fail to beat an attacker’s success while counterattacking, you may spend 2 Strain to force a mutual exchange: both you and the attacker take damage, and the attacker suffers a penalty die on their next action.",
				prerequisite: ["counterguard_precision"],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "session"
			},
			deflective_form: {
				name: "Deflective Form",
				description: "Once per session, when targeted by a ranged attack within short range while wielding a melee weapon, you may make a Dodge roll as a free action, using either Dodge or Melee Weapons. If your result beats the attacker’s roll, the attack is avoided.",
				prerequisite: ["counterguard_precision"],
				tier: 4,
				cost: "20",
				capstone: false,
			    usage_limit: "session"
			},
			final_cut_doctrine: {
				name: "Final Cut Doctrine",
				description: "Once per session, when counterattacking, declare Final Cut. Win or lose, your attack lands after the attacker’s action resolves, dealing maximum weapon damage. If your counterattack would have succeeded normally, you may apply one other talent effect (such as Draw Cut or Posture Breaker) for free.",
				prerequisiteAll: ["flow_reversal", "breath_before_the_cut"],
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: "session"
			},
			ghost_walk_execution: {
				name: "Ghost Walk Execution",
				description: "Once per session, move up to medium range as a free action and make a single melee attack. If the target is unaware of you or has not yet acted this scene, deal +2d6 bonus damage and force a POW check. On failure, they are stunned until the end of their next turn.",
				prerequisite: ["ghost_step"],
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: "session"
			},
			duelmasters_claim: {
				name: "Duelmaster’s Claim",
				description: "Once per session, declare a single opponent as your focused rival. For the rest of the scene, gain a bonus die on all Melee, Dodge, and reaction-based talents against that target. If you reduce them to 0 HP, choose one: Make a free melee attack against another target in engaged range, or regain 2 Strain.",
				prerequisiteAll: ["the_line_you_do_not_cross", "moment_severed"],
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: "session"
			},
			stat_boost: {
				name: "+5% Stat Boost",
				description: "Increase any one core stat — including Magic — by +5%, up to your racial maximum. May only be taken once.",
				prerequisiteAny: { tier: 4, count: 1 },
				tier: 5,
				cost: "30",
				capstone: true,
			    usage_limit: ""				
			}
		}
	}
};
//----------------------- Tab Workers Start ----------------------//

// --------------------------------------
// Sheet Worker: Edit Mode Toggle
// --------------------------------------
on("clicked:edit_mode", () => {
  getAttrs(["edit_mode"], (values) => {
    const current = values.edit_mode || "off";
    const next = current === "on" ? "off" : "on";
    setAttrs({ edit_mode: next });
    if (typeof debug_on !== "undefined" && debug_on) {
      console.log(`Toggled Edit Mode: ${next}`);
    }
  });
});

// Dice Modifier Button Handler
on("clicked:-20 clicked:-10 clicked:10 clicked:20", (event) => {
  const clicked = event.triggerName.replace("clicked:", "");
  getAttrs(["dice_modifier_checkbox"], (values) => {
    const current = values.dice_modifier_checkbox || "0";
    const next = current === clicked ? "0" : clicked;
    setAttrs({ dice_modifier_checkbox: next });
  });
});

// Major Wound Handler
on("clicked:major_wounds", (event) => {
  const clicked = 1;
  getAttrs(["major_wounds_checkbox"], (values) => {
    const current = values.major_wounds_checkbox || "0";
    const next = current === clicked ? "0" : clicked;
    setAttrs({ major_wounds_checkbox: next });
  });
});

// Unconcious Handler
on("clicked:unconcious", (event) => {
  const clicked = 1;
  getAttrs(["unconcious_checkbox"], (values) => {
    const current = values.unconcious_checkbox || "0";
    const next = current === clicked ? "0" : clicked;
    setAttrs({ unconcious_checkbox: next });
  });
});

// Dying Handler
on("clicked:dying", (event) => {
  const clicked = 1;
  getAttrs(["dying_checkbox"], (values) => {
    const current = values.dying_checkbox || "0";
    const next = current === clicked ? "0" : clicked;
    setAttrs({ dying_checkbox: next });
  });
});



on("clicked:strain_full_rest", () => {
  getAttrs(["strain_max", "name"], (values) => {
    const maxStrain = parseInt(values.strain_max, 10) || 0;

    // Use maxStrain in the roll template
    const rollStr = `&{template:coc-dice-roll} {{name=Full Rest - @{name}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[${maxStrain}]]}}`;

    startRoll(rollStr, (rollData) => {
      setAttrs({ strain: maxStrain });
      finishRoll(rollData.rollId);
    });
  });
});

on("clicked:strain_short_rest", () => {
  startRoll("&{template:coc-dice-roll} {{name=Short Rest - @{name}}} {{modifier=[[@{dice_modifier_checkbox} + 0]]}} {{diceroll=[[1d6]]}}", (rollData) => {
    const recovered = rollData.results.diceroll.result;

    getAttrs(["strain", "strain_max"], (values) => {
      const current = parseInt(values.strain, 10) || 0;
      const max = parseInt(values.strain_max, 10) || 0;
      const newStrain = Math.min(current + recovered, max);
      setAttrs({ strain: newStrain });
    });

    finishRoll(rollData.rollId);
  });
});

const tabList = ["skills", "background", "careers", "talents",  "combat", "spells", "inventory", "backstory", "npcs", "vehicles", "ledger", "tracker"];

tabList.forEach(tab => {
    on(`clicked:${tab}`, () => {
		if (debug_on) console.log("Clicked tab", tab);
		setAttrs({ selected_tab: tab });
    });
});

const alteriBackgroundTabs = ["break_faced_radical", "ghostline_runner", "legacy_bearer", "soft_year_drifter", "veilhaven_attendant"];

alteriBackgroundTabs.forEach(tab => {
	on(`clicked:${tab}`, () => {
		if (debug_on)  console.log("Clicked tab", tab);
		setAttrs({ alteri_background_choice: tab });
		race_default_trigger: Date.now() // Triggers recalculation and is watched
	});
});

const draeviBackgroundTabs = ["forgeblood_scavenger", "horn_carved_wanderer", "spiritbound_techshaper", "tradition_keeper", "urban_tread"];

draeviBackgroundTabs.forEach(tab => {
	on(`clicked:${tab}`, () => {
		if (debug_on) console.log("Clicked tab", tab);
		setAttrs({ draevi_background_choice: tab });
		race_default_trigger: Date.now() // Triggers recalculation and is watched
	});
});

const humanBackgroundTabs = ["ash_war_refugee", "data_hatched", "enclave_born", "gutterfire_youth", "outpost_raised", "scavsteel_whelp"];

humanBackgroundTabs.forEach(tab => {
	on(`clicked:${tab}`, () => {
		if (debug_on) console.log("Clicked tab", tab);
		setAttrs({ human_background_choice: tab });
		race_default_trigger: Date.now() // Triggers recalculation and is watched
	});
});

const lyranniBackgroundTabs = ["aelvareth_devotee", "echoborne", "glide_spire_scion", "whisper_walker", "zurethkai_flameborn"];

lyranniBackgroundTabs.forEach(tab => {
	on(`clicked:${tab}`, () => {
		if (debug_on) console.log("Clicked tab", tab);
		setAttrs({ lyranni_background_choice: tab });
		race_default_trigger: Date.now() // Triggers recalculation and is watched
	});
});

//----------------------- Tab Workers End ----------------------//

//----------------------- Hidden Dice Trick Start --------------------//

on("change:roll_weapon1_mdr_attack_impale_checkbox", function () {
  getAttrs(["roll_weapon1_mdr_attack_impale_checkbox"], function (v) {
    setAttrs({
		attack_mode_toggle: v.roll_weapon1_mdr_attack_impale_checkbox === "1" ? "impale" : "noimpale"
    });
  });
});

on("change:repeating_weaponsmdr:attack_impale_checkbox", function(eventInfo) {
  const rowId = eventInfo.sourceAttribute.match(/repeating_weaponsmdr_([^_]+)_/)[1];
  const impaleAttr = `repeating_weaponsmdr_${rowId}_attack_impale_checkbox`;
  const toggleAttr = `repeating_weaponsmdr_${rowId}_attack_mode_toggle`;

  getAttrs([impaleAttr], function(v) {
    setAttrs({
      [toggleAttr]: v[impaleAttr] === "1" ? "impale" : "noimpale"
    });
  });
});

//----------------------- Hidden Dice Trick End --------------------//

//----------------------- Repeating Spells --------------------//

// Mirror select dropdown value to hidden input (for CSS Wizardry styling)
on("change:repeating_spellsmdr:spell_prepared_mdr", function(eventInfo) {
  if (debug_on_trace) console.log ("[change:repeating_spellsmdr:spell_prepared_mdr] Start");
  const match = eventInfo.sourceAttribute.match(/repeating_spellsmdr_([^_]+)_/);
  if (!match) return;

  const rowId = match[1];
  const sourceAttr = `repeating_spellsmdr_${rowId}_spell_prepared_mdr`;
  const mirrorAttr = `repeating_spellsmdr_${rowId}_spell_prepared_mdr_mirror`;

  getAttrs([sourceAttr], function(values) {
    const mirrorValue = values[sourceAttr] === "1" ? "1" : "0";
    setAttrs({ [mirrorAttr]: mirrorValue });
  });
});

// Sum spellcosts only for prepared spells
on("change:repeating_spellsmdr:spellcost change:repeating_spellsmdr:spell_prepared_mdr remove:repeating_spellsmdr", function() {
  if (debug_on_trace) console.log ("[change:repeating_spellsmdr:spellcost change:repeating_spellsmdr:spell_prepared_mdr remove:repeating_spellsmdr] Start");
  getSectionIDs("repeating_spellsmdr", function(ids) {
    const attrsToGet = ids.flatMap(id => [
      `repeating_spellsmdr_${id}_spellcost`,
      `repeating_spellsmdr_${id}_spell_prepared_mdr`
    ]);

    getAttrs(attrsToGet, function(values) {
      let total = 0;
      ids.forEach(id => {
        const cost = parseFloat(values[`repeating_spellsmdr_${id}_spellcost`] || 0);
        const isPrepared = values[`repeating_spellsmdr_${id}_spell_prepared_mdr`] === "1";
        if (isPrepared) total += cost;
      });
      setAttrs({ total_spellcost: total });
    });
  });
});

//----------------------- Spell Cost Calculation --------------------//
// Update overflow flag when spellcost or AC changes
on("change:total_spellcost change:ac", function () {
  if (debug_on_trace) console.log ("[change:total_spellcost change:ac] Start");
  getAttrs(["total_spellcost", "ac"], function (values) {
    const cost = parseFloat(values.total_spellcost) || 0;
    const capacity = parseFloat(values.ac) || 0;
    const isOver = cost > capacity ? "1" : "0";

    // Log the raw values and the comparison result
    if (debug_on) console.log("Total Spell Cost:", cost);
    if (debug_on) console.log("Arcane Capacity:", capacity);
    if (debug_on) console.log("Is Over Capacity:", isOver);

    setAttrs({ spellcost_overflow: isOver });
  });
});

//----------------------- Skill, Backgrounds, and Talents --------------------//
function getAllTalentSkills(race) {
	if (debug_on_trace) console.log ("[getAllTalentSkills] Start");
  const skills = new Set();
  const talents = talentSkillMap[race] || {};
  Object.values(talents).forEach(skillGroup => {
    Object.keys(skill => skills.add(skill));
  });
  return [...skills];
}

function resetAllMDRToBase(race, callback) {
		if (debug_on_trace) console.log ("[resetAllMDRToBase] Start");
  const skills = Object.keys(skillMapTable);
  const attrsToGet = skills.map(skill => `${skill}_skill_mdr`).concat(skills.map(skill => `${skill}_mdr`));

  getAttrs(attrsToGet, values => {
    const updates = {};
    skills.forEach(skill => {
      const base = parseInt(values[`${skill}_skill_mdr`] || "0", 10);
      updates[`${skill}_mdr`] = base;
    });
    if (debug_on) console.log("[resetAllMDRToBase]", updates);
    setAttrs(updates, callback);
  });
}

function applyAllSkillBonuses(race) {
	if (debug_on_trace) console.log ("[applyAllSkillBonuses] Start");

  const talentSkills = getAllTalentSkills(race);

  const updates = {};
  Object.assign(updates, setDefaultTalentBonuses(race, talentSkills));

  if (debug_on) console.log("[applyAllSkillBonuses]", updates);
  setAttrs(updates);
}

on("change:showracials", () => {
  if (debug_on_trace) console.log("[change:showracials] Start");

  getAttrs(["showracials", "language_own_txt", "language_caltheran_txt"], values => {
    const race = values.showracials || "";

    // === Race Data ===
    if (!raceDataMap[race]) {
      if (debug_on) console.log("[Skill Init] No race data for:", race);
      return;
    }

    const raceData = raceDataMap[race];
    const racialLang = raceData.language || "Racial";
    const otherLang = race === "human" ? "Other" : "Caltheran";

    if (debug_on) {
      console.log("[showracials handler] Race:", race);
      console.log(`Racial Lang: ${racialLang}`);
    }

    handleRaceChange(race);

    const updates = {
      language_own_txt: `${racialLang}`,
      language_caltheran_txt: `${otherLang}`
    };

    // === Talent Labels and Descriptions ===
    const raceTalents = talentDataMap[race];
    if (raceTalents) {
      for (let [key, data] of Object.entries(raceTalents)) {
        updates[`${race}_${key}_label`] = data.name;
        updates[`${race}_${key}_description`] = data.description;
      }
    }

    setAttrs(updates);

    // === Recalculate Enable/Lock Flags
    if (raceTalents) {
      updateTalentEnables(race);
    }
	
  });
});

const registerTalentSummaryWatcher = () => {
  const allChangeEvents = Object.entries(talentDataMap)
    .flatMap(([race, talents]) =>
      Object.keys(talents).map(talentKey => `change:${race}_${talentKey}`)
    );
	if (debug_on_trace) console.log ("[registerTalentSummaryWatcher] Start");
  on(allChangeEvents.join(" "), function () {
    getAttrs(["showracials"], function (values) {
      const race = values.showracials;
      const raceTalents = talentDataMap[race];
      if (!raceTalents) return;

      const watchedTalentAttrs = Object.keys(raceTalents).map(k => `${race}_${k}`);

      getAttrs(watchedTalentAttrs, function (talentValues) {
        const summaryLines = [];

        for (let [key, data] of Object.entries(raceTalents)) {
          const fullKey = `${race}_${key}`;
          if (talentValues[fullKey] === "1") {
            summaryLines.push(`T${data.tier}: ${data.name} — ${data.description}`);
          }
        }

        const summaryText = summaryLines.length
          ? summaryLines.join("\n\n")
          : " "; // Avoid Roll20 collapse on empty value

        setAttrs({ talent_summary: summaryText });
      });
    });
  });
};

const registerTalentSkillBonusWatchers = () => {
  if (debug_on_trace) console.log ("[registerTalentSkillBonusWatchers] Start");
  const races = Object.keys(talentSkillMap);

  races.forEach(race => {
    const talents = Object.keys(talentSkillMap[race]);

    talents.forEach(talent => {
      const checkboxAttr = `${race}_${talent}_mdr_checkbox`;
      const talentAttr = `${race}_${talent}`;
      const lockAttr = `${race}_${talent}_lockflag_skill`;
      const showAttr = `show_${talent}_bonus`;

      const watchedAttrs = [checkboxAttr, talentAttr];

      on(`change:${checkboxAttr} change:${talentAttr}`, () => {
        getAttrs(watchedAttrs.concat(["showracials"]), values => {
          const isTalentChecked = values[talentAttr] === "1";
          const skillChoice = values[checkboxAttr] || "0";

          const shouldShow = isTalentChecked || skillChoice !== "0";
          const isLocked = skillChoice !== "0"; // Lock if any skill choice is selected

          if (debug_on) console.log(`[Generic Bonus Watcher] ${race}.${talent}`);
          if (debug_on) console.log("Talent Checked:", isTalentChecked);
          if (debug_on) console.log("Skill Selected:", skillChoice);
          if (debug_on) console.log("→ Show Skills?", shouldShow ? "Yes" : "No");
          if (debug_on) console.log("→ Lock Talent?", isLocked ? "Yes" : "No");

          const updates = {};
          updates[showAttr] = shouldShow ? "1" : "0";
          updates[lockAttr] = isLocked ? "1" : "0";

          setAttrs(updates, () => {
            const raceFromSheet = values.showracials;
            updateTalentEnables(raceFromSheet);
          });
        });
      });
    });
  });
};

const calculateAndUpdateSkillValues = (racePrefix, values) => {
  if (debug_on_trace) console.log ("[calculateAndUpdateSkillValues] Start"); 
  const allSkills = Object.values(skillMapTable).map(s => s.label);
  const otherSkills = Array.from({ length: 10 }, (_, i) => `otherskill${i + 1}`);
  const baseSkillLookup = Object.values(skillMapTable).reduce((map, skill) => {
    map[skill.label] = parseInt(skill.base || "0", 10);
    return map;
  }, {});
  const magicSchools = Object.values(skillMapTable)
    .filter(skill => skill.group === "Magic" && skill.label !== "magic_universal")
    .map(skill => skill.bonus);

  const update = {};
  let totalSkillPointsSpent = 0;

  const bgSkill = values[`${racePrefix}_mdr_checkbox`] || null;
  const talentSkills = Object.entries(talentSkillMap[racePrefix] || {})
    .map(([talentKey]) => {
      const val = values[`${racePrefix}_${talentKey}_mdr_checkbox`];
      return val && val.startsWith("talent_") ? val.replace("talent_", "") : null;
    }).filter(Boolean);

  allSkills.forEach(skill => {
    let base = parseInt(values[`${skill}_skill_mdr`], 10);
    const defaultBase = baseSkillLookup[skill] || 0;
    if (isNaN(base)) {
      base = defaultBase;
      update[`${skill}_skill_mdr`] = base;
    }

    const spent = base - defaultBase;
    totalSkillPointsSpent += spent;
    update[`${skill}_improved_label`] = spent > 0 ? "#" : spent < 0 ? "*" : "";

    const bgBonus = bgSkill === skill ? parseInt(values[`${racePrefix}_${skill}_bonus_mdr`] || "0", 10) : 0;

    const talentBonus = Object.entries(talentSkillMap[racePrefix] || {}).reduce((sum, [talentKey]) => {
      const selectedValue = values[`${racePrefix}_${talentKey}_mdr_checkbox`] || "";
      const targetValue = `talent_${skill}`;
      if (selectedValue === targetValue) {
        const bonus = parseInt(values[`${racePrefix}_talent_${skill}_bonus_mdr`] || "0", 10);
        return sum + bonus;
      }
      return sum;
    }, 0);

    let total = base + bgBonus + talentBonus;

    if (skill === "dodge") {
      const idex = parseInt(values.dex || "0", 10);
      const dexBonus = Math.floor(idex / 2);
      total += dexBonus;
      if (debug_on) console.log(`[Dodge] DEX=${idex}, +${dexBonus}`);
    }

    if (skill === "athletics") {
      const athletics = parseInt(values.athletics_skill_mdr || "0", 10);
      const idex = parseInt(values.dex || "0", 10);
      update.mov = Math.min(14, Math.floor((idex + athletics) / 10));
    }

    update[`${skill}_mdr`] = total;
  });

  otherSkills.forEach(skill => {
    const base = parseInt(values[`${skill}_skill_mdr`], 10) || 0;
    totalSkillPointsSpent += base;
    update[`${skill}_mdr`] = base;
    update[`${skill}_improved_label`] = base > 0 ? "#" : base < 0 ? "*" : "";
  });

  update.language_caltheran_mdr =
    Math.min(75, parseInt(values.language_caltheran_skill_mdr || "0", 10)) +
    Math.min(75, parseInt(values.edu || "0", 10));

  const refund = parseInt(values.skill_points_talent_refund, 10) || 0;
  totalSkillPointsSpent += refund;
  update.total_skill_points_spent = totalSkillPointsSpent;

  const schoolValues = magicSchools.slice(0, 9).map(attr => parseInt(values[attr], 10) || 0);
  const baseUniversal = parseInt(values.magic_universal_skill_mdr, 10) || 0;
  update.magic_universal_mdr = Math.max(...schoolValues) + baseUniversal;

  setAttrs(update);
};

function registerSkillHandler(racePrefix, triggerSkills, talentSources = []) {

	if (debug_on_trace) console.log ("[registerSkillHandler] Start");

	const key = `${racePrefix}`;

	if (registeredRaces.has(key)) return;

	registeredRaces.add(key);

	const allSkills = Object.values(skillMapTable).map(s => s.label);
	const otherSkills = Array.from({ length: 10 }, (_, i) => `otherskill${i + 1}`);
	const baseSkillLookup = Object.values(skillMapTable).reduce((map, skill) => {
		map[skill.label] = parseInt(skill.base || "0", 10);
		return map;
	}, {});

	const magicSchools = Object.values(skillMapTable)
	.filter(skill => skill.group === "Magic" && skill.label !== "magic_universal")
	.map(skill => skill.bonus); // bonus field is like "magic_alteration_mdr", "magic_elemental_mdr", etc

	const watched = [
		`${racePrefix}_mdr_checkbox`,
		"dex",
		"edu",
		"language_caltheran_skill_mdr",
		...magicSchools,
		...allSkills.map(skill => `${skill}_skill_mdr`),
		...otherSkills.map(skill => `${skill}_skill_mdr`),
		...triggerSkills.flatMap(skill => [
			`${racePrefix}_${skill}_bonus_mdr`,
			`${racePrefix}_talent_${skill}_bonus_mdr`
		]),
		...Object.keys(talentSkillMap[racePrefix]).map(talentKey => `${racePrefix}_${talentKey}_mdr_checkbox`)
	];

	const skillsToAttrs = allSkills.reduce((map, skill) => {
		map[skill] = [
			`${skill}_skill_mdr`,
			`${skill}_mdr`,
			`${racePrefix}_${skill}_bonus_mdr`,
			`${racePrefix}_talent_${skill}_bonus_mdr`
		];
		return map;
	}, {});

	const globalAttrs = [
		"dex",
		"edu",
		"language_caltheran_skill_mdr",
		...magicSchools,
		`${racePrefix}_mdr_checkbox`,
		"showracials",
		"skill_points_talent_refund",
		...Object.keys(talentSkillMap[racePrefix] || {}).map(talent => `${racePrefix}_${talent}_mdr_checkbox`)
	];

	if (debug_on) console.log("[registerSkillHandler Init]", { watched });

	const otherSkillAttrs = otherSkills.flatMap(skill => [
		`${skill}_skill_mdr`,
		`${skill}_mdr`
		]);

	// BEGIN Sheet Worker Watcher
	on([...new Set(watched)].map(s => `change:${s}`).join(" "), () => {
		getAttrs(globalAttrs.concat(...Object.values(skillsToAttrs), otherSkillAttrs), values => {
			const activeRace = values.showracials || "unknown";
			if (activeRace !== racePrefix) return;
		calculateAndUpdateSkillValues(racePrefix, values);
		});
	});
	// END Sheet Worker Watcher

	if (debug_on) {
		console.log("[registerSkillHandler] Manual initialization on load");
		console.log("[registerSkillHandler] Skills to initialize:", triggerSkills);
	}

	// BEGIN Manual Initialization
	getAttrs(globalAttrs.concat(...Object.values(skillsToAttrs), otherSkillAttrs), values => {
		const activeRace = values.showracials || "unknown";
		if (activeRace !== racePrefix) return;
		calculateAndUpdateSkillValues(racePrefix, values);
	});
	// END Manual Initialization
}

function setDefaultTalentBonuses(race) {
	  if (debug_on_trace) console.log ("[setDefaultTalentBonuses] Start");
  const updates = {};
  const raceTalents = talentSkillMap[race];

  if (!raceTalents) return updates;

  Object.values(raceTalents).forEach(skillSet => {
    Object.keys(skillSet).forEach(skill => {
      const attr = `${race}_talent_${skill}_bonus_mdr`;
      if (!(attr in updates)) updates[attr] = 10;
    });
  });

//  if (debug_on) console.log("[setDefaultTalentBonuses]", updates);
  setAttrs(updates);
  return updates;
}

const registerAllTalentChangeWatchers = () => {
  if (debug_on_trace) console.log ("[registerAllTalentChangeWatchers] Start"); 
  if (talentWatchersRegistered) return;
  talentWatchersRegistered = true;

  const allTalentChangeEvents = Object.entries(talentDataMap)
    .flatMap(([race, talents]) =>
      Object.keys(talents).map(talentKey => `change:${race}_${talentKey}`)
    );

	on(allTalentChangeEvents.join(" "), eventInfo => {
		const race = eventInfo.sourceAttribute.split("_")[0];
		if (talentDataMap[race]) {
			updateTalentEnables(race);
		} else {
			getAttrs(["showracials"], values => {
				updateTalentEnables(values.showracials);
			});
		}
	});
};

const registerBackgroundTalentWatchers = () => {
	if (debug_on_trace) console.log ("[registerBackgroundTalentWatchers] Start"); 
  if (backgroundTalentWatchersRegistered) return;
  backgroundTalentWatchersRegistered = true;

  const backgroundTalentChangeEvents = Object.keys(talentDataMap)
    .map(race => `change:bg_${race}_talent`);

  on(backgroundTalentChangeEvents.join(" "), eventInfo => {
    const race = eventInfo.sourceAttribute.split("_")[1];
    if (debug_on) console.log(`[Background Talent Watcher] bg_${race}_talent changed`);
    applyRacialBaseStats(race); // or updateTalentEnables(race) if relevant
  });
};

const registerBackgroundTalentWatcher = () => {
if (debug_on_trace) console.log ("[registerBackgroundTalentWatcher] Start");
  const watchers = Object.keys(talentDataMap)
    .map(race => `change:bg_${race}_talent`);

  if (debug_on) console.log("[registerBackgroundTalentWatcher] Registered for:", watchers);

  on(watchers.join(" "), function (eventInfo) {
    if (debug_on) console.log("[registerBackgroundTalentWatcher] Event fired for:", eventInfo.sourceAttribute);

    const match = eventInfo.sourceAttribute.match(/^bg_([^_]+)_talent$/);
    if (!match) return;

    const race = match[1];
    updateTalentEnables(race);
  });
};

const registerXPTrackerWatcher = () => {
  if (debug_on_trace) console.log ("[registerXPTrackerWatcher] Start");
  const xpWatcherEvents = [
    "change:xp_pool_total_talent",
    "change:showracials",
    ...Object.entries(talentDataMap).flatMap(([race, talents]) =>
      Object.keys(talents).map(talentKey => `change:${race}_${talentKey}`)
    )
  ];

  on(xpWatcherEvents.join(" "), function () {
	getAttrs(["xp_pool_total_talent", "showracials"], function (values) {
		const race = values.showracials || "alteri";
		const raceTalents = talentDataMap[race];
		if (!raceTalents) return;

		const talentKeys = Object.keys(raceTalents);
		const watchedAttrs = talentKeys.map(key => `${race}_${key}`);
		const bgFlags = talentKeys.map(key => `${race}_${key}_from_background`);

		const skillPointRefunds = {
			draevi: {},
			alteri: {},
			human: {
				skilled_focus: -10,
				cross_trained: -10,
				master_of_none: -30
			}
		};

		getAttrs([...watchedAttrs, ...bgFlags, "total_skill_points_spent", "skill_points_talent_refund"], function (talentValues) {
			let spent = 0;
			let refund = 0;

			for (let key of talentKeys) {
				const attrName = `${race}_${key}`;
				const selected = talentValues[attrName] === "1";
				const cost = parseInt(raceTalents[key].cost, 10) || 0;
				if (selected) {
					let actualCost = cost;

					// Subtract background talent cost if this was granted by background
					if (talentValues[`${race}_${key}_from_background`] === "1" && cost === 10) {
						actualCost = 0;
						if (debug_on) console.log(`[XP Tracker] ${key} granted by background, cost waived.`);
					}

					spent += actualCost;

					const raceRefundMap = skillPointRefunds[race] || {};
					if (raceRefundMap[key]) {
						refund += raceRefundMap[key];
						if (debug_on) console.log(`[XP Tracker Refund] ${key} gives ${raceRefundMap[key]}`);
					}
				}
			}

			const previousRefund = parseInt(talentValues["skill_points_talent_refund"], 10) || 0;
			const refundDelta = refund - previousRefund;

			const skillSpent = parseInt(talentValues["total_skill_points_spent"], 10) || 0;
			const adjustedSkillSpent = skillSpent + refundDelta;

			const total = parseInt(values.xp_pool_total_talent, 10) || 0;
			const remaining = Math.max(0, total - spent);

			if (debug_on) {
				console.log(`[Old Refund]: ${previousRefund}`);
				console.log(`[New Refund]: ${refund}`);
				console.log(`[Delta Refund]: ${refundDelta}`);
				console.log(`[Original Skill Points Spent]: ${skillSpent}`);
				console.log(`[Adjusted Skill Points Spent]: ${adjustedSkillSpent}`);
			}

		setAttrs({
			xp_spent_talent: spent,
			xp_remaining_talent: remaining,
			skill_points_talent_refund: refund,
			total_skill_points_spent: adjustedSkillSpent
		});
	  });
	});
  });
};

// === Unified Talent Enable + Lock Enforcement ===
const updateTalentEnables = (race) => {
  if (debug_on_trace) console.log ("[updateTalentEnables] Start");
  const raceTalents = talentDataMap[race];
  if (!raceTalents) return;

  const allTalentKeys = Object.keys(raceTalents);
  const allTalentCheckboxes = allTalentKeys.map(k => `${race}_${k}`);
  const skillLockKeys = allTalentKeys.map(k => `${race}_${k}_lockflag_skill`);
  const backgroundAttr = `bg_${race}_talent`;
  const bgFlagAttrs = allTalentKeys.map(k => `${race}_${k}_from_background`);

  const allPrereqKeys = allTalentKeys
    .filter(k => Array.isArray(raceTalents[k]?.prerequisite))
    .flatMap(k => raceTalents[k].prerequisite);

  const prereqAttrKeys = [...new Set(allPrereqKeys)].map(pr => `${race}_${pr}`);
  const tier4Checkboxes = allTalentKeys.filter(k => raceTalents[k].tier === 4).map(k => `${race}_${k}`);

  const attrsToGet = [
    ...prereqAttrKeys,
    ...tier4Checkboxes,
    ...skillLockKeys,
    ...allTalentCheckboxes,
    ...bgFlagAttrs,
    backgroundAttr
  ];

  getAttrs(attrsToGet, function (values) {
    const selected = new Set(
      Object.entries(values)
        .filter(([k, v]) =>
          v === "1" ||
          v === `${race}_${k.replace(`${race}_`, "")}` ||
          k === backgroundAttr
        )
        .map(([k, v]) => {
          if (k === backgroundAttr && v.startsWith(`${race}_`)) {
            return v.replace(`${race}_`, "");
          }
          return k.replace(`${race}_`, "");
        })
    );

    const updates = {};
    const reverseMap = {};
    const lockFromPrereqAny = {};

    for (let [key, data] of Object.entries(raceTalents)) {
      if (Array.isArray(data.prerequisite)) {
        data.prerequisite.forEach(pr => {
          if (!reverseMap[pr]) reverseMap[pr] = new Set();
          reverseMap[pr].add(key);
        });
      }
    }

    const stillChecked = (k) => values[`${race}_${k}`] === "1";

    const isLocked = (target) => {
      const visited = new Set();
      const stack = [...(reverseMap[target] || [])];
      while (stack.length) {
        const current = stack.pop();
        if (visited.has(current)) continue;
        visited.add(current);
        const selected = stillChecked(current);
        const prereqs = raceTalents[current]?.prerequisite || [];
        const onlyThis = selected &&
          prereqs.includes(target) &&
          !prereqs.some(p => p !== target && stillChecked(p));
        if (onlyThis) return true;
        if (reverseMap[current]) reverseMap[current].forEach(t => stack.push(t));
      }
      return false;
    };

    const bgSelected = values[backgroundAttr];

    // === Enable flags
    for (let [key, data] of Object.entries(raceTalents)) {
      if (Array.isArray(data.prerequisite) && data.prerequisite.length > 0) {
        const unlocked = data.prerequisite.some(pr => selected.has(pr));
        updates[`${race}_${key}_enabled`] = unlocked ? "1" : "0";
        if (debug_on) console.log(`[Enable] ${key} => ${unlocked}`);
      } else {
        updates[`${race}_${key}_enabled`] = "1";
        if (debug_on) console.log(`[Enable] ${key} => Tier 1 default`);
      }
    }

    // === prerequisiteAny logic
    for (let [key, data] of Object.entries(raceTalents)) {
      if (data?.prerequisiteAny?.tier != null && data?.prerequisiteAny?.count != null) {
        const tier = data.prerequisiteAny.tier;
        const count = data.prerequisiteAny.count;
        const staticReqs = Array.isArray(data.prerequisite) ? data.prerequisite : [];
        const sameTierKeys = allTalentKeys.filter(k => raceTalents[k].tier === tier && !staticReqs.includes(k));
        const checked = sameTierKeys.filter(k => values[`${race}_${k}`] === "1");
        const staticReqMet = staticReqs.length === 0 || staticReqs.some(p => values[`${race}_${p}`] === "1");
        const anyReqMet = checked.length >= count;

        updates[`${race}_${key}_enabled`] = staticReqMet && anyReqMet ? "1" : "0";
        updates[`${race}_${key}_sources`] = checked.slice(0, count).map(k => `${race}_${k}`).join(",");

        if (stillChecked(key) && staticReqMet && anyReqMet) {
          for (let src of checked.slice(0, count)) {
            updates[`${race}_${src}_lockflag`] = "1";
            if (!lockFromPrereqAny[src]) lockFromPrereqAny[src] = new Set();
            lockFromPrereqAny[src].add(key);
          }
        }

        if (debug_on) {
          console.log(`[PrereqAny] ${key} => static=${staticReqMet}, any=${anyReqMet}, checked=`, checked);
        }
      }
    }

    // === Capstone locks
    const tier4Selected = tier4Checkboxes.filter(k => values[k] === "1");
    const capstoneLock = tier4Selected.length > 0;
    for (let key of tier4Checkboxes) {
      updates[`${key}_lockflag`] = capstoneLock && values[key] !== "1" ? "1" : "0";
    }

    // === Background talent sync (check + uncheck)
    if (bgSelected) {
      const matchedTalent = bgSelected.replace(`${race}_`, "");
      if (raceTalents[matchedTalent]) {
        updates[`${race}_${matchedTalent}`] = "1";
        updates[`${race}_${matchedTalent}_from_background`] = "1";
      }
    }

    for (let [key, data] of Object.entries(raceTalents)) {
      const isTier1 = data.tier === 1;
      const isBG = `${race}_${key}` === bgSelected;
      const wasBG = values[`${race}_${key}_from_background`] === "1";
      const isLockedElsewhere = isLocked(key) || values[`${race}_${key}_lockflag_skill`] === "1";

      if (isTier1 && !isBG && wasBG && !isLockedElsewhere) {
        updates[`${race}_${key}`] = "0";
        updates[`${race}_${key}_from_background`] = "0";
      }
    }

    // === Final lock aggregation
    for (let key of allTalentKeys) {
      const prereqLock = isLocked(key) ? "1" : "0";
      const skillLock = values[`${race}_${key}_lockflag_skill`] || "0";
      const bgLock = bgSelected === `${race}_${key}` ? "1" : "0";
      const capLock = tier4Checkboxes.includes(`${race}_${key}`) && capstoneLock && values[`${race}_${key}`] !== "1" ? "1" : "0";
      const anyLock = lockFromPrereqAny[key] && lockFromPrereqAny[key].size > 0 ? "1" : "0";

      const finalLock = [prereqLock, skillLock, bgLock, capLock, anyLock].includes("1") ? "1" : "0";

      updates[`${race}_${key}_lockflag_prereq`] = prereqLock;
      updates[`${race}_${key}_lockflag`] = finalLock;

      if (debug_on) {
        console.log(`[Lock] ${key} => prereq:${prereqLock}, skill:${skillLock}, background:${bgLock}, capstone:${capLock}, any:${anyLock}`);
      }
    }
	
    // === Tracker visibility mirror
    for (let key of allTalentKeys) {
      const checked = values[`${race}_${key}`] === "1";
      updates[`show_${race}_${key}`] = checked ? "1" : "0";
	  if (debug_on) console.log(`update: show_${race}_${key} checked: ${checked}`);
    }
	
    const lockDebug = Object.fromEntries(
      Object.entries(updates).filter(([k]) => k.includes("lockflag") || k.includes("enabled"))
    );
    if (debug_on) console.log("[updateTalentEnables] Final lock/enabled updates:", lockDebug);

    setAttrs(updates);
  });
};

function applyRacialBaseStats(race) {
  if (debug_on_trace) console.log ("[applyRacialBaseStats(race)] Start");
  if (!raceDataMap[race] || !raceDataMap[race].stats) {
    if (debug_on) console.log("[applyRacialBaseStats] No stats found for race:", race);
    return;
  }

  const raceStats = raceDataMap[race].stats;
  const statKeys = ["str", "dex", "pow", "con", "app", "edu", "siz", "int", "mag"];

  getAttrs(statKeys, values => {
    const updates = {};

    statKeys.forEach(stat => {
      const currentRaw = values[stat];
      const current = parseInt(currentRaw, 10);
      const racialBase = raceStats[stat]?.base;

      if (isNaN(current) || current < racialBase) {
        updates[stat] = racialBase;
        if (debug_on) console.log(`[applyRacialBaseStats] ${stat.toUpperCase()} raised from ${current} to ${racialBase}`);
      }
    });

    if (Object.keys(updates).length > 0) {
      setAttrs(updates);
    }
  });
}

let lastRaceHandled = null;

function handleRaceChange(race) {
  if (debug_on_trace) console.log ("[handleRaceChange] Start");
  if (race === lastRaceHandled) {
    if (debug_on) console.log(`[handleRaceChange] Skipped duplicate init for race: ${race}`);
    return;
  }
  lastRaceHandled = race;

//  if (debug_on) console.log("[handleRaceChange]", race);

  resetAllMDRToBase();
  applyRacialBaseStats(race);
  applyAllSkillBonuses(race);

  const talentList = Object.values(talentSkillMap[race] || {}).flatMap(obj => Object.keys(obj));

  registerSkillHandler(race, talentList);
  if (debug_on) console.log ("[registerSkillHandler] fired");

  registerBackgroundTalentWatcher();
  if (debug_on) console.log ("[registerBackgroundTalentWatcher] fired");

  updateTalentEnables(race);
  if (debug_on) console.log ("[updateTalentEnables] fired");

  registerTalentSkillBonusWatchers();
  if (debug_on) console.log ("[registerTalentSkillBonusWatchers] fired");

  registerTalentSummaryWatcher();
  if (debug_on) console.log ("[registerTalentSummaryWatcher] fired");

  registerBackgroundSkillLimiter();
  if (debug_on) console.log ("[registerBackgroundSkillLimiter] fired");
  
  registerXPTrackerWatcher();
}

on("sheet:opened", function () {
  if (debug_on) console.log("[sheet:opened] New Character check");
  if (debug_on_trace) console.log ("[sheet:opened] Start");

  // 易 Always register event watchers early
  registerAllTalentChangeWatchers();
  registerBackgroundTalentWatchers();

  getAttrs(["showracials", "new_character_flag", "background_xp"], values => {
    const isNew = values.new_character_flag === "1";
    const race = values.showracials || "unknown";
    const updates = {};

    if (debug_on) console.log("[sheet:opened]", { race, isNew });

    if (isNew) {
      Object.entries(skillMapTable).forEach(([key, { label, base, notes }]) => {
        const val = parseInt(base, 10) || 0;
        updates[`${label}_skill_mdr`] = val;
        updates[`${label}_mdr`] = val;
        updates[`${label}_note`] = notes || "";
      });
      updates.new_character_flag = "0";
	  populateCareerTalentDescriptions();

      if (debug_on) console.log("[New Character Skill Init]", updates);
    }

	if ( !values.background_xp || parseInt(values.background_xp, 10) !== 30 ) {
		updates["background_xp"] = 30;
		if (debug_on) console.log("Setting background_xp to 30");
	}
	
    setAttrs(updates, () => {
      if (debug_on) console.log("[sheet:opened] Checking for undefined or unknown race");
      if (race && race !== "unknown" && race !== "0") {
        if (debug_on) console.log(`[sheet:opened] Race: "${race}" being initialized`);
        handleRaceChange(race);
      }

      registerStatHandler();
    });
  });
});

function finalizeStrain(careerList, ipow, icon, update) {
    const bufferAttrs = careerList.map(career => `${career}_strain_buffer`);
    getAttrs(bufferAttrs, (bufferValues) => {
        const strainBuffer = bufferAttrs.reduce((sum, attr) => {
            return sum + parseInt(bufferValues[attr] || 0, 10);
        }, 0);

        const baseStrain = Math.floor((ipow + icon) / 5);
        update["strain_max"] = baseStrain + strainBuffer;

        if (debug_on) {
            console.log("[Strain Calc] Base:", baseStrain, "Buffer:", strainBuffer, "Total:", update.strain_max);
        }
		
		// Set attributes now that strain_max is finalized
		setAttrs(update);
    });

}

function calculateStrainMax(ipow, icon, update) {
    getAttrs(["primary_career"], (values) => {
        const careers = [];

        if (values.primary_career) {
            careers.push(values.primary_career);
        }

        getSectionIDs("repeating_secondarycareer", (ids) => {
            if (ids.length === 0) {
                finalizeStrain(careers, ipow, icon, update);
            } else {
                const secCareerAttrs = ids.map(id => `repeating_secondarycareer_${id}_secondary_career`);
                getAttrs(secCareerAttrs, (secValues) => {
                    ids.forEach(id => {
                        const careerName = secValues[`repeating_secondarycareer_${id}_secondary_career`];
                        if (careerName) {
                            careers.push(careerName);
                        }
                    });
                    finalizeStrain(careers, ipow, icon, update);
                });
            }
        });
    });
}

function registerStatHandler() {
	if (debug_on_trace) console.log ("[registerStatHandler] Start");
	
	const watched = [
		"age", "str", "dex", "pow", "con", "app", "edu", "siz", "int", "mag", "vitality", "char_creation_lock", "major_wounds",
		"primary_career",                         // Watch primary career changes
		"repeating_secondarycareer:secondary_career" // Watch for changes to career name
	];

	// Dynamically pull all strain buffer fields from careerDataMap
	Object.keys(careerDataMap).forEach(career => {
		watched.push(`${career}_strain_buffer`);
	});

    if (debug_on) console.log("[registerStatHandler Init] Watching:", watched);

    on(watched.map(s => `change:${s}`).join(" "), () => {
        getAttrs(watched, values => {
		    const iage = parseInt(values.age) || 0;
			const istr = parseInt(values.str) || 0;
			const idex = parseInt(values.dex) || 0;
			const ipow = parseInt(values.pow) || 0;
            const icon = parseInt(values.con) || 0;
			const iapp = parseInt(values.app) || 0;
            const iedu = parseInt(values.edu) || 0;
            const isiz = parseInt(values.siz) || 0;
            const iint = parseInt(values.int) || 0;
            const imag = parseInt(values.mag) || 0;
            const ivit = parseInt(values.vitality) || 0;
			const iwound = parseInt(values.major_wounds) || 0;
			const ichar_lock = parseInt(values.char_creation_lock) || 0;

            const update = {};
			
			if ( ichar_lock === 0 ) {
				update["personal_skill_points"] = iint * 2;
			}

			update["vitality_max"]= ipow;
			update["pulphp_max"] = Math.floor((icon + isiz)/5);
			update["major_wounds"]= Math.floor(((icon + isiz)/5)/2);
			
			// Calculate strain max with career strain buffer
            calculateStrainMax(ipow, icon, update);

			update["social_mode_toggle"] = (iapp <= 40 ) ? 1 : ( iapp >= 70 ) ? 2 : 0;

			// Attribute Points Total Calculation
			const statKeys = ["str", "dex", "pow", "con", "app", "edu", "siz", "int", "mag"];

			let totalAttrPointsSpent = 0;

			statKeys.forEach(stat => {
				const val = parseInt(values[stat], 10) || 0;
				totalAttrPointsSpent += val;
			});

			update["total_attr_points_spent"] = totalAttrPointsSpent;

            // Arcane Capcity = min(MAG, VITALITY)
            update.ac = Math.min(imag, ivit);

            // Damage Bonus and Build
            const siz_str_tot = istr + isiz;
            if (siz_str_tot < 65) {
                update.damage_bonus = "-2";
                update.build = "-2";
            } else if (siz_str_tot < 85) {
                update.damage_bonus = "-1";
                update.build = "-1";
            } else if (siz_str_tot < 125) {
                update.damage_bonus = "0";
                update.build = "0";
            } else if (siz_str_tot < 165) {
                update.damage_bonus = "1d4";
                update.build = "+1";
            } else if (siz_str_tot < 205) {
                update.damage_bonus = "1d6";
                update.build = "+2";
            } else if (siz_str_tot < 285) {
                update.damage_bonus = "2d6";
                update.build = "+3";
            } else if (siz_str_tot < 365) {
                update.damage_bonus = "3d6";
                update.build = "+4";
            } else if (siz_str_tot < 445) {
                update.damage_bonus = "4d6";
                update.build = "+5";
            } else if (siz_str_tot < 525) {
                update.damage_bonus = "5d6";
                update.build = "+6";
            }

			update.mdr_dex_crit_threshold = 1;
			update.mdr_dex_extreme_threshold = Math.floor(idex / 5);
			update.mdr_dex_hard_threshold = Math.floor(idex / 2);
			update.mdr_dex_normal_threshold = idex;
			update.mdr_dex_crit_value = 4000 + idex;
			update.mdr_dex_extreme_value = 3000 + idex;
			update.mdr_dex_hard_value = 2000 + idex;
			update.mdr_dex_normal_value = 1000 + idex;
			update.mdr_dex_fail_value = idex;

            if (debug_on) {
                console.log("[Stat Calc] STR+SIZ=", siz_str_tot);
                console.log("[Stat Calc] AC=", update.ac);
                console.log("[Stat Calc] DMG Bonus / Build=", update.damage_bonus, update.build);
            }

            setAttrs(update);
        });
    });
}

// === Background Skill Lock Enforcement (5 of 7) ===
const registerBackgroundSkillLimiter = () => {
  if (debug_on_trace) console.log ("[registerBackgroundSkillLimiter] Start");
  const getBackgroundSkillAttrs = (race, background) => {
    const bgData = backgroundDataMap[race]?.[background];
    if (!bgData || !Array.isArray(bgData.trained_skills)) return [];
    return bgData.trained_skills.map(skill => `bg_${skill}_mdr_checkbox`);
  };

  const getLockAttrs = (skillAttrs) => skillAttrs.map(attr => `${attr}_lock`);

  const allRaces = Object.keys(backgroundDataMap);
  const backgroundChoiceAttrs = allRaces.map(r => `${r}_background_choice`);

  const allPossibleSkillAttrs = new Set();
  allRaces.forEach(race => {
    Object.values(backgroundDataMap[race]).forEach(bg => {
      if (Array.isArray(bg.trained_skills)) {
        bg.trained_skills.forEach(skill => allPossibleSkillAttrs.add(`bg_${skill}_mdr_checkbox`));
      }
    });
  });

  const allWatchers = Array.from(allPossibleSkillAttrs).map(attr => `change:${attr}`).concat(
    backgroundChoiceAttrs.map(attr => `change:${attr}`),
    "change:showracials"
  );

  on(allWatchers.join(" "), function () {
    getAttrs(["showracials", ...backgroundChoiceAttrs], function (baseValues) {
      const race = baseValues.showracials;
      const bgChoiceAttr = `${race}_background_choice`;
      const background = baseValues[bgChoiceAttr];
      const skillAttrs = getBackgroundSkillAttrs(race, background);
      const lockAttrs = getLockAttrs(skillAttrs);

      if (skillAttrs.length === 0) return;

		if (debug_on) {
			console.log(`[Skill Sync] Race: ${race}`);
			console.log(`[Skill Sync] Background: ${background}`);
			console.log(`[Skill Sync] Skill Attrs:`, skillAttrs);
		}

	  const mirroredMainCheckboxes = skillAttrs.map(attr =>
		attr.replace("bg_", "").replace("_mdr_checkbox", "") + "_mdr_checkbox"
	  );
	  const lockFields = skillAttrs.map(attr => `${attr}_lock`);

      getAttrs([...skillAttrs, ...mirroredMainCheckboxes, ...lockFields], function (values) {
        const checked = skillAttrs.filter(attr => values[attr] === "1");
        const updates = {};

        for (let i = 0; i < skillAttrs.length; i++) {
          const attr = skillAttrs[i];
          const lock = lockAttrs[i];
          updates[lock] = (checked.length >= 5 && values[attr] !== "1") ? "1" : "0";
        }

        if (debug_on) {
          console.log("[Limiter] Race:", race);
          console.log("[Limiter] Background:", background);
          console.log("[Limiter] Checked:", checked);
          console.log("[Limiter] Updates:", updates);
        }

        setAttrs(updates);
      });
    });
  });
};

// Common parser function
function parseDamageString(damageString, prefix) {
  if (debug_on_trace) console.log ("[parseDamageString] Start");
  const updates = {};

  const match = damageString.match(/^(\d+)[dD](\d+)([+\-]\d+)?$/);

  if (match) {
    const numDice = parseInt(match[1], 10) || 0;
    const diceSize = parseInt(match[2], 10) || 0;
    const bonus = parseInt(match[3] || "0", 10) || 0;
	console.log (`prefix: ${prefix}, numDice: ${numDice}, diceSize: ${diceSize}, bonus: ${bonus}`);

    updates[`${prefix}_damage_numdice`] = numDice;
    updates[`${prefix}_damage_dicesize`] = diceSize;
    updates[`${prefix}_damage_bonus`] = bonus;
  } else {
    updates[`${prefix}_damage_numdice`] = 0;
    updates[`${prefix}_damage_dicesize`] = 0;
    updates[`${prefix}_damage_bonus`] = 0;
  }

  return updates;
}

// ----------------------------------- Careers Secion START -----------------------------------
// === Primary Career XP Calculation ===
const registerPrimaryCareerXPWatcher = () => {
  if (debug_on_trace) console.log ("[registerPrimaryCareerXPWatcher] Start");
    const talentChangeEvents = Object.entries(careerDataMap)
        .flatMap(([careerKey, careerData]) =>
            Object.keys(careerData.talents || {}).map(talentKey => `change:${careerKey}_${talentKey}`)
        );

    const otherTriggers = [
        "change:primary_career",
        "change:primary_career_skill_to_xp",
        "change:primary_career_spell_xp_total",
        "change:str", "change:dex", "change:pow", "change:con",
        "change:app", "change:edu", "change:siz", "change:int", "change:mag",
		"change:char_creation_lock",
		"change:showracials"
		];

    const allEvents = [...talentChangeEvents, ...otherTriggers];

    on(allEvents.join(" "), function () {
       if (debug_on) console.log("=== Primary Career XP Calculation Triggered ===");

        getAttrs(["primary_career"], function (values) {
            const selectedCareer = values["primary_career"];
            const career = careerDataMap[selectedCareer];
            if (!career) return;

            const talentKeys = Object.keys(career.talents || {});
            const statKeys = ["str", "dex", "pow", "con", "app", "edu", "siz", "int", "mag"];
            const allKeysToGet = [
                ...statKeys,
                ...talentKeys.map(k => `${selectedCareer}_${k}`),
                "primary_career_skill_to_xp",
                "primary_career_spell_xp_total",
                "secondary_career_xp_total",
				"char_creation_lock",
				"showracials"
            ];

            getAttrs(allKeysToGet, function (values) {

				const ichar_lock = parseInt(values.char_creation_lock) || 0;
				console.log (`Character lock: ${ichar_lock}`);
				const race = values.showracials || "";

					const statLookup = {};
					for (const stat of statKeys) {
						statLookup[stat] = parseInt(values[stat], 10) || 0;
					}

					let baseSkillPoints = 0;
					if (career.skill_points_primary_formula) {
						const { attributes, multipliers } = career.skill_points_primary_formula;
						for (let i = 0; i < attributes.length; i++) {
							const attr = attributes[i].toLowerCase();
							const multiplier = multipliers[i] || 1;
							baseSkillPoints += (statLookup[attr] || 0) * multiplier;
						}
					}
					
				if (race === "human") {
					baseSkillPoints += 20;
					if (debug_on) console.log("[Primary Career] +20 Human racial bonus applied to skill points");
				}

                const skillToXP = parseInt(values["primary_career_skill_to_xp"], 10) || 0;
                const spellXpTotal = parseInt(values["primary_career_spell_xp_total"], 10) || career.spell_xp_primary;

                let talentXpSpent = -5;
                for (const [key, talent] of Object.entries(career.talents || {})) {
                    const attrName = `${selectedCareer}_${key}`;
                    if (values[attrName] === "1") {
                        const cost = parseInt(talent.cost, 10) || 0;
                        talentXpSpent += cost;
                        if (debug_on) console.log(`[Primary Talent XP] ${attrName} selected, +${cost} XP`);
                    }
                }

                const secondaryXp = parseInt(values["secondary_career_xp_total"], 10) || 0;

				const updates = {
					primary_career_spell_xp_total: spellXpTotal,
					primary_career_xp_spent: talentXpSpent,
					primary_career_xp_total: talentXpSpent,
					xp_spent_career_talent: talentXpSpent + secondaryXp
					};

				console.log (`Character lock: ${ichar_lock}`);
				if ( ichar_lock === 0 ) {
					updates.primary_career_skill_points = baseSkillPoints;
				}

                if (debug_on) console.log(`[Primary XP] Total Spent: ${talentXpSpent}`);
                if (debug_on) console.log(`[Primary XP] + Secondary XP: ${talentXpSpent + secondaryXp}`);

                setAttrs(updates);
            });
        });
    });
};

// === Secondary Career XP Calculation (Live + Accurate) ===
const registerSecondaryCareerXPWatcher = () => {
  if (debug_on_trace) console.log ("[registerSecondaryCareerXPWatcher] Start");
    const talentChangeEvents = Object.entries(careerDataMap)
        .flatMap(([careerKey, careerData]) =>
            Object.keys(careerData.talents || {}).map(talentKey => `change:${careerKey}_${talentKey}`)
        );

    const baseEvents = [
        "change:repeating_secondarycareer:secondary_career",
        "change:repeating_secondarycareer:secondary_career_skill_to_xp",
        "change:repeating_secondarycareer:secondary_career_spell_xp_total",
        "sheet:opened"
    ];

    on([...talentChangeEvents, ...baseEvents].join(" "), () => {
        if (debug_on) console.log("=== [XP Tracker] Secondary Career XP Calculation Triggered ===");

        getSectionIDs("repeating_secondarycareer", function (ids) {
            if (!ids.length) return;

            const attrList = ["primary_career_xp_total"];

            // Collect all needed attributes
            for (const rowId of ids) {
                const prefix = `repeating_secondarycareer_${rowId}_`;
                attrList.push(`${prefix}secondary_career`);
                attrList.push(`${prefix}secondary_career_skill_to_xp`);
                attrList.push(`${prefix}secondary_career_spell_xp_total`);
            }

            // Add all global flat checkbox names
            for (const [careerKey, careerData] of Object.entries(careerDataMap)) {
                for (const talentKey of Object.keys(careerData.talents || {})) {
                    attrList.push(`${careerKey}_${talentKey}`);
                }
            }

            getAttrs(attrList, function (values) {
                let totalSecondaryXP = 0;
				let totalSecondaryXPAdjusted = 0;

                for (const rowId of ids) {
                    const prefix = `repeating_secondarycareer_${rowId}_`;
                    const selectedCareer = values[`${prefix}secondary_career`];
                    if (!selectedCareer || !careerDataMap[selectedCareer]) continue;

                    const career = careerDataMap[selectedCareer];
                    let rowXP = 0;

                    for (const [talentKey, data] of Object.entries(career.talents || {})) {
                        const checkboxAttr = `${selectedCareer}_${talentKey}`;
                        const isChecked = values[checkboxAttr] === "1";
                        if (isChecked) {
                            const cost = parseInt(data.cost, 10) || 0;
                            rowXP += cost;
                            if (debug_on) console.log(`[Secondary XP] ${checkboxAttr} selected, +${cost} XP`);
                        }
                    }

                    const skillToXP = parseInt(values[`${prefix}secondary_career_skill_to_xp`], 10) || 0;
                    const spellXpTotal = parseInt(values[`${prefix}secondary_career_spell_xp_total`], 10) || career.spell_xp_secondary;
                    const xpTotal = rowXP - skillToXP;
                    totalSecondaryXP += rowXP;
					totalSecondaryXPAdjusted += xpTotal;

                    const rowUpdates = {
                        [`${prefix}secondary_career_skill_points`]: career.skill_points_secondary || 0,
                        [`${prefix}secondary_career_spell_xp_total`]: spellXpTotal,
                        [`${prefix}secondary_career_xp_spent`]: rowXP,
                        [`${prefix}secondary_career_xp_total`]: xpTotal
                    };

                    setAttrs(rowUpdates);
                    if (debug_on) console.log(`[Row ${rowId}] XP Spent: ${rowXP} | XP Total: ${xpTotal}`);
                }

				const finalUpdates = {
					secondary_career_xp_total: totalSecondaryXPAdjusted,
					xp_spent_career_talent: totalSecondaryXPAdjusted + (parseInt(values.primary_career_xp_total, 10) || 0)
				};

                setAttrs(finalUpdates);
                if (debug_on) console.log(`[Global] Total Secondary XP: ${totalSecondaryXP}`);
                if (debug_on) console.log(`[Global] Combined Career Talent XP: ${finalUpdates.xp_spent_career_talent}`);
            });
        });
    });
};

Object.keys(careerDataMap).forEach(career => {
    if (debug_on) console.log ("Object.keys(careerDataMap) loaded");
  if (debug_on_trace) console.log ("[Object.keys(careerDataMap)] Start");
    on(`clicked:${career}`, () => {
		if (debug_on) console.log ("Object.keys(careerDataMap) Clicked: ", career);
        setAttrs({ selected_career: career });
    });
});

const populateCareerTalentDescriptions = () => {
  const updates = {};
  Object.entries(careerDataMap).forEach(([career, data]) => {
    Object.entries(data.talents || {}).forEach(([key, talent]) => {
      updates[`${career}_${key}_label`] = talent.name;
      updates[`${career}_${key}_description`] = talent.description;
    });
  });
  setAttrs(updates);
};

// === Career Talent Summary Watcher (Static + Repeating) ===
const registerCareerTalentSummaryWatcher = () => {
  if (debug_on_trace) console.log ("[registerCareerTalentSummaryWatcher] Start");
  const staticCareerEvents = Object.entries(careerDataMap)
    .flatMap(([career, data]) => Object.keys(data.talents || {}).map(tk => `change:${career}_${tk}`));

  const repeatingCareerEvents = Object.entries(careerDataMap)
    .flatMap(([career, data]) => Object.keys(data.talents || {}).map(tk => `change:repeating_secondarycareer:${career}_${tk}`));

  const allChangeEvents = [...staticCareerEvents, ...repeatingCareerEvents];

  on(allChangeEvents.join(" "), function () {
    getAttrs(["primary_career"], function (values) {
      const primaryCareer = values["primary_career"];
      const summaries = {
        primary: [],
        secondary: []
      };

      getSectionIDs("repeating_secondarycareer", function (ids) {
        const attrList = [];

        for (const [careerKey, careerData] of Object.entries(careerDataMap)) {
          for (const talentKey of Object.keys(careerData.talents || {})) {
            attrList.push(`${careerKey}_${talentKey}`);
            for (const id of ids) {
              attrList.push(`repeating_secondarycareer_${id}_${careerKey}_${talentKey}`);
            }
          }
        }

        getAttrs(attrList, function (talentValues) {
          for (const [careerKey, careerData] of Object.entries(careerDataMap)) {
            for (const [talentKey, talent] of Object.entries(careerData.talents || {})) {
              const fullKey = `${careerKey}_${talentKey}`;
              if (talentValues[fullKey] === "1" && careerKey === primaryCareer) {
                summaries.primary.push(`T${talent.tier}: ${talent.name} — ${talent.description}`);
              } else if (talentValues[fullKey] === "1") {
                summaries.secondary.push(`T${talent.tier}: ${talent.name} — ${talent.description}`);
              }

              for (const id of ids) {
                const repeatingKey = `repeating_secondarycareer_${id}_${careerKey}_${talentKey}`;
                if (talentValues[repeatingKey] === "1") {
                  summaries.secondary.push(`T${talent.tier}: ${talent.name} — ${talent.description}`);
                }
              }
            }
          }

          setAttrs({
            primary_career_talent_summary: summaries.primary.length ? summaries.primary.join("\n\n") : " ",
            secondary_career_talent_summary: summaries.secondary.length ? summaries.secondary.join("\n\n") : " "
          });
        });
      });
    });
  });
};

// === Unified Career Talent Enable + Lock Enforcement ===
const updateCareerTalentEnables = (career) => {
  if (debug_on_trace) console.log ("[updateCareerTalentEnables] Start");
    const careerTalents = careerDataMap[career]?.talents;
    if (!careerTalents) return;

    const allTalentKeys = Object.keys(careerTalents);
    const allTalentCheckboxes = allTalentKeys.map(k => `${career}_${k}`);
    const skillLockKeys = allTalentKeys.map(k => `${career}_${k}_lockflag_skill`);
    const tier5Checkboxes = allTalentKeys.filter(k => careerTalents[k].tier === 5).map(k => `${career}_${k}`);

    const allPrereqKeys = allTalentKeys.flatMap(k => {
        const t = careerTalents[k];
        const base = [];
        if (Array.isArray(t?.prerequisite)) base.push(...t.prerequisite);
        else if (typeof t?.prerequisite === "string" && t.prerequisite !== "") base.push(t.prerequisite);
        if (Array.isArray(t?.prerequisiteAll)) base.push(...t.prerequisiteAll);
        return base;
    });

    const prereqAttrKeys = [...new Set(allPrereqKeys)].map(pr => `${career}_${pr}`);
    const attrsToGet = [
        ...prereqAttrKeys,
        ...tier5Checkboxes,
        ...skillLockKeys,
        ...allTalentCheckboxes
    ];

    getAttrs(attrsToGet, function (values) {
        const selected = new Set(
            Object.entries(values)
                .filter(([k, v]) => v === "1")
                .map(([k]) => k.replace(`${career}_`, ""))
        );

        const updates = {};
        const reverseMap = {};

        for (let [key, data] of Object.entries(careerTalents)) {
            const prereqs = [];
            if (Array.isArray(data.prerequisite)) prereqs.push(...data.prerequisite);
            else if (typeof data.prerequisite === "string" && data.prerequisite !== "") prereqs.push(data.prerequisite);
            (prereqs || []).forEach(pr => {
                if (!reverseMap[pr]) reverseMap[pr] = new Set();
                reverseMap[pr].add(key);
            });
        }

        // === Track any talent used to satisfy prerequisiteAny ===
        const lockFromPrereqAny = new Set();

        const stillChecked = (k) => values[`${career}_${k}`] === "1";

        const isLocked = (target) => {
            const visited = new Set();
            const stack = [...(reverseMap[target] || [])];
            while (stack.length) {
                const current = stack.pop();
                if (visited.has(current)) continue;
                visited.add(current);
                const selectedCurrent = stillChecked(current);
                const prereqs = [];
                const raw = careerTalents[current]?.prerequisite;
                if (Array.isArray(raw)) prereqs.push(...raw);
                else if (typeof raw === "string" && raw !== "") prereqs.push(raw);
                const onlyThis = selectedCurrent &&
                    prereqs.includes(target) &&
                    !prereqs.some(p => p !== target && stillChecked(p));
                if (onlyThis) return true;
                if (reverseMap[current]) reverseMap[current].forEach(t => stack.push(t));
            }
            return false;
        };

        // === Enable flags (prerequisite)
        for (let [key, data] of Object.entries(careerTalents)) {
            if ((Array.isArray(data.prerequisite) && data.prerequisite.length > 0) || (typeof data.prerequisite === "string" && data.prerequisite !== "")) {
                const prereqList = Array.isArray(data.prerequisite) ? data.prerequisite : [data.prerequisite];
                const unlocked = prereqList.some(pr => selected.has(pr));
                updates[`${career}_${key}_enabled`] = unlocked ? "1" : "0";
            } else {
                updates[`${career}_${key}_enabled`] = data.tier === 1 ? "1" : "0"; // Disable T2+ by default
            }
        }

        // === prerequisiteAll logic
        for (let [key, data] of Object.entries(careerTalents)) {
            if (Array.isArray(data.prerequisiteAll)) {
                const allMet = data.prerequisiteAll.every(pr => selected.has(pr));
                updates[`${career}_${key}_enabled`] = allMet ? "1" : "0";
            }
        }

        // === prerequisiteAny logic
        for (let [key, data] of Object.entries(careerTalents)) {
            if (data?.prerequisiteAny?.tier != null && data?.prerequisiteAny?.count != null) {
                const tier = data.prerequisiteAny.tier;
                const count = data.prerequisiteAny.count;
                const staticReqs = Array.isArray(data.prerequisite) ? data.prerequisite : (typeof data.prerequisite === "string" && data.prerequisite !== "") ? [data.prerequisite] : [];
                const sameTierKeys = allTalentKeys.filter(k => careerTalents[k].tier === tier && !staticReqs.includes(k));
                const checked = sameTierKeys.filter(k => values[`${career}_${k}`] === "1");
                const staticReqMet = staticReqs.length === 0 || staticReqs.some(p => values[`${career}_${p}`] === "1");
                const anyReqMet = checked.length >= count;

                updates[`${career}_${key}_enabled`] = staticReqMet && anyReqMet ? "1" : "0";
                updates[`${career}_${key}_sources`] = checked.slice(0, count).map(k => `${career}_${k}`).join(",");

                if (stillChecked(key) && staticReqMet && anyReqMet) {
                    for (let src of checked.slice(0, count)) {
                        lockFromPrereqAny.add(src);
                    }
                }
            }
        }

        // === Capstone locks
        const tier5Selected = tier5Checkboxes.filter(k => values[k] === "1");
        const capstoneLock = tier5Selected.length > 0;
        for (let key of tier5Checkboxes) {
            updates[`${key}_lockflag`] = capstoneLock && values[key] !== "1" ? "1" : "0";
        }

        // === Final lock aggregation
        for (let key of allTalentKeys) {
            const prereqLock = isLocked(key) ? "1" : "0";
            const skillLock = values[`${career}_${key}_lockflag_skill`] || "0";
            const capLock = tier5Checkboxes.includes(`${career}_${key}`) && capstoneLock && values[`${career}_${key}`] !== "1" ? "1" : "0";
            const prereqAnyLock = lockFromPrereqAny.has(key) ? "1" : "0";
			const checked = values[`${career}_${key}`] === "1";

            const finalLock = [prereqLock, skillLock, capLock, prereqAnyLock].includes("1") ? "1" : "0";

            updates[`${career}_${key}_lockflag_prereq`] = prereqLock;
            updates[`${career}_${key}_lockflag`] = finalLock;
			updates[`show_${career}_${key}`] = checked ? "1" : "0";
        }
		
        setAttrs(updates);
    });
};

on("clicked:toggle_career_skills", () => {
  if (debug_on_trace) console.log ("[clicked:toggle_career_skills] Start");
  getAttrs(["show_career_skills"], values => {
    setAttrs({
      show_career_skills: values.show_career_skills === "1" ? "0" : "1"
    });
  });
});

// === Career Skill Lock Enforcement ===
const registerCareerSkillLimiter = () => {
  if (debug_on_trace) console.log ("[registerCareerSkillLimiter] Start");
  getAttrs(["primary_career"], values => {
    const primaryCareer = values["primary_career"] || "[None]";
    if (debug_on) console.log("[Career Debug] Primary Career:", primaryCareer);

    const getCareerSkillAttrs = (career, type) => {
      const skillMap = careerDataMap[career]?.[`${type}_skills`] || {};
      if (!Array.isArray(skillMap) && typeof skillMap !== "object") return [];
      return Object.keys(skillMap).map(skill => `cs_${career}_${skill}_mdr_checkbox`);
    };

    const getLockAttrs = (skillAttrs) => skillAttrs.map(attr => `${attr}_lock`);

    // === Handle Primary Career ===
    if (careerDataMap[primaryCareer]) {
      const priAttrs = getCareerSkillAttrs(primaryCareer, "primary");
      const secAttrs = getCareerSkillAttrs(primaryCareer, "secondary");
      const lockAttrs = getLockAttrs(secAttrs);
      const exclusiveSets = careerDataMap[primaryCareer]?.exclusive_skill_sets || [];
      const exclusiveSkills = new Set(exclusiveSets.flat());

      getAttrs([...priAttrs, ...secAttrs, ...lockAttrs], values => {
        const updates = {};

        if (debug_on) console.log(`[Career Lock][Primary Career: ${primaryCareer}]`);
        if (debug_on) console.log("  → Primary Attrs:", priAttrs);
        if (debug_on) console.log("  → Secondary Attrs:", secAttrs);

        priAttrs.forEach(attr => {
          updates[attr] = "1";
        });

        // === Enforce Exclusive Skill Set Logic Only ===
        exclusiveSets.forEach(set => {
          const checkedSkill = set.find(skill => values[`cs_${primaryCareer}_${skill}_mdr_checkbox`] === "1");
          set.forEach(skill => {
            const checkbox = `cs_${primaryCareer}_${skill}_mdr_checkbox`;
            const lock = `${checkbox}_lock`;
			if (checkedSkill && skill !== checkedSkill) {
				updates[checkbox] = "0";
				updates[lock] = "1";
			} else {
				updates[lock] = "0";
			}
          });
        });

        // === Unlock all non-exclusive secondary skills ===
        secAttrs.forEach(attr => {
          const skill = attr.replace(/^cs_.*?_/, '').replace('_mdr_checkbox', '');
          const lockAttr = `${attr}_lock`;
          if (!exclusiveSkills.has(skill)) {
            updates[lockAttr] = "0";
          }
        });

        if (debug_on) console.log("  → Updates (Primary):", updates);
        setAttrs(updates);
      });
    }

    // === Handle Repeating Secondary Careers ===
    getSectionIDs("repeating_secondarycareer", ids => {
      const careerAttrs = ids.map(id => `repeating_secondarycareer_${id}_secondary_career`);
      getAttrs(careerAttrs, names => {
        ids.forEach(id => {
          const secCareer = names[`repeating_secondarycareer_${id}_secondary_career`];
          if (!careerDataMap[secCareer]) return;

          const priAttrs = getCareerSkillAttrs(secCareer, "primary");
          const secAttrs = getCareerSkillAttrs(secCareer, "secondary");
          const lockAttrs = getLockAttrs(secAttrs);
          const allAttrs = [...priAttrs, ...secAttrs, ...lockAttrs];

          getAttrs(allAttrs, values => {
            const updates = {};

            if (debug_on) console.log(`[Career Lock][Secondary Career: ${secCareer}]`);
            if (debug_on) console.log("  → Primary Attrs:", priAttrs);
            if (debug_on) console.log("  → Secondary Attrs:", secAttrs);

            priAttrs.forEach(attr => {
              updates[attr] = "1";
            });

			const selected = secAttrs.filter(attr => values[attr] === "1");

			secAttrs.forEach(attr => {
				const lock = `${attr}_lock`;
				updates[lock] = selected.length >= 1 && values[attr] !== "1" ? "1" : "0";
			});

            if (debug_on) console.log("  → Updates (Secondary):", updates);
            setAttrs(updates);
          });
        });
      });
    });
  });
};

// === Watcher for Primary Career Exclusive Secondary Skills ===
const registerPrimaryExclusiveSkillWatchers = () => {
  if (debug_on_trace) console.log ("[registerPrimaryExclusiveSkillWatchers] Start");
  getAttrs(["primary_career"], values => {
    const primaryCareer = values.primary_career;
    const careerData = careerDataMap[primaryCareer];
    if (!careerData || !Array.isArray(careerData.exclusive_skill_sets)) return;

    const exclusiveSkills = [...new Set(careerData.exclusive_skill_sets.flat())];
    const watchEvents = exclusiveSkills.map(skill => `change:cs_${primaryCareer}_${skill}_mdr_checkbox`);

    if (watchEvents.length) {
      on(watchEvents.join(" "), () => {
        if (debug_on) console.log("[Career Lock] Exclusive secondary skill toggled for primary career");
        registerCareerSkillLimiter();
      });
    }
  });
};

// === Dynamic Watcher for Secondary Skill Checkboxes ===
const registerActiveSecondaryCareerWatchers = () => {
  if (debug_on_trace) console.log ("[registerActiveSecondaryCareerWatchers] Start");
  const watchEvents = [];

  Object.entries(careerDataMap).forEach(([career, data]) => {
    const secSkills = Object.keys(data.secondary_skills || {});
    secSkills.forEach(skill => {
      watchEvents.push(`change:cs_${career}_${skill}_mdr_checkbox`);
    });
  });

  if (debug_on) console.log("[Career Lock] Registering watchers for ALL secondary skill checkboxes:", watchEvents);
  on(watchEvents.join(" "), () => {
    if (debug_on) console.log("[Career Lock] Secondary Skill checkbox changed");
    registerCareerSkillLimiter();
  });
};

const updateCareerReadyState = (callback) => {
  if (debug_on_trace) console.log ("[updateCareerReadyState] Start");
  const allCareers = Object.keys(careerDataMap);
  const output = {};

  getAttrs(["primary_career"], values => {
    const primary = values.primary_career;

    // Initialize all careers as not ready
    allCareers.forEach(career => {
      output[`${career}_ready`] = "0";
    });

    if (careerDataMap[primary]) {
      output[`${primary}_ready`] = "1";
    }

    getSectionIDs("repeating_secondarycareer", ids => {
      if (ids.length === 0) {
        if (debug_on) console.log("[updateCareerReadyState] Final Output:", output);
        setAttrs(output);
        return;
      }

      const keys = ids.map(id => `repeating_secondarycareer_${id}_secondary_career`);
      getAttrs(keys, entries => {
        ids.forEach(id => {
          const sec = entries[`repeating_secondarycareer_${id}_secondary_career`] || "";
          if (careerDataMap[sec]) {
            output[`${sec}_ready`] = "1";
          }
        });

        if (debug_on) console.log("[updateCareerReadyState] Final Output:", output);
        setAttrs(output, () => {
//			callback(); // Anything else (e.g. limiter) can go here
			cleanupInactiveCareers(); // ✅ NOW safe to run here
			registerCareerSkillLimiter();         // ✅ Forces fresh lock pass
		});
      });
    });
  });
};

// === Skill Mirror Watcher (deterministic and precise) ===
const mirrorSkillCheckboxes = () => {
  if (debug_on_trace) console.log ("[mirrorSkillCheckboxes] Start");
  const skillMap = {};  // skill → [checkbox attr names]
  const skillAttrs = [];

  // Add CS skill checkboxes
  Object.keys(careerDataMap).forEach(career => {
    const pri = Object.keys(careerDataMap[career]?.primary_skills || {});
    const sec = Object.keys(careerDataMap[career]?.secondary_skills || {});
    [...pri, ...sec].forEach(skill => {
      const attr = `cs_${career}_${skill}_mdr_checkbox`;
	if (!skillMap[skill]) skillMap[skill] = new Set();
	skillMap[skill].add(attr);

      skillAttrs.push(attr);
    });
  });

  // Add BG skill checkboxes
  Object.keys(backgroundDataMap).forEach(race => {
    Object.values(backgroundDataMap[race] || {}).forEach(bg => {
      (bg.trained_skills || []).forEach(skill => {
        const attr = `bg_${skill}_mdr_checkbox`;

	if (!skillMap[skill]) skillMap[skill] = new Set();
	skillMap[skill].add(attr);

        skillAttrs.push(attr);
      });
    });
  });
  
  getAttrs(skillAttrs, values => {
    const updates = {};

	Object.entries(skillMap).forEach(([skill, sourceSet]) => {
	const sources = Array.from(sourceSet);
	const active = sources.some(source => values[source] === "1");
	updates[`${skill}_mdr_checkbox`] = active ? "1" : "0";

	if (debug_on) console.log(`[Mirror Watcher] ${skill}_mdr_checkbox ← ${active ? "1" : "0"} (sources: ${sources.join(", ")})`);
	});
	
    if (debug_on) console.log("[Mirror Watcher] Final Updates:", updates);
    setAttrs(updates);
  });
};

const registerMirrorSkillWatcher = () => {
  if (debug_on_trace) console.log ("[registerMirrorSkillWatcher] Start");
  const csAttrs = Object.keys(careerDataMap)
    .flatMap(career => {
      const careerSkills = [
        ...Object.keys(careerDataMap[career]?.primary_skills || {}),
        ...Object.keys(careerDataMap[career]?.secondary_skills || {})
      ];
      return careerSkills.map(skill => `change:cs_${career}_${skill}_mdr_checkbox`);
    });

	const bgAttrs = Object.keys(backgroundDataMap)
		.flatMap(race => Object.values(backgroundDataMap[race] || {}))
		.flatMap(bg => bg.trained_skills || [])
		.map(skill => `change:bg_${skill}_mdr_checkbox`);

  const allEvents = [...new Set([...csAttrs, ...bgAttrs])];
  if (debug_on) console.log ("allEvents:", allEvents);

  on(allEvents.join(" "), mirrorSkillCheckboxes);
};

const cleanupInactiveCareers = () => {
  if (debug_on_trace) console.log ("[cleanupInactiveCareers] Start");
  const readyKeys = Object.keys(careerDataMap).map(c => `${c}_ready`);
  getAttrs(readyKeys, values => {
    const updates = {};

    Object.keys(careerDataMap).forEach(career => {
      if (values[`${career}_ready`] !== "1") {
        const priSkills = Object.keys(careerDataMap[career].primary_skills || {});
        const secSkills = Object.keys(careerDataMap[career].secondary_skills || {});
        const allSkills = [...priSkills, ...secSkills];

        allSkills.forEach(skill => {
          updates[`cs_${career}_${skill}_mdr_checkbox`] = "0";
          updates[`cs_${career}_${skill}_mdr_checkbox_lock`] = "0";
        });

        Object.keys(careerDataMap[career].talents || {}).forEach(talent => {
          updates[`${career}_${talent}`] = "0";
        });
      }
    });

    setAttrs(updates, mirrorSkillCheckboxes);
    if (debug_on) console.log("[Career Cleanup] Inactive careers cleared:", updates);
  });
};

const getUsageLimitedTalentNames = (limitType) => {
  const names = [];

  // Racial talents
  for (let race in talentDataMap) {
    const talents = talentDataMap[race];
    for (let key in talents) {
      if (talents[key].usage_limit === limitType) {
        names.push(`used_${limitType}_${race}_${key}`);
      }
    }
  }

  // Career talents
  for (let career in careerDataMap) {
    const talents = careerDataMap[career]?.talents || {};
    for (let key in talents) {
      if (talents[key].usage_limit === limitType) {
        names.push(`used_${limitType}_${career}_${key}`);
      }
    }
  }

  return names;
};

on("clicked:clear_scene_uses", () => {
    // Clear static scene checkboxes first
    const sceneUses = getUsageLimitedTalentNames("scene");
    const updates = Object.fromEntries(sceneUses.map(name => [name, "0"]));

    // Get all repeating_scene row IDs
    getSectionIDs("repeating_scene", ids => {
        ids.forEach(id => {
            // Build attribute name for checkbox in each row
            const attrName = `repeating_scene_${id}_used_scene_item_name_mdr`;
            updates[attrName] = "0";
        });

        // Apply all updates
        setAttrs(updates);
    });
});

on("clicked:clear_session_uses", () => {
    // Clear static session checkboxes first
    const sessionUses = getUsageLimitedTalentNames("session");
    const updates = Object.fromEntries(sessionUses.map(name => [name, "0"]));

    // Get all repeating_session row IDs
    getSectionIDs("repeating_session", ids => {
        ids.forEach(id => {
            // Build attribute name for checkbox in each row
            const attrName = `repeating_session_${id}_used_session_item_name_mdr`;
            updates[attrName] = "0";
        });

        // Apply all updates
        setAttrs(updates);
    });
});

let careerWatcherInitialized = false;

on("clicked:background clicked:careers", () => {
	if (debug_on) console.log ("[clicked:background clicked:careers] Fired");
  if (debug_on_trace) console.log ("[clicked:background clicked:careers] Start");
	if (careerWatcherInitialized) return;
	careerWatcherInitialized = true;

	populateCareerTalentDescriptions();
	
	setAttrs({}, () => {
		registerCareerTalentSummaryWatcher();
		registerPrimaryCareerXPWatcher();
		registerSecondaryCareerXPWatcher();
		registerPrimaryExclusiveSkillWatchers();
		registerActiveSecondaryCareerWatchers();
		updateCareerReadyState();
		registerMirrorSkillWatcher();
	
		getAttrs(["primary_career"], (values) => {
			const primary = values.primary_career;
			if (primary) updateCareerTalentEnables(primary);
		});

		getSectionIDs("repeating_secondarycareer", (ids) => {
			ids.forEach(id => {
				getAttrs([`repeating_secondarycareer_${id}_secondary_career`], (rowVals) => {
					const career = rowVals[`repeating_secondarycareer_${id}_secondary_career`];
					if (career) updateCareerTalentEnables(career);
				});
			});
		});

		if (debug_on) console.log("[clicked:background clicked:careers] Initialization complete.");
	});
  });

on("clicked:careers change:primary_career change:repeating_secondarycareer:secondary_career remove:repeating_secondarycareer " +
   Object.keys(careerDataMap)
     .flatMap(career => Object.keys(careerDataMap[career].talents || {})
       .map(talent => `change:${career}_${talent}`))
     .join(" "), function () {

  if (debug_on) console.log("[Career Talent Watcher]");
  if (debug_on_trace) console.log ("[Career Talent Watcher] Start");

  getAttrs(["primary_career"], (values) => {
    const primary = values.primary_career;
    if (primary) updateCareerTalentEnables(primary);
  });

  getSectionIDs("repeating_secondarycareer", (ids) => {
    ids.forEach(id => {
      getAttrs([`repeating_secondarycareer_${id}_secondary_career`], (rowVals) => {
        const career = rowVals[`repeating_secondarycareer_${id}_secondary_career`];
        if (career) updateCareerTalentEnables(career);
      });
    });
  });

  updateCareerReadyState(() => {
    if (debug_on) console.log("[Career Lock] Triggered registerCareerSkillLimiter()");
    registerCareerSkillLimiter();
  });
});

// ----------------------------------- Careers Section END -----------------------------------

// ----------------------------------- Spells ------------------------------------------------

on("clicked:repeating_spellsmdr:spelladvanced", function(eventInfo) {
	console.log("[clicked:repeating_spellsmdr:spelladvanced]");

	const match = eventInfo.sourceAttribute.match(/repeating_spellsmdr_([^_]+)_/);
	if (!match) return;

	const rowId = match[1];
	const attr = `repeating_spellsmdr_${rowId}_show_spell_advanced`;

	getAttrs([attr], function(values) {
		const isShown = values[attr] === "1";
		setAttrs({ [attr]: isShown ? "0" : "1" });
	});
});

// Auto-calculate damage components for fixed weapon (weapon1_mdr)
on("change:weapon1_mdr_damage", function() {
    if (debug_on_trace) console.log ("[change:weapon1_mdr_damage] Start");
  getAttrs(["weapon1_mdr_damage"], function(values) {
    const damageString = values.weapon1_mdr_damage || "";
    const updates = parseDamageString(damageString, "weapon1_mdr");
    setAttrs(updates);
  });
});

on("change:weapon1_skill_mdr", function () {
    if (debug_on_trace) console.log ("[change:weapon1_skill_mdr] Start");
  getAttrs(["weapon1_skill_mdr"], function (v) {
    const referenceString = v.weapon1_skill_mdr; // e.g., "@{melee_weapons_mdr}"
    const actualAttrName = referenceString.match(/@{([^}]+)}/)[1]; // "melee_weapons_mdr"

    getAttrs([actualAttrName], function (values) {
      setAttrs({ weapon1_skill_mdr_display: values[actualAttrName] || "0" });
    });
  });
});

on("change:repeating_weaponsmdr:weaponskill_mdr", function(eventInfo) {
    if (debug_on_trace) console.log ("[change:repeating_weaponsmdr:weaponskill_mdr] Start");
  const repeatingId = eventInfo.sourceAttribute.match(/repeating_weaponsmdr_([^_]+)_/)[1];
  const skillAttr = `repeating_weaponsmdr_${repeatingId}_weaponskill_mdr`;

  getAttrs([skillAttr], function(v) {
    const referenceString = v[skillAttr]; // e.g., "@{melee_weapons_mdr}"
    const actualAttrName = referenceString.match(/@{([^}]+)}/)[1]; // Extract "melee_weapons_mdr"

    getAttrs([actualAttrName], function(values) {
      const skillValue = values[actualAttrName] || "0";
      const displayAttr = `repeating_weaponsmdr_${repeatingId}_weaponskill_mdr_display`;

      setAttrs({ [displayAttr]: skillValue });
    });
  });
});

// Auto-calculate damage components for repeating weapons (repeating_weaponsmdr) - change only
on("change:repeating_weaponsmdr:weapondamage_mdr", function(eventInfo) {
    if (debug_on_trace) console.log ("[change:repeating_weaponsmdr:weapondamage_mdr] Start");
  const repeatingId = eventInfo.sourceAttribute.match(/repeating_weaponsmdr_([^_]+)_/)[1];

  getAttrs([`repeating_weaponsmdr_${repeatingId}_weapondamage_mdr`], function(values) {
    const damageString = values[`repeating_weaponsmdr_${repeatingId}_weapondamage_mdr`] || "";
    const updates = parseDamageString(damageString, `repeating_weaponsmdr_${repeatingId}`);
    setAttrs(updates);
  });
});

on("change:repeating_spellsmdr:spell_skill_mdr", function(eventInfo) {
    if (debug_on_trace) console.log ("[change:repeating_spellsmdr:spell_skill_mdr] Start");
  const repeatingId = eventInfo.sourceAttribute.match(/repeating_spellsmdr_([^_]+)_/)[1];
  const skillAttr = `repeating_spellsmdr_${repeatingId}_spell_skill_mdr`;

  getAttrs([skillAttr], function(v) {
    const referenceString = v[skillAttr];
    const actualAttrName = referenceString.match(/@{([^}]+)}/)[1];

    getAttrs([actualAttrName], function(values) {
      const skillValue = values[actualAttrName] || "0";
      const displayAttr = `repeating_spellsmdr_${repeatingId}_spell_skill_mdr_display`;

      setAttrs({ [displayAttr]: skillValue });
    });
  });
});

// Auto-calculate damage components for repeating spells (repeating_spellsmdr) - change only
on("change:repeating_spellsmdr:spell_damage_mdr", function(eventInfo) {
    if (debug_on_trace) console.log ("[change:repeating_spellsmdr:spell_damage_mdr] Start");
  const repeatingId = eventInfo.sourceAttribute.match(/repeating_spellsmdr_([^_]+)_/)[1];
  getAttrs([`repeating_spellsmdr_${repeatingId}_spell_damage_mdr`], function(values) {
    const damageString = values[`repeating_spellsmdr_${repeatingId}_spell_damage_mdr`] || "";
    const updates = parseDamageString(damageString, `repeating_spellsmdr_${repeatingId}`);
    setAttrs(updates);
  });
});

on("change:repeating_omnidecksmdr:omnideck_skill_mdr", function(eventInfo) {
    if (debug_on_trace) console.log ("[change:repeating_omnidecksmdr:omnideck_skill_mdr] Start");
  const repeatingId = eventInfo.sourceAttribute.match(/repeating_omnidecksmdr_([^_]+)_/)[1];
  const skillAttr = `repeating_omnidecksmdr_${repeatingId}_omnideck_skill_mdr`;

  getAttrs([skillAttr], function(v) {
    const referenceString = v[skillAttr];
    const actualAttrName = referenceString.match(/@{([^}]+)}/)[1];

    getAttrs([actualAttrName], function(values) {
      const skillValue = values[actualAttrName] || "0";
      const displayAttr = `repeating_omnidecksmdr_${repeatingId}_omnideck_skill_mdr_display`;

      setAttrs({ [displayAttr]: skillValue });
    });
  });
});

// Auto-calculate damage components for repeating programs (repeating_programsmdr) - change only
on("change:repeating_programsmdr:program_damage_mdr", function(eventInfo) {
    if (debug_on_trace) console.log ("[change:repeating_programsmdr:program_damage_mdr] Start");
  const repeatingId = eventInfo.sourceAttribute.match(/repeating_programsmdr_([^_]+)_/)[1];
  getAttrs([`repeating_programsmdr_${repeatingId}_program_damage_mdr`], function(values) {
    const damageString = values[`repeating_programsmdr_${repeatingId}_program_damage_mdr`] || "";
    const updates = parseDamageString(damageString, `repeating_programsmdr_${repeatingId}`);
    setAttrs(updates);
  });
});

on("change:repeating_ct:show_ct_mod1 change:repeating_ct:show_ct_mod2 change:repeating_ct:show_ct_mod3 change:repeating_ct:show_ct_mod4 change:repeating_ct:show_ct_mod5 change:repeating_ct:show_ct_mod6 change:repeating_ct:show_ct_mod7 change:repeating_ct:show_ct_mod8", function (eventInfo) {
    if (debug_on_trace) console.log ("[change:repeating_ct:show_ct_mod1] Start");
  const match = eventInfo.sourceAttribute.match(/repeating_ct_([^_]+)_(show_ct_mod[0-9]+)/);
  if (!match) return;

  const rowId = match[1];
  const field = match[2];

  const proxy = `${field}_proxy`;
  const fullField = `repeating_ct_${rowId}_${field}`;
  const fullProxy = `repeating_ct_${rowId}_${proxy}`;

  getAttrs([fullField], function (values) {
    const checked = values[fullField] === "1" ? "1" : "0";
    setAttrs({ [fullProxy]: checked });
  });
});

on("change:primary_career_skill_points change:personal_skill_points change:total_skill_points_spent change:xpledger_skill_point_gain change:xpledger_skill_point_roll_gain_skill change:xpledger_skill_point_lost change:perk_linguist", function () {
    if (debug_on_trace) console.log ("[change:primary_career_skill_points] Start");
    getAttrs([
        "primary_career_skill_points",
        "personal_skill_points",
        "total_skill_points_spent",
        "xpledger_skill_point_gain",
		"xpledger_skill_point_roll_gain_skill",
		"xpledger_skill_point_lost",
		"perk_linguist"
    ], function (values) {
        const primary = parseInt(values.primary_career_skill_points, 10) || 0;
        const personal = parseInt(values.personal_skill_points, 10) || 0;
        const spent = parseInt(values.total_skill_points_spent, 10) || 0;
        const ledgerGain = parseInt(values.xpledger_skill_point_gain, 10) || 0;
		const ledgerGainRoll = parseInt(values.xpledger_skill_point_roll_gain_skill, 10) || 0;
		const ledgerLost = parseInt(values.xpledger_skill_point_lost, 10) || 0;
		const perk_linguist = parseInt(values.perk_linguist, 10) || 0;
		
        const remaining = primary + personal + ledgerGain + ledgerGainRoll - ledgerLost - spent + perk_linguist;

        setAttrs({
            total_skill_points_remain: remaining
        });
    });
});

// === XP Remaining Calculation ===
on("change:background_xp change:xpledger_gained_xp change:xp_spent_talent change:xp_spent_career_talent change:xpledger_spells_cost change:xpledger_skill_point_gain change:xpledger_skill_point_roll_gain change:xpledger_credits_cost change:xpledger_allies_cost change:xpledger_contacts_cost change:xpledger_reuptation_cost change:xpledger_faction_cost change:xpledger_flaws_gain change:xpledger_perks_cost change:perk_linguist", function () {
    if (debug_on_trace) console.log ("[change:background_xp] Start");
    getAttrs([
        "background_xp",
        "xpledger_gained_xp",
        "xp_spent_talent",
        "xp_spent_career_talent",
        "xpledger_spells_cost",
        "xpledger_skill_point_gain",
		"xpledger_skill_point_roll_gain",
        "xpledger_credits_cost",
        "xpledger_allies_cost",
        "xpledger_contacts_cost",
        "xpledger_reuptation_cost",
        "xpledger_faction_cost",
        "xpledger_flaws_gain",
        "xpledger_perks_cost",
    ], function(values) {
        const toInt = v => parseInt(v, 10) || 0;

        const backgroundXP = toInt(values["background_xp"]);
        const ledgerGainedXP = toInt(values["xpledger_gained_xp"]);
        const xpSpentTalent = toInt(values["xp_spent_talent"]);
        const xpSpentCareerTalent = toInt(values["xp_spent_career_talent"]);
        const spellsCost = toInt(values["xpledger_spells_cost"]);
        const skillPointGain = toInt(values["xpledger_skill_point_gain"]);
		const skillPointGainRoll = toInt(values["xpledger_skill_point_roll_gain"]);
        const creditsCost = toInt(values["xpledger_credits_cost"]);
        const alliesCost = toInt(values["xpledger_allies_cost"]);
        const contactsCost = toInt(values["xpledger_contacts_cost"]);
        const reputationCost = toInt(values["xpledger_reuptation_cost"]);
        const factionCost = toInt(values["xpledger_faction_cost"]);
        const flawsGain = toInt(values["xpledger_flaws_gain"]);
        const perksCost = toInt(values["xpledger_perks_cost"]);

        const xpRemaining = backgroundXP + ledgerGainedXP - xpSpentTalent - xpSpentCareerTalent - spellsCost - skillPointGain - skillPointGainRoll - creditsCost - alliesCost - contactsCost - reputationCost - factionCost + flawsGain - perksCost;

        setAttrs({
            xp_remaining: xpRemaining
        });
    });
});

// === Repeating Ledger XP Category Aggregator ===
on("change:repeating_ledger:ledger_choice change:repeating_ledger:ledger_choice_value change:repeating_ledger:ledger_choice_value change:repeating_ledger:ledger_choice_value_skill remove:repeating_ledger", function () {
    if (debug_on_trace) console.log("[change:repeating_ledger:ledger_choice] Start");

    getSectionIDs("repeating_ledger", function (ids) {
        const fieldNames = ids.flatMap(id => [
            `repeating_ledger_${id}_ledger_choice`,
            `repeating_ledger_${id}_ledger_choice_value`,
            `repeating_ledger_${id}_ledger_choice_value_skill`
        ]);

        getAttrs(fieldNames, function (values) {
            const aggregates = {
                xp_gained: 0,
                skill_xp: 0,
                xp_skill: 0,
                xp_skill_roll: 0,
                xp_skill_roll_skill: 0,
                xp_spells: 0,
                xp_credits: 0,
                xp_allies: 0,
                xp_contacts: -10,
                xp_reputation: 0,
                xp_faction: 0,
                xp_flaws: 0,
                xp_perks: 0,
				perk_linguist: 0
            };

            ids.forEach(id => {
                const choice = values[`repeating_ledger_${id}_ledger_choice`];
                const value = values[`repeating_ledger_${id}_ledger_choice_value`];
                const skillValue = values[`repeating_ledger_${id}_ledger_choice_value_skill`];

                const val = parseInt(value, 10) || 0;
                const valSkill = parseInt(skillValue, 10) || 0;

                if (choice === "xp_skill_roll") {
                    aggregates.xp_skill_roll += val;
                    aggregates.xp_skill_roll_skill += valSkill;
				} else if (choice === "perk_linguist") {
					aggregates.xp_perks += val;
					aggregates.perk_linguist += valSkill;	
                } else if (aggregates.hasOwnProperty(choice)) {
                    aggregates[choice] += val;
                }
            });

            const updates = {
                xpledger_gained_xp: aggregates.xp_gained,
                xpledger_skill_point_lost: aggregates.skill_xp,
                xpledger_skill_point_gain: aggregates.xp_skill,
                xpledger_skill_point_roll_gain: aggregates.xp_skill_roll,
                xpledger_skill_point_roll_gain_skill: aggregates.xp_skill_roll_skill,
                xpledger_spells_cost: aggregates.xp_spells,
                xpledger_credits_cost: aggregates.xp_credits,
                xpledger_allies_cost: aggregates.xp_allies,
                xpledger_contacts_cost: aggregates.xp_contacts,
                xpledger_reuptation_cost: aggregates.xp_reputation,
                xpledger_faction_cost: aggregates.xp_faction,
                xpledger_flaws_gain: aggregates.xp_flaws,
                xpledger_perks_cost: aggregates.xp_perks,
				perk_linguist: aggregates.perk_linguist
            };
            setAttrs(updates);
        });
    });
});

// === Spell XP Remaining Calculation ===
on("change:primary_career_spell_xp_total change:secondary_career_spell_xp_total change:xpledger_spells_cost change:repeating_spellsmdr:xp_cost_mdr remove:repeating_spellsmdr", function () {
    if (debug_on_trace) console.log("[XP Calc] Triggered");

    getSectionIDs("repeating_spellsmdr", function (ids) {
        const fields = ids.map(id => `repeating_spellsmdr_${id}_xp_cost_mdr`);
        getAttrs([
            "primary_career_spell_xp_total",
            "secondary_career_spell_xp_total",
            "xpledger_spells_cost",
            ...fields
        ], function (values) {
            const primary = parseInt(values["primary_career_spell_xp_total"], 10) || 0;
            const secondary = parseInt(values["secondary_career_spell_xp_total"], 10) || 0;
            const gained = parseInt(values["xpledger_spells_cost"], 10) || 0;

            // Sum XP costs from all repeating spells
            let spent = 0;
            fields.forEach(field => {
                spent += parseInt(values[field], 10) || 0;
            });

            const remaining = primary + secondary + gained - spent;

            setAttrs({
                spell_xp_spent: spent,
                spell_xp_remaining: remaining
            });
        });
    });
});

on("add:repeating_secondarycareer remove:repeating_secondarycareer", () => {
    if (debug_on_trace) console.log("[Repeating Section Change] Secondary career row added or removed");
    // Re-run stat updates
    registerStatHandler();
});
</script>